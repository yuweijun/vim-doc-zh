<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>vim中文手册 - usr_05</title>
    <meta name="description" content="vim8.0 中文帮助文档">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="vim.css" type="text/css">
</head>
<body>
    <div class="page-content">
        <article class="wrap">
            <pre class="pre">
<span class="Ignore">*</span><span id="usr_05.txt" class="String anchor">usr_05.txt</span><span class="Ignore">*</span>	For <span class="Identifier">Vim version 8.0.</span>  最近更新: 2017年8月

		     VIM 用户手册 - by Bram Moolenaar
		     译者: Nek_in, tocer <span class="String"><a href="http://vimcdoc.sf.net">http://vimcdoc.sf.net</a></span>

			     选项设置

Vim 可以按你的需要进行设置。本章告诉你怎样使 Vim 用你指定的选项启动，怎样增加
插件以增强 Vim 的功能；以及怎样进行宏定义。

<span class="Ignore">|</span><a href="usr_05.html#05.1"><span class="Identifier">05.1</span></a><span class="Ignore">|</span>	vimrc 文件
<span class="Ignore">|</span><a href="usr_05.html#05.2"><span class="Identifier">05.2</span></a><span class="Ignore">|</span>	vimrc 示例解释
<span class="Ignore">|</span><a href="usr_05.html#05.3"><span class="Identifier">05.3</span></a><span class="Ignore">|</span>	简单键盘映射
<span class="Ignore">|</span><a href="usr_05.html#05.4"><span class="Identifier">05.4</span></a><span class="Ignore">|</span>	添加软件包
<span class="Ignore">|</span><a href="usr_05.html#05.5"><span class="Identifier">05.5</span></a><span class="Ignore">|</span>	添加插件
<span class="Ignore">|</span><a href="usr_05.html#05.6"><span class="Identifier">05.6</span></a><span class="Ignore">|</span>	添加帮助
<span class="Ignore">|</span><a href="usr_05.html#05.7"><span class="Identifier">05.7</span></a><span class="Ignore">|</span>	选项窗口
<span class="Ignore">|</span><a href="usr_05.html#05.8"><span class="Identifier">05.8</span></a><span class="Ignore">|</span>	常用选项

      下一章: <span class="Ignore">|</span><a href="usr_06.html#usr_06.txt"><span class="Identifier">usr_06.txt</span></a><span class="Ignore">|</span>  使用语法高亮
      前一章: <span class="Ignore">|</span><a href="usr_04.html#usr_04.txt"><span class="Identifier">usr_04.txt</span></a><span class="Ignore">|</span>  做小改动
	目录: <span class="Ignore">|</span><a href="usr_toc.html#usr_toc.txt"><span class="Identifier">usr_toc.txt</span></a><span class="Ignore">|</span>

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span id="05.1" class="String anchor">05.1</span><span class="Ignore">*</span>	vimrc 文件					<span class="Ignore">*</span><span id="vimrc-intro" class="String anchor">vimrc-intro</span><span class="Ignore">*</span>

可能你已经厌倦了输入那些经常用到的命令了。要让 Vim 用你习惯的设置启动，你可以
把这些设置写到一个叫 vimrc 的文件中。Vim 会在启动的时候执行这个文件里的命令。

如果你已经有 vimrc 文件 (例如，系统管理员已经为你配置好了)，可以这样编辑它:<span class="Ignore"> &gt;</span>

<span class="Comment">	:edit $MYVIMRC</span>

如果你还没有 vimrc 文件，请参考 <span class="Ignore">|</span><a href="starting.html#vimrc"><span class="Identifier">vimrc</span></a><span class="Ignore">|</span> 一节看看你应该在什么地方创建该文件。另
外 &quot;:version&quot; 命令能告诉你 vim 要查找的 &quot;用户 vimrc 文件&quot; 的名字。

对于 Unix 和 Macintosh 系统，总是使用而且也推荐使用如下文件:

	<span class="PreProc">~/.vimrc</span><span class="Ignore"> ~</span>

对于 MS-DOS 和 MS-Windows，可以使用下面其中一个文件:

	<span class="PreProc">$HOME/_vimrc</span><span class="Ignore"> ~</span>
	<span class="PreProc">$VIM/_vimrc</span><span class="Ignore"> ~</span>

vimrc 文件可以包含任何冒号命令。最简单的是设置选项命令。例如，如果你想 Vim 启
动的时候始终开启 <span class="Type">'incsearch'</span> 选项，可以在你的 vimrc 文件中加上:
<span class="Ignore">&gt;</span>
<span class="Comment">	set incsearch</span>

要使这个命令生效，你需要重启动 Vim。后面我们还会学到如何不退出 Vim 就能让它生
效。

这一章只解释最基本的东西。想了解更多关于 Vim 脚本的知识，请参见 <span class="Ignore">|</span><a href="usr_41.html#usr_41.txt"><span class="Identifier">usr_41.txt</span></a><span class="Ignore">|</span>。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span id="05.2" class="String anchor">05.2</span><span class="Ignore">*</span>	vimrc 示例解释					<span class="Ignore">*</span><span id="vimrc_example.vim" class="String anchor">vimrc_example.vim</span><span class="Ignore">*</span>

在第一章中，我们曾经介绍过怎样用 vimrc 示例文件 (包括在 Vim 发布中) 使 Vim 以
非 vi 兼容模式启动 (参见 <span class="Ignore">|</span><a href="usr_01.html#not-compatible"><span class="Identifier">not-compatible</span></a><span class="Ignore">|</span>)。这个文件可以在这里找到:

	<span class="PreProc">$VIMRUNTIME/vimrc_example.vim</span><span class="Ignore"> ~</span>

我们在这一节中介绍这个文件中用到的一些命令。这会对你自行参数设置有一定的帮助。
但我们不会介绍所有的内容。你需要用 &quot;:help&quot; 获得更多的帮助。
<span class="Ignore">&gt;</span>

<span class="Comment">	set nocompatible</span>

就像第一章所述，本手册解释在改进的方式下工作的 Vim，因此与 Vi 不完全兼容。要关
闭 <span class="Type">'compatible'</span> 选项，<span class="Type">'nocompatible'</span> 可以用于完成这个功能。

<span class="Ignore">&gt;</span>
<span class="Comment">	set backspace=indent,eol,start</span>

这指明在插入模式下在哪里允许 <span class="Special">&lt;BS&gt;</span> 删除光标前面的字符。逗号分隔的三个值分别指:
行首的空白字符，换行符和插入模式开始处之前的字符。

<span class="Ignore">&gt;</span>
<span class="Comment">	set autoindent</span>

这使 Vim 在启动一个新行的时候使用与前一行一样的缩进。就是说，新行前面会有同样
多的空白字符。启动新行是指用 <span class="Special">&lt;Enter&gt;</span> 换行，在普通模式下执行 &quot;o&quot; 命令等情况。

<span class="Ignore">&gt;</span>
<span class="Comment">	if has(&quot;vms&quot;)</span>
<span class="Comment">	  set nobackup</span>
<span class="Comment">	else</span>
<span class="Comment">	  set backup</span>
<span class="Comment">	endif</span>

这告诉 Vim 当覆盖一个文件的时候保留一个备份。但 VMS 系统除外，因为 VMS 系统会
自动产生备份文件。备份文件的名称是在原来的文件名上加上 &quot;~&quot; 字符。参见 <span class="Ignore">|</span><a href="usr_07.html#07.4"><span class="Identifier">07.4</span></a><span class="Ignore">|</span>

<span class="Ignore">&gt;</span>
<span class="Comment">	set history=50</span>

这个命令保存 50 个命令和 50 个查找模式的历史。如果你想 Vim 记住多些或者少些命
令，可以把这个数改成其它值。

<span class="Ignore">&gt;</span>
<span class="Comment">	set ruler</span>

总在 Vim 窗口的右下角显示当前光标位置。

<span class="Ignore">&gt;</span>
<span class="Comment">	set showcmd</span>

在 Vim 窗口右下角，标尺的右边显示未完成的命令。例如，当你输入 &quot;2f&quot;，Vim 在等
你输入要查找的字符并且显示 &quot;2f&quot;。当你再输入 w，&quot;2fw&quot; 命令被执行，&quot;2f&quot; 自动消
失。

	+-------------------------------------------------+
	|text in the Vim window				  |
	|~						  |
	|~						  |
	|-- VISUAL --			2f     43,8   17% |
	+-------------------------------------------------+
	 ^^^^^^^^^^^		      ^^^^^^^^ ^^^^^^^^^^
	  <span class="Type">'showmode'</span>		     <span class="Type">'showcmd'</span>	<span class="Type">'ruler'</span>

<span class="Ignore">&gt;</span>
<span class="Comment">	set incsearch</span>

在输入部分查找模式时显示相应的匹配点。

<span class="Ignore">&gt;</span>
<span class="Comment">	map Q gq</span>

这定义一个键映射。下一节会介绍更多的相关内容。这将定义 &quot;Q&quot; 命令用来完成与 &quot;gq&quot;
操作符相同的功能，这是在 Vim 5.0 版前 &quot;Q&quot; 命令的作用。如果没有设置这个映射，
&quot;Q&quot; 会启动 Ex 模式，这也许不是你想要的情况。

<span class="Ignore">&gt;</span>
<span class="Comment">	vnoremap _g y:exe &quot;grep /&quot; . escape(@&quot;, '\\/') . &quot;/ *.c *.h&quot;&lt;CR&gt;</span>

这个映射在可视模式下拷贝已选择的文本并在 C 文件中查找它。这是一个复杂映射。你
可以看到该映射可以被用来执行相当复杂的操作。但其本质依然是一个命令序列而已，
与你直接输入没有什么两样。

<span class="Ignore">&gt;</span>
<span class="Comment">	if &amp;t_Co &gt; 2 || has(&quot;gui_running&quot;)</span>
<span class="Comment">	  syntax on</span>
<span class="Comment">	  set hlsearch</span>
<span class="Comment">	endif</span>

这激活语法高亮功能，但仅在有色彩的时候才有效。而 <span class="Type">'hlsearch'</span> 选项告诉 Vim 高亮
上次查找模式匹配的地方。&quot;if&quot; 命令在设置选项的时候非常有用，它使设置命令在某些
条件下才执行。更多的内容请参见 <span class="Ignore">|</span><a href="usr_41.html#usr_41.txt"><span class="Identifier">usr_41.txt</span></a><span class="Ignore">|</span>。

							<span class="Ignore">*</span><span id="vimrc-filetype" class="String anchor">vimrc-filetype</span><span class="Ignore">*</span> <span class="Ignore"> &gt;</span>
<span class="Comment">	filetype plugin indent on</span>

这启动三个非常灵巧的机制:
1. 文件类型探测
    当你开始编辑一个文件的时候，Vim 会试图确定这个文件的类型。当编辑 &quot;main.c&quot;
    时，Vim 会根据扩展名 &quot;.c&quot; 认为这是一个 C 源文件。当你编辑一个文件前面是
    &quot;#!/bin/sh&quot; 的文件时，Vim 会把它认作 &quot;sh&quot; 文件。文件类型探测用于语法高亮
    和以下另两项。请参见 <span class="Ignore">|</span><a href="filetype.html#filetypes"><span class="Identifier">filetypes</span></a><span class="Ignore">|</span>。

2. 使用文件类型相关的插件
    不同的文件需要不同的选项支持。例如，当你编辑一个 &quot;c&quot; 文件，用 <span class="Type">'cindent'</span> 选
    项来自动缩进就非常有用。这些文件类型相关的选项在 Vim 中是通过文件类型插件
    来实现的。你也可以加入自己的插件，请参见 <span class="Ignore">|</span><a href="usr_41.html#write-filetype-plugin"><span class="Identifier">write-filetype-plugin</span></a><span class="Ignore">|</span>。

3. 使用缩进文件
    当编辑程序的时候，行缩进通常可以被自动决定。Vim 用不同的策略处理不同的文件
    类型。请参见 <span class="Ignore">|</span><span class="Identifier">:filetype-indent-on</span><span class="Ignore">|</span> 和 <span class="Type">'indentexpr'</span>。

<span class="Ignore">&gt;</span>
<span class="Comment">	autocmd FileType text setlocal textwidth=78</span>

这使 Vim 在一行长于 78 个字符的时候自动换行，但仅对纯文本文件中有效。这里包括
两个部分。其中 &quot;autocmd FileType text&quot; 定义个自动命令，表示当文件类型被设置为
&quot;text&quot; 的时候，后面的命令自动执行。&quot;setlocal textwidth=78&quot; 设置 <span class="Type">'textwidth'</span> 选
项为 78，但仅对本文件有效。

							<span class="Ignore">*</span><span id="restore-cursor" class="String anchor">restore-cursor</span><span class="Ignore">*</span> <span class="Ignore"> &gt;</span>
<span class="Comment">	autocmd BufReadPost *</span>
<span class="Comment">	    \ if line(&quot;'\&quot;&quot;) &gt; 1 &amp;&amp; line(&quot;'\&quot;&quot;) &lt;= line(&quot;$&quot;) |</span>
<span class="Comment">	    \   exe &quot;normal! g`\&quot;&quot; |</span>
<span class="Comment">	    \ endif</span>

这是又一个自动命令。这回它设置为在读入任何文件之后自动执行。后面那堆复杂的东西
检查 '&quot; 标记是否已被定义，如果是，则跳转到该标记。行首的反斜杠用于把所有语句连
接成一行。这可以避免一行写得太长，
请参见 <span class="Ignore">|</span><a href="repeat.html#line-continuation"><span class="Identifier">line-continuation</span></a><span class="Ignore">|</span>。这只在 Vim 脚本文件中有效，在命令行中无效。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span id="05.3" class="String anchor">05.3</span><span class="Ignore">*</span>	简单键盘映射

映射可以使你把一系列 Vim 命令绑定为一个单独的键。假设你要用一个大括号将一个特
定的单词括起来。例如，把 &quot;amount&quot; 变成 &quot;<span class="Special">{amount}</span>&quot;。用 &quot;:map&quot; 命令，就可以让 F5
来完成这个工作。命令如下:
<span class="Ignore">&gt;</span>
<span class="Comment">	:map &lt;F5&gt; i{&lt;Esc&gt;ea}&lt;Esc&gt;</span>
<span class="Ignore">&lt;</span>
	备注:
	在输入这个命令时，<span class="Special">&lt;F5&gt;</span> 要用四个字符表示。相似地，输入 <span class="Special">&lt;Esc&gt;</span> 不是直接按
	<span class="Special">&lt;Esc&gt;</span> 键，而是输入五个字符。读这份手册时请注意这些区别！

让我们来分解一下这个命令:
    <span class="Special">&lt;F5&gt;</span>	F5 功能键。这是命令的触发器。当这个键被按下时，相应的命令即被
		执行。

    i{<span class="Special">&lt;Esc&gt;</span>     插入 { 字符。<span class="Special">&lt;Esc&gt;</span> 键用于退出插入模式。

    e		移动到词尾。

    a}<span class="Special">&lt;Esc&gt;</span>	插入 } 到单词尾。

执行 &quot;:map&quot; 命令后，要在单词两端加上 {}，只需要移到单词的第一个字符上并按 F5。

在这个例子中，触发器是单独一个键；它还可以是任何字符串。但若你使用一个已经存在
的 Vim 命令，该命令将不再有效。最好避免出现这种情况。
    一个可用于映射的键是反斜杠。因为你很可能想定义多个映射，那就加上另一个字
符。你可以映射 &quot;\p&quot; 为在单词两端加圆括号，而映射 &quot;\c&quot; 为加花括号，例如:
<span class="Ignore">&gt;</span>
<span class="Comment">	:map \p i(&lt;Esc&gt;ea)&lt;Esc&gt;</span>
<span class="Comment">	:map \c i{&lt;Esc&gt;ea}&lt;Esc&gt;</span>

你需要在敲入 \ 后，立即敲入 p，以便 Vim 知道它们组成一个命令。

&quot;:map&quot; 命令 (无参数) 列出当前已定义的映射，至少会包括普通模式下的那些。更多的
内容参见 <span class="Ignore">|</span><a href="usr_40.html#40.1"><span class="Identifier">40.1</span></a><span class="Ignore">|</span>。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span id="05.4" class="String anchor">05.4</span><span class="Ignore">*</span>	添加软件包				<span class="Ignore">*</span><span id="add-package" class="String anchor">add-package</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="matchit-install" class="String anchor">matchit-install</span><span class="Ignore">*</span>

软件包是一组可加入 Vim 的文件。有两种软件包: 可选的和启动时自动载入的。

Vim 发布提供了一些软件包供你选用。例如 matchit 插件。此插件使 ”%“ 命令跳转到匹
配的 HTML 标签、Vim 脚本中的 if/else/endif 等。很有用，但不后向兼容 (这是为什
么缺省没有打开)。

要开始用 matchit 插件，在 vimrc 文件中加入一行:<span class="Ignore"> &gt;</span>
<span class="Comment">	packadd! matchit</span>

就这样！重启 Vim 后可以找到此插件的帮助:<span class="Ignore"> &gt;</span>
<span class="Comment">	:help matchit</span>

这之所以能工作，是因为 <span class="Ignore">`</span><span class="Comment">:packadd</span><span class="Ignore">`</span> 载入插件时，同时把软件包目录加入
<span class="Type">'runtimepath'</span>，这样就能找到帮助文件了。

网上有多个地方可以找到软件包。它们通常以归档或版本库形式出现。如果是归档，可以
采用以下步骤:
	1. 建立软件包目录:<span class="Ignore"> &gt;</span>
<span class="Comment">		mkdir -p ~/.vim/pack/fancy</span>
<span class="Ignore">&lt;</span>	   &quot;fancy&quot; 可以是任何你喜欢的名字。要能描述你的软件包。
	2. 在该目录里解压归档。假定归档的顶层目录是 &quot;start&quot;:<span class="Ignore"> &gt;</span>
<span class="Comment">		cd ~/.vim/pack/fancy</span>
<span class="Comment">		unzip /tmp/fancy.zip</span>
<span class="Ignore">&lt;</span>	   如果归档的目录结构不同，确保最终的路径像这样:
		<span class="PreProc">~/.vim/pack/fancy/start/fancytext/plugin/fancy.vim</span><span class="Ignore"> ~</span>
	   这里 &quot;fancytext&quot; 是软件包名，这可以是任何其它名字。

关于软件包的详情可见: <span class="Ignore">|</span><a href="repeat.html#packages"><span class="Identifier">packages</span></a><span class="Ignore">|</span>。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span id="05.5" class="String anchor">05.5</span><span class="Ignore">*</span>	添加插件					<span class="Ignore">*</span><span id="add-plugin" class="String anchor">add-plugin</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="plugin" class="String anchor">plugin</span><span class="Ignore">*</span>

Vim 可以通过插件增强功能。插件其实是一个当 Vim 启动的时候能被自动执行的脚本。
简单地把插件放到你 Vim 的 plugin 目录中就可以使它生效。
{仅当 Vim 编译时加入 <span class="Ignore">|</span><span class="Identifier">+eval</span><span class="Ignore">|</span> 特性时才有效}

Vim 中有两种插件:
       全局插件: 用于所有类型的文件
   文件类型插件: 仅用于特定类型的文件

我们将先讨论全局插件，然后涉及文件类型插件 <span class="Ignore">|</span><a href="usr_05.html#add-filetype-plugin"><span class="Identifier">add-filetype-plugin</span></a><span class="Ignore">|</span>。

全 局 插 件						<span class="Ignore">*</span><span id="standard-plugin" class="String anchor">standard-plugin</span><span class="Ignore">*</span>

当你启动 Vim，它会自动加载一些插件。你不需要为此做任何事。这些插件增加一些很多
人想用的，但由 Vim 脚本实现而非编译进 Vim 中的功能。你可以在帮助索引中找到这些
插件: <span class="Ignore">|</span><a href="help.html#standard-plugin-list"><span class="Identifier">standard-plugin-list</span></a><span class="Ignore">|</span>。还可以参照 <span class="Ignore">|</span><a href="starting.html#load-plugins"><span class="Identifier">load-plugins</span></a><span class="Ignore">|</span>。

							<span class="Ignore">*</span><span id="add-global-plugin" class="String anchor">add-global-plugin</span><span class="Ignore">*</span>
你可以加入一个全局插件使得某些功能在你每次使用 Vim 时都被开启。添加一个全局插
件只要两步:
1. 获得一个插件的拷贝
2. 把它塞进合适的目录

获 得 一 个 全 局 插 件

在什么地方可以找到插件？
- 有一些与 Vim 一起发布，你可以在 $VIMRUNTIME/macros 目录或其子目录中找到。
- 从网上下载，<span class="String"><a href="http://www.vim.org">http://www.vim.org</a></span> 收集了很多。
- 在 Vim 的邮件列表中找: <span class="Ignore">|</span><a href="intro.html#maillist"><span class="Identifier">maillist</span></a><span class="Ignore">|</span>。
- 自己写一个，参见 <span class="Ignore">|</span><a href="usr_41.html#write-plugin"><span class="Identifier">write-plugin</span></a><span class="Ignore">|</span>。

某些插件被打包在 vimball 中，参见 <span class="Ignore">|</span><a href="pi_vimball.html#vimball"><span class="Identifier">vimball</span></a><span class="Ignore">|</span>。
某些插件可以自动更新，参见 <span class="Ignore">|</span><a href="pi_getscript.html#getscript"><span class="Identifier">getscript</span></a><span class="Ignore">|</span>。

使 用 一 个 全 局 插 件

首先阅读插件包括的说明文字，看看有没有什么特殊的限制。然后拷贝到你的插件目录:

	<span class="PreProc">系统		插件目录</span><span class="Ignore"> ~</span>
	Unix		~/.vim/plugin/
	PC 和 OS/2	$HOME/vimfiles/plugin 或 $VIM/vimfiles/plugin
	Amiga		s:vimfiles/plugin
	Macintosh	$VIM:vimfiles:plugin
	RISC-OS		Choices:vimfiles.plugin

以 Unix 系统为例 (假设你还没有 plugin 目录):
<span class="Ignore">&gt;</span>
<span class="Comment">	mkdir ~/.vim</span>
<span class="Comment">	mkdir ~/.vim/plugin</span>
<span class="Comment">	cp /tmp/yourplugin.vim ~/.vim/plugin</span>

就是这样了！现在你可以用这个插件定义的命令了。

除了把这些插件直接放进 plugin/ 目录以外，还可以更好地组织一下，把它们放进
plugin 的单独的子目录中。例如，可以考虑把所有 Perl 插件放置在
&quot;~/.vim/plugin/perl/*.vim&quot;

文件类型插件			 <span class="Ignore">*</span><span id="add-filetype-plugin" class="String anchor">add-filetype-plugin</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="ftplugins" class="String anchor">ftplugins</span><span class="Ignore">*</span>

Vim 的发布中包括一套针对不同文件类型的插件。你可以用如下命令启用它们:
<span class="Ignore">&gt;</span>
<span class="Comment">	:filetype plugin on</span>

这样就行了！参阅 <span class="Ignore">|</span><a href="usr_05.html#vimrc-filetype"><span class="Identifier">vimrc-filetype</span></a><span class="Ignore">|</span>。

如果你缺少某种文件类型的插件，或者你找到一个更好的，你可以自行添加一个。这也只
需两步:
1. 获取一个插件的拷贝
2. 塞到合适的目录。

取 得 文 件 类 型 插 件

你可以在找全局插件的相同地方找到文件类型插件。注意一下插件有没有注明文件类型，
据此你可以知道这个插件是全局的还是文件类型相关的。在 $VIMRUNTIME/macros 中的是
全局插件；文件类型插件在 $VIMRUNTIME/ftplugin 中。

使 用 文 件 类 型 插 件					<span class="Ignore">*</span><span id="ftplugin-name" class="String anchor">ftplugin-name</span><span class="Ignore">*</span>

你可以通过把插件文件放到合适的目录中来增加一个插件。目录的名字与前面提过的全局
插件的位置一样，但最后一级目录是 &quot;ftplugin&quot;。假设你找到一个用于 &quot;stuff&quot; 文件类
型的插件，而且你的系统是 Unix。那么，你可以把这个文件用如下命令移入 ftplugin
目录:
<span class="Ignore">&gt;</span>
<span class="Comment">	mv thefile ~/.vim/ftplugin/stuff.vim</span>

如果这个文件已经存在，你可以检查一下两个插件有没有冲突。如果没有，你可以用另一
个名字:
<span class="Ignore">&gt;</span>
<span class="Comment">	mv thefile ~/.vim/ftplugin/stuff_too.vim</span>

这里，下划线用来分开文件类型和其它部分 (这些部分可以由任意字符组成)。但如果你
用 &quot;otherstuff.vim&quot; 就不行了。那是用于 &quot;otherstuff&quot; 类型的文件的。

在 MS-DOS 上不能使用长文件名。如果你增加第二个插件，而这个插件超过 6 个字符，
你就没法用了。你可以通过使用另一层目录来解决这个问题:
<span class="Ignore">&gt;</span>
<span class="Comment">	mkdir $VIM/vimfiles/ftplugin/fortran</span>
<span class="Comment">	copy thefile $VIM/vimfiles/ftplugin/fortran/too.vim</span>

总的来说，一个文件类型相关的插件的名称是:
<span class="Ignore">&gt;</span>
<span class="Comment">	ftplugin/&lt;filetype&gt;.vim</span>
<span class="Comment">	ftplugin/&lt;filetype&gt;_&lt;name&gt;.vim</span>
<span class="Comment">	ftplugin/&lt;filetype&gt;/&lt;name&gt;.vim</span>

这里 &quot;<span class="Special">&lt;name&gt;</span>&quot; 可以是任何你喜欢的名字。例如，在 Unix 上，&quot;stuff&quot; 文件类型的插件
可以是:
<span class="Ignore">&gt;</span>
<span class="Comment">	~/.vim/ftplugin/stuff.vim</span>
<span class="Comment">	~/.vim/ftplugin/stuff_def.vim</span>
<span class="Comment">	~/.vim/ftplugin/stuff/header.vim</span>

这里， <span class="Special">&lt;filetype&gt;</span> 部分是相应文件类型的名称。只有对应文件类型的文件才会用这个插
件内的设置。插件的 <span class="Special">&lt;name&gt;</span> 部分则不重要，你可以对同一个文件类型使用多个插件。
注意 插件必须以 &quot;.vim&quot; 结尾。

请进一步阅读:
<span class="Ignore">|</span><a href="filetype.html#filetype-plugins"><span class="Identifier">filetype-plugins</span></a><span class="Ignore">|</span>	文件类型插件的文档和有关如何避免映射引起的问题。
<span class="Ignore">|</span><a href="starting.html#load-plugins"><span class="Identifier">load-plugins</span></a><span class="Ignore">|</span>		全局插件的启动时间。
<span class="Ignore">|</span><a href="filetype.html#ftplugin-overrule"><span class="Identifier">ftplugin-overrule</span></a><span class="Ignore">|</span>	控制全局文件类型插件的选项。
<span class="Ignore">|</span><a href="usr_41.html#write-plugin"><span class="Identifier">write-plugin</span></a><span class="Ignore">|</span>		如何写插件。
<span class="Ignore">|</span><a href="filetype.html#plugin-details"><span class="Identifier">plugin-details</span></a><span class="Ignore">|</span>	关于如何使用插件的信息或者当你的插件不工作的时候如何处
			理。
<span class="Ignore">|</span><a href="filetype.html#new-filetype"><span class="Identifier">new-filetype</span></a><span class="Ignore">|</span>		如果检测新文件类型。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span id="05.6" class="String anchor">05.6</span><span class="Ignore">*</span>	添加帮助					<span class="Ignore">*</span><span id="add-local-help" class="String anchor">add-local-help</span><span class="Ignore">*</span>

如果幸运的话，你安装的插件还会包括帮助文件。我们这里解释如何安装这个帮助文件，
以便你能方便地获得新插件的帮助。
    我们以 &quot;doit.vim&quot; 插件为例。这个插件有一个文档: &quot;doit.txt&quot;。我们先来把该插
件拷贝到合适的位置。这次，我们在 Vim 内完成这个工作。(如果某些目录已经存在你可
以省略一些 &quot;mkdir&quot; 命令。)<span class="Ignore"> &gt;</span>

<span class="Comment">	:!mkdir ~/.vim</span>
<span class="Comment">	:!mkdir ~/.vim/plugin</span>
<span class="Comment">	:!cp /tmp/doit.vim ~/.vim/plugin</span>

&quot;cp&quot; 命令是基于 Unix 的，MS-DOS 上你可以用 &quot;copy&quot;。

现在在某个 <span class="Type">'runtimepath'</span> 目录中建立一个 doc 目录。
<span class="Ignore">&gt;</span>
<span class="Comment">	:!mkdir ~/.vim/doc</span>

再把帮助文件拷贝进去:
<span class="Ignore">&gt;</span>
<span class="Comment">	:!cp /tmp/doit.txt ~/.vim/doc</span>

现在开始玩技巧了，怎样使 Vim 允许你跳转到新的主题上？用 <span class="Ignore">|</span><span class="Identifier">:helptags</span><span class="Ignore">|</span> 命令产生一
个本地的 tags 文件即可:
<span class="Ignore">&gt;</span>
<span class="Comment">	:helptags ~/.vim/doc</span>

现在，你可以用这个命令
<span class="Ignore">&gt;</span>
<span class="Comment">	:help doit</span>

来获得 &quot;doit&quot; 的帮助了。显示你刚才加上的帮助文件。在使用如下命令的时候，可以看
见一个新的条目:<span class="Ignore"> &gt;</span>

<span class="Comment">	:help local-additions</span>

本地帮助的标题行被自动的加入到该节了。在那里你可以看到 Vim 添加了那些本地的帮
助文件。你还可以从这里跳转到新的帮助中。

要写一个本地帮助文件，请参考 <span class="Ignore">|</span><a href="usr_41.html#write-local-help"><span class="Identifier">write-local-help</span></a><span class="Ignore">|</span>。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span id="05.7" class="String anchor">05.7</span><span class="Ignore">*</span>	选项窗口

如果要找一个选项，你可以在这里寻找帮助: <span class="Ignore">|</span><a href="options.html#options"><span class="Identifier">options</span></a><span class="Ignore">|</span>。另一个方法是用如下命令:
<span class="Ignore">&gt;</span>
<span class="Comment">	:options</span>

这会打开一个新窗口，其中给出一个选项的列表，并对每个选项提供一行解释。这些选项
根据种类分组。将光标移到一个主题上然后按 <span class="Special">&lt;Enter&gt;</span> 就可以跳转到那里。再按一下
<span class="Special">&lt;Enter&gt;</span> 或者 <span class="Special">CTRL-O</span> 就可以跳回来。

你可以通过这个窗口改变一个选项的值。例如，移到 &quot;displaying text&quot; 主题。然后把
光标下移到这一行:

	<span class="PreProc">set wrap	nowrap</span><span class="Ignore"> ~</span>

当你在上面键入回车，这行会改变为:

	<span class="PreProc">set nowrap      wrap</span><span class="Ignore"> ~</span>

现在，这个选项被关闭了。

这行的上方是对这个选项的简要描述。将光标向上移动一行，然后按 <span class="Special">&lt;Enter&gt;</span>，你可以跳
转到 <span class="Type">'wrap'</span> 的完整帮助，再用 <span class="Special">CTRL-O</span> 可以跳回来。

对于那些值为数值或者字符串的选项，你可以编辑它的值，然后按 <span class="Special">&lt;Enter&gt;</span> 来启用该
值。例如，把光标移动到下面这行:

	<span class="PreProc">set so=0</span><span class="Ignore"> ~</span>

用 $ 移到行尾，再用 &quot;r5&quot; 命令修改为五，然后按 <span class="Special">&lt;Enter&gt;</span> 使修改生效。现在如果你移
动一下光标，你会发现在你的光标移到窗口边界前，你的文字就开始滚动了。这就是选项
<span class="Type">'scrolloff'</span> 完成的功能: 它指定在距离边界多远的地方开始滚动文字。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span id="05.8" class="String anchor">05.8</span><span class="Ignore">*</span>	常用选项

Vim 中有很多选项。大部分你很少用得上。我们在这个介绍一些常用的。别忘了你可以通
过 &quot;:help&quot; 命令获得更多的帮助。方法是在选项命令前后加上单引号，例如:
<span class="Ignore">&gt;</span>
<span class="Comment">	:help 'wrap'</span>

如果你搞乱了一个选项，你可以通过在选项后加上一个 &amp; 号把它恢复到默认值。例如:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set iskeyword&amp;</span>

禁 止 回 绕 行

Vim 通常会对长行自动回绕，以便你可以看见所有的文字。但有时最好还是能让文字在一
行中显示完。这样，你需要左右移动才能看到一整行。以下命令可以关闭行的回绕:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set nowrap</span>

当你移动到那些不能显示的文字上，Vim 会自动向右滚动让你看到后面的文字，要一次滚
动十个字符，这样就行了:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set sidescroll=10</span>

这个命令不改变文件中的文本，只改变显示方式。

移 动 命 令 换 行

很多命令只能在一行中移动。你可以通过 <span class="Type">'whichwrap'</span> 选项改变它。如下命令把这个选
项设为默认值:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set whichwrap=b,s</span>

这样，当光标处于行首时用 <span class="Special">&lt;BS&gt;</span> 键可以回到前一行的结尾；当处于行尾时用 <span class="Special">&lt;Space&gt;</span>
键可以移动到下一行的行首。

要允许 <span class="Special">&lt;Left&gt;</span> 和 <span class="Special">&lt;Right&gt;</span> 键也能这样，可以用这个命令:
<span class="Ignore">&gt;</span>
<span class="Comment">	set whichwrap=b,s,&lt;,&gt;</span>

这只在普通模式中有效，要在插入模式中使 <span class="Special">&lt;Left&gt;</span> 和 <span class="Special">&lt;Right&gt;</span> 也有效，可以:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set whichwrap=b,s,&lt;,&gt;,[,]</span>

还有一些可以用的标志位，参见 <span class="Type">'whichwrap'</span>。

显 示 TAB 键

文件中有 TAB 键的时候，你是看不见的。要把它显示出来:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set list</span>

现在 TAB 键显示为 ^I，而 $显示在每行的结尾，以便你能找到可能会被你忽略的空白字
符在哪里。
    这样做的一个缺点是在有很多 TAB 的时候看起来很丑。如果你使用一个有颜色的终
端，或者使用 GUI 模式，Vim 可以用高亮显示空格和 TAB。使用 <span class="Type">'listchars'</span> 选项:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set listchars=tab:&gt;-,trail:-</span>

现在，TAB 会被显示成 &quot;&gt;---&quot; (&quot;-&quot; 的个数不定) 而行尾多余的空白字符显示成 &quot;-&quot;。
看起来好多了，是吧？

关 键 字

<span class="Type">'iskeyword'</span> 选项指定哪些字母可以出现在一个单词中:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set iskeyword</span>
<span class="Ignore">&lt;</span>	 <span class="PreProc">iskeyword=@,48-57,_,192-255</span><span class="Ignore"> ~</span>

&quot;@&quot; 表示所有字母。&quot;48-57&quot; 表示 ASCII 字符 48-57 ，即数字 0 到 9。&quot;192-255&quot; 是
可显示的拉丁字符。
    有时你希望横线也是关键字，以便 &quot;w&quot; 命令会把 &quot;upper-case&quot; 看作是一个单词。
你可以这样做:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set iskeyword+=-</span>
<span class="Comment">	:set iskeyword</span>
<span class="Ignore">&lt;</span>	 <span class="PreProc">iskeyword=@,48-57,_,192-255,-</span><span class="Ignore"> ~</span>

看一下新的值，你会发现 Vim 自动在 &quot;-&quot; 前面加了一个逗号。
    要从中去掉一个字符，用 &quot;-=&quot;。例如要排除下划线:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set iskeyword-=_</span>
<span class="Comment">	:set iskeyword</span>
<span class="Ignore">&lt;</span>	 <span class="PreProc">iskeyword=@,48-57,192-255,-</span><span class="Ignore"> ~</span>

这回，逗号又自动被删除了。

显 示 消 息 的 空 间

当 Vim 启动的时候，在屏幕底部有一行被用于显示消息。当消息很长的时候，多余的部
分会被截断。这样你只能看到一部分。或者文字自动滚动，你要按 <span class="Special">&lt;Enter&gt;</span> 来继续。你
可以给 <span class="Type">'cmdheight'</span> 选项赋一个值，用来设定显示消息所用的行数。例如:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set cmdheight=3</span>

这样意味着你用于编辑文字的空间少了，所以这实际上是一种折衷。

<span class="PreProc">==============================================================================</span>

下一章: <span class="Ignore">|</span><a href="usr_06.html#usr_06.txt"><span class="Identifier">usr_06.txt</span></a><span class="Ignore">|</span>  使用语法高亮

</pre>
<!-- vim: set foldmethod=manual : -->

            </pre>
        </article>
    </div>
    <footer class="site-footer">
        <div class="wrap">
            <div class="footer-content">
              <i>Generated by vimtohtml.rb on </i>
              <a href="http://www.zuiniude.com/vim-zh/usr_toc.html">www.zuiniude.com</a>
            </div>
        </div>
    </footer>
</body>
</html>
