<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>vim中文手册 - version7</title>
    <meta name="description" content="vim8.0 中文帮助文档">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="vim.css" type="text/css">
</head>
<body>
    <div class="page-content">
        <article class="wrap">
            <pre class="pre">
<pre id='vimCodeElement'>
<span class="Ignore">*</span><span id="version7.txt" class="String anchor">version7.txt</span><span class="Ignore">*</span>  For <span class="Identifier">Vim version 8.0.</span>  最近更新: 2017年8月

		  VIM 参考手册	  by Bram Moolenaar
				译者: Willis
				<span class="String"><a href="http://vimcdoc.sf.net">http://vimcdoc.sf.net</a></span>

					<span class="Ignore">*</span><span id="vim7" class="String anchor">vim7</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="version-7.0" class="String anchor">version-7.0</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="version7.0" class="String anchor">version7.0</span><span class="Ignore">*</span>
欢迎来到 Vim 版本 7！新版本增加了很多新特性。本文档列出所有加入的新项目、已
有特性的改动以及 Vim 6.x 以来的漏洞修正。使用这个命令可以看到你使用的版本:<span class="Ignore"> &gt;</span>
<span class="Comment">	:version</span>

<span class="Ignore">|</span><a href="vi_diff.html#vi_diff.txt"><span class="Identifier">vi_diff.txt</span></a><span class="Ignore">|</span> 提供 Vi 和 Vim 7.0 的区别的一个概述。
<span class="Ignore">|</span><a href="version4.html#version4.txt"><span class="Identifier">version4.txt</span></a><span class="Ignore">|</span> 说明 Vim 3.x 和 Vim 4.x 的区别。
<span class="Ignore">|</span><a href="version5.html#version5.txt"><span class="Identifier">version5.txt</span></a><span class="Ignore">|</span> 说明 Vim 4.x 和 Vim 5.x 的区别。
<span class="Ignore">|</span><a href="version6.html#version6.txt"><span class="Identifier">version6.txt</span></a><span class="Ignore">|</span> 说明 Vim 5.x 和 Vim 6.x 的区别。

不 兼 容 的 改 动			<span class="Ignore">|</span><a href="version7.html#incompatible-7"><span class="Identifier">incompatible-7</span></a><span class="Ignore">|</span>

新 特 性				<span class="Ignore">|</span><a href="version7.html#new-7"><span class="Identifier">new-7</span></a><span class="Ignore">|</span>

Vim 脚本增强            		<span class="Ignore">|</span><a href="version7.html#new-vim-script"><span class="Identifier">new-vim-script</span></a><span class="Ignore">|</span>
拼写检查				<span class="Ignore">|</span><a href="version7.html#new-spell"><span class="Identifier">new-spell</span></a><span class="Ignore">|</span>
全能补全				<span class="Ignore">|</span><a href="version7.html#new-omni-completion"><span class="Identifier">new-omni-completion</span></a><span class="Ignore">|</span>
MzScheme 接口				<span class="Ignore">|</span><a href="version7.html#new-MzScheme"><span class="Identifier">new-MzScheme</span></a><span class="Ignore">|</span>
打印多字节文本				<span class="Ignore">|</span><a href="version7.html#new-print-multi-byte"><span class="Identifier">new-print-multi-byte</span></a><span class="Ignore">|</span>
标签页					<span class="Ignore">|</span><a href="version7.html#new-tab-pages"><span class="Identifier">new-tab-pages</span></a><span class="Ignore">|</span>
撤销分支				<span class="Ignore">|</span><a href="version7.html#new-undo-branches"><span class="Identifier">new-undo-branches</span></a><span class="Ignore">|</span>
扩展的 Unicode 支持			<span class="Ignore">|</span><a href="version7.html#new-more-unicode"><span class="Identifier">new-more-unicode</span></a><span class="Ignore">|</span>
更多高亮				<span class="Ignore">|</span><a href="version7.html#new-more-highlighting"><span class="Identifier">new-more-highlighting</span></a><span class="Ignore">|</span>
翻译的手册页				<span class="Ignore">|</span><a href="version7.html#new-manpage-trans"><span class="Identifier">new-manpage-trans</span></a><span class="Ignore">|</span>
内部 grep				<span class="Ignore">|</span><a href="version7.html#new-vimgrep"><span class="Identifier">new-vimgrep</span></a><span class="Ignore">|</span>
消息往回滚动				<span class="Ignore">|</span><a href="version7.html#new-scroll-back"><span class="Identifier">new-scroll-back</span></a><span class="Ignore">|</span>
光标超越行尾				<span class="Ignore">|</span><a href="version7.html#new-onemore"><span class="Identifier">new-onemore</span></a><span class="Ignore">|</span>
POSIX 兼容性				<span class="Ignore">|</span><a href="version7.html#new-posix"><span class="Identifier">new-posix</span></a><span class="Ignore">|</span>
调试器支持				<span class="Ignore">|</span><a href="version7.html#new-debug-support"><span class="Identifier">new-debug-support</span></a><span class="Ignore">|</span>
远程文件探索器				<span class="Ignore">|</span><a href="version7.html#new-netrw-explore"><span class="Identifier">new-netrw-explore</span></a><span class="Ignore">|</span>
定义操作符				<span class="Ignore">|</span><a href="version7.html#new-define-operator"><span class="Identifier">new-define-operator</span></a><span class="Ignore">|</span>
映射到表达式				<span class="Ignore">|</span><a href="version7.html#new-map-expression"><span class="Identifier">new-map-expression</span></a><span class="Ignore">|</span>
可视和选择模式映射			<span class="Ignore">|</span><a href="version7.html#new-map-select"><span class="Identifier">new-map-select</span></a><span class="Ignore">|</span>
位置列表				<span class="Ignore">|</span><a href="version7.html#new-location-list"><span class="Identifier">new-location-list</span></a><span class="Ignore">|</span>
若干新项目				<span class="Ignore">|</span><a href="version7.html#new-items-7"><span class="Identifier">new-items-7</span></a><span class="Ignore">|</span>

改 进					<span class="Ignore">|</span><a href="version7.html#improvements-7"><span class="Identifier">improvements-7</span></a><span class="Ignore">|</span>

编 译 时 的 改 变			<span class="Ignore">|</span><a href="version7.html#compile-changes-7"><span class="Identifier">compile-changes-7</span></a><span class="Ignore">|</span>

漏 洞 修 正				<span class="Ignore">|</span><a href="version7.html#bug-fixes-7"><span class="Identifier">bug-fixes-7</span></a><span class="Ignore">|</span>

7.1 版 本			<span class="Ignore">|</span><a href="version7.html#version-7.1"><span class="Identifier">version-7.1</span></a><span class="Ignore">|</span>
改动					<span class="Ignore">|</span><a href="version7.html#changed-7.1"><span class="Identifier">changed-7.1</span></a><span class="Ignore">|</span>
新增					<span class="Ignore">|</span><a href="version7.html#added-7.1"><span class="Identifier">added-7.1</span></a><span class="Ignore">|</span>
修正					<span class="Ignore">|</span><a href="version7.html#fixed-7.1"><span class="Identifier">fixed-7.1</span></a><span class="Ignore">|</span>

7.2 版本			<span class="Ignore">|</span><a href="version7.html#version-7.2"><span class="Identifier">version-7.2</span></a><span class="Ignore">|</span>
改动					<span class="Ignore">|</span><a href="version7.html#changed-7.2"><span class="Identifier">changed-7.2</span></a><span class="Ignore">|</span>
新增					<span class="Ignore">|</span><a href="version7.html#added-7.2"><span class="Identifier">added-7.2</span></a><span class="Ignore">|</span>
修正					<span class="Ignore">|</span><a href="version7.html#fixed-7.2"><span class="Identifier">fixed-7.2</span></a><span class="Ignore">|</span>

7.3 版本			<span class="Ignore">|</span><a href="version7.html#version-7.3"><span class="Identifier">version-7.3</span></a><span class="Ignore">|</span>

持久化撤销 				<span class="Ignore">|</span><a href="version7.html#new-persistent-undo"><span class="Identifier">new-persistent-undo</span></a><span class="Ignore">|</span>
更多加密				<span class="Ignore">|</span><a href="version7.html#new-more-encryption"><span class="Identifier">new-more-encryption</span></a><span class="Ignore">|</span>
隐藏文本				<span class="Ignore">|</span><a href="version7.html#new-conceal"><span class="Identifier">new-conceal</span></a><span class="Ignore">|</span>
Lua 接口				<span class="Ignore">|</span><a href="version7.html#new-lua"><span class="Identifier">new-lua</span></a><span class="Ignore">|</span>
Python3 接口				<span class="Ignore">|</span><a href="version7.html#new-python3"><span class="Identifier">new-python3</span></a><span class="Ignore">|</span>

改动					<span class="Ignore">|</span><a href="version7.html#changed-7.3"><span class="Identifier">changed-7.3</span></a><span class="Ignore">|</span>
新增					<span class="Ignore">|</span><a href="version7.html#added-7.3"><span class="Identifier">added-7.3</span></a><span class="Ignore">|</span>
修正					<span class="Ignore">|</span><a href="version7.html#fixed-7.3"><span class="Identifier">fixed-7.3</span></a><span class="Ignore">|</span>

7.4 版本			<span class="Ignore">|</span><a href="version7.html#version-7.4"><span class="Identifier">version-7.4</span></a><span class="Ignore">|</span>
新正规表达式引擎			<span class="Ignore">|</span><a href="version7.html#new-regexp-engine"><span class="Identifier">new-regexp-engine</span></a><span class="Ignore">|</span>
更好的 Python 接口			<span class="Ignore">|</span><a href="version7.html#better-python-interface"><span class="Identifier">better-python-interface</span></a><span class="Ignore">|</span>
改动					<span class="Ignore">|</span><a href="version7.html#changed-7.4"><span class="Identifier">changed-7.4</span></a><span class="Ignore">|</span>
新增					<span class="Ignore">|</span><a href="version7.html#added-7.4"><span class="Identifier">added-7.4</span></a><span class="Ignore">|</span>
修正					<span class="Ignore">|</span><a href="version7.html#fixed-7.4"><span class="Identifier">fixed-7.4</span></a><span class="Ignore">|</span>

(译者注: 各版本的修正一节，因内容过于琐碎，保留原文未翻译)

<span class="PreProc">==============================================================================</span>
不 兼 容 的 改 动				<span class="Ignore">*</span><span id="incompatible-7" class="String anchor">incompatible-7</span><span class="Ignore">*</span>

这些改动和以前版本不兼容。如果从 Vim 6.x 升级到 7.0 时出现问题，检查这个列表。

&quot;:write file&quot; 命令不再复位缓冲区的 <span class="Type">'modified'</span> 标志位，除非 <span class="Type">'cpoptions'</span> 里包含
'+' 标志位 <span class="Ignore">|</span><a href="#"><span class="Identifier">cpo-+</span></a><span class="Ignore">|</span>。本来的行为不合逻辑，因为缓冲区和原来的文件相比，仍然有修改
的内容。另外，撤销所有改变时，文件仍然会被标记为修改状态。现在，执行此命令后用
&quot;:quit&quot; 会失败。

&quot;:helpgrep&quot; 现在使用帮助窗口来显示匹配。

参数列表里本来可用双引号在文件名里包含空格。这使得 &quot;:edit&quot; 和 &quot;:next&quot; 转义双引
号时的行为不同，而且和 Vi 有些版本也不兼容。
	<span class="PreProc">命令			Vim 6.x	文件名		Vim 7.x 文件名</span><span class="Ignore"> ~</span>
	:edit foo\&quot;888		foo&quot;888			foo&quot;888
	:next foo\&quot;888		foo888			foo&quot;888
	:next a\&quot;b c\&quot;d		ab cd			a&quot;b  和  c&quot;d

在 <span class="Ignore">|</span><a href="eval.html#literal-string"><span class="Identifier">literal-string</span></a><span class="Ignore">|</span> 里，单引号加倍可以得到一个。&quot;:echo 'a''b'&quot; 本来返回
&quot;a b&quot;，现在因为两个引号代表一个，它返回 &quot;a'b&quot;。

用 &quot;:w! fname&quot; 覆盖文件时，本来不会警告 &quot;fname&quot; 正在被另一个 Vim 编辑。Vim 现
在给出错误信息 <span class="Ignore">|</span><a href="message.html#E768"><span class="Identifier">E768</span></a><span class="Ignore">|</span>。

删除了 Mac OS 9 的支持。

.tex 结尾的文件现在设置 <span class="Type">'filetype'</span> 为 &quot;context&quot;、&quot;plaintex&quot; 或 &quot;tex&quot;。
<span class="Ignore">|</span><a href="filetype.html#ft-tex-plugin"><span class="Identifier">ft-tex-plugin</span></a><span class="Ignore">|</span>

次要不兼容点:

文件类型检测: 许多类型用 */.dir/filename 代替了 ~/.dir/filename，从而也能使用
别的用户的文件。

不少文件类型的缩进设置从文件类型插件移到了缩进插件。如果你用:<span class="Ignore"> &gt;</span>
<span class="Comment">	:filetype plugin on</span>
有些缩进设置可能会丢失。你需要用:<span class="Ignore"> &gt;</span>
<span class="Comment">	:filetype plugin indent on</span>

&quot;:0verbose&quot; 现在设置 <span class="Type">'verbose'</span> 为零而不是一。

删除了旧且不完整的 &quot;VimBuddy&quot; 代码。

无名缓冲区报告 &quot;No Name&quot; 而不是 &quot;No File&quot;。过去这和有名字但 <span class="Type">'buftype'</span> 设为
&quot;nofile&quot; 的缓冲区容易混淆。

如果 &quot;:file xxx&quot; 用于无名缓冲区，不设置轮换文件名。这避免了没有意义的另一个无
名缓冲区的建立。

&quot;2html.vim&quot; 脚本现在把关闭折叠也转换到 HTML。因为折叠的打开关闭相同，HTML 看上
去和显示接近。如果 HTML 里不要折叠，用 &quot;zR&quot; 或 &quot;let html_ignore_folding=1&quot;。
(部分来自 Carl Osterwisch)
diff 模式也被转换到 HTML，和显示一致。

Win32: <span class="Special">&lt;F10&gt;</span> 键的效果过去取决于 <span class="Type">'winaltkeys'</span>。现在它取决于 <span class="Special">&lt;F10&gt;</span> 是否被映射。
这样就可以映射 <span class="Special">&lt;F10&gt;</span> 而不修改 <span class="Type">'winaltkeys'</span>。

如果 <span class="Type">'nrformats'</span> 包含 <span class="Type">'octal'</span>，&quot;08&quot; 上用 <span class="Special">CTRL-A</span> 过去得到 &quot;018&quot;，这不合逻辑。现
在得到 &quot;9&quot;。同时也删除引导的一到多个零，以免 &quot;009&quot; 递增到 &quot;010&quot; 后该数变成八进
制。

如果 <span class="Type">'encoding'</span> 设为一个 Unicode 编码，<span class="Type">'fileencodings'</span> 的值现在在 &quot;latin1&quot; 之
前包含 &quot;default&quot;。这意味着如有可能，8 位编码的文件缺省使用环境指定的编码。以前
总是使用 latin1，在非 latin1 的环境下这是错的，俄语就是如此。

如果有两个窗口存在且都显示帮助文件时，过去用 &quot;:quit&quot; 会退出。现在只关闭窗口。

&quot;-w <span class="Special">{scriptout}</span>&quot; 只有当 <span class="Special">{scriptout}</span> 不以数位开头时才可用。否则，用它设置
<span class="Type">'window'</span> 选项。

<span class="Special">&lt;Home&gt;</span> 和 <span class="Special">&lt;xHome&gt;</span> 过去可以分别映射。这样做的缺点是所有映射 (加上修饰符) 不得不
都重复一遍，因为你不能确信键盘会产生哪个值。现在所有的 <span class="Special">&lt;xHome&gt;</span> 在内部都被翻译
为 <span class="Special">&lt;Home&gt;</span>，键码和映射都是。同样的改动也适用于 <span class="Special">&lt;xEnd&gt;</span>、<span class="Special">&lt;xF1&gt;</span> 等键。

&quot;:put&quot; 现在把光标放在插入的末行。

如果 .gvimrc 存在，关闭 <span class="Type">'compatible'</span>，就像 &quot;.vimrc&quot; 文件存在时一样。

用 &quot;vlllU&quot; 或类似的命令使字符串大写时，德语 sharp s 被替换为 &quot;SS&quot;。因为兼容性
问题，&quot;~&quot; 不这么做，这也是因为 &quot;SS&quot; 不能被改回 sharp s。

&quot;gd&quot; 过去在函数里找到变量的第一次出现，而这可以是没有类型的函数参数。现在只会
去找包含类型的位置。

函数里的后继行过去不参加计算，错误信息的行号是逻辑行而不是源代码里的行。这使得
定位错误十分困难。现在包含函数开始处起算的源代码行号。这也意味着 &quot;:breakadd
func&quot; 里的行号含义有了变化。

用 <span class="Ignore">|</span><span class="Identifier">:command</span><span class="Ignore">|</span> 定义用户命令时，过去特殊项目可以是缩写。这导致不可预测的行为，如
<span class="Special">&lt;li&gt;</span> 会被识别为 <span class="Special">&lt;line1&gt;</span>。现在这些项目不再允许缩写。

执行 FileChangedRO 自动命令时，不再允许切换到另一个缓冲区或者编辑另一个文件。
这是为了防止崩溃 (激活事件所在的代码埋藏得很深，那里我们不期待改变缓冲区)。但
重新载入缓冲区仍然允许。

<span class="Ignore">|</span><a href="message.html#more-prompt"><span class="Identifier">more-prompt</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="message.html#hit-enter-prompt"><span class="Identifier">hit-enter-prompt</span></a><span class="Ignore">|</span> 提示上，如果置位 <span class="Type">'more'</span> 选项，现在可以使用
'k'、'u'、'g' 和 'b' 键来往回滚动到以前的消息。它们不再用作预输入。

<span class="PreProc">==============================================================================</span>
新 特 性						<span class="Ignore">*</span><span id="new-7" class="String anchor">new-7</span><span class="Ignore">*</span>

Vim 脚本增强						<span class="Ignore">*</span><span id="new-vim-script" class="String anchor">new-vim-script</span><span class="Ignore">*</span>
<span class="PreProc">------------</span>

Vim 脚本加入以下类型:

	<span class="Ignore">|</span><a href="eval.html#List"><span class="Identifier">List</span></a><span class="Ignore">|</span>		项目的有序列表
	<span class="Ignore">|</span><a href="eval.html#Dictionary"><span class="Identifier">Dictionary</span></a><span class="Ignore">|</span>	项目的关联数组
	<span class="Ignore">|</span><a href="eval.html#Funcref"><span class="Identifier">Funcref</span></a><span class="Ignore">|</span>	指向函数的引用

加入许多函数和命令以支持这些新类型。

用 <span class="Ignore">|</span><a href="#"><span class="Identifier">string()</span></a><span class="Ignore">|</span> 函数可以得到变量的字符串表示形式。这包括数值、字符串和它们的复合
形式。用 <span class="Ignore">|</span><a href="#"><span class="Identifier">eval()</span></a><span class="Ignore">|</span> 又可把字符串转换变量值。

<span class="Ignore">|</span><span class="Identifier">:let</span><span class="Ignore">|</span> 命令现在可用 &quot;+=&quot;，&quot;-=&quot; 和 &quot;.=&quot;。<span class="Ignore"> &gt;</span>
<span class="Comment">	:let var += expr	&quot; 相当于 :let var = var + expr</span>
<span class="Comment">	:let var -= expr	&quot; 相当于 :let var = var - expr</span>
<span class="Comment">	:let var .= string	&quot; 相当于 :let var = var . string</span>

用 <span class="Ignore">|</span><span class="Identifier">:profile</span><span class="Ignore">|</span> 命令，你可以确定哪个函数或脚本最耗时。

Python 接口 vim.eval() 也能处理字典和列表。<span class="Ignore">|</span><a href="if_pyth.html#python-eval"><span class="Identifier">python-eval</span></a><span class="Ignore">|</span> (G. Sumner Hayes)

加入 <span class="Ignore">|</span><a href="pi_getscript.html#getscript"><span class="Identifier">getscript</span></a><span class="Ignore">|</span> 插件，提供从 <span id="www.vim.org" class="String anchor">www.vim.org</span> 自动更新脚本的便捷方法。
(Charles Campbell)

加入 <span class="Ignore">|</span><a href="pi_vimball.html#vimball"><span class="Identifier">vimball</span></a><span class="Ignore">|</span> 插件，提供发布包含一组文件 (插件文件、autoload 脚本、文档) 的插
件的便捷方法。(Charles Campbell)

拼写检查						<span class="Ignore">*</span><span id="new-spell" class="String anchor">new-spell</span><span class="Ignore">*</span>
<span class="PreProc">--------</span>

Vim 已经集成了拼写检查。本来有一些脚本的实现，但都较慢和/或需要外部程序。

用 <span class="Type">'spell'</span>	  选项切换拼写检查的开关。
用 <span class="Type">'spelllang'</span>	  选项指定能接受的语言。
用 <span class="Type">'spellfile'</span>	  选项指定加入新词的文件名。
用 <span class="Type">'spellsuggest'</span> 选项指定提供建议的方法。

用 <span class="Ignore">|</span><span class="Identifier">]s</span><span class="Ignore">|</span> 和 <span class="Ignore">|</span><span class="Identifier">[s</span><span class="Ignore">|</span> 命令移动到下一个或前一个错误。
用 <span class="Ignore">|</span><a href="spell.html#zg"><span class="Identifier">zg</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="spell.html#zw"><span class="Identifier">zw</span></a><span class="Ignore">|</span> 命令加入好词和坏词。
用 <span class="Ignore">|</span><a href="#"><span class="Identifier">z=</span></a><span class="Ignore">|</span> 	命令改正单词。
用 <span class="Ignore">|</span><span class="Identifier">:mkspell</span><span class="Ignore">|</span>	命令从单词列表生成 Vim 的拼写文件。

加入 &quot;undercurl&quot; 高亮属性，GUI 里可以清楚地指出拼写错误 (基于 Marcin Dalecki
的补丁)。
用 &quot;guisp&quot; 颜色指定和前景背景不同的第三种颜色。
可用高亮属性的数目从大约 220 个增加到超过 30000 个。这使拼写的属性和语法高亮的
属性可以进行合并。也可用于语法高亮和标注可视区域。

详情可见: <span class="Ignore">|</span><a href="spell.html#spell"><span class="Identifier">spell</span></a><span class="Ignore">|</span>。

全能补全					<span class="Ignore">*</span><span id="new-omni-completion" class="String anchor">new-omni-completion</span><span class="Ignore">*</span>
<span class="PreProc">----------</span>

本来可以叫 &quot;intellisense&quot; 的，但它已经是注册商标了。这是一种智能的补全形式，它
检视光标前面的文本，然后寻找后面可以跟什么内容。它可以用来提供结构和类的成员，
系统函数，等等。
(译者注: 原文为 omni completion，但 omni 具体何义并无解释。暂按其字面意思直译
为 &quot;全能&quot;。)

插入模式下用 <span class="Special">CTRL-X</span> <span class="Special">CTRL-O</span> 开始全能补全。<span class="Ignore">|</span><a href="insert.html#i_CTRL-X_CTRL-O"><span class="Identifier">i_CTRL-X_CTRL-O</span></a><span class="Ignore">|</span>

文件类型插件设置 <span class="Type">'omnifunc'</span> 选项来定义进行补全的函数。

目前支持的语言:
	C					<span class="Ignore">|</span><a href="insert.html#ft-c-omni"><span class="Identifier">ft-c-omni</span></a><span class="Ignore">|</span>
	(X)HTML，带有 CSS			<span class="Ignore">|</span><a href="insert.html#ft-html-omni"><span class="Identifier">ft-html-omni</span></a><span class="Ignore">|</span>
	JavaScript				<span class="Ignore">|</span><a href="insert.html#ft-javascript-omni"><span class="Identifier">ft-javascript-omni</span></a><span class="Ignore">|</span>
	PHP					<span class="Ignore">|</span><a href="insert.html#ft-php-omni"><span class="Identifier">ft-php-omni</span></a><span class="Ignore">|</span>
	Python
	Ruby					<span class="Ignore">|</span><a href="insert.html#ft-ruby-omni"><span class="Identifier">ft-ruby-omni</span></a><span class="Ignore">|</span>
	SQL					<span class="Ignore">|</span><a href="insert.html#ft-sql-omni"><span class="Identifier">ft-sql-omni</span></a><span class="Ignore">|</span>
	XML					<span class="Ignore">|</span><a href="insert.html#ft-xml-omni"><span class="Identifier">ft-xml-omni</span></a><span class="Ignore">|</span>
	任何支持语法高亮的语言			<span class="Ignore">|</span><a href="insert.html#ft-syntax-omni"><span class="Identifier">ft-syntax-omni</span></a><span class="Ignore">|</span>

你可以加入自己的全能补全脚本。

如果 <span class="Type">'completeopt'</span> 选项包含 &quot;menu&quot;，使用 (相当原始的) 弹出菜单显示插入模式的补
全匹配。

MzScheme 接口						<span class="Ignore">*</span><span id="new-MzScheme" class="String anchor">new-MzScheme</span><span class="Ignore">*</span>
<span class="PreProc">-------------</span>

支持 MzScheme 解释器。<span class="Ignore">|</span><a href="if_mzsch.html#MzScheme"><span class="Identifier">MzScheme</span></a><span class="Ignore">|</span>
用 <span class="Ignore">|</span><span class="Identifier">:mzscheme</span><span class="Ignore">|</span>	命令执行 MzScheme 命令。
用 <span class="Ignore">|</span><span class="Identifier">:mzfile</span><span class="Ignore">|</span>	命令执行 MzScheme 脚本文件。

这需要 Vim 编译时加入 <span class="Ignore">|</span><span class="Identifier">+mzscheme</span><span class="Ignore">|</span> 特性。

打印多字节文本						<span class="Ignore">*</span><span id="new-print-multi-byte" class="String anchor">new-print-multi-byte</span><span class="Ignore">*</span>
<span class="PreProc">--------------</span>

<span class="Ignore">|</span><span class="Identifier">:hardcopy</span><span class="Ignore">|</span> 命令现在支持多字节字符的 PostScript 打印。

为此可使用 <span class="Type">'printmbcharset'</span> 和 <span class="Type">'printmbfont'</span> 选项。
另见 <span class="Ignore">|</span><a href="print.html#postscript-cjk-printing"><span class="Identifier">postscript-cjk-printing</span></a><span class="Ignore">|</span>。(Mike Williams)

标签页							<span class="Ignore">*</span><span id="new-tab-pages" class="String anchor">new-tab-pages</span><span class="Ignore">*</span>
<span class="PreProc">-----</span>

标签页 (tab page) 是包含一或多个窗口并在顶部贴有标签 (tab) 的页面 (page)。点击
标签可以快速在标签页间切换。键盘则可用 <span class="Ignore">|</span><a href="tabpage.html#gt"><span class="Identifier">gt</span></a><span class="Ignore">|</span> (转到标签页，Goto Tab) 命令。这是
一个需要使用很多窗口工作的便捷方式。

要在启动 Vim 时为每个文件参数打开一个单独的标签页，使用 <span class="Ignore">|</span><span class="Identifier">-p</span><span class="Ignore">|</span> 参数。
用 <span class="Type">'tabpagemax'</span> 设置可打开的最大标签页数。

标签页标签所在的行可以使用高亮的普通文本，也可以使用 GUI 的机制。GUI 标签看起
来更舒服，但只有少数系统支持。用 <span class="Type">'tabline'</span>、<span class="Type">'guitablabel'</span> 和 <span class="Type">'guitabtooltip'</span>
可以定制标签页行，而它显示与否则由 <span class="Type">'showtabline'</span> 控制。至于是否使用 GUI 标签由
<span class="Type">'guioptions'</span> 的 &quot;e&quot; 标志位决定。

用 <span class="Ignore">|</span><span class="Identifier">:tab</span><span class="Ignore">|</span> 命令修饰符，多数打开新窗口的命令会用新标签页代替。

<span class="Ignore">|</span><span class="Identifier">--remote-tab</span><span class="Ignore">|</span> 参数使已运行的 Vim 服务器用新标签页编辑文件。

&quot;t:&quot; 开始的变量局部于标签页。

详情见: <span class="Ignore">|</span><a href="tabpage.html#tabpage"><span class="Identifier">tabpage</span></a><span class="Ignore">|</span>
多数 GUI 部分由 Yegappan Lakshmanan 实现。

撤销分支						<span class="Ignore">*</span><span id="new-undo-branches" class="String anchor">new-undo-branches</span><span class="Ignore">*</span>
<span class="PreProc">--------</span>

以前只有单线的撤销-重做。如果撤销一系列改变后进行了一项新改变，所有撤销的改变
就全丢失了。这可能会不小心导致大量工作的丢失。

为此情形，Vim 现在实现了撤销分支机制，使你可以回到任何改变之后的文本，即使曾经
撤销过也没问题。唯一的例外是你到达了 <span class="Type">'undolevels'</span> 的限制，这时需要释放撤销信息
以减少内存用量。

要能在撤销分支间游历，按顺序给每个改变编号。命令 <span class="Ignore">|</span><a href="undo.html#g-"><span class="Identifier">g-</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><span class="Identifier">:earlier</span><span class="Ignore">|</span> 在时间上往
后退到旧的改变上。而命令 <span class="Ignore">|</span><a href="#"><span class="Identifier">g+</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><span class="Identifier">:later</span><span class="Ignore">|</span> 在时间上往前进到新的改变上。

每个改变同时记录时间。&quot;:earlier 10m&quot; 回到大约十分钟前的文本。

用 <span class="Ignore">|</span><span class="Identifier">:undolist</span><span class="Ignore">|</span> 命令了解存在的撤销分支的大概情况。<span class="Ignore">|</span><span class="Identifier">:undo</span><span class="Ignore">|</span> 命令现在接受参数以直
接跳转到该列表的任意位置。用 <span class="Ignore">|</span><a href="#"><span class="Identifier">changenr()</span></a><span class="Ignore">|</span> 函数得到改变号。

现在还没有图形化的改变树显示，导航机制可能不甚简明。

扩展的 Unicode 支持					<span class="Ignore">*</span><span id="new-more-unicode" class="String anchor">new-more-unicode</span><span class="Ignore">*</span>
<span class="PreProc">-------------------</span>

以前只能显示两个组合用字符。现在限制最高提高到 6 个。用 <span class="Type">'maxcombine'</span> 选项可以
设置这个限制。缺省值仍然是 2 个。

<span class="Ignore">|</span><a href="various.html#ga"><span class="Identifier">ga</span></a><span class="Ignore">|</span> 现在显示所有的组合用字符，而不只是前面两个。

以前只支持 16 位 Unicode 字符的显示，现在可用完整的 32 位字符集。除非编译时手
动关闭这项功能以减少一些内存使用。

模式匹配现在可以搜索单个合成用字符。<span class="Ignore">|</span><a href="pattern.html#patterns-composing"><span class="Identifier">patterns-composing</span></a><span class="Ignore">|</span>

<span class="Ignore">|</span><a href="various.html#8g8"><span class="Identifier">8g8</span></a><span class="Ignore">|</span> 命令搜索非法的 UTF-8 字节序列。

更多高亮					<span class="Ignore">*</span><span id="new-more-highlighting" class="String anchor">new-more-highlighting</span><span class="Ignore">*</span>
<span class="PreProc">--------</span>

高亮匹配的括号:

在文本上移动时光标如果在括号上，同时高亮匹配的另一个括号。这使用了新的
<span class="Ignore">|</span><a href="autocmd.html#CursorMoved"><span class="Identifier">CursorMoved</span></a><span class="Ignore">|</span> 自动命令事件。

这意味着每次移动光标都会执行一些命令。如果对你来说速度减慢太多，可以关闭:<span class="Ignore"> &gt;</span>
<span class="Comment">	:NoMatchParen</span>

<span class="Ignore">|</span><a href="pi_paren.html#matchparen"><span class="Identifier">matchparen</span></a><span class="Ignore">|</span> 提供更多信息。

该插件使用 <span class="Ignore">|</span><span class="Identifier">:match</span><span class="Ignore">|</span> 命令。现在该命令同时支持三个匹配模式。插件使用的是第三个。
第一个给用户使用，第二个可以用于其它插件。

高亮光标行和列:

加入 <span class="Type">'cursorline'</span> 和 <span class="Type">'cursorcolumn'</span> 选项。它们高亮光标所在的屏幕行和屏幕列。这
阳方便定位光标位置。<span class="Type">'cursorcolumn'</span> 也可用于对齐文本。它们可能会使屏幕刷新慢很
多。它们使用 CursorColumn 和 CursorLine 高亮，你可以修改使用的颜色。
<span class="Ignore">|</span><a href="syntax.html#hl-CursorColumn"><span class="Identifier">hl-CursorColumn</span></a><span class="Ignore">|</span> <span class="Ignore">|</span><a href="syntax.html#hl-CursorLine"><span class="Identifier">hl-CursorLine</span></a><span class="Ignore">|</span>

可用高亮属性的数目从大约 220 个增加到超过 30000 个。这使拼写的属性和语法高亮的
属性可以进行合并。也可用于语法高亮，标注可视区域，CursorColumn 等等。

翻译的手册页						<span class="Ignore">*</span><span id="new-manpage-trans" class="String anchor">new-manpage-trans</span><span class="Ignore">*</span>
<span class="PreProc">------------</span>

现在 Vim 有了若干其它语言的手册页和相关程序。

法语     - David Blanchet 翻译
意大利语 - Antonio Colombo 翻译
俄语     - Vassily Ragosin 翻译
波兰语   - Mikolaj Machowski 翻译

Unix 的 Makefile 在 .../man/it/man1/，.../man/it.ISO8859-1/man1/ 和
.../man/it.UTF-8/man1/ 安装意大利语的手册页。看来没有关于 &quot;it&quot; 目录使用什么编
码的公认标准。作为我们的最佳猜测，目前使用的是 8 位编码文件。
其它语言也被安装在类似的位置。
Vim configure 时如果使用 &quot;--disable-nls&quot;，不自动安装翻译页。但仍然可用
&quot;make install-languages install-tool-languages&quot; 完成这项工作。

内部 grep						<span class="Ignore">*</span><span id="new-vimgrep" class="String anchor">new-vimgrep</span><span class="Ignore">*</span>
<span class="PreProc">---------</span>

用 &quot;:vimgrep&quot; 命令可以在一组文件里搜索模式。和 &quot;:grep&quot; 命令类似，但它不需要外
部程序。除了移植性更好之外，它还能处理不同的文件编码并使用多行模式。它也能用来
在压缩和远程文件上进行搜索。<span class="Ignore">|</span><span class="Identifier">:vimgrep</span><span class="Ignore">|</span>。

如果想在脚本里使用搜索的结果，用 <span class="Ignore">|</span><a href="#"><span class="Identifier">getqflist()</span></a><span class="Ignore">|</span> 函数。

要 grep 多个目录下的文件，可用 &quot;**&quot; 模式。它会扩展为任意深度的目录。任何需要扩
展文件名的地方都可以用 &quot;**&quot;，包括 <span class="Ignore">|</span><span class="Identifier">:next</span><span class="Ignore">|</span> 和 <span class="Ignore">|</span><span class="Identifier">:args</span><span class="Ignore">|</span>。

消息往回滚动						<span class="Ignore">*</span><span id="new-scroll-back" class="String anchor">new-scroll-back</span><span class="Ignore">*</span>
<span class="PreProc">------------</span>

显示消息并停在 <span class="Ignore">|</span><a href="message.html#more-prompt"><span class="Identifier">more-prompt</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="message.html#hit-enter-prompt"><span class="Identifier">hit-enter-prompt</span></a><span class="Ignore">|</span> 时，用 'k'、'g'、'u' 和 'b'
键可以往回滚动到以前的消息。这对 &quot;:syntax&quot;、&quot;:autocommand&quot; 和 &quot;:highlight&quot; 的
输出阅读特别有用。使用通用的实现所以支持所有的命令，同时也保持高亮。只有
<span class="Type">'more'</span> 选项置位时才能使用。以前，只有 &quot;:clist&quot; 实现了部分这项功能。

如果你在 <span class="Ignore">|</span><a href="message.html#hit-enter-prompt"><span class="Identifier">hit-enter-prompt</span></a><span class="Ignore">|</span> 时按了 <span class="Special">&lt;Enter&gt;</span>，用 <span class="Ignore">|</span><a href="#"><span class="Identifier">g&lt;</span></a><span class="Ignore">|</span> 命令可以查看最后一个消息
页。这时你可以继续往回滚动。

光标超越行尾						<span class="Ignore">*</span><span id="new-onemore" class="String anchor">new-onemore</span><span class="Ignore">*</span>
<span class="PreProc">------------</span>

如果 <span class="Type">'virtualedit'</span> 选项包含 &quot;onemore&quot;，光标可以移动到刚刚跨越行尾的位置。就像
它在换行符上一样。

这时有些命令的行为更加一致。以前，在空行上的光标总是跨越行尾。但这和 Vi 兼容差
得很远，而且也可能会影响一些插件或 Vim 脚本。小心使用！

Mattias Flodin 提供此补丁。

POSIX 兼容性						<span class="Ignore">*</span><span id="new-posix" class="String anchor">new-posix</span><span class="Ignore">*</span>
<span class="PreProc">------------</span>

使用 POSIX 测试包来验证 POSIX 的兼容性。修正了不少问题，使 Vim 和 POSIX 更兼
容。一些改变和传统的 Vi 或期待的行为有冲突。设置 $VIM_POSIX 环境变量得到 POSIX
兼容行为。见 <span class="Ignore">|</span><a href="vi_diff.html#posix"><span class="Identifier">posix</span></a><span class="Ignore">|</span>。

为了 Vi 和 POSIX 的兼容性而修正的项目:
- 用计数重复 &quot;R&quot; 只覆盖文本一次；<span class="Type">'cpoptions'</span> 加入 'X' 标志位 <span class="Ignore">|</span><a href="options.html#cpo-X"><span class="Identifier">cpo-X</span></a><span class="Ignore">|</span>
- 移动到不存在行的垂直移动命令失败；<span class="Type">'cpoptions'</span> 加入 '-' 标志位 <span class="Ignore">|</span><a href="options.html#cpo--"><span class="Identifier">cpo--</span></a><span class="Ignore">|</span>
- 用 preserve 保护文件时并执行 &quot;:q!&quot;，文件可以恢复；<span class="Type">'cpoptions'</span> 加入 '&amp;' 标志
  位 <span class="Ignore">|</span><a href="#"><span class="Identifier">cpo-&amp;</span></a><span class="Ignore">|</span>
- 部分实现了 <span class="Type">'window'</span> 选项。指定只有一个窗口时  <span class="Special">CTRL-F</span> 和 <span class="Special">CTRL-B</span> 滚动的幅度。
  现在接受 &quot;-w <span class="Special">{number}</span>&quot; 参数。&quot;-w <span class="Special">{scriptout}</span>&quot; 里的 <span class="Special">{scriptout}</span> 必须不以数位
  开始。
- 接受 &quot;-c<span class="Special">{command}</span>&quot; 参数，&quot;-c&quot; 和 <span class="Special">{command}</span> 之间没有空格。
- 用 &quot;:w!&quot; 写入文件时不复位 <span class="Type">'readonly'</span>，如果 <span class="Type">'cpoptions'</span> 里包含 'Z' 的话。
- 接受 &quot;:list&quot;、&quot;:print&quot; 和 &quot;:number&quot; 的 'l' 和 '#' 标志位。
- <span class="Type">'cpoptions'</span> 加入 '.' 标志位: 如果缓冲区被修改，&quot;:cd&quot; 失败。
- Ex 模式里，空缓冲区使用 &quot;:read file&quot; 不在新行上下保留空行。
- &quot;:global&quot; 命令删除换行符前面的反斜杠。
- &quot;:append&quot;、&quot;:insert&quot; 或 &quot;:change&quot; 和 &quot;:global&quot; 一起使用时，从命令中获取插入
  的行。可以用反斜杠-换行符来分隔行。
- 可用 &quot;:global /pat/ visual&quot; 在每个匹配行上执行普通模式命令。&quot;Q&quot; 可以继续并转
  到下一行。
- 部分实现 <span class="Ignore">|</span><span class="Identifier">:open</span><span class="Ignore">|</span> 命令。它退出 Ex 模式，但重画整个屏幕，而不是像 open 模式应
  该做的那样，重画一行。
- 支持使用管道读入外部程序的输出和把输入写到外部程序。加入 <span class="Type">'shelltemp'</span> 选项和
  has(&quot;filterpipe&quot;)。
- Ex 安静模式里显示 &quot;:set&quot; 的命令输出。
- 如果以前没用过寄存器，&quot;:@@&quot; 和 &quot;:**&quot; 报错。
- 搜索模式 &quot;[]-`]&quot; 匹配 ']'、'^'、'_' 和 '`'。
- &quot;:insert&quot; 的自动缩进使用插入位置下方的行。
- &quot;:change&quot; 的自动缩进使用第一个改变的行。
- Ex 命令行的编辑不用加工 (cooked) 模式，因为这样不能处理 <span class="Special">CTRL-D</span> 和 <span class="Special">CTRL-T</span>。
- Ex 模式里 &quot;1,3&quot; 显示三行，&quot;%&quot; 显示所有行。
- Ex 模式里 &quot;undo&quot; 会撤销所有从启动 Ex 模式时开始的改变。
- 实现 <span class="Type">'prompt'</span> 选项。

调试器支持						<span class="Ignore">*</span><span id="new-debug-support" class="String anchor">new-debug-support</span><span class="Ignore">*</span>
<span class="PreProc">----------</span>

加入 <span class="Type">'balloonexpr'</span> 选项。这是实现气泡功能的通用机制。用它显示鼠标指针所在单词
的相关信息。

远程文件探索器						<span class="Ignore">*</span><span id="new-netrw-explore" class="String anchor">new-netrw-explore</span><span class="Ignore">*</span>
<span class="PreProc">--------------</span>

netrw 插件现在支持使用 &quot;scp://&quot; 的目录浏览。也可以删除和换名文件。

为了避免大量重复代码，以前的文件探索器插件现在已经和 netrw 插件集成。这意味着
本地和远程的文件浏览现在使用相同的方式。

&quot;:browse edit&quot; 和 &quot;:browse split&quot; 在 GUI 对话框不可用而 netrw 插件可用时，使用
该插件。

Charles Campbell 维护 netrw 插件。

定义操作符						<span class="Ignore">*</span><span id="new-define-operator" class="String anchor">new-define-operator</span><span class="Ignore">*</span>
<span class="PreProc">----------</span>

以前你不能定义自己的操作符: 即 <span class="Special">{motion}</span> 动作后面可以跟随的命令。Vim 7 引入了
<span class="Type">'operatorfunc'</span> 选项和 <span class="Ignore">|</span><a href="#"><span class="Identifier">g@</span></a><span class="Ignore">|</span> 操作符。这样就可以定义和操作符行为相同的映射。实际
工作由函数完成，而 <span class="Ignore">|</span><a href="#"><span class="Identifier">g@</span></a><span class="Ignore">|</span> 操作符调用该函数。

<span class="Ignore">|</span><span class="Identifier">:map-operator</span><span class="Ignore">|</span> 给出解释和一个示例。

映射到表达式						<span class="Ignore">*</span><span id="new-map-expression" class="String anchor">new-map-expression</span><span class="Ignore">*</span>
<span class="PreProc">------------</span>

映射的 <span class="Special">{rhs}</span> 参数可以是表达式。这意味着产生的字符可以取决于上下文。例如:<span class="Ignore"> &gt;</span>
<span class="Comment">	:inoremap &lt;expr&gt; . InsertDot()</span>
这里句号并映射到任何 InsertDot() 返回的内容。

这也可用于缩写。详情见 <span class="Ignore">|</span><span class="Identifier">:map-&lt;expr&gt;</span><span class="Ignore">|</span>。

可视和选择模式映射					<span class="Ignore">*</span><span id="new-map-select" class="String anchor">new-map-select</span><span class="Ignore">*</span>
<span class="PreProc">------------------</span>

以前的可视模式映射同时适用于可视和选择模式。使用一点技巧可以使选择模式的映射和
可视模式下的行为相同。

现在加入了分别定义可视和选择模式映射的命令: <span class="Ignore">|</span><span class="Identifier">:xmap</span><span class="Ignore">|</span> 和 <span class="Ignore">|</span><span class="Identifier">:smap</span><span class="Ignore">|</span>，以及配套的
&quot;noremap&quot; 和 &quot;unmap&quot; 命令。

这个改动同样适用于菜单: <span class="Ignore">|</span><span class="Identifier">:xmenu</span><span class="Ignore">|</span>、<span class="Ignore">|</span><span class="Identifier">:smenu</span><span class="Ignore">|</span> 等等。

位置列表						<span class="Ignore">*</span><span id="new-location-list" class="String anchor">new-location-list</span><span class="Ignore">*</span>
<span class="PreProc">--------</span>

加入了每个窗口分别拥有的 quickfix 列表 (称为位置列表) 的支持。位置列表显示在位
置窗口里 (和 quickfix 窗口类似)。你可以打开多于一个位置列表窗口。也加入了一组
和 quickfix 命令类似的命令，用来浏览位置列表。(Yegappan Lakshmanan)

若干新项目						<span class="Ignore">*</span><span id="new-items-7" class="String anchor">new-items-7</span><span class="Ignore">*</span>
<span class="PreProc">----------</span>

<span class="PreProc">普通模式命令:</span><span class="Ignore"> ~</span>

a&quot;、a' 和 a`		选择引号括起的字符串的新文本对象。<span class="Ignore">|</span><a href="#"><span class="Identifier">a'</span></a><span class="Ignore">|</span>
i&quot;、i' 和 i`		(Taro Muraoka)

<span class="Special">CTRL-W</span> <span class="Special">&lt;Enter&gt;</span>		quickfix 窗口里: 打开新窗口，显示光标所在错误的位置。

<span class="Ignore">|</span><a href="motion.html#at"><span class="Identifier">at</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="motion.html#it"><span class="Identifier">it</span></a><span class="Ignore">|</span> 文本对象选择 HTML 或 XML 标签之间的文本块。

<span class="Special">&lt;A-LeftMouse&gt;</span> (<span class="Type">'mousemodel'</span> &quot;popup&quot; 或 &quot;popup-setpos&quot;)
<span class="Special">&lt;A-RightMouse&gt;</span> (<span class="Type">'mousemodel'</span> &quot;extend&quot;)
			进行面向列块的选择。<span class="Ignore">|</span><span class="Identifier">&lt;A-LeftMouse&gt;</span><span class="Ignore">|</span>

gF			开始编辑光标所在的文件名并跳转到文件名后跟随的行号。
			(Yegappan Lakshmanan)

<span class="Special">CTRL-W</span> F		在新窗口里开始编辑光标所在的文件名并跳转到文件名后跟随
			的行号。(Yegappan Lakshmanan)

<span class="PreProc">插入模式命令:</span><span class="Ignore"> ~</span>

<span class="Special">CTRL-\</span> <span class="Special">CTRL-O</span>		执行普通模式命令。类似于 <span class="Special">CTRL-O</span>，但不移动光标。
			<span class="Ignore">|</span><a href="#"><span class="Identifier">i_CTRL-\_CTRL-O</span></a><span class="Ignore">|</span>

<span class="PreProc">选项:</span><span class="Ignore"> ~</span>

<span class="Type">'balloonexpr'</span>		用于计算气泡显示文本的表达式
<span class="Type">'completefunc'</span>		用户指定的插入模式补全使用的函数名。插入模式下用
			<span class="Special">CTRL-X</span> <span class="Special">CTRL-U</span> 可以进行任何形式的补全。(Taro Muraoka)
<span class="Type">'completeopt'</span>		插入模式补全可以使用弹出菜单。
<span class="Type">'cursorcolumn'</span>		高亮光标列
<span class="Type">'cursorline'</span>		高亮光标行
<span class="Type">'formatexpr'</span>		<span class="Ignore">|</span><a href="change.html#gq"><span class="Identifier">gq</span></a><span class="Ignore">|</span> 或插入模式下文本超过 <span class="Type">'textwidth'</span> 以后的文本排版使
			用的表达式。
<span class="Type">'formatlistpat'</span>		排版时识别编号列表的模式。(Hugo Haas 的建议)
<span class="Type">'fsync'</span>			写入文件时是否调用 fsync()。(Ciaran McCreesh)
<span class="Type">'guitablabel'</span>		GUI 标签页标签用于显示文本的表达式
<span class="Type">'guitabtooltip'</span>		GUI 标签页标签用于显示工具提示文本的表达式
<span class="Type">'macatsui'</span>		Mac: 用 ATSUI 文本显示函数
<span class="Type">'maxcombine'</span>		显示的组合用字符的最大数目
<span class="Type">'maxmempattern'</span>		模式匹配使用的最大内存量
<span class="Type">'mkspellmem'</span>		<span class="Ignore">|</span><span class="Identifier">:mkspell</span><span class="Ignore">|</span> 使用内存的相关参数
<span class="Type">'mzquantum'</span>		毫秒计的调度 MzScheme 线程的时间间隔。
<span class="Type">'numberwidth'</span>		<span class="Type">'number'</span> 和 <span class="Type">'relativenumber'</span> 选项使用空间的最小宽度。
			(Emmanuel Renieris)
<span class="Type">'omnifunc'</span>		全能补全使用的函数名。
<span class="Type">'operatorfunc'</span>		<span class="Ignore">|</span><a href="#"><span class="Identifier">g@</span></a><span class="Ignore">|</span> 操作符使用的函数
<span class="Type">'printmbcharset'</span>	:hardcopy 使用的 CJK 字符集
<span class="Type">'printmbfont'</span>		:hardcopy 产生的 CJK 输出使用的字体名
<span class="Type">'pumheight'</span>		弹出菜单显示的最大项目数
<span class="Type">'quoteescape'</span>		字符串内转义引号的字符。用于 a&quot;、a' 和 a` 文本对象。
			<span class="Ignore">|</span><a href="#"><span class="Identifier">a'</span></a><span class="Ignore">|</span>
<span class="Type">'shelltemp'</span>		外壳命令使用临时文件还是管道
<span class="Type">'showtabline'</span>		是否显示标签页行
<span class="Type">'spell'</span>			打开/关闭拼写检查
<span class="Type">'spellcapcheck'</span>		定位句子尾部的模式
<span class="Type">'spellfile'</span>		加入好词和坏词所用的文件
<span class="Type">'spelllang'</span>		拼写检查所用的语言
<span class="Type">'spellsuggest'</span>		拼写建议的方法
<span class="Type">'synmaxcol'</span>		检查语法项目的最大列数；避免长行的重画过慢
<span class="Type">'tabline'</span>		标签页行用于显示文本的表达式
<span class="Type">'tabpagemax'</span>		<span class="Ignore">|</span><span class="Identifier">-p</span><span class="Ignore">|</span> 打开的最大标签页数
<span class="Type">'verbosefile'</span>		记录消息到文件。
<span class="Type">'wildoptions'</span>		&quot;tagfile&quot; 值使 <span class="Special">CTRL-D</span> 命令行补全可以列出匹配标签所在的
			文件名。(基于 Yegappan Lakshmanan 的意见)
<span class="Type">'winfixwidth'</span>		固定宽度的窗口，类似于 <span class="Type">'winfixheight'</span>

<span class="PreProc">Ex 命令:</span><span class="Ignore"> ~</span>

Win32: &quot;:winpos&quot; 命令现在支持控制台版本。(Vipin Aravind)

<span class="Ignore">|</span><span class="Identifier">:startreplace</span><span class="Ignore">|</span>		开始替换模式。(Charles Campbell)
<span class="Ignore">|</span><span class="Identifier">:startgreplace</span><span class="Ignore">|</span> 	开始虚拟替换模式。

<span class="Ignore">|</span><span class="Identifier">:0file</span><span class="Ignore">|</span>		删除缓冲区的名字。(Charles Campbell)

<span class="Ignore">|</span><span class="Identifier">:diffoff</span><span class="Ignore">|</span>		关闭当前窗口或所有窗口的 diff 模式。

<span class="Ignore">|</span><span class="Identifier">:delmarks</span><span class="Ignore">|</span>		删除位置标记。

<span class="Ignore">|</span><span class="Identifier">:exusage</span><span class="Ignore">|</span>		Ex 命令的帮助 (Nvi 命令)。

<span class="Ignore">|</span><span class="Identifier">:viusage</span><span class="Ignore">|</span>		Vi 命令的帮助 (Nvi 命令)。

<span class="Ignore">|</span><span class="Identifier">:sort</span><span class="Ignore">|</span>			给缓冲区的行排序，不依赖外部命令。(部分由 Bryce Wagner
			提供)

<span class="Ignore">|</span><span class="Identifier">:vimgrep</span><span class="Ignore">|</span>		内部 grep 命令，在多个文件中搜索模式。
<span class="Ignore">|</span><span class="Identifier">:vimgrepadd</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:vimgrep</span><span class="Ignore">|</span>，但不建立新列表。

<span class="Ignore">|</span><span class="Identifier">:caddfile</span><span class="Ignore">|</span>		加入错误信息到已存在的 quickfix 列表
			(Yegappan Lakshmanan)。
<span class="Ignore">|</span><span class="Identifier">:cbuffer</span><span class="Ignore">|</span>		读入缓冲区的错误行。(部分由 Yegappan Lakshmanan 提供)
<span class="Ignore">|</span><span class="Identifier">:cgetbuffer</span><span class="Ignore">|</span>		基于缓冲区创建 quickfix 列表，但不跳到第一个错误。
<span class="Ignore">|</span><span class="Identifier">:caddbuffer</span><span class="Ignore">|</span>		从当前缓冲区加入错误到 quickfix 列表。
<span class="Ignore">|</span><span class="Identifier">:cexpr</span><span class="Ignore">|</span>		从 Vim 表达式读入错误信息 (Yegappan Lakshmanan)。
<span class="Ignore">|</span><span class="Identifier">:caddexpr</span><span class="Ignore">|</span>		从 Vim 表达式加入错误信息到已存在的 quickfix 列表
			(Yegappan Lakshmanan)。
<span class="Ignore">|</span><span class="Identifier">:cgetexpr</span><span class="Ignore">|</span>		基于 Vim 表达式创建 quickfix 列表，但不跳到第一个错误
			(Yegappan Lakshmanan)。

<span class="Ignore">|</span><span class="Identifier">:lfile</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cfile</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lgetfile</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cgetfile</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:laddfile</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:caddfile</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lbuffer</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cbuffer</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lgetbuffer</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cgetbuffer</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:laddbuffer</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:caddbuffer</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lexpr</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cexpr</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lgetexpr</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cgetexpr</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:laddexpr</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:caddexpr</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:ll</span><span class="Ignore">|</span>			类似于 <span class="Ignore">|</span><span class="Identifier">:cc</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:llist</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:clist</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lnext</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cnext</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lprevious</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cprevious</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lNext</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cNext</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lfirst</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cfirst</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lrewind</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:crewind</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:llast</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:clast</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lnfile</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cnfile</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lpfile</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cpfile</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lNfile</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cNfile</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lolder</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:colder</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lnewer</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cnewer</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lwindow</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cwindow</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lopen</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:copen</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lclose</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cclose</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lmake</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:make</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lgrep</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:grep</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lgrepadd</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:grepadd</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lvimgrep</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:vimgrep</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lvimgrepadd</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:vimgrepadd</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lhelpgrep</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:helpgrep</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:lcscope</span><span class="Ignore">|</span>		类似于 <span class="Ignore">|</span><span class="Identifier">:cscope</span><span class="Ignore">|</span> 但使用位置列表。
<span class="Ignore">|</span><span class="Identifier">:ltag</span><span class="Ignore">|</span>			跳转到标签，并把匹配的标签加入位置列表。
<span class="Ignore">|</span><span class="Identifier">:undojoin</span><span class="Ignore">|</span>		将下一个改变和上一个撤销块合并。
<span class="Ignore">|</span><span class="Identifier">:undolist</span><span class="Ignore">|</span>		列出撤销树的叶结点。

<span class="Ignore">|</span><span class="Identifier">:earlier</span><span class="Ignore">|</span>		在时间上退到以前的文本改变。
<span class="Ignore">|</span><span class="Identifier">:later</span><span class="Ignore">|</span>		在时间上进到以后的文本改变。

<span class="Ignore">|</span><span class="Identifier">:for</span><span class="Ignore">|</span>			在 <span class="Ignore">|</span><a href="eval.html#List"><span class="Identifier">List</span></a><span class="Ignore">|</span> 上循环。
<span class="Ignore">|</span><span class="Identifier">:endfor</span><span class="Ignore">|</span>

<span class="Ignore">|</span><span class="Identifier">:lockvar</span><span class="Ignore">|</span>		给变量加锁，防止被改变。
<span class="Ignore">|</span><span class="Identifier">:unlockvar</span><span class="Ignore">|</span>		给加锁的变量解锁。

<span class="Ignore">|</span><span class="Identifier">:mkspell</span><span class="Ignore">|</span>		建立 Vim 拼写文件。
<span class="Ignore">|</span><span class="Identifier">:spellgood</span><span class="Ignore">|</span>		增加单词到好词列表。
<span class="Ignore">|</span><span class="Identifier">:spellwrong</span><span class="Ignore">|</span>		增加单词到坏词列表。
<span class="Ignore">|</span><span class="Identifier">:spelldump</span><span class="Ignore">|</span>		转储好词列表。
<span class="Ignore">|</span><span class="Identifier">:spellinfo</span><span class="Ignore">|</span>		显示关于使用的拼写文件的信息。
<span class="Ignore">|</span><span class="Identifier">:spellrepall</span><span class="Ignore">|</span>		为整个缓冲区重复某个拼写校正。
<span class="Ignore">|</span><span class="Identifier">:spellundo</span><span class="Ignore">|</span>		从好词和坏词列表里删除单词。

<span class="Ignore">|</span><span class="Identifier">:mzscheme</span><span class="Ignore">|</span>		执行 MzScheme 命令。
<span class="Ignore">|</span><span class="Identifier">:mzfile</span><span class="Ignore">|</span>		执行 MzScheme 脚本文件。

<span class="Ignore">|</span><span class="Identifier">:nbkey</span><span class="Ignore">|</span>		把键传递给 NetBeans 进行处理。

<span class="Ignore">|</span><span class="Identifier">:profile</span><span class="Ignore">|</span>		用于 Vim 脚本刨视的命令。
<span class="Ignore">|</span><span class="Identifier">:profdel</span><span class="Ignore">|</span>		为指定项目停止刨视。

<span class="Ignore">|</span><span class="Identifier">:smap</span><span class="Ignore">|</span>			选择模式映射。
<span class="Ignore">|</span><span class="Identifier">:smapclear</span><span class="Ignore">|</span>
<span class="Ignore">|</span><span class="Identifier">:snoremap</span><span class="Ignore">|</span>
<span class="Ignore">|</span><span class="Identifier">:sunmap</span><span class="Ignore">|</span>

<span class="Ignore">|</span><span class="Identifier">:xmap</span><span class="Ignore">|</span>			可视模式映射，不用于选择模式。
<span class="Ignore">|</span><span class="Identifier">:xmapclear</span><span class="Ignore">|</span>
<span class="Ignore">|</span><span class="Identifier">:xnoremap</span><span class="Ignore">|</span>
<span class="Ignore">|</span><span class="Identifier">:xunmap</span><span class="Ignore">|</span>

<span class="Ignore">|</span><span class="Identifier">:smenu</span><span class="Ignore">|</span>		选择模式菜单。
<span class="Ignore">|</span><span class="Identifier">:snoremenu</span><span class="Ignore">|</span>
<span class="Ignore">|</span><span class="Identifier">:sunmenu</span><span class="Ignore">|</span>

<span class="Ignore">|</span><span class="Identifier">:xmenu</span><span class="Ignore">|</span>		可视模式菜单，不用于选择模式。
<span class="Ignore">|</span><span class="Identifier">:xnoremenu</span><span class="Ignore">|</span>
<span class="Ignore">|</span><span class="Identifier">:xunmenu</span><span class="Ignore">|</span>

<span class="Ignore">|</span><span class="Identifier">:tabclose</span><span class="Ignore">|</span>		关闭当前标签页。
<span class="Ignore">|</span><span class="Identifier">:tabdo</span><span class="Ignore">|</span>		为每个标签页执行命令。
<span class="Ignore">|</span><span class="Identifier">:tabedit</span><span class="Ignore">|</span>		在新标签页里编辑文件。
<span class="Ignore">|</span><span class="Identifier">:tabnew</span><span class="Ignore">|</span>		打开新标签页。
<span class="Ignore">|</span><span class="Identifier">:tabfind</span><span class="Ignore">|</span>		搜索文件并在新标签页里打开。
<span class="Ignore">|</span><span class="Identifier">:tabnext</span><span class="Ignore">|</span>		转到下一个标签页。
<span class="Ignore">|</span><span class="Identifier">:tabprevious</span><span class="Ignore">|</span>		转到前一个标签页。
<span class="Ignore">|</span><span class="Identifier">:tabNext</span><span class="Ignore">|</span>		转到前一个标签页。
<span class="Ignore">|</span><span class="Identifier">:tabfirst</span><span class="Ignore">|</span>		转到第一个标签页。
<span class="Ignore">|</span><span class="Identifier">:tabrewind</span><span class="Ignore">|</span>		转到第一个标签页。
<span class="Ignore">|</span><span class="Identifier">:tablast</span><span class="Ignore">|</span>		转到最后一个标签页。
<span class="Ignore">|</span><span class="Identifier">:tabmove</span><span class="Ignore">|</span>		把当前标签页移到别处。
<span class="Ignore">|</span><span class="Identifier">:tabonly</span><span class="Ignore">|</span>		关闭所有其它标签页。
<span class="Ignore">|</span><span class="Identifier">:tabs</span><span class="Ignore">|</span>			列出标签页和它们包含的窗口。

<span class="PreProc">Ex 命令修饰符:</span><span class="Ignore"> ~</span>

<span class="Ignore">|</span><span class="Identifier">:keepalt</span><span class="Ignore">|</span>		不改变轮换文件。

<span class="Ignore">|</span><span class="Identifier">:noautocmd</span><span class="Ignore">|</span>		不激活自动命令。

<span class="Ignore">|</span><span class="Identifier">:sandbox</span><span class="Ignore">|</span>		在沙盘里执行命令。

<span class="Ignore">|</span><span class="Identifier">:tab</span><span class="Ignore">|</span>			打开新窗口时，同时建立新标签页。

<span class="PreProc">Ex 命令参数:</span><span class="Ignore"> ~</span>

<span class="Ignore">|</span><span class="Identifier">++bad</span><span class="Ignore">|</span>			指定出现不能转换的字符或者非法字节时的行为。(代码示例
			由 Yasuhiro Matsumoto 提供)
			另外，如果出现转换错误或者发现非法字节，错误信息里包含
			行号。

<span class="PreProc">新出现和经过扩充的函数:</span><span class="Ignore"> ~</span>

<span class="Ignore">|</span><a href="#"><span class="Identifier">add()</span></a><span class="Ignore">|</span>			在列表后附加项目
<span class="Ignore">|</span><a href="#"><span class="Identifier">append()</span></a><span class="Ignore">|</span>		附加行列表到缓冲区
<span class="Ignore">|</span><a href="#"><span class="Identifier">argv()</span></a><span class="Ignore">|</span>		没有参数返回整个参数列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">browsedir()</span></a><span class="Ignore">|</span>		选择目录的对话框
<span class="Ignore">|</span><a href="#"><span class="Identifier">bufnr()</span></a><span class="Ignore">|</span>		接受额外参数: 建立缓冲区
<span class="Ignore">|</span><a href="#"><span class="Identifier">byteidx()</span></a><span class="Ignore">|</span>		字符的位置 (Ilya Sher)
<span class="Ignore">|</span><a href="#"><span class="Identifier">call()</span></a><span class="Ignore">|</span>		调用函数，参数以列表出现
<span class="Ignore">|</span><a href="#"><span class="Identifier">changenr()</span></a><span class="Ignore">|</span>		当前改变号
<span class="Ignore">|</span><a href="#"><span class="Identifier">complete()</span></a><span class="Ignore">|</span>		设定插入模式补全的匹配
<span class="Ignore">|</span><a href="#"><span class="Identifier">complete_add()</span></a><span class="Ignore">|</span>	加入用于 <span class="Type">'completefunc'</span> 的匹配
<span class="Ignore">|</span><a href="#"><span class="Identifier">complete_check()</span></a><span class="Ignore">|</span>	检察键击，用于 <span class="Type">'completefunc'</span>
<span class="Ignore">|</span><a href="#"><span class="Identifier">copy()</span></a><span class="Ignore">|</span>		建立列表或字典的浅备份
<span class="Ignore">|</span><a href="#"><span class="Identifier">count()</span></a><span class="Ignore">|</span>		计算列表或字典里某值的出现次数
<span class="Ignore">|</span><a href="#"><span class="Identifier">cursor()</span></a><span class="Ignore">|</span>		也接受 <span class="Type">'virtualedit'</span> 的偏移，而第一个参数可以是列表:
			[lnum, col, off]
<span class="Ignore">|</span><a href="#"><span class="Identifier">deepcopy()</span></a><span class="Ignore">|</span>		建立列表或字典的完整备份
<span class="Ignore">|</span><a href="#"><span class="Identifier">diff_filler()</span></a><span class="Ignore">|</span>		得到行 <span class="Special">{lnum}</span> 上方填充行的数目。
<span class="Ignore">|</span><a href="#"><span class="Identifier">diff_hlID()</span></a><span class="Ignore">|</span>		得到 diff 模式高亮标识号
<span class="Ignore">|</span><a href="#"><span class="Identifier">empty()</span></a><span class="Ignore">|</span>		检查列表或字典是否为空
<span class="Ignore">|</span><a href="#"><span class="Identifier">eval()</span></a><span class="Ignore">|</span>		计算 <span class="Special">{string}</span> 并返回其结果
<span class="Ignore">|</span><a href="#"><span class="Identifier">extend()</span></a><span class="Ignore">|</span>		为列表/字典附加另一个列表/字典
<span class="Ignore">|</span><a href="#"><span class="Identifier">feedkeys()</span></a><span class="Ignore">|</span>		把若干字符放入预输入缓冲区
<span class="Ignore">|</span><a href="#"><span class="Identifier">filter()</span></a><span class="Ignore">|</span>		删除列表/字典的选定项目
<span class="Ignore">|</span><a href="#"><span class="Identifier">finddir()</span></a><span class="Ignore">|</span>		寻找 <span class="Type">'path'</span> 里的目录
<span class="Ignore">|</span><a href="#"><span class="Identifier">findfile()</span></a><span class="Ignore">|</span>		寻找 <span class="Type">'path'</span> 里的文件 (Johannes Zellner)
<span class="Ignore">|</span><a href="#"><span class="Identifier">foldtextresult()</span></a><span class="Ignore">|</span>	行 &quot;lnum&quot; 所在关闭折叠的显示用文本
<span class="Ignore">|</span><a href="#"><span class="Identifier">function()</span></a><span class="Ignore">|</span>		得到函数名对应的函数引用
<span class="Ignore">|</span><a href="#"><span class="Identifier">garbagecollect()</span></a><span class="Ignore">|</span>	清理只含循环引用的 <span class="Ignore">|</span><a href="eval.html#Lists"><span class="Identifier">Lists</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="eval.html#Dictionaries"><span class="Identifier">Dictionaries</span></a><span class="Ignore">|</span>
<span class="Ignore">|</span><a href="#"><span class="Identifier">get()</span></a><span class="Ignore">|</span>			得到列表/字典的项目
<span class="Ignore">|</span><a href="#"><span class="Identifier">getbufline()</span></a><span class="Ignore">|</span>		得到指定缓冲区的行列表 (Yegappan Lakshmanan)
<span class="Ignore">|</span><a href="#"><span class="Identifier">getcmdtype()</span></a><span class="Ignore">|</span>		得到当前命令行的类型 (Yegappan Lakshmanan)
<span class="Ignore">|</span><a href="#"><span class="Identifier">getfontname()</span></a><span class="Ignore">|</span>		得到当前使用的字体名
<span class="Ignore">|</span><a href="#"><span class="Identifier">getfperm()</span></a><span class="Ignore">|</span>		得到文件权限字符串 (Nikolai Weibull)
<span class="Ignore">|</span><a href="#"><span class="Identifier">getftype()</span></a><span class="Ignore">|</span>		得到文件类型 (Nikolai Weibull)
<span class="Ignore">|</span><a href="#"><span class="Identifier">getline()</span></a><span class="Ignore">|</span>		带第二个参数: 得到缓冲区行列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">getloclist()</span></a><span class="Ignore">|</span>		位置列表项目的列表 (Yegappan Lakshmanan)
<span class="Ignore">|</span><a href="#"><span class="Identifier">getpos()</span></a><span class="Ignore">|</span>		得到光标、位置标记等的位置的列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">getqflist()</span></a><span class="Ignore">|</span>		quickfix 错误的列表 (Yegappan Lakshmanan)
<span class="Ignore">|</span><a href="#"><span class="Identifier">getreg()</span></a><span class="Ignore">|</span>		取得寄存器内容
<span class="Ignore">|</span><a href="#"><span class="Identifier">gettabwinvar()</span></a><span class="Ignore">|</span>	取得指定标签页的窗口变量。
<span class="Ignore">|</span><a href="#"><span class="Identifier">has_key()</span></a><span class="Ignore">|</span>		检查某键是否出现在字典里
<span class="Ignore">|</span><a href="#"><span class="Identifier">haslocaldir()</span></a><span class="Ignore">|</span>		检查当前窗口是否使用过 <span class="Ignore">|</span><span class="Identifier">:lcd</span><span class="Ignore">|</span>
<span class="Ignore">|</span><a href="#"><span class="Identifier">hasmapto()</span></a><span class="Ignore">|</span>		检查到字符串的映射是否存在
<span class="Ignore">|</span><a href="#"><span class="Identifier">index()</span></a><span class="Ignore">|</span>		列表中某值的索引
<span class="Ignore">|</span><a href="#"><span class="Identifier">inputlist()</span></a><span class="Ignore">|</span>		提示用户从列表选择一项
<span class="Ignore">|</span><a href="#"><span class="Identifier">insert()</span></a><span class="Ignore">|</span>		在列表某处插入一个项目
<span class="Ignore">|</span><a href="#"><span class="Identifier">islocked()</span></a><span class="Ignore">|</span>		检查变量是否加锁
<span class="Ignore">|</span><a href="#"><span class="Identifier">items()</span></a><span class="Ignore">|</span>		得到字典的键-值组对的列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">join()</span></a><span class="Ignore">|</span>		合并列表项目成为字符串
<span class="Ignore">|</span><a href="#"><span class="Identifier">keys()</span></a><span class="Ignore">|</span>		得到字典的键列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">len()</span></a><span class="Ignore">|</span>			列表或字典项目的总数
<span class="Ignore">|</span><a href="#"><span class="Identifier">map()</span></a><span class="Ignore">|</span>			改变每个列表或字典项目
<span class="Ignore">|</span><a href="#"><span class="Identifier">maparg()</span></a><span class="Ignore">|</span>		额外参数: 使用缩写
<span class="Ignore">|</span><a href="#"><span class="Identifier">mapcheck()</span></a><span class="Ignore">|</span>		额外参数: 使用缩写
<span class="Ignore">|</span><a href="#"><span class="Identifier">match()</span></a><span class="Ignore">|</span>		额外参数: 计数
<span class="Ignore">|</span><a href="#"><span class="Identifier">matcharg()</span></a><span class="Ignore">|</span>		返回 <span class="Ignore">|</span><span class="Identifier">:match</span><span class="Ignore">|</span> 命令的参数
<span class="Ignore">|</span><a href="#"><span class="Identifier">matchend()</span></a><span class="Ignore">|</span>		额外参数: 计数
<span class="Ignore">|</span><a href="#"><span class="Identifier">matchlist()</span></a><span class="Ignore">|</span>		字符串对模式的匹配和子匹配列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">matchstr()</span></a><span class="Ignore">|</span>		额外参数: 计数
<span class="Ignore">|</span><a href="#"><span class="Identifier">max()</span></a><span class="Ignore">|</span>			列表或字典项目的最大值
<span class="Ignore">|</span><a href="#"><span class="Identifier">min()</span></a><span class="Ignore">|</span>			列表或字典项目的最小值
<span class="Ignore">|</span><a href="#"><span class="Identifier">mkdir()</span></a><span class="Ignore">|</span>		建立目录
<span class="Ignore">|</span><a href="#"><span class="Identifier">pathshorten()</span></a><span class="Ignore">|</span>		把目录名简化到一个字符
<span class="Ignore">|</span><a href="#"><span class="Identifier">printf()</span></a><span class="Ignore">|</span>		格式化文本
<span class="Ignore">|</span><a href="#"><span class="Identifier">pumvisible()</span></a><span class="Ignore">|</span>		检查弹出菜单是否显示
<span class="Ignore">|</span><a href="#"><span class="Identifier">range()</span></a><span class="Ignore">|</span>		产生数字序列的列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">readfile()</span></a><span class="Ignore">|</span>		读入文件到一个行列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">reltime()</span></a><span class="Ignore">|</span>		得到时间值，可能是相对的
<span class="Ignore">|</span><a href="#"><span class="Identifier">reltimestr()</span></a><span class="Ignore">|</span>		把时间值转换为字符串
<span class="Ignore">|</span><a href="#"><span class="Identifier">remove()</span></a><span class="Ignore">|</span>		删除列表或字典里一或多个项目
<span class="Ignore">|</span><a href="#"><span class="Identifier">repeat()</span></a><span class="Ignore">|</span>		重复 &quot;expr&quot; &quot;count&quot; 次 (Christophe Poucet)
<span class="Ignore">|</span><a href="#"><span class="Identifier">reverse()</span></a><span class="Ignore">|</span>		反转列表项目的顺序
<span class="Ignore">|</span><a href="#"><span class="Identifier">search()</span></a><span class="Ignore">|</span>		额外参数:
<span class="Ignore">|</span><a href="#"><span class="Identifier">searchdecl()</span></a><span class="Ignore">|</span>		查找变量的声明
<span class="Ignore">|</span><a href="#"><span class="Identifier">searchpair()</span></a><span class="Ignore">|</span>		额外参数: 停止搜索的行
<span class="Ignore">|</span><a href="#"><span class="Identifier">searchpairpos()</span></a><span class="Ignore">|</span>	返回匹配位置的列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">searchpos()</span></a><span class="Ignore">|</span>		返回匹配位置的列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">setloclist()</span></a><span class="Ignore">|</span>		修改位置列表 (Yegappan Lakshmanan)
<span class="Ignore">|</span><a href="#"><span class="Identifier">setpos()</span></a><span class="Ignore">|</span>		设置光标或位置标记到某位置
<span class="Ignore">|</span><a href="#"><span class="Identifier">setqflist()</span></a><span class="Ignore">|</span>		修改 quickfix 列表 (Yegappan Lakshmanan)
<span class="Ignore">|</span><a href="#"><span class="Identifier">settabwinvar()</span></a><span class="Ignore">|</span>	设置指定标签页的窗口变量
<span class="Ignore">|</span><a href="#"><span class="Identifier">sort()</span></a><span class="Ignore">|</span>		给列表排序
<span class="Ignore">|</span><a href="#"><span class="Identifier">soundfold()</span></a><span class="Ignore">|</span>		返回 &quot;发音相似&quot; 的单词等价形式
<span class="Ignore">|</span><a href="#"><span class="Identifier">spellbadword()</span></a><span class="Ignore">|</span>	返回错误拼写的单词
<span class="Ignore">|</span><a href="#"><span class="Identifier">spellsuggest()</span></a><span class="Ignore">|</span>	返回建议的拼写校正列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">split()</span></a><span class="Ignore">|</span>		分割字符串成为列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">str2nr()</span></a><span class="Ignore">|</span>		把字符串转换为 2、8、10、16 进制的数值
<span class="Ignore">|</span><a href="#"><span class="Identifier">stridx()</span></a><span class="Ignore">|</span>		额外参数: 开始位置
<span class="Ignore">|</span><a href="#"><span class="Identifier">strridx()</span></a><span class="Ignore">|</span>		额外参数: 开始位置
<span class="Ignore">|</span><a href="#"><span class="Identifier">string()</span></a><span class="Ignore">|</span>		列表或字典的字符串表示形式
<span class="Ignore">|</span><a href="#"><span class="Identifier">system()</span></a><span class="Ignore">|</span>		额外参数: 用外壳命令过滤 <span class="Special">{input}</span>
<span class="Ignore">|</span><a href="#"><span class="Identifier">tabpagebuflist()</span></a><span class="Ignore">|</span>	得到标签页里的缓冲区列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">tabpagenr()</span></a><span class="Ignore">|</span>		得到当前或最后一个标签页号
<span class="Ignore">|</span><a href="#"><span class="Identifier">tabpagewinnr()</span></a><span class="Ignore">|</span>	得到标签页里的窗口号
<span class="Ignore">|</span><a href="#"><span class="Identifier">tagfiles()</span></a><span class="Ignore">|</span>		标签文件名的列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">taglist()</span></a><span class="Ignore">|</span>		得到匹配标签的列表 (Yegappan Lakshmanan)
<span class="Ignore">|</span><a href="#"><span class="Identifier">tr()</span></a><span class="Ignore">|</span>			翻译字符 (Ron Aaron)
<span class="Ignore">|</span><a href="#"><span class="Identifier">uniq()</span></a><span class="Ignore">|</span>		删除重复相邻列表项目的多余备份
<span class="Ignore">|</span><a href="#"><span class="Identifier">values()</span></a><span class="Ignore">|</span>		得到列表或字典的值列表
<span class="Ignore">|</span><a href="#"><span class="Identifier">winnr()</span></a><span class="Ignore">|</span>		接受参数: 使用哪个窗口
<span class="Ignore">|</span><a href="#"><span class="Identifier">winrestview()</span></a><span class="Ignore">|</span>		恢复当前窗口的视图
<span class="Ignore">|</span><a href="#"><span class="Identifier">winsaveview()</span></a><span class="Ignore">|</span>		保存当前窗口的视图
<span class="Ignore">|</span><a href="#"><span class="Identifier">writefile()</span></a><span class="Ignore">|</span>		把一个行列表写到文件里

用户定义的函数现在可以从 <span class="Type">'runtimepath'</span> 里的 &quot;autoload&quot; 目录自动载入。见
<span class="Ignore">|</span><a href="eval.html#autoload-functions"><span class="Identifier">autoload-functions</span></a><span class="Ignore">|</span>。

<span class="PreProc">新 Vim 变量:</span><span class="Ignore"> ~</span>

<span class="Ignore">|</span><a href="#"><span class="Identifier">v:insertmode</span></a><span class="Ignore">|</span>		用于 <span class="Ignore">|</span><a href="autocmd.html#InsertEnter"><span class="Identifier">InsertEnter</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="autocmd.html#InsertChange"><span class="Identifier">InsertChange</span></a><span class="Ignore">|</span> 自动命令
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:val</span></a><span class="Ignore">|</span>			<span class="Ignore">|</span><a href="#"><span class="Identifier">map()</span></a><span class="Ignore">|</span> 或 <span class="Ignore">|</span><a href="#"><span class="Identifier">filter()</span></a><span class="Ignore">|</span> 函数的项目值
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:key</span></a><span class="Ignore">|</span>			<span class="Ignore">|</span><a href="#"><span class="Identifier">map()</span></a><span class="Ignore">|</span> 或 <span class="Ignore">|</span><a href="#"><span class="Identifier">filter()</span></a><span class="Ignore">|</span> 函数的项目键
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:profiling</span></a><span class="Ignore">|</span>		&quot;:profile start&quot; 命令之后非零
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:fcs_reason</span></a><span class="Ignore">|</span>		激活 <span class="Ignore">|</span><a href="autocmd.html#FileChangedShell"><span class="Identifier">FileChangedShell</span></a><span class="Ignore">|</span> 的原因
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:fcs_choice</span></a><span class="Ignore">|</span>		<span class="Ignore">|</span><a href="autocmd.html#FileChangedShell"><span class="Identifier">FileChangedShell</span></a><span class="Ignore">|</span> 之后应该做什么
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:beval_bufnr</span></a><span class="Ignore">|</span>		<span class="Type">'balloonexpr'</span> 的缓冲区号
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:beval_winnr</span></a><span class="Ignore">|</span>		<span class="Type">'balloonexpr'</span> 的窗口号
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:beval_lnum</span></a><span class="Ignore">|</span>		<span class="Type">'balloonexpr'</span> 的行号
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:beval_col</span></a><span class="Ignore">|</span>		<span class="Type">'balloonexpr'</span> 的列号
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:beval_text</span></a><span class="Ignore">|</span>		<span class="Type">'balloonexpr'</span> 鼠标指针所在的文本
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:scrollstart</span></a><span class="Ignore">|</span>		屏幕上滚的原因
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:swapname</span></a><span class="Ignore">|</span>		<span class="Ignore">|</span><a href="autocmd.html#SwapExists"><span class="Identifier">SwapExists</span></a><span class="Ignore">|</span> 事件所用的交换文件名
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:swapchoice</span></a><span class="Ignore">|</span>		交换文件存在时应该做什么
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:swapcommand</span></a><span class="Ignore">|</span>		处理 <span class="Ignore">|</span><a href="autocmd.html#SwapExists"><span class="Identifier">SwapExists</span></a><span class="Ignore">|</span> 后应该执行的命令
<span class="Ignore">|</span><a href="#"><span class="Identifier">v:char</span></a><span class="Ignore">|</span>		执行 <span class="Type">'formatexpr'</span> 时的参数

<span class="PreProc">新自动命令事件:</span><span class="Ignore"> ~</span>

<span class="Ignore">|</span><a href="autocmd.html#ColorScheme"><span class="Identifier">ColorScheme</span></a><span class="Ignore">|</span>		载入色彩方案后

<span class="Ignore">|</span><a href="autocmd.html#CursorHoldI"><span class="Identifier">CursorHoldI</span></a><span class="Ignore">|</span>		在插入模式下，用户有一段时间没有按键
<span class="Ignore">|</span><a href="autocmd.html#CursorMoved"><span class="Identifier">CursorMoved</span></a><span class="Ignore">|</span>		普通模式下移动了光标
<span class="Ignore">|</span><a href="autocmd.html#CursorMovedI"><span class="Identifier">CursorMovedI</span></a><span class="Ignore">|</span>		插入模式下移动了光标

<span class="Ignore">|</span><a href="autocmd.html#FileChangedShellPost"><span class="Identifier">FileChangedShellPost</span></a><span class="Ignore">|</span>	对在 Vim 外部改变的文件的处理完成后

<span class="Ignore">|</span><a href="autocmd.html#InsertEnter"><span class="Identifier">InsertEnter</span></a><span class="Ignore">|</span>		开始插入或替换模式时
<span class="Ignore">|</span><a href="autocmd.html#InsertChange"><span class="Identifier">InsertChange</span></a><span class="Ignore">|</span>		出入插入或替换模式时
<span class="Ignore">|</span><a href="autocmd.html#InsertLeave"><span class="Identifier">InsertLeave</span></a><span class="Ignore">|</span>		离开插入或替换模式时

<span class="Ignore">|</span><a href="autocmd.html#MenuPopup"><span class="Identifier">MenuPopup</span></a><span class="Ignore">|</span>		刚要显示弹出菜单前

<span class="Ignore">|</span><a href="autocmd.html#QuickFixCmdPre"><span class="Identifier">QuickFixCmdPre</span></a><span class="Ignore">|</span>	执行 :make、:grep 等命令前 (Ciaran McCreesh)
<span class="Ignore">|</span><a href="autocmd.html#QuickFixCmdPost"><span class="Identifier">QuickFixCmdPost</span></a><span class="Ignore">|</span>	执行 :make、:grep 等命令后 (Ciaran McCreesh)

<span class="Ignore">|</span><a href="autocmd.html#SessionLoadPost"><span class="Identifier">SessionLoadPost</span></a><span class="Ignore">|</span>	载入会话文件后。(Yegappan Lakshmanan)

<span class="Ignore">|</span><a href="autocmd.html#ShellCmdPost"><span class="Identifier">ShellCmdPost</span></a><span class="Ignore">|</span>		执行外壳命令后
<span class="Ignore">|</span><a href="autocmd.html#ShellFilterPost"><span class="Identifier">ShellFilterPost</span></a><span class="Ignore">|</span>	用外壳命令执行完过滤后

<span class="Ignore">|</span><a href="autocmd.html#SourcePre"><span class="Identifier">SourcePre</span></a><span class="Ignore">|</span>		执行 Vim 脚本之前

<span class="Ignore">|</span><a href="autocmd.html#SpellFileMissing"><span class="Identifier">SpellFileMissing</span></a><span class="Ignore">|</span>	使用不存在的拼写文件

<span class="Ignore">|</span><a href="autocmd.html#SwapExists"><span class="Identifier">SwapExists</span></a><span class="Ignore">|</span>		编辑文件时检测到交换文件已经存在

<span class="Ignore">|</span><a href="autocmd.html#TabEnter"><span class="Identifier">TabEnter</span></a><span class="Ignore">|</span>		刚进入标签页后
<span class="Ignore">|</span><a href="autocmd.html#TabLeave"><span class="Identifier">TabLeave</span></a><span class="Ignore">|</span>		刚离开标签页前

<span class="Ignore">|</span><a href="autocmd.html#VimResized"><span class="Identifier">VimResized</span></a><span class="Ignore">|</span>		Vim 窗口大小改变后 (Yakov Lerner)

<span class="PreProc">新高亮组:</span><span class="Ignore"> ~</span>

Pmenu			弹出菜单: 普通项目 <span class="Ignore">|</span><a href="syntax.html#hl-Pmenu"><span class="Identifier">hl-Pmenu</span></a><span class="Ignore">|</span>
PmenuSel		弹出菜单: 选中项目 <span class="Ignore">|</span><a href="syntax.html#hl-PmenuSel"><span class="Identifier">hl-PmenuSel</span></a><span class="Ignore">|</span>
PmenuThumb		弹出菜单: 滚动条 <span class="Ignore">|</span><a href="syntax.html#hl-PmenuThumb"><span class="Identifier">hl-PmenuThumb</span></a><span class="Ignore">|</span>
PmenuSbar		弹出菜单: 滚动条的拇指 <span class="Ignore">|</span><a href="syntax.html#hl-PmenuSbar"><span class="Identifier">hl-PmenuSbar</span></a><span class="Ignore">|</span>

TabLine			标签页行，非活动标签页标签 <span class="Ignore">|</span><a href="syntax.html#hl-TabLine"><span class="Identifier">hl-TabLine</span></a><span class="Ignore">|</span>
TabLineSel		标签页行，活动标签页标签 <span class="Ignore">|</span><a href="syntax.html#hl-TabLineSel"><span class="Identifier">hl-TabLineSel</span></a><span class="Ignore">|</span>
TabLineFill		标签页行，没有标签的地方 <span class="Ignore">|</span><a href="syntax.html#hl-TabLineFill"><span class="Identifier">hl-TabLineFill</span></a><span class="Ignore">|</span>

SpellBad		拼写错误的单词 <span class="Ignore">|</span><a href="syntax.html#hl-SpellBad"><span class="Identifier">hl-SpellBad</span></a><span class="Ignore">|</span>
SpellCap		大小写错误的单词 <span class="Ignore">|</span><a href="syntax.html#hl-SpellCap"><span class="Identifier">hl-SpellCap</span></a><span class="Ignore">|</span>
SpellRare		偏僻词 <span class="Ignore">|</span><a href="syntax.html#hl-SpellRare"><span class="Identifier">hl-SpellRare</span></a><span class="Ignore">|</span>
SpellLocal		只存在于别的区域的单词 <span class="Ignore">|</span><a href="syntax.html#hl-SpellLocal"><span class="Identifier">hl-SpellLocal</span></a><span class="Ignore">|</span>

CursorColumn		<span class="Type">'cursorcolumn'</span> <span class="Ignore">|</span><a href="syntax.html#hl-CursorColumn"><span class="Identifier">hl-CursorColumn</span></a><span class="Ignore">|</span>
CursorLine		<span class="Type">'cursorline'</span> <span class="Ignore">|</span><a href="syntax.html#hl-CursorLine"><span class="Identifier">hl-CursorLine</span></a><span class="Ignore">|</span>

MatchParen		匹配的括号 <span class="Ignore">|</span><a href="pi_paren.html#pi_paren.txt"><span class="Identifier">pi_paren.txt</span></a><span class="Ignore">|</span> <span class="Ignore">|</span><a href="syntax.html#hl-MatchParen"><span class="Identifier">hl-MatchParen</span></a><span class="Ignore">|</span>

<span class="PreProc">搜索模式里的新项目:</span><span class="Ignore"> ~</span>
<span class="Ignore">|</span><span class="Identifier">/\%d</span><span class="Ignore">|</span> \%d123		匹配十进制指定的字符
<span class="Ignore">|</span><span class="Identifier">/\]</span><span class="Ignore">|</span>  [\d123]		同上，用于字符类
<span class="Ignore">|</span><span class="Identifier">/\%o</span><span class="Ignore">|</span> \%o103		匹配八进制指定的字符
<span class="Ignore">|</span><span class="Identifier">/\]</span><span class="Ignore">|</span>  [\o1o3]		同上，用于字符类
<span class="Ignore">|</span><span class="Identifier">/\%x</span><span class="Ignore">|</span> \%x1a		匹配两位十六进制指定的字符
<span class="Ignore">|</span><span class="Identifier">/\]</span><span class="Ignore">|</span>  [\x1a]		同上，用于字符类
<span class="Ignore">|</span><span class="Identifier">/\%u</span><span class="Ignore">|</span> \%u12ab		匹配四位十六进制指定的字符
<span class="Ignore">|</span><span class="Identifier">/\]</span><span class="Ignore">|</span>  [\u12ab]		同上，用于字符类
<span class="Ignore">|</span><span class="Identifier">/\%U</span><span class="Ignore">|</span> \%U1234abcd	匹配八位十六进制指定的字符
<span class="Ignore">|</span><span class="Identifier">/\]</span><span class="Ignore">|</span>  [\U1234abcd]	同上，用于字符类
			    (以上部分由 Ciaran McCreesh 提供)

<span class="Ignore">|</span><span class="Identifier">/[[=</span><span class="Ignore">|</span> [[=a=]]		等价类 (只用于 latin1 字符)
<span class="Ignore">|</span><span class="Identifier">/[[.</span><span class="Ignore">|</span> [[.a.]]		排序规则元素 (只能使用单个字符)

<span class="Ignore">|</span><span class="Identifier">/\%'m</span><span class="Ignore">|</span>  \%'m		在位置标记 m 处匹配
<span class="Ignore">|</span><span class="Identifier">/\%&lt;'m</span><span class="Ignore">|</span> \%&lt;'m		在位置标记 m 之前匹配
<span class="Ignore">|</span><span class="Identifier">/\%&gt;'m</span><span class="Ignore">|</span> \%&gt;'m		在位置标记 m 之后匹配
<span class="Ignore">|</span><span class="Identifier">/\%V</span><span class="Ignore">|</span>   \%V		在可视区域内匹配

如有空匹配，嵌套的 <span class="Ignore">|</span><span class="Identifier">/multi</span><span class="Ignore">|</span> 项目不再是错误。

现在可用 \<span class="Special">{0}</span>，匹配前导的匹配原零次。没有用处，只为兼容性而设置。

<span class="PreProc">新语法/缩进/文件类型插件文件:</span><span class="Ignore"> ~</span>

所有缩进设置都从文件类型插件移到了缩进文件。
实现 b:undo_indent 在 <span class="Type">'filetype'</span> 设为其它值时撤销缩进设置。

a2ps 语法和文件类型插件文件。(Nikolai Weibull)
ABAB/4 语法文件。(Marius van Wyk)
alsaconf 文件类型插件文件。(Nikolai Weibull)
AppendMatchGroup 文件类型插件文件。(Dave Silvia)
arch 文件类型插件文件。(Nikolai Weibull)
asterisk 和 asteriskvm 语法文件。(Tilghman Lesher)
BDF 文件类型插件文件。(Nikolai Weibull)
BibTeX 缩进文件。(Dorai Sitaram)
BibTeX Bibliography Style 语法文件。(Tim Pope)
BTM 文件类型插件文件。(Bram Moolenaar)
calendar 文件类型插件文件。(Nikolai Weibull)
Changelog 缩进文件。(Nikolai Weibull)
ChordPro 语法文件。(Niels Bo Andersen)
Cmake 缩进和语法文件。(Andy Cedilnik)
conf 文件类型插件文件。(Nikolai Weibull)
context 语法和文件类型插件文件。(Nikolai Weibull)
CRM114 文件类型插件文件。(Nikolai Weibull)
cvs RC 文件类型插件文件。(Nikolai Weibull)
D 缩进文件。(Jason Mills)
Debian Sources.list 语法文件。(Matthijs Mohlmann)
dictconf 和 dictdconf 语法、缩进和文件类型插件文件。(Nikolai Weibull)
diff 文件类型插件文件。(Bram Moolenaar)
dircolors 文件类型插件文件。(Nikolai Weibull)
django 和 htmldjango 语法文件。(Dave Hodder)
doxygen 语法文件。(Michael Geddes)
elinks 文件类型插件文件。(Nikolai Weibull)
eterm 文件类型插件文件。(Nikolai Weibull)
eviews 语法文件。(Vaidotas Zemlys)
fetchmail RC 文件类型插件文件。(Nikolai Weibull)
FlexWiki 语法和文件类型插件文件。(George Reilly)
Generic 缩进文件。(Dave Silvia)
gpg 文件类型插件文件。(Nikolai Weibull)
gretl 语法文件。(Vaidotas Zemlys)
groovy 语法文件。(Alessio Pace)
group 语法和文件类型插件文件。(Nikolai Weibull)
grub 文件类型插件文件。(Nikolai Weibull)
Haskell 文件类型插件文件。(Nikolai Weibull)
help 文件类型插件文件。(Nikolai Weibull)
indent 文件类型插件文件。(Nikolai Weibull)
Javascript 文件类型插件文件。(Bram Moolenaar)
Kconfig 文件类型插件和语法文件。(Nikolai Weibull)
ld 语法、缩进和文件类型插件文件。(Nikolai Weibull)
lftp 文件类型插件文件。(Nikolai Weibull)
libao config 文件类型插件文件。(Nikolai Weibull)
limits 语法和文件类型插件文件。(Nikolai Weibull)
Lisp 缩进文件。(Sergey Khorev)
loginaccess 和 logindefs 语法和文件类型插件文件。(Nikolai Weibull)
m4 文件类型插件文件。(Nikolai Weibull)
mailaliases 语法文件。(Nikolai Weibull)
mailcap 文件类型插件文件。(Nikolai Weibull)
manconf 语法和文件类型插件文件。(Nikolai Weibull)
matlab 文件类型插件文件。(Jake Wasserman)
Maxima 语法文件。(Robert Dodier)
MGL 语法文件。(Gero Kuhlmann)
modconf 文件类型插件文件。(Nikolai Weibull)
mplayer config 文件类型插件文件。(Nikolai Weibull)
Mrxvtrc 语法和文件类型插件文件。(Gautam Iyer)
MuPAD source 语法、缩进和文件类型插件。(Dave Silvia)
mutt RC 文件类型插件文件。(Nikolai Weibull)
nanorc 语法和文件类型插件文件。(Nikolai Weibull)
netrc 文件类型插件文件。(Nikolai Weibull)
pamconf 语法和文件类型插件文件。(Nikolai Weibull)
Pascal 缩进文件。(Neil Carter)
passwd 语法和文件类型插件文件。(Nikolai Weibull)
PHP 编译器插件。(Doug Kearns)
pinfo 文件类型插件文件。(Nikolai Weibull)
plaintex 语法和文件类型插件文件。(Nikolai Weibull，Benji Fisher)
procmail 文件类型插件文件。(Nikolai Weibull)
prolog 文件类型插件文件。(Nikolai Weibull)
protocols 语法和文件类型插件文件。(Nikolai Weibull)
quake 文件类型插件文件。(Nikolai Weibull)
racc 语法和文件类型插件文件。(Nikolai Weibull)
readline 文件类型插件文件。(Nikolai Weibull)
rhelp 语法文件。(Johannes Ranke)
rnoweb 语法文件。(Johannes Ranke)
Relax NG compact 文件类型插件文件。(Nikolai Weibull)
Scheme 缩进文件。(Sergey Khorev)
screen 文件类型插件文件。(Nikolai Weibull)
sensors 语法和文件类型插件文件。(Nikolai Weibull)
services 语法和文件类型插件文件。(Nikolai Weibull)
setserial 语法和文件类型插件文件。(Nikolai Weibull)
sieve 语法和文件类型插件文件。(Nikolai Weibull)
SiSU 语法文件。(Ralph Amissah)
Sive 语法文件。(Nikolai Weibull)
slp config、reg 和 spi 语法和文件类型插件文件。(Nikolai Weibull)
SML 缩进文件。(Saikat Guha)
SQL anywhere 语法和缩进文件。(David Fishburn)
SQL 缩进文件。
SQL-Informix 语法文件。(Dean L Hill)
SQL: 处理各种不同的变种。(David Fishburn)
sshconfig 文件类型插件文件。(Nikolai Weibull)
Stata 和 SMCL 语法文件。(Jeff Pitblado)
sudoers 文件类型插件文件。(Nikolai Weibull)
sysctl 语法和文件类型插件文件。(Nikolai Weibull)
terminfo 文件类型插件文件。(Nikolai Weibull)
trustees 语法文件。(Nima Talebi)
Vera 语法文件。(David Eggum)
udev config、permissions 和 rules 语法和文件类型插件文件。(Nikolai Weibull)
updatedb 语法和文件类型插件文件。(Nikolai Weibull)
VHDL 缩进文件。(Gerald Lai)
WSML 语法文件。(Thomas Haselwanter)
Xdefaults 文件类型插件文件。(Nikolai Weibull)
XFree86 config 文件类型插件文件。(Nikolai Weibull)
xinetd 语法、缩进和文件类型插件文件。(Nikolai Weibull)
xmodmap 文件类型插件文件。(Nikolai Weibull)
Xquery 语法文件。(Jean-Marc Vanel)
xsd (XML schema) 缩进文件。
YAML 文件类型插件文件。(Nikolai Weibull)
Zsh 文件类型插件文件。(Nikolai Weibull)

<span class="PreProc">新键盘映射表:</span><span class="Ignore"> ~</span>

僧伽罗语 (斯里兰卡) (Harshula Jayasuriya)
TSCII 编码的泰米尔语 (Yegappan Lakshmanan)
cp737 的希腊语 (Panagiotis Louridas)
波兰语-slash (HS6_06)
乌克兰语-jcuken 键盘 (Anatoli Sakhnik)
日语假名 (Edward L. Fox)

<span class="PreProc">新消息翻译:</span><span class="Ignore"> ~</span>

现在也有了 cp1251 的乌克兰语消息。
越南语消息翻译和菜单。(Phan Vinh Thinh)

<span class="PreProc">其它:</span><span class="Ignore"> ~</span>

<span class="Ignore">|</span><span class="Identifier">:read</span><span class="Ignore">|</span> 参数现在有了 <span class="Ignore">|</span><span class="Identifier">++edit</span><span class="Ignore">|</span> 参数。从而使用检测到的缓冲区的 <span class="Type">'fileformat'</span>、
<span class="Type">'fileencoding'</span> 和其它选项。同时也修正了压缩文件编辑时不设置这些选项的问题。

为 Sun Studio 10 更新 Netbeans 接口。协议号从 2.2 上到 2.3。(Gordon Prieur)

Mac: 启动时 Vim 会载入 $VIMRUNTIME/macmap.vim 脚本来定义缺省的 command 键的映
射。(多由 by Benji Fisher 提供)

Mac: 加入剪贴板选择区的类型，这样两个 Vim 之间可以共享面向列块、行和字符的选择
区。(Eckehard Berns)
也修正设置 <span class="Type">'clipboard'</span> 为 &quot;unnamed&quot; 时 &quot;yyp&quot; 出现的问题。

Mac: GUI 字体选择器。(Peter Cucka)

Mac: 支持多字节字符。(Da Woon Jung)
并不总能工作。如果有文本绘制的问题，可以尝试关闭 <span class="Type">'macatsui'</span> 选项。

Mac: 支持非 GUI 版本的 xterm 鼠标。

Mac: 和 Xcode 更好的集成。在 odoc 事件和拖动接收处理程序之后发送 (post) 伪鼠标
释放事件，以解决 Vim 载入文件后不响应的问题。修正一个 &quot;一行之差&quot; 的行号错误。
(Da Woon Jung)

Mac: 从 Finder 启动时改变目录为编辑文件所在的目录或用户主目录。

加入 t_SI 和 t_EI 转义序列以启动和结束插入模式。
用于设置光标形状为条状或块状。没有缺省值，因为 termcap/terminfo 不支持它们。

Motif 上有了 GUI 字体选择器。(Marcin Dalecki)

Motif 有更好的工具栏按钮。(Marcin Dalecki)

Motif 有搜索/替代对话框助记。(Marcin Dalecki)

加入 Marcin Dalecki 提供的若干 Motif 改进。现在我们自己绘制标签内容，使得字体
的处理方式可以通过 Vim 定制，也相对减少了对 X11 字体管理的依赖。

可以定义局部于缓冲区的自动命令。这意味着即使缓冲区没有名字或者没有特定的名字，
也能使用自动命令。见 <span class="Ignore">|</span><a href="autocmd.html#autocmd-buflocal"><span class="Identifier">autocmd-buflocal</span></a><span class="Ignore">|</span>。(Yakov Lerner)

xterm 现在能够识别多数功能键和修饰符的组合。<span class="Ignore">|</span><a href="term.html#xterm-modifier-keys"><span class="Identifier">xterm-modifier-keys</span></a><span class="Ignore">|</span>

如果设置 <span class="Type">'verbose'</span>，&quot;:highlight&quot; 的输出显示高亮项目最近在哪里设置。
如果设置 <span class="Type">'verbose'</span>，&quot;:map&quot;、&quot;:abbreviate&quot;、&quot;:command&quot;、&quot;:function&quot; 和
&quot;:autocmd&quot; 的输出显示它最近在哪里定义。(Yegappan Lakshmanan)

&quot;:function /pattern&quot; 列出匹配模式的函数。

&quot;1gd&quot; 和 &quot;gd&quot; 类似，但忽略光标位置之前的 {} 块里的匹配。&quot;1gD&quot; 和 &quot;gD&quot; 也是。

<span class="Type">'scrolljump'</span> 可以设为负数，滚动到窗口高度的一个百分比。

加入 <span class="Ignore">|</span><a href="#"><span class="Identifier">v:scrollstart</span></a><span class="Ignore">|</span> 变量，帮助寻找产生 hit-enter 提示的脚本位置。

要能处理待编辑的文件已经被别的 Vim 实例编辑的情形，加入 <span class="Ignore">|</span><a href="autocmd.html#SwapExists"><span class="Identifier">SwapExists</span></a><span class="Ignore">|</span> 事件。可
以使用 <span class="Ignore">|</span><a href="#"><span class="Identifier">v:swapname</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">v:swapchoice</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="#"><span class="Identifier">v:swapcommand</span></a><span class="Ignore">|</span> 变量。用此事件可以调用
<span class="Ignore">|</span><a href="remote.html#client-server"><span class="Identifier">client-server</span></a><span class="Ignore">|</span> 功能，把另一个 Vim 带到前台。
启动 Vim 时如有 &quot;-t tag&quot; 参数，已经有交换文件而用户选择了 &quot;quit&quot; 或 &quot;abort&quot;，
退出 Vim。

撤销现在同时恢复 '&lt; 和 '&gt; 位置标记。&quot;gv&quot; 可以选择改变和撤销之前的相同区域。

编辑 &quot;/&quot; 或 &quot;?&quot; 命令的搜索模式并且置位 <span class="Type">'incsearch'</span> 时，可用 <span class="Special">CTRL-L</span> 从当前匹配
上加一个字符。<span class="Special">CTRL-R</span> <span class="Special">CTRL-W</span> 会加入一个单词，但排除已经输入的单词部分。

Ruby 接口: 加入行号方法。(Ryan Paul)

$MYVIMRC 环境变量设为第一个找到的 vimrc 文件。
$MYGVIMRC 环境变量设为第一个找到的 gvimrc 文件。

<span class="PreProc">==============================================================================</span>
改 进							<span class="Ignore">*</span><span id="improvements-7" class="String anchor">improvements-7</span><span class="Ignore">*</span>

&quot;:helpgrep&quot; 在模式之后接受语言描述符: &quot;pat@it&quot;。

打印的帮助信息被移到独立的帮助文件。现在这部分篇幅已经不短。

执行 &quot;:!cmd&quot;、&quot;:r !cmd&quot; 或 &quot;:w !cmd&quot; 的补全时，寻找 $PATH 里的可执行文件而不是
当前目录的普通文件。

如果使用 &quot;:silent&quot; 并且 Ex 命令使用反向的行范围，自动交换范围的两端而不询问用
户是否需要这么做。

模式匹配的代码从递归函数修改为迭代机制。这样避免了堆栈溢出错误。分配的内存保存
了状态，所以总是可以检测到内存溢出。允许匹配更加复杂的模式，但过程可能很长，所
以期间 Vim 看起来可能像挂起一样。

以前总在沙盘 <span class="Ignore">|</span><a href="eval.html#sandbox"><span class="Identifier">sandbox</span></a><span class="Ignore">|</span> 里计算一些选项，现在只有从模式行里设置选项或在安全模式
里才会这么做。应用于 <span class="Type">'balloonexpr'</span>、<span class="Type">'foldexpr'</span>、<span class="Type">'foldtext'</span> 和 <span class="Type">'includeexpr'</span>。
(Sumner Hayes)

一些命令和表达式可能包含可怕的副作用，比如编辑搜索模式时使用 <span class="Special">CTRL-R</span> =，而该表
达式又调用了跳到其它窗口的函数的情况。加入 <span class="Ignore">|</span><a href="eval.html#textlock"><span class="Identifier">textlock</span></a><span class="Ignore">|</span> 防止这种情况的发生。

用 &quot;:breakadd here&quot; 和 &quot;:breakdel here&quot; 可以在光标位置设置或删除断点。

现在可以这样定义函数:<span class="Ignore"> &gt;</span>
<span class="Comment">	:exe &quot;func Test()\n ...\n endfunc&quot;</span>

教程进行了更新，使它更容易使用，也增加了一些解释更多重要命令的文本。建议由
Gabriel Zachmann 提供。

Unix: libcall() 失败时，用 dlerror() 得到错误信息并显示。(Johannes Zellner)

Mac 和 Cygwin: 编辑已有的文件时，使文件名使用和编辑文件相同的大小写。因而输入
&quot;:e os_UNIX.c&quot; 后文件名会成为 &quot;os_unix.c&quot;。

<span class="Type">'listchars'</span> 里加入 &quot;nbsp&quot;。(David Blanchet)

<span class="Type">'buftype'</span> 选项加入 &quot;acwrite&quot; 值。适用于无名但引用某个文件的缓冲区，写回时会用
到 BufWriteCmd 自动命令。

Lisp 缩进和括号匹配: (Sergey Khorev)
- 正确识别方括号
- 识别 #\(、#\)、#\[ 和 #\] 为字符常数
- 识别 Lisp 行注释 (分号定界)

match()、matchend() 和 matchstr() 加入 &quot;count&quot; 参数。(Ilya Sher)

winnr() 接受可选的 &quot;$&quot; 或 &quot;#&quot; 参数。(Nikolai Weibull，Yegappan Lakshmanan)

search() 加入 's' 标志位: 如果光标移动，设置 ' 位置标记。(Yegappan Lakshmanan)
search() 加入 'n' 标志位: 不移动光标。(Nikolai Weibull)
search() 加入 'c' 标志位: 接受光标所在的匹配。
search() 加入 'e' 标志位: 移到匹配的尾部。(Benji Fisher)
search() 加入 'p' 标志位: 返回子模式号。(Benji Fisher)
同样适用于 searchpos()、searchpair() 和 searchpairpos()。

search() 和 searchpair() 函数包含附加参数来指定在哪里停止搜索。如果搜索无须走
得太远，这加快了搜索的速度。

gzip 插件解压失败时，给出错误消息但不删除原始文本。这有助于文件有 .gz 扩展名但
实际没有压缩的情形。(Andrew Pimlott)

使用 C、C++ 或 IDL 语法时，可以附加载入 doxygen 语法。(Michael Geddes)

支持设置 <span class="Type">'filetype'</span> 和 <span class="Type">'syntax'</span> 为 &quot;aaa.bbb&quot;，代表 &quot;aaa&quot; 加上 &quot;bbb&quot; 的文件类型
和语法。

&quot;:registers&quot; 命令现在正确显示多字节字符。

VMS: 使用说明提到了可以用斜杠使标志位大写。加入内建的 vt320 终端代码色彩支持。
(Zoltan Arpadffy)

<span class="Type">'viminfo'</span> 的 '%' 项目允许设置缓冲区数目的上限。

文件类型的识别: 如果文件看起来像外壳脚本，检查启动 tcl 解释器的 &quot;exec&quot; 命令。
(Alexios Zavras 建议)

支持 utf-8 和 latin9 (iso-8859-15) 的内部转换，这样就算没有 iconv 也可以使用二
合字母。

编辑无名且空白的缓冲区时如果载入会话文件，彻底删除该缓冲区。避免在缓冲区列表里
留下一个不用的缓冲区。

Win32: 如果 libintl.dll 支持 bind_textdomain_codeset()，使用此函数。
(NAKADAIRA Yukihiro)

Win32: Vim 以前不识别 NTFS 文件系统的硬链接。现在当 <span class="Type">'backupcopy'</span> 为 &quot;auto&quot; 时
会检测到。同时也修正关于链接的 &quot;file has been changed since reading it&quot; 虚假信
息。

如果 foldtext() 发现删除注释引导符后没有文本，使用折叠的第二行。可用于 C 风格
的 /* */ 注释，其中第一行只包含 &quot;/*&quot;。

两个系统上编辑相同文件时 (例如 Unix 和 MS-Windows)，以前大多不会给出交换文件已
经存在的警告，因为使用的编辑文件名不同 (如 y:\dir\file 和 /home/me/dir/file)。
现在给交换文件加入标志位，指示和编辑文件放在相同的目录。因为不受使用路径的影
响，现在关于是否编辑相同文件的检查可靠得多。

Unix: 通过符号链接编辑文件时，交换文件过去使用符号链接的名字。现在使用实际文件
的名字，这样可以检测到对文件的重复编辑。(Stefano Zacchiroli 和 James Vega 的建
议)

客户-服务器通信现在支持 <span class="Type">'encoding'</span>。如果在 Vim 服务器上设置 <span class="Type">'encoding'</span> 为
&quot;utf-8&quot; 而从控制台上调用 &quot;vim --remote fname&quot;，&quot;fname&quot; 被从控制台编码转换为
utf-8。这样也允许使用不同 <span class="Type">'encoding'</span> 设置的 Vim 之间交换消息。

内部改动: 修改 ga_room 为 ga_maxlen，这样它不需要每次都递增/递减。

如果寄存器为空，不把它保存到 viminfo 文件。

删除 tcltags 脚本，它已经废弃了。

&quot;:redir @*&gt;&gt;&quot; 和 &quot;:redir @+&gt;&gt;&quot; 附加到剪贴板。寄存器名后非法字符的检查更严格。
<span class="Ignore">|</span><span class="Identifier">:redir</span><span class="Ignore">|</span>

&quot;:redir =&gt; variable&quot; 和 &quot;:redir =&gt;&gt; variable&quot; 写入或附加到变量。
(Yegappan Lakshmanan) <span class="Ignore">|</span><span class="Identifier">:redir</span><span class="Ignore">|</span>

&quot;:redir @<span class="Special">{a-z}</span>&gt;&gt;&quot; 附加到寄存器 a 到 z。(Yegappan Lakshmanan)

<span class="Type">'verbosefile'</span> 选项可以把消息记录到文件。此时不再显示 verbose 消息。也可用
&quot;-V<span class="Special">{filename}</span>&quot; 参数记录启动消息。

&quot;:let g:&quot; 列出全局变量。
&quot;:let b:&quot; 列出缓冲区局部变量。
&quot;:let w:&quot; 列出窗口局部变量。
&quot;:let v:&quot; 列出 Vim 变量。

stridx() 和 strridx() 函数接受第三个参数，指定从哪里开始搜索。(Yegappan
Lakshmanan)

getreg() 函数接受额外的一个参数，从而得到 '=' 寄存器表达式本身而不是它计算之后
的值。

setline() 函数接受列表参数以设置多行。如果行号刚刚在末行之后，附加行。

如果字符数和字节数不同的话，g <span class="Special">CTRL-G</span> 同时显示字符数。

&quot;:debug&quot; 和 '=' 寄存器表达式的补全。跳过行范围和命令名之间的 &quot;:&quot;。
(Peter Winters)

插入模式的 <span class="Special">CTRL-Q</span> 现在缺省同 <span class="Special">CTRL-V</span>。过去它被忽略。

如果 <span class="Type">'debug'</span> 包含 &quot;beep&quot;，发出铃声的函数或脚本会给出消息并包括错误源。

补全缓冲区名时，用 &quot;\(^\|[\/]\)&quot; 而不是 &quot;^&quot; 进行匹配，这样 &quot;:buf stor<span class="Special">&lt;Tab&gt;</span>&quot;
能同时找到 &quot;include/storage.h&quot; 和 &quot;storage/main.c&quot;。

要计算 (模式匹配) 的项目数而不修改缓冲区，可用 <span class="Ignore">|</span><span class="Identifier">:substitute</span><span class="Ignore">|</span> 的 'n' 标志位。见
<span class="Ignore">|</span><a href="tips.html#count-items"><span class="Identifier">count-items</span></a><span class="Ignore">|</span>。

<span class="Ignore">|</span><span class="Identifier">:substitute</span><span class="Ignore">|</span> 命令的 \u、\U、\l 和 \L 项目现在支持多字节字符。

识别名为 &quot;screen.linux&quot; 的 $TERM 以设置 <span class="Type">'background'</span> 的缺省值为 &quot;dark&quot;。
(Ciaran McCreesh)  &quot;cygwin&quot; 和 &quot;putty&quot; 也是如此。

<span class="Ignore">|</span><a href="autocmd.html#FileChangedShell"><span class="Identifier">FileChangedShell</span></a><span class="Ignore">|</span> 自动命令事件现在使用 <span class="Ignore">|</span><a href="#"><span class="Identifier">v:fcs_reason</span></a><span class="Ignore">|</span> 变量来指定激活事件的原
因。<span class="Ignore">|</span><a href="#"><span class="Identifier">v:fcs_choice</span></a><span class="Ignore">|</span> 可以选择重新载入缓冲区或询问用户应该如何进行。

xterm 功能键过去不能识别所有的修饰符。现在终端代码可用 &quot;;*X&quot; 或 &quot;O*X&quot; 结尾，其
中 X 是任何字符而 * 代表修饰符代码。
加入 <span class="Special">&lt;xUp&gt;</span>、<span class="Special">&lt;xDown&gt;</span>、<span class="Special">&lt;xLeft&gt;</span> 和 <span class="Special">&lt;xRight&gt;</span> 键以识别 xterm 发送这些代码的两种可能
形式，同时仍然可以处理所有的修饰符。

getwinvar() 现在也可以从指定窗口取得局部于缓冲区的选项。

<span class="Type">'errorformat'</span> 加入 &quot;%s&quot; 项目。(Yegappan Lakshmanan)
<span class="Type">'errorformat'</span> 加入 &quot;%&gt;&quot; 项目。

<span class="Type">'errorformat'</span> 过去不能使用包含出现在 &quot;%f&quot; 之后的字符的文件名。例如，&quot;%f:%l:%m&quot;
里文件名不能包含 &quot;:&quot;。现在必须余下的模式匹配以后才会包含第一个 &quot;:&quot;。在这个例子
里，文件名可以包含后面没有行号的 &quot;:&quot;。(Emanuele Giaquinta 建议)

GTK GUI: 如果可能，使用 GTK 文件对话框。Grahame Bowland 和 Evan Webb 补丁的混
合。

bugreport.vim 加入 &quot;:scriptnames&quot;，这样可以看到使用了哪些插件。

Win32: 如果用户改变了滚轮点击滚动行数的设置，立即使用。过去 Vim 需要重启。

在表达式里使用 @= 时，值是 @= 包含的内容。用 &quot;:let @= = value&quot; 可以设置寄存器
内容。

&quot;:popup&quot; 可以加上 !，使弹出菜单出现在鼠标指针的位置而不是文本光标的位置。

扩充了编码表，支持许多 MS-Windows 代码页，如 cp1250 和 cp737。这样 Unix 就可以
直接使用它们而无需在前面加上 &quot;8bit-&quot;。
如果编码名以 &quot;microsoft-cp&quot; 开始，忽略 &quot;microsoft-&quot; 部分。

用户定义的命令加入 &quot;customlist&quot; 补全参数。用户定义的补全参数应该返回 Vim 列表
形式的补全的候选值，Vim 不过滤返回值。(Yegappan Lakshmanan)

Win32: 如果 common controls 支持，气泡可以多行。(Sergey Khorev)

命令行补全现在对各种类型参数的匹配结果进行排序: 用户命令、变量、语法名等。

如果不设置 locale，使用 &quot;C&quot; locale。Vim 会处理 latin1 字符并使用自己的
isupper()/toupper()/等函数。

rxvt 终端模拟器用 COLORFGBG 环境变量来猜测 <span class="Type">'background'</span> 的值。
(Ciaran McCreesh)

同时支持 Unix 上 t_SI 和 t_EI 的正常功能。(Ciaran McCreesh)

如果 <span class="Type">'foldcolumn'</span> 为 1，放入尽量多的信息。鼠标点击 '-' 可以关闭折叠。

input() 接受可选的补全参数，指定输入能接受的补全类型。(Yegappan Lakshmanan)

diff 模式下，&quot;dp&quot; 可接受多于两个缓冲区，如果只有一个置位 <span class="Type">'modifiable'</span> 的话。

<span class="Type">'diffopt'</span> 选项有三个新值: &quot;horizontal&quot;、&quot;vertical&quot; 和 &quot;foldcolumn&quot;。

如果 <span class="Type">'include'</span> 选项包含 \zs，找到的文件名是 \zs 到模式结束处或 \ze。这样可以给
<span class="Type">'includeexpr'</span> 传递更多的信息。

现在，在启动过程的插件载入时支持 plugin 目录下的子目录。<span class="Ignore">|</span><a href="starting.html#load-plugins"><span class="Identifier">load-plugins</span></a><span class="Ignore">|</span>

foldcolumn 总是为关闭折叠显示 '+'，方便打开。这可能覆盖其它字符，<span class="Type">'foldcolumn'</span>
为 1 尤其如此。

现在置位 <span class="Type">'readonly'</span> 可以再次得到 W10 消息。如果 FileChangedRO 自动命令获得文件
失败，可以利用这一点。

Unix: open() 返回 EFBIG 时会给出合适的信息。

&quot;:mksession&quot; 设置 SessionLoad 变量以通知插件。会话文件也加入了模式行来设置
<span class="Type">'filetype'</span> 为 &quot;vim&quot;。

ATTENTION 提示把 &quot;Delete it&quot; 选择放在 &quot;Quit&quot; 之前，这样更合逻辑。(Robert Webb)

附加到文件而缓冲区没有名字时，过去使用附加文件的名字作为缓冲区名。但是缓冲区的
内容实际和文件内容不同。现在不设置文件名，除非 <span class="Type">'cpoptions'</span> 包含 'P' 标志位。

开始编辑新文件而文件所在的目录不存在时，Vim 会报告 &quot;[New DIRECTORY]&quot; 而不是
&quot;[New File]&quot;，从而提示用户可能出现了错误。

Win32: 保持 viminfo 文件的隐藏属性。

过去用了 <span class="Special">CTRL-O</span> 和光标键后，插入模式下的 <span class="Special">CTRL-A</span> 会记不住最近插入的文本。现在
<span class="Special">CTRL-O</span> 之后的那个命令如果不插入文本，最近插入的文本会被记住。这样，<span class="Special">CTRL-O</span> 命令
可以移动光标而不用担心会丢失最近插入的文本。

exists() 函数现在提供对自动命令组是否定义和自动命令事件是否支持的检查。
(Yegappan Lakshmanan)

允许在沙盘里使用 &quot;:global&quot;，因为它本身不会造成任何伤害。

如果 <span class="Type">'filetype'</span> 为空，&quot;:saveas asdf.c&quot; 会设置它为 c。&quot;:w asdf.c&quot; 如果会设置缓
冲区的文件名，也是如此。

插入模式的整行补全现在同时搜索未载入的缓冲区。

colortest.vim 脚本现在可以用 &quot;:source&quot; 或 &quot;:runtime syntax/colortest.vim&quot; 直接
调用。

<span class="Type">'statusline'</span> 选项可以局部于窗口，这样每个窗口就可以有不同的值。(部分由
Yegappan Lakshmanan 提供)

现在，<span class="Type">'statusline'</span> 和其它支持相同格式的选项可以使用新特性:
- 如果以 &quot;%!&quot; 开始，先作为表达式计算该值，然后再对计算结果进行分析。
- 用 &quot;%#HLname#&quot; 开始名为 HLname 的高亮。

如果 <span class="Type">'statusline'</span> 设定的值产生了错误信息，它被清空以免出现无限重画循环。其它一
些选项，如 <span class="Type">'tabline'</span> 和 <span class="Type">'titlestring'</span>，也是如此。&quot;:verbose set statusline&quot; 会
提到该选项的设置位置在错误处理程序里。

如果有若干匹配的标签，&quot;:tag <span class="Special">&lt;name&gt;</span>&quot; 和 <span class="Special">CTRL-]</span> 命令跳转到第 <span class="Special">[count]</span> 个匹配的标
签。(Yegappan Lakshmanan)

Win32: 如果设置的话，安装程序生成的批处理文件使用 $VIMRUNTIME 或 $VIM。Mathias
Michaelis 提供了示例。
同时新建 vimtutor.bat 批处理文件。

<span class="Type">'balloonexpr'</span> 选项现在变成了 <span class="Ignore">|</span><a href="options.html#global-local"><span class="Identifier">global-local</span></a><span class="Ignore">|</span> 类型。

system() 函数现在运行于加工 (cooked) 模式，从而可以用 <span class="Special">CTRL-C</span> 中断。

<span class="PreProc">==============================================================================</span>
编 译 时 的 改 变					<span class="Ignore">*</span><span id="compile-changes-7" class="String anchor">compile-changes-7</span><span class="Ignore">*</span>

放弃对 BeOS 和 Amiga GUI 的支持。没有人维护，可能也已经无法工作。如果你想做:
获取 Vim 6.x 版本并重新把你的工作合并进来。

运行测试时，如果其中一个失败而不能生成 &quot;test.out&quot;，其余的测试继续运行。如果有
内存溢出的情况，这么做会有帮助。

编译时定义 EXITFREE 并且带上 ccmalloc 库可来检测内存泄漏。有些内存总是报告为泄
漏，例如 X11 库函数分配的和 alloc_cmdbuff() 分配用于保存 &quot;:quit&quot; 命令的内存。

打印代码移到 src/hardcopy.c。

main() 的一些代码移到独立的若干函数，这使得操作更清晰。这些函数也使用结构来避
免过多的参数。

unix_expandpath() 移到 misc1.c，这使得 os_mac.c 也可以使用它而无须复制代码。

<span class="PreProc">--- Mac ---</span>

&quot;make&quot; 现在建立 Vim.app 目录，而 &quot;make install&quot; 把它复制到最终的目标位置。
(Raf)

运行时目录不直接放在 Vim.app，而放在 Vim.app/Contents/Resources/vim，这样做遵
从了 Mac 的规范。

编译时可以不用任何修改就加入 Motif、Athena 或 GTK 支持，而且仍然可用 MacRoman
转换。加入 os_mac_conv.c 文件。

运行 &quot;make install&quot; 时，像 Unix 那样安装运行时文件，以免复制过多文件。
运行 &quot;make&quot; 时建立到运行时文件的链接，以免递归复制需要太多时间。

configure 尝试同时编译 Intel 和 PowerPC 的 Vim。configure 参数 --with-mac-arch
可以改变这一点。

<span class="PreProc">--- Win32 ---</span>

调整 Make_mvc.mak 文件，使它可用于最新的 MS 编译器，包括 Visual Studio 2005
的免费版本。(George Reilly)

INSTALLpc.txt 进行更新，以包含最近的改变。(George Reilly)

现在用免费的 Visual C++ Toolkit 2003 和其它免费 SDK 工具生成发布的可执行文件。
加入 msvcsetup.bat，提供这方面的支持。

也生成 .pdb 文件，可用于生成 MS-Windows 上有用的崩溃报告。(George Reilly)

<span class="PreProc">==============================================================================</span>
漏 洞 修 正						<span class="Ignore">*</span><span id="bug-fixes-7" class="String anchor">bug-fixes-7</span><span class="Ignore">*</span>

When using PostScript printing on MS-DOS the default <span class="Type">'printexpr'</span> used &quot;lpr&quot;
instead of &quot;copy&quot;.  When <span class="Type">'printdevice'</span> was empty the copy command did not
work.  Use &quot;LPT1&quot; then.

The GTK font dialog uses a font size zero when the font name doesn't include a
size.  Use a default size of 10.

This example in the documentation didn't work:<span class="Ignore"> &gt;</span>
<span class="Comment">    :e `=foo . &quot;.c&quot;`</span>
Skip over the expression in <span class="Ignore">`</span><span class="Comment">=expr</span><span class="Ignore">`</span> when looking for comments, |, % and #.

When &quot;:helpgrep&quot; doesn't find anything there is no error message.

&quot;L&quot; and &quot;H&quot; did not take closed folds into account.

Win32: The &quot;-P title&quot; argument stopped at the first title that matched, even
when it doesn't support MDI.

Mac GUI: <span class="Special">CTRL-^</span> and <span class="Special">CTRL-@</span> did not work.

&quot;2daw&quot; on &quot;word.&quot; at the end of a line didn't include the preceding white
space.

Win32: Using FindExecutable() doesn't work to find a program.  Use
SearchPath() instead.  For executable() use $PATHEXT when the program searched
for doesn't have an extension.

When <span class="Type">'virtualedit'</span> is set, moving the cursor up after appending a character
may move it to a different column.  Was caused by auto-formatting moving the
cursor and not putting it back where it was.

When indent was added automatically and then moving the cursor, the indent was
not deleted (like when pressing ESC).  The &quot;I&quot; flag in <span class="Type">'cpoptions'</span> can be used
to make it work the old way.

When opening a command-line window, <span class="Type">'textwidth'</span> gets set to 78 by the Vim
filetype plugin.  Reset <span class="Type">'textwidth'</span> to 0 to avoid lines are broken.

After using cursor(line, col) moving up/down doesn't keep the same column.

Win32: Borland C before 5.5 requires using &quot;.u.&quot; for LowPart and HighPart
fields. (Walter Briscoe)

On Sinix SYS_NMLN isn't always defined.  Define it ourselves. (Cristiano De
Michele)

Printing with PostScript may keep the printer waiting for more.  Append a
<span class="Special">CTRL-D</span> to the printer output. (Mike Williams)

When converting a string with a hex or octal number the leading '-' was
ignored.  &quot;:echo '-05' + 0&quot; resulted in 5 instead of -5.

Using &quot;@:&quot; to repeat a command line didn't work when it contains control
characters.  Also remove &quot;'&lt;,'&gt;&quot; when in Visual mode to avoid that it appears
twice.

When using file completion for a user command, it would not expand environment
variables like for a regular command with a file argument.

<span class="Type">'cindent'</span>: When the argument of a #define looks like a C++ class the next line
is indented too much.

When <span class="Type">'comments'</span> includes multi-byte characters inserting the middle part and
alignment may go wrong.  <span class="Type">'cindent'</span> also suffers from this for right-aligned
items.

Win32: when <span class="Type">'encoding'</span> is set to &quot;utf-8&quot; getenv() still returns strings in the
active codepage.  Convert to utf-8.  Also for $HOME.

The default for <span class="Type">'helplang'</span> was &quot;zh&quot; for both &quot;zh_cn&quot; and &quot;zh_tw&quot;.  Now use
&quot;cn&quot; or &quot;tw&quot; as intended.

When <span class="Type">'bin'</span> is set and <span class="Type">'eol'</span> is not set then line2byte() added the line break
after the last line while it's not there.

Using foldlevel() in a WinEnter autocommand may not work.  Noticed when
resizing the GUI shell upon startup.

Python: Using buffer.append(f.readlines()) didn't work.  Allow appending a
string with a trailing newline.  The newline is ignored.

When using the &quot;:saveas f2&quot; command for buffer &quot;f1&quot;, the Buffers menu would
contain &quot;f2&quot; twice, one of them leading to &quot;f1&quot;.  Also trigger the BufFilePre
and BufFilePost events for the alternate buffer that gets the old name.

strridx() did not work well when the needle is empty. (Ciaran McCreesh)

GTK: Avoid a potential hang in gui_mch_wait_for_chars() when input arrives
just before it is invoked

VMS: Occasionally CR characters were inserted in the file.  Expansion of
environment variables was not correct. (Zoltan Arpadffy)

UTF-8: When <span class="Type">'delcombine'</span> is set &quot;dw&quot; only deleted the last combining character
from the first character of the word.

When using &quot;:sball&quot; in an autocommand only the filetype in one buffer was
detected.  Reset did_filetype in enter_buffer().

When using &quot;:argdo&quot; and the window already was at the first argument index,
but not actually editing it, the current buffer would be used instead.

When &quot;:next dir/*&quot; includes many matches, adding the names to the argument
list may take an awful lot of time and can't be interrupted.  Allow
interrupting this.

When editing a file that was already loaded in a buffer, modelines were not
used.  Now window-local options in the modeline are set.  Buffer-local options
and global options remain unmodified.

Win32: When <span class="Type">'encoding'</span> is set to &quot;utf-8&quot; in the vimrc file, files from the
command line with non-ASCII characters are not used correctly.  Recode the
file names when <span class="Type">'encoding'</span> is set, using the Unicode command line.

Win32 console: When the default for <span class="Type">'encoding'</span> ends up to be &quot;latin1&quot;, the
default value of <span class="Type">'isprint'</span> was wrong.

When an error message is given while waiting for a character (e.g., when an
xterm reports the number of colors), the hit-enter prompt overwrote the last
line.  Don't reset msg_didout in normal_cmd() for K_IGNORE.

Mac GUI: Shift-Tab didn't work.

When defining tooltip text, don't translate terminal codes, since it's not
going to be used like a command.

GTK 2: Check the tooltip text for valid utf-8 characters to avoid getting a
GTK error.  Invalid characters may appear when <span class="Type">'encoding'</span> is changed.

GTK 2: Add a safety check for invalid utf-8 sequences, they can crash pango.

Win32: When <span class="Type">'encoding'</span> is changed while starting up, use the Unicode command
line to convert the file arguments to <span class="Type">'encoding'</span>.  Both for the GUI and the
console version.

Win32 GUI: latin9 text (iso-8859-15) was not displayed correctly, because
there is no codepage for latin9.  Do our own conversion from latin9 to UCS2.

When two versions of GTK+ 2 are installed it was possible to use the header
files from one and the library from the other.  Use GTK_LIBDIR to put the
directory for the library early in the link flags.

With the GUI find/replace dialog a replace only worked if the pattern was
literal text.  Now it works for any pattern.

When <span class="Type">'equalalways'</span> is set and <span class="Type">'eadirection'</span> is &quot;hor&quot;, &quot;:quit&quot; would still
cause equalizing window heights in the vertical direction.

When &quot;:emenu&quot; is used in a startup script the command was put in the typeahead
buffer, causing a prompt for the crypt key to be messed up.

Mac OS/X: The default for <span class="Type">'isprint'</span> included characters 128-160, causes
problems for Terminal.app.

When a syntax item with &quot;containedin&quot; is used, it may match in the start or
end of a region with a matchgroup, while this doesn't happen for a &quot;contains&quot;
argument.

When a transparent syntax items matches in another item where the highlighting
has already stopped (because of a he= argument), the highlighting would come
back.

When cscope is used to set the quickfix error list, it didn't get set if there
was only one match. (Sergey Khorev)

When <span class="Type">'confirm'</span> is set and using &quot;:bdel&quot; in a modified buffer, then selecting
&quot;cancel&quot;, would still give an error message.

The PopUp menu items that started Visual mode didn't work when not in Normal
mode.  Switching between selecting a word and a line was not possible.

Win32: The keypad decimal point always resulted in a '.', while on some
keyboards it's a ','.  Use MapVirtualKey(VK_DECIMAL, 2).

Removed unused function DisplayCompStringOpaque() from gui_w32.c

In Visual mode there is not always an indication whether the line break is
selected or not.  Highlight the character after the line when the line break
is included, e.g., after &quot;v$o&quot;.

GTK: The <span class="Special">&lt;F10&gt;</span> key can't be mapped, it selects the menu.  Disable that with a
GTK setting and do select the menu when <span class="Special">&lt;F10&gt;</span> isn't mapped. (David Necas)

After &quot;Y&quot; '[ and '] were not at start/end of the yanked text.

When a telnet connection is dropped Vim preserves files and exits.  While
doing that a SIGHUP may arrive and disturbe us, thus ignore it. (Scott
Anderson)  Also postpone SIGHUP, SIGQUIT and SIGTERM until it's safe to
handle.  Added handle_signal().

When completing a file name on the command line backslashes are required for
white space.  Was only done for a space, not for a Tab.

When configure could not find a terminal library, compiling continued for a
long time before reporting the problem.  Added a configure check for tgetent()
being found in a library.

When the cursor is on the first char of the last line a &quot;:g/pat/s///&quot; command
may cause the cursor to be displayed below the text.

Win32: Editing a file with non-ASCII characters doesn't work when <span class="Type">'encoding'</span>
is &quot;utf-8&quot;.  use _wfullpath() instead of _fullpath(). (Yu-sung Moon)

When recovering the <span class="Type">'fileformat'</span> and <span class="Type">'fileencoding'</span> were taken from the
original file instead of from the swapfile.  When the file didn't exist, was
empty or the option was changed (e.g., with &quot;:e ++fenc=cp123 file&quot;) it could
be wrong.  Now store <span class="Type">'fileformat'</span> and <span class="Type">'fileencoding'</span> in the swapfile and use
the values when recovering.

&quot;:bufdo g/something/p&quot; overwrites each last printed text line with the file
message for the next buffer.  Temporarily clear <span class="Type">'shortmess'</span> to avoid that.

Win32: Cannot edit a file starting with # with --remote.  Do escape % and #
when building the &quot;:drop&quot; command.

A comment or | just after an expression-backtick argument was not recognized.
E.g. in :e <span class="Ignore">`</span><span class="Comment">=&quot;foo&quot;</span><span class="Ignore">`</span>&quot;comment.

&quot;(&quot; does not stop at an empty sentence (single dot and white space) while &quot;)&quot;
does.  Also breaks &quot;das&quot; on that dot.

When doing &quot;yy&quot; with the cursor on a TAB the ruler could be wrong and &quot;k&quot;
moved the cursor to another column.

When <span class="Type">'commentstring'</span> is '&quot;%s' and there is a double quote in the line a double
quote before the fold marker isn't removed in the text displayed for a  closed
fold.

In Visual mode, when <span class="Type">'bin'</span> and <span class="Type">'eol'</span> set, g <span class="Special">CTRL-G</span> counted the last line
break, resulting in &quot;selected 202 of 201 bytes&quot;.

Motif: fonts were not used for dialog components. (Marcin Dalecki)

Motif: After using a toolbar button the keyboard focus would be on the toolbar
(Lesstif problem). (Marcin Dalecki)

When using &quot;y<span class="Special">&lt;C-V&gt;</span>`x&quot; where mark x is in the first column, the last line was
not included.

Not all test scripts work properly on MS-Windows when checked out from CVS.
Use a Vim command to fix all fileformats to dos before executing the tests.

When using &quot;:new&quot; and the file fits in the window, lines could still be above
the window.  Now remove empty lines instead of keeping the relative position.

Cmdline completion didn't work after &quot;:let var1 var<span class="Special">&lt;Tab&gt;</span>&quot;.

When using &quot;:startinsert&quot; or &quot;:startreplace&quot; when already in Insert mode
(possible when using <span class="Special">CTRL-R</span> =), pressing Esc would directly restart Insert
mode. (Peter Winters)

&quot;2daw&quot; didn't work at end of file if the last word is a single character.

Completion for &quot;:next a'<span class="Special">&lt;Tab&gt;</span>&quot; put a backslash before single quote, but it was
not removed when editing a file.  Now halve backslashes in save_patterns().
Also fix expanding a file name with the shell that contains &quot;\'&quot;.

When doing &quot;1,6d|put&quot; only &quot;fewer lines&quot; was reported.  Now a following &quot;more
lines&quot; overwrites the message.

Configure could not handle &quot;-Dfoo=long\ long&quot; in the TCL config output.

When searching backwards, using a pattern that matches a newline and uses \zs
after that, didn't find a match.  Could also get a hang or end up in the right
column in the wrong line.

When $LANG is &quot;sl&quot; for slovenian, the slovak menu was used, since &quot;slovak&quot;
starts with &quot;sl&quot;.

When <span class="Type">'paste'</span> is set in the GUI the Paste toolbar button doesn't work.  Clear
<span class="Type">'paste'</span> when starting the GUI.

A message about a wrong viminfo line included the trailing NL.

When <span class="Type">'paste'</span> is set in the GUI the toolbar button doesn't work in Insert mode.
Use &quot;:exe&quot; in menu.vim to avoid duplicating the commands, instead of using a
mapping.

Treat &quot;mlterm&quot; as an xterm-like terminal. (Seiichi Sato)

&quot;:z.4&quot; and &quot;:z=4&quot; didn't work Vi compatible.

When sourcing a file, editing it and sourcing it again, it could appear twice
in &quot;:scriptnames&quot; and get a new <span class="Special">&lt;SID&gt;</span>, because the inode has changed.

When $SHELL is set but empty the <span class="Type">'shell'</span> option would be empty.  Don't use an
empty $SHELL value.

A command &quot;w! file&quot; in .vimrc or $EXINIT didn't work.  Now it writes an empty
file.

When a <span class="Special">CTRL-F</span> command at the end of the file failed, the cursor was still
moved to the start of the line.  Now it remains where it is.

When using &quot;:s&quot; or &quot;&amp;&quot; to repeat the last substitute and &quot;$&quot; was used to put
the cursor in the last column, put the cursor in the last column again.  This
is Vi compatible.

Vim is not fully POSIX compliant but sticks with traditional Vi behavior.
Added a few flags in <span class="Type">'cpoptions'</span> to behave the POSIX way when wanted.  The
$VIM_POSIX environment variable is checked to set the default.

Appending to a register didn't insert a line break like Vi.  Added the '&gt;'
flag to <span class="Type">'cpoptions'</span> for this.

Using &quot;I&quot; in a line with only blanks appended to the line.  This is not Vi
compatible.  Added the 'H' flag in <span class="Type">'coptions'</span> for this.

When joining multiple lines the cursor would be at the last joint, but Vi
leaves it at the position where &quot;J&quot; would put it.  Added the 'q' flag in
<span class="Type">'cpoptions'</span> for this.

Autoindent didn't work for &quot;:insert&quot; and &quot;:append&quot;.

Using &quot;:append&quot; in an empty buffer kept the dummy line.  Now it's deleted to
be Vi compatible.

When reading commands from a file and stdout goes to a terminal, would still
request the xterm version.  Vim can't read it, thus the output went to the
shell and caused trouble there.

When redirecting to a register with an invalid name the redirection would
still be done (after an error message).  Now reset &quot;redir_reg&quot;. (Yegappan
Lakshmanan)

It was not possible to use a NL after a backslash in Ex mode.  This is
sometimes used to feed multiple lines to a shell command.

When <span class="Type">'cmdheight'</span> is set to 2 in .vimrc and the GUI uses the number of lines
from the terminal we actually get 3 lines for the cmdline in gvim.

When setting $HOME allocated memory would leak.

Win32: bold characters may sometimes write in another character cell.  Use
unicodepdy[] as for UTF-8. (Taro Muraoka)

&quot;:w fname&quot; didn't work for files with <span class="Type">'buftype'</span> set to &quot;nofile&quot;.

The method used to locate user commands for completion differed from when they
are executed.  Ambiguous command names were not completed properly.

Incremental search may cause a crash when there is a custom statusline that
indirectly invokes &quot;:normal&quot;.

Diff mode failed when $DIFF_OPTIONS was set in the environment.  Unset it
before invoking &quot;diff&quot;.

Completion didn't work after &quot;:argdo&quot;, &quot;:windo&quot; and &quot;:bufdo&quot;.  Also for &quot;:set
&amp;l:opt&quot; and &quot;:set &amp;g:opt&quot;. (Peter Winters)

When setting <span class="Type">'ttymouse'</span> to &quot;dec&quot; in an xterm that supports the DEC mouse
locator it doesn't work.  Now switch off the mouse before selecting another
mouse model.

When the CursorHold event is triggered and the commands peek for typed
characters the typeahead buffer may be messed up, e.g., when a mouse-up event
is received.  Avoid invoking the autocommands from the function waiting for a
character, let it put K_CURSORHOLD in the input buffer.

Removed the &quot;COUNT&quot; flag from &quot;:argadd&quot;, to avoid &quot;:argadd 1*&quot; to be used like
&quot;:1argadd *&quot;.  Same for &quot;:argdelete&quot; and &quot;:argedit&quot;.

Avoid that $LANG is used for the menus when LC_MESSAGES is &quot;en_US&quot;.

Added backslashes before dashes in the vim.1 manual page to make them appear
as real dashes. (Pierre Habouzit)

Where &quot;gq&quot; left the cursor depended on the value of <span class="Type">'formatprg'</span>.  Now &quot;gq&quot;
always leaves the cursor at the last line of the formatted text.

When editing a compressed file, such as &quot;changelog.Debian.gz&quot; file, filetype
detection may try to check the contents of the file while it's still
compressed.  Skip setting <span class="Type">'filetype'</span> for compressed files until they have been
decompressed.  Required for patterns that end in a &quot;*&quot;.

Starting with an argument &quot;+cmd&quot; or &quot;-S script&quot; causes the cursor to be moved
to the first line.  That breaks a BufReadPost autocommand that uses g`&quot;.
Don't move the cursor if it's somewhere past the first line.

&quot;gg=G&quot; while <span class="Type">'modifiable'</span> is off was uninterruptible.

When <span class="Type">'encoding'</span> is &quot;sjis&quot; inserting <span class="Special">CTRL-V</span> u d800 a few times causes a crash.
Don't insert a DBCS character with a NUL second byte.

In Insert mode <span class="Special">CTRL-O</span> <span class="Special">&lt;Home&gt;</span> didn't move the cursor.  Made &quot;ins_at_eol&quot; global
and reset it in nv_home().

Wildcard expansion failed: &quot;:w /tmp/$$.`echo test`&quot;.  Don't put quotes around
spaces inside backticks.

After this sequence of commands: Y V p gv: the wrong line is selected.  Now
let &quot;gv&quot; select the text that was put, since the original text is deleted.
This should be the most useful thing to do.

&quot;:sleep 100u&quot; sleeps for 100 seconds, not 100 usec as one might expect.  Give
an error message when the argument isn't recognized.

In gui_mch_draw_string() in gui_w32.c &quot;unibuflen&quot; wasn't static, resulting in
reallocating the buffer every time. (Alexei Alexandrov)

When using a Python &quot;atexit&quot; function it was not invoked when Vim exits.  Now
call Py_Finalize() for that. (Ugo Di Girolamo)
This breaks the thread stuff though, fixed by Ugo.

GTK GUI: using a .vimrc with &quot;set cmdheight=2 lines=43&quot; and &quot;:split&quot; right
after startup, the window layout is messed up. (Michael Schaap)  Added
win_new_shellsize() call in gui_init() to fix the topframe size.

Trick to get ...MOUSE_NM not used when there are vertical splits.  Now pass
column -1 for the left most window and add MOUSE_COLOFF for others.  Limits
mouse column to 10000.

searchpair() may hang when the end pattern has &quot;\zs&quot; at the end.  Check that
we find the same position again and advance one character.

When in diff mode and making a change that causes the &quot;changed&quot; highlighting
to disappear or reappear, it was still highlighted in another window.

When a &quot;:next&quot; command fails because the user selects &quot;Abort&quot; at the ATTENTION
prompt the argument index was advanced anyway.

When &quot;~&quot; is in <span class="Type">'iskeyword'</span> the &quot;gd&quot; doesn't work, it's used for the previous
substitute pattern.  Put &quot;\V&quot; in the pattern to avoid that.

Use of sprintf() sometimes didn't check properly for buffer overflow.  Also
when using smsg().  Included code for snprintf() to avoid having to do size
checks where invoking them

&quot;:help \=<span class="Special">&lt;Tab&gt;</span>&quot; didn't find &quot;sub-replace-\=&quot;.  Wild menu for help tags didn't
show backslashes.  &quot;:he :s\=&quot; didn't work.

When reading an errorfile &quot;~/&quot; in a file name was not expanded.

GTK GUI: When adding a scrollbar (e.g. when using &quot;:vsplit&quot;) in a script or
removing it the window size may change.  GTK sends us resize events when we
change the window size ourselves, but they may come at an unexpected moment.
Peek for a character to get any window resize events and fix <span class="Type">'columns'</span> and
<span class="Type">'lines'</span> to undo this.

When using the GTK plug mechanism, resizing and focus was not working
properly. (Neil Bird)

After deleting files from the argument list a session file generated with
&quot;:mksession&quot; may contain invalid &quot;:next&quot; commands.

When <span class="Type">'shortmess'</span> is empty and <span class="Type">'keymap'</span> set to accents, in Insert mode <span class="Special">CTRL-N</span>
may cause the hit-enter prompt.  Typing 'a then didn't result in the accented
character.  Put the character typed at the prompt back in the typeahead buffer
so that mapping is done in the right mode.

setbufvar() and setwinvar() did not give error messages.

It was possible to set a variable with an illegal name, e.g. with setbufvar().
It was possible to define a function with illegal name, e.t. &quot;:func F<span class="Special">{-1}</span>()&quot;

<span class="Special">CTRL-W</span> F and &quot;gf&quot; didn't use the same method to get the file name.

When reporting a conversion error the line number of the last error could be
given.  Now report the first encountered error.

When using &quot;:e ++enc=name file&quot; and iconv() was used for conversion an error
caused a fall-back to no conversion.  Now replace a character with '?' and
continue.

When opening a new buffer the local value of <span class="Type">'bomb'</span> was not initialized from
the global value.

Win32: When using the &quot;Edit with Vim&quot; entry the file name was limited to about
200 characters.

When using command line completion for &quot;:e *foo&quot; and the file &quot;+foo&quot; exists
the resulting command &quot;:e +foo&quot; doesn't work.  Now insert a backslash: &quot;:e
\+foo&quot;.

When the translation of &quot;-- More --&quot; was not 10 characters long the following
message would be in the wrong position.

At the more-prompt the last character in the last line wasn't drawn.

When deleting non-existing text while <span class="Type">'virtualedit'</span> is set the '[ and '] marks
were not set.

Win32: Could not use &quot;**/&quot; in <span class="Type">'path'</span>, it had to be &quot;**\&quot;.

The search pattern &quot;\n&quot; did not match at the end of the last line.

Searching for a pattern backwards, starting on the NUL at the end of the line
and <span class="Type">'encoding'</span> is &quot;utf-8&quot; would match the pattern just before it incorrectly.
Affected searchpair('/\*', '', '\*/').

For the Find/Replace dialog it was possible that not finding the text resulted
in an error message while redrawing, which cleared the syntax highlighting
while it was being used, resulting in a crash.  Now don't clear syntax
highlighting, disable it with b_syn_error.

Win32: Combining UTF-8 characters were drawn on the previous character.
Could be noticed with a Thai font.

Output of &quot;:function&quot; could leave some of the typed text behind. (Yegappan
Lakshmanan)

When the command line history has only a few lines the command line window
would be opened with these lines above the first window line.

When using a command line window for search strings &quot;:qa&quot; would result in
searching for &quot;qa&quot; instead of quitting all windows.

GUI: When scrolling with the scrollbar and there is a line that doesn't fit
redrawing may fail.  Make sure w_skipcol is valid before redrawing.

Limit the values of <span class="Type">'columns'</span> and <span class="Type">'lines'</span> to avoid an overflow in Rows *
Columns.  Fixed bad effects when running out of memory (command line would be
reversed, &quot;:qa!&quot; resulted in &quot;:!aq&quot;).

Motif: &quot;gvim -iconic&quot; opened the window anyway.  (David Harrison)

There is a tiny chance that a symlink gets created between checking for an
existing file and creating a file.  Use the O_NOFOLLOW for open() if it's
available.

In an empty line &quot;ix<span class="Special">&lt;CTRL-O&gt;</span>0&quot; moved the cursor to after the line instead of
sticking to the first column.

When using &quot;:wq&quot; and a BufWriteCmd autocmd uses inputsecret() the text was
echoed anyway.  Set terminal to raw mode in getcmdline().

Unix: &quot;:w a;b~c&quot; caused an error in expanding wildcards.

When appending to a file with &quot;:w &gt;&gt;fname&quot; in a buffer without a name, causing
the buffer to use &quot;fname&quot;, the modified flag was reset.

When appending to the current file the &quot;not edited&quot; flag would be reset.
&quot;:w&quot; would overwrite the file accidentally.

Unix: When filtering text with an external command Vim would still read input,
causing text typed for the command (e.g., a password) to be eaten and echoed.
Don't read input when the terminal is in cooked mode.

The Cygwin version of xxd used CR/LF line separators. (Corinna Vinschen)

Unix: When filtering text through a shell command some resulting text may be
dropped.  Now after detecting that the child has exited try reading some more
of its output.

When inside input(), using &quot;<span class="Special">CTRL-R</span> =&quot; and the expression throws an exception
the command line was not abandoned but it wasn't used either.  Now abandon
typing the command line.

<span class="Type">'delcombine'</span> was also used in Visual and Select mode and for commands like
&quot;cl&quot;.  That was illogical and has been disabled.

When recording while a CursorHold autocommand was defined special keys would
appear in the register.  Now the CursorHold event is not triggered while
recording.

Unix: the src/configure script used $<span class="Special">{srcdir-.}</span>, not all shells understand
that.  Use $<span class="Special">{srcdir:-.}</span> instead.

When editing file &quot;a&quot; which is a symlink to file &quot;b&quot; that doesn't exist,
writing file &quot;a&quot; to create &quot;b&quot; and then &quot;:split b&quot; resulted in two buffers on
the same file with two different swapfile names.  Now set the inode in the
buffer when creating a new file.

When <span class="Type">'esckeys'</span> is not set don't send the xterm code to request the version
string, because it may cause trouble in Insert mode.

When evaluating an expression for <span class="Special">CTRL-R</span> = on the command line it was possible
to call a function that opens a new window, resulting in errors for
incremental search, and many other nasty things were possible.  Now use the
<span class="Ignore">|</span><a href="eval.html#textlock"><span class="Identifier">textlock</span></a><span class="Ignore">|</span> to disallow changing the buffer or jumping to another window
to protect from unexpected behavior.  Same for <span class="Special">CTRL-\</span> e.

&quot;d(&quot; deleted the character under the cursor, while the documentation specified
an exclusive motion.  Vi also doesn't delete the character under the cursor.

Shift-Insert in Insert mode could put the cursor before the last character
when it just fits in the window.  In coladvance() don't stop at the window
edge when filling with spaces and when in Insert mode.  In mswin.vim avoid
getting a beep from the &quot;l&quot; command.

Win32 GUI: When Alt-F4 is used to close the window and Cancel is selected in
the dialog then Vim would insert <span class="Special">&lt;M-F4&gt;</span> in the text.  Now it's ignored.

When &quot;:silent! <span class="Special">{cmd}</span>&quot; caused the swap file dialog, which isn't displayed,
there would still be a hit-enter prompt.

Requesting the termresponse (<span class="Ignore">|</span><a href="term.html#t_RV"><span class="Identifier">t_RV</span></a><span class="Ignore">|</span>) early may cause problems with &quot;-c&quot;
arguments that invoke an external command or even &quot;-c quit&quot;.  Postpone it
until after executing &quot;-c&quot; arguments.

When typing in Insert mode so that a new line is started, using <span class="Special">CTRL-G</span> u to
break undo and start a new change, then joining the lines with <span class="Special">&lt;BS&gt;</span> caused
undo info to be missing.  Now reset the insertion start point.

Syntax HL: When a region start match has a matchgroup and an offset that
happens to be after the end of the line then it continued in the next line and
stopped at the region end match, making the region continue after that.
Now check for the column being past the end of the line in syn_add_end_off().

When changing a file, setting <span class="Type">'swapfile'</span> off and then on again, making another
change and killing Vim, then some blocks may be missing from the swapfile.
When <span class="Type">'swapfile'</span> is switched back on mark all blocks in the swapfile as dirty.
Added mf_set_dirty().

Expanding wildcards in a command like &quot;:e aap;&lt;&gt;!&quot; didn't work.  Put
backslashes before characters that are special to the shell. (Adri Verhoef)

A CursorHold autocommand would cause a message to be cleared.  Don't show the
special key for the event for <span class="Type">'showcmd'</span>.

When expanding a file name for a shell command, as in &quot;!cmd foo<span class="Special">&lt;Tab&gt;</span>&quot; or &quot;:r
!cmd foo<span class="Special">&lt;Tab&gt;</span>&quot; also escape characters that are special for the shell:
&quot;!;&amp;()&lt;&gt;&quot;.

When the name of the buffer was set by a &quot;:r fname&quot; command <span class="Ignore">|</span><a href="options.html#cpo-f"><span class="Identifier">cpo-f</span></a><span class="Ignore">|</span> no
autocommands were triggered to notify about the change in the buffer list.

In the quickfix buffer <span class="Type">'bufhidden'</span> was set to &quot;delete&quot;, which caused closing
the quickfix window to leave an unlisted &quot;No Name&quot; buffer behind every time.

Win32: when using two screens of different size, setting <span class="Type">'lines'</span> to a large
value didn't fill the whole screen. (SungHyun Nam)

Win32 installer: The generated _vimrc contained an absolute path to diff.exe.
After upgrading it becomes invalid.  Now use $VIMRUNTIME instead.

The command line was cleared to often when <span class="Type">'showmode'</span> was set and &quot;:silent
normal vy&quot; was used.  Don't clear the command line unless the mode was
actually displayed.  Added the &quot;mode_displayed&quot; variable.

The &quot;load session&quot; toolbar item could not handle a space or other special
characters in v:this_session.

&quot;:set sta ts=8 sw=4 sts=2&quot; deleted 4 spaces halfway a line instead of 2.

In a multi-byte file the foldmarker could be recognized in the trail byte.
(Taro Muraoka)

Pasting with <span class="Special">CTRL-V</span> and menu didn't work properly when some commands are
mapped.  Use &quot;:normal!&quot; instead of &quot;:normal&quot;. (Tony Apuzzo)

Crashed when expanding a file name argument in backticks.

In some situations the menu and scrollbar didn't work, when the value contains
a CSI byte. (Yukihiro Nakadaira)

GTK GUI: When drawing the balloon focus changes and we might get a key release
event that removed the balloon again.  Ignore the key release event.

<span class="Type">'titleold'</span> was included in &quot;:mkexrc&quot; and &quot;:mksession&quot; files.

&quot;:set background&amp;&quot; didn't use the same logic as was used when starting up.

When &quot;umask&quot; is set such that nothing is writable then the viminfo file would
be written without write permission. (Julian Bridle)

Motif: In diff mode dragging one scrollbar didn't update the scrollbar of the
other diff'ed window.

When editing in an xterm with a different number of colors than expected the
screen would be cleared and redrawn, causing the message about the edited file
to be cleared.  Now set &quot;keep_msg&quot; to redraw the last message.

For a color terminal: When the Normal HL uses bold, possibly to make the color
lighter, and another HL group specifies a color it might become light as well.
Now reset bold if a HL group doesn't specify bold itself.

When using 256 color xterm the color 255 would show up as color 0.  Use a
short instead of a char to store the color number.

ml_get errors when searching for &quot;\n\zs&quot; in an empty file.

When selecting a block and using &quot;$&quot; to select until the end of every line and
not highlighting the character under the cursor the first character of the
block could be unhighlighted.

When counting words for the Visual block area and using &quot;$&quot; to select until
the end of every line only up to the length of the last line was counted.

&quot;dip&quot; in trailing empty lines left one empty line behind.

The script ID was only remembered globally for each option. When a buffer- or
window-local option was set the same &quot;last set&quot; location was changed for all
buffers and windows.  Now remember the script ID for each local option
separately.

GUI: The &quot;Replace All&quot; button didn't handle backslashes in the replacement in
the same way as &quot;Replace&quot;.  Escape backslashes so that they are taken
literally.

When using Select mode from Insert mode and typing a key, causing lines to be
deleted and a message displayed, delayed the effect of inserting the key.
Now overwrite the message without delay.

When <span class="Type">'whichwrap'</span> includes &quot;l&quot; then &quot;dl&quot; and &quot;yl&quot; on a single letter line
worked differently.  Now recognize all operators when using &quot;l&quot; at the end of
a line.

GTK GUI: when the font selector returned a font name with a comma in it then
it would be handled like two font names.  Now put a backslash before the
comma.

MS-DOS, Win32: When <span class="Type">'encoding'</span> defaults to &quot;latin1&quot; then the value for
<span class="Type">'iskeyword'</span> was still for CPxxx.  And when <span class="Type">'nocompatible'</span> was set <span class="Type">'isprint'</span>
would also be the wrong value.

When a command was defined not to take arguments and no '|' no warning message
would be given for using a '|'.  Also with &quot;:loadkeymap&quot;.

Motif: When using a fontset and <span class="Type">'encoding'</span> is &quot;utf-8&quot; and sizeof(wchar_t) !=
sizeof(XChar2b) then display was wrong. (Yukihiro Nakadaira)

&quot;:all&quot; always set the current window to the first window, even when it
contains a buffer that is not in the argument list (can't be closed because it
is modified).  Now go to the window that has the first item of the argument
list.

GUI: To avoid left-over pixels from bold text all characters after a character
with special attributes were redrawn.  Now only do this for characters that
actually are bold.  Speeds up displaying considerably.

When only highlighting changes and the text is scrolled at the same time
everything is redrawn instead of using a scroll and updating the changed text.
E.g., when using &quot;:match&quot; to highlight a paren that the cursor landed on.
Added SOME_VALID: Redraw the whole window but also try to scroll to minimize
redrawing.

Win32: When using Korean IME making it active didn't work properly. (Moon,
Yu-sung, 2005 March 21)

Ruby interface: when inserting/deleting lines display wasn't updated. (Ryan
Paul)

<span class="PreProc">--- fixes since Vim 7.0b ---</span>

Getting the GCC version in configure didn't work with Solaris sed.  First
strip any &quot;darwin.&quot; and then get the version number.

The &quot;autoload&quot; directory was missing from the self-installing executable for
MS-Windows.

The MS-Windows install program would find &quot;vimtutor.bat&quot; in the install
directory.  After changing to &quot;c:&quot; also change to &quot;\&quot; to avoid looking in the
install directory.

To make the 16 bit DOS version compile exclude not used highlight
initializations and build a tiny instead of small version.

finddir() and findfile() accept a negative count and return a List then.

The Python indent file contained a few debugging statements, removed.

Expanding {} for a function name, resulting in a name starting with &quot;s:&quot; was
not handled correctly.

Spelling: renamed COMPOUNDMAX to COMPOUNDWORDMAX.  Added several items to be
able to handle the new Hungarian dictionary.

Mac: Default to building for the current platform only, that is much faster
than building a universal binary.  Also, using Perl/Python/etc. only works for
the current platform.

The time on undo messages disappeared for someone.  Using %T for strftime()
apparently doesn't work everywhere.  Use %H:%M:%S instead.

Typing BS at the &quot;z=&quot; prompt removed the prompt.

<span class="PreProc">--- fixes and changes since Vim 7.0c ---</span>

When jumping to another tab page the Vim window size was always set, even when
nothing in the layout changed.

Win32 GUI tab pages line wasn't always enabled.  Do a proper check for the
compiler version.

Win32: When switching between tab pages the Vim window was moved when part of
it was outside of the screen.  Now only do that in the direction of a size
change.

Win32: added menu to GUI tab pages line. (Yegappan Lakshmanan)

Mac: Added document icons. (Benji Fisher)

Insert mode completion: Using Enter to accept the current match causes
confusion.  Use <span class="Special">CTRL-Y</span> instead.  Also, use <span class="Special">CTRL-E</span> to go back to the typed
text.

GUI: When there are left and right scrollbars, &quot;:tabedit&quot; kept them instead of
using the one that isn't needed.

Using &quot;gP&quot; to replace al the text could leave the cursor below the last line,
causing ml_get errors.

When <span class="Type">'cursorline'</span> is set don't use the highlighting when Visual mode is
active, otherwise it's difficult to see the selected area.

The matchparen plugin restricts the search to 100 lines, to avoid a long delay
when there are closed folds.

Sometimes using <span class="Special">CTRL-X</span> s to list spelling suggestions used text from another
line.

Win32: Set the default for <span class="Type">'isprint'</span> back to the wrong default &quot;@,~-255&quot;,
because many people use Windows-1252 while <span class="Type">'encoding'</span> is &quot;latin1&quot;.

GTK: Added a workaround for gvim crashing when used over an untrusted ssh
link, caused by GTK doing something nasty. (Ed Catmur)

Win32: The font used for the tab page labels is too big.  Use the system menu
font. (George Reilly)

Win32: Adjusting the window position and size to keep it on the screen didn't
work properly when the taskbar is on the left or top of the screen.

The installman.sh and installml.sh scripts use $<span class="Special">{10}</span>, that didn't work with
old shells.  And use &quot;test -f&quot; instead of &quot;test -e&quot;.

Win32: When <span class="Type">'encoding'</span> was set in the vimrc then a directory argument for diff
mode didn't work.

GUI: at the inputlist() prompt the cursorshape was adjusted as if the windows
were still at their old position.

The parenmatch plugin didn't remember the highlighting per window.

Using &quot;:bd&quot; for a buffer that's the current window in another tab page caused
a crash.

For a new tab page the <span class="Type">'scroll'</span> option wasn't set to a good default.

Using an end offset for a search &quot;/pat/e&quot; didn't work properly for multi-byte
text. (Yukihiro Nakadaira)

&quot;:s/\n/,/&quot; doubled the text when used on the last line.

When &quot;search&quot; is in <span class="Type">'foldopen'</span> &quot;[s&quot; and &quot;]s&quot; now open folds.

When using a numbered function &quot;dict&quot; can be omitted, but &quot;self&quot; didn't work
then.  Always add FC_DICT to the function flags when it's part of a
dictionary.

When &quot;--remote-tab&quot; executes locally it left an empty tab page.

&quot;gvim -u NONE&quot;, &quot;:set cursorcolumn&quot;, &quot;C&quot; in the second line didn't update
text.  Do update further lines even though the &quot;$&quot; is displayed.

VMS: Support GTK better, also enable +clientserver. (Zoltan Arpadffy)

When highlighting of statusline or tabline is changed there was no redraw to
show the effect.

Mac: Added &quot;CFBundleIdentifier&quot; to infplist.xml.

Added tabpage-local variables t:var.

Win32: Added double-click in tab pages line creates new tab. (Yegappan
Lakshmanan)

Motif: Added GUI tab pages line. (Yegappan Lakshmanan)

Fixed crash when <span class="Type">'lines'</span> was set to 1000 in a modeline.

When init_spellfile() finds a writable directory in <span class="Type">'runtimepath'</span> but it
doesn't contain a &quot;spell&quot; directory, create one.

Win32: executable() also finds &quot;xxd&quot; in the directory where Vim was started,
but &quot;!xxd&quot; doesn't work.  Append the Vim starting directory to $PATH.

The tab page labels are shortened, directory names are reduced to a single
letter by default.  Added the pathshorten() function to allow a user to do the
same.

&quot;:saveas&quot; now resets <span class="Type">'readonly'</span> if the file was successfully written.

Set $MYVIMRC file to the first found .vimrc file.
Set $MYGVIMRC file to the first found .gvimrc file.
Added menu item &quot;Startup Settings&quot; that edits the $MYVIMRC file

Added matcharg().

Error message E745 appeared twice.  Renamed one to E786.

Fixed crash when using &quot;au BufRead * Sexplore&quot; and doing &quot;:help&quot;.  Was wiping
out a buffer that's still in a window.

&quot;:hardcopy&quot; resulted in an error message when <span class="Type">'encoding'</span> is &quot;utf-8&quot; and
<span class="Type">'printencoding'</span> is empty.  Now it assumes latin1. (Mike Williams)

The check for the toolbar feature for Motif, depending on certain included
files, wasn't detailed enough, causing building to fail in gui_xmebw.c.

Using <span class="Special">CTRL-E</span> in Insert mode completion after <span class="Special">CTRL-P</span> inserted the first match
instead of the original text.

When displaying a UTF-8 character with a zero lower byte Vim might think the
previous character is double-wide.

The &quot;nbsp&quot; item of <span class="Type">'listchars'</span> didn't work when <span class="Type">'encoding'</span> was utf-8.

Motif: when Xm/xpm.h is missing gui_xmebw.c would not compile.
HAVE_XM_UNHIGHLIGHTT_H was missing a T.

Mac: Moved the .icns files into src/os_mac_rsrc, so that they can all be
copied at once.  Adjusted the Info.plist file for three icons.

When Visual mode is active while switching to another tabpage could get ml_get
errors.

When <span class="Type">'list'</span> is set, <span class="Type">'nowrap'</span> the $ in the first column caused <span class="Type">'cursorcolumn'</span>
to move to the right.

When a line wraps, <span class="Type">'cursorcolumn'</span> was never displayed past the end of the
line.

<span class="Type">'autochdir'</span> was only available when compiled with NetBeans and GUI.  Now it's
a separate feature, also available in the &quot;big&quot; version.

Added <span class="Special">CTRL-W</span> gf: open file under cursor in new tab page.

When using the menu in the tab pages line, &quot;New Tab&quot; opens the new tab before
where the click was.  Beyond the labels the new tab appears at the end instead
of after the current tab page.

Inside a mapping with an expression getchar() could not be used.

When vgetc is used recursively vgetc_busy protects it from being used
recursively.  But after a &quot;:normal&quot; command the protection was reset.

&quot;:s/a/b/n&quot; didn't work when <span class="Type">'modifiable'</span> was off.

When $VIMRUNTIME includes a multi-byte character then rgb.txt could not be
found. (Yukihiro Nakadaira)

&quot;:mkspell&quot; didn't work correctly for non-ASCII affix flags when conversion is
needed on the spell file.

glob('/dir/\$ABC/*') didn't work.

When using several tab pages and changing <span class="Type">'cmdheight'</span> the display could become
messed up.  Now store the value of <span class="Type">'cmdheight'</span> separately for each tab page.

The user of the Enter key while the popup menu is visible was still confusing.
Now use Enter to select the match after using a cursor key.

Added &quot;usetab&quot; to <span class="Type">'switchbuf'</span>.

<span class="PreProc">--- fixes and changes since Vim 7.0d ---</span>

Added <span class="Special">CTRL-W</span> T: move a window to a new tab page.

Using <span class="Special">CTRL-X</span> s in Insert mode to complete spelling suggestions and using BS
deleted characters before the bad word.

A few small fixes for the VMS makefile. (Zoltan Arpadffy)

With a window of 91 lines 45 cols, &quot;:vsp&quot; scrolled the window.  Copy w_wrow
when splitting a window and skip setting the height when it's already at the
right value.

Using <span class="Special">&lt;silent&gt;</span> in a mapping with a shell command and the GUI caused redraw
to use wrong attributes.

Win32: Using MSVC 4.1 for install.exe resulted in the start menu items to be
created in the administrator directory instead of &quot;All Users&quot;.  Define the
CSIDL_ items if they are missing.

Motif: The GUI tabline did not use the space above the right scrollbar.  Work
around a bug in the Motif library. (Yegappan Lakshmanan)

The extra files for XML Omni completion are now also installed.
<span class="Ignore">|</span><a href="insert.html#xml-omni-datafile"><span class="Identifier">xml-omni-datafile</span></a><span class="Ignore">|</span>

GTK GUI: when 'm' is missing from <span class="Type">'guioptions'</span> during startup and pressing
<span class="Special">&lt;F10&gt;</span> GTK produced error messages.  Now do create the menu but disable it just
after the first gui_mch_update().

&quot;:mkspell&quot; doesn't work well with the Hungarian dictionary from the Hunspell
project.  Back to the Myspell dictionary.

In help files hide the | used around tags.

Renamed pycomplete to pythoncomplete.

Added &quot;tabpages&quot; to <span class="Type">'sessionoptions'</span>.

When <span class="Type">'guitablabel'</span> is set the effect wasn't visible right away.

Fixed a few <span class="Type">'cindent'</span> errors.

When completing menu names, e.g., after &quot;:emenu&quot;, don't sort the entries but
keep them in the original order.

Fixed a crash when editing a directory in diff mode.  Don't trigger
autocommands when executing the diff command.

Getting a keystroke could get stuck if <span class="Type">'encoding'</span> is a multi-byte encoding and
typing a special key.

When <span class="Type">'foldignore'</span> is set the folds were not updated right away.

When a list is indexed with [a : b] and b was greater than the length an error
message was given.  Now silently truncate the result.

When using BS during Insert mode completion go back to the original text, so
that <span class="Special">CTRL-N</span> selects the first matching entry.

Added the 'M' flag to <span class="Type">'cinoptions'</span>.

Win32: Make the &quot;gvim --help&quot; window appear in the middle of the screen
instead of at an arbitrary position. (Randall W. Morris)

Added gettabwinvar() and settabwinvar().

Command line completion: pressing <span class="Special">&lt;Tab&gt;</span> after &quot;:e /usr/*&quot; expands the whole
tree, because it becomes &quot;:e /usr/**&quot;.  Don't add a star if there already is
one.

Added grey10 to grey90 to all GUIs, so that they can all be used for
initializing highlighting.  Use grey40 for CursorColumn and CursorLine when
<span class="Type">'background'</span> is &quot;dark&quot;.

When reading a file and using iconv for conversion, an incomplete byte
sequence at the end caused problems. (Yukihiro Nakadaira)

<span class="PreProc">--- fixes and changes since Vim 7.0e ---</span>

Default color for MatchParen when <span class="Type">'background'</span> is &quot;dark&quot; is now DarkCyan.

&quot;:syn off&quot; had to be used twice in a file that sets <span class="Type">'syntax'</span> in a modeline.
(Michael Geddes)

When using &quot;:vsp&quot; or &quot;:sp&quot; the available space wasn't used equally between
windows. (Servatius Brandt)

Expanding <span class="Special">&lt;cWORD&gt;</span> on a trailing blank resulted in the first word in the line
if <span class="Type">'encoding'</span> is a multi-byte encoding.

Spell checking: spellbadword() didn't see a missing capital in the first word
of a line.  Popup menu now only suggest the capitalized word when appropriate.

When using whole line completion <span class="Special">CTRL-L</span> moves through the matches but it
didn't work when at the original text.

When completion finds the longest match, don't go to the first match but stick
at the original text, so that <span class="Special">CTRL-N</span> selects the first one.

Recognize &quot;zsh-beta&quot; like &quot;zsh&quot; for setting the <span class="Type">'shellpipe'</span> default. (James
Vega)

When using &quot;:map <span class="Special">&lt;expr&gt;</span>&quot; and the expression results in something with a
special byte (NUL or CSI) then it didn't work properly.  Now escape special
bytes.

The default Visual highlighting for a color xterm with 8 colors was a magenta
background, which made magenta text disappear.  Now use reverse in this
specific situation.

After completing the longest match &quot;.&quot; didn't insert the same text.  Repeating
also didn't work correctly for multi-byte text.

When using Insert mode completion and BS the whole word that was completed
would result in all possible matches.  Now stop completion.  Also fixes that
for spell completion the previous word was deleted.

GTK: When <span class="Type">'encoding'</span> is &quot;latin1&quot; and using non-ASCII characters in a file name
the tab page label was wrong and an error message would be given.

The taglist() function could hang on a tags line with a non-ASCII character.

Win32: When <span class="Type">'encoding'</span> differs from the system encoding tab page labels with
non-ASCII characters looked wrong. (Yegappan Lakshmanan)

Motif: building failed when Xm/Notebook.h doesn't exist.  Added a configure
check, disable GUI tabline when it's missing.

Mac: When compiled without multi-byte feature the clipboard didn't work.

It was possible to switch to another tab page when the cmdline window is open.

Completion could hang when <span class="Type">'lines'</span> is 6 and a preview window was opened.

Added <span class="Special">CTRL-W</span> gF: open file under cursor in new tab page and jump to the line
number following the file name.
Added <span class="Type">'guitabtooltip'</span>.  Implemented for Win32 (Yegappan Lakshmanan).

Added &quot;throw&quot; to <span class="Type">'debug'</span> option: throw an exception for error messages even
whey they would otherwise be ignored.

When <span class="Type">'keymap'</span> is set and a line contains an invalid entry could get a &quot;No
mapping found&quot; warning instead of a proper error message.

Motif: default to using XpmAttributes instead of XpmAttributes_21.

A few more changes for 64 bit MS-Windows. (George Reilly)

Got ml_get errors when doing &quot;o&quot; and selecting in other window where there are
less lines shorter than the cursor position in the other window.  ins_mouse()
was using position in wrong window.

Win32 GUI: Crash when giving a lot of messages during startup.  Allocate twice
as much memory for the dialog template.

Fixed a few leaks and wrong pointer use reported by coverity.

When showing menus the mode character was sometimes wrong.

Added feedkeys(). (Yakov Lerner)

Made matchlist() always return all submatches.

Moved triggering QuickFixCmdPost to before jumping to the first location.

Mac: Added the <span class="Type">'macatsui'</span> option as a temporary work around for text drawing
problems.

Line completion on &quot;/**&quot; gave error messages when scanning an unloaded buffer.

<span class="PreProc">--- fixes and changes since Vim 7.0f ---</span>

Win32: The height of the tab page labels is now adjusted to the font height.
(Yegappan Lakshmanan)

Win32: selecting the tab label was off by one. (Yegappan Lakshmanan)

Added tooltips for Motif and GTK tab page labels. (Yegappan Lakshmanan)

When <span class="Type">'encoding'</span> is &quot;utf-8&quot; then &quot;:help spell&quot; would report an illegal byte and
the file was not converted from latin1 to utf-8.  Now retry with latin1 if
reading the file as utf-8 results in illegal bytes.

Escape the argument of feedkeys() before putting it in the typeahead buffer.
(Yukihiro Nakadaira)

Added the v:char variable for evaluating <span class="Type">'formatexpr'</span>. (Yukihiro Nakadaira)

With 8 colors Search highlighting combined with Statement highlighted text
made the text disappear.

VMS: avoid warnings for redefining MAX and MIN. (Zoltan Arpadffy)

When <span class="Type">'virtualedit'</span> includes &quot;onemore&quot;, stopping Visual selection would still
move the cursor left.

Prevent that using <span class="Special">CTRL-R</span> = in Insert mode can start Visual mode.

Fixed a crash that occurred when in Insert mode with completion active and a
mapping caused edit() to be called recursively.

When using <span class="Special">CTRL-O</span> in Insert mode just after the last character while
<span class="Type">'virtualedit'</span> is &quot;all&quot;, then typing CR moved the last character to the next
line.  Call coladvance() before starting the new line.

When using <span class="Ignore">|</span><span class="Identifier">:shell</span><span class="Ignore">|</span> ignore clicks on the tab page labels.  Also when using the
command line window.

When <span class="Type">'eventignore'</span> is &quot;all&quot; then adding more to ignoring some events, e.g.,
for &quot;:vimgrep&quot;, would actually trigger more events.

Win32: When a running Vim uses server name GVIM1 then &quot;gvim --remote fname&quot;
didn't find it.  When looking for a server name that doesn't end in a digit
and it is not found then use another server with that name and a number (just
like on Unix).

When using &quot;double&quot; in <span class="Type">'spellsuggest'</span> when the language doesn't support sound
folding resulted in too many suggestions.

Win32: Dropping a shortcut on the Vim icon didn't edit the referred file like
editing it in another way would.  Use fname_expand() in buf_set_name() instead
of simply make the file name a full path.

Using feedkeys() could cause Vim to hang.

When closing another tab page from the tabline menu in Insert mode the tabline
was not updated right away.

The syntax menu didn't work in compatible mode.

After using &quot;:tag id&quot; twice with the same &quot;id&quot;, &quot;:ts&quot; and then &quot;:pop&quot; a &quot;:ts&quot;
reported no matching tag.  Clear the cached tag name.

In Insert mode the matchparen plugin highlighted the wrong paren when there is
a string just next to a paren.

GTK: After opening a new tab page the text was sometimes not drawn correctly.
Flush output and catch up with events when updating the tab page labels.

In the GUI, using <span class="Special">CTRL-W</span> q to close the last window of a tab page could cause
a crash.

GTK: The tab pages line menu was not converted from <span class="Type">'encoding'</span> to utf-8.

Typing a multi-byte character or a special key at the hit-enter prompt did not
work.

When <span class="Type">'virtualedit'</span> contains &quot;onemore&quot; <span class="Special">CTRL-O</span> in Insert mode still moved the
cursor left when it was after the end of the line, even though it's allowed to
be there.

Added test for using tab pages.

towupper() and towlower() were not used, because of checking for
__STDC__ISO_10646__ instead of __STDC_ISO_10646__. (sertacyildiz)

For &quot;:map <span class="Special">&lt;expr&gt;</span>&quot; forbid changing the text, jumping to another buffer and
using &quot;:normal&quot; to avoid nasty side effects.

<span class="PreProc">--- fixes and changes since Vim 7.0g ---</span>

Compilation error on HP-UX, use of &quot;dlerr&quot; must be inside a #ifdef.
(Gary Johnson)

Report +reltime feature in &quot;:version&quot; output.

The tar and zip plugins detect failure to get the contents of the archive and
edit the file as-is.

When the result of <span class="Type">'guitablabel'</span> is empty fall back to the default label.

Fixed crash when using &quot;:insert&quot; in a while loop and missing &quot;endwhile&quot;.

&quot;gt&quot; and other commands could move to another window when <span class="Ignore">|</span><a href="eval.html#textlock"><span class="Identifier">textlock</span></a><span class="Ignore">|</span> active
and when the command line window was open.

Spell checking a file with syntax highlighting and a bad word at the end of
the line is ignored could make &quot;]s&quot; hang.

Mac: inputdialog() didn't work when compiled with big features.

Interrupting &quot;:vimgrep&quot; while it is busy loading a file left a modified and
hidden buffer behind.  Use enter_cleanup() and leave_cleanup() around
wipe_buffer().

When making <span class="Type">'keymap'</span> empty the b:keymap_name variable wasn't deleted.

Using <span class="Special">CTRL-N</span> that searches a long time, pressing space to interrupt the
searching and accept the first match, the popup menu was still displayed
briefly.

When setting the Vim window height with -geometry the <span class="Type">'window'</span> option could be
at a value that makes <span class="Special">CTRL-F</span> behave differently.

When opening a quickfix window in two tabs they used different buffers,
causing redrawing problems later.  Now use the same buffer for all quickfix
windows. (Yegappan Lakshmanan)

When <span class="Type">'mousefocus'</span> is set moving the mouse to the text tab pages line would
move focus to the first window.  Also, the mouse pointer would jump to the
active window.

In a session file, when an empty buffer is wiped out, do this silently.

When one window has the cursor on the last line and another window is resized
to make that window smaller, the cursor line could go below the displayed
lines.  In win_new_height() subtract one from the available space.
Also avoid that using &quot;~&quot; lines makes the window scroll down.

Mac: When sourcing the &quot;macmap.vim&quot; script and then finding a .vimrc file the
<span class="Type">'cpo'</span> option isn't set properly, because it was already set and restored.
Added the <span class="Special">&lt;special&gt;</span> argument to &quot;:map&quot;, so that <span class="Type">'cpo'</span> doesn't need to be
changed to be able to use &lt;&gt; notation.  Also do this for &quot;:menu&quot; for
consistency.

When using &quot;/encoding=abc&quot; in a spell word list, only &quot;bc&quot; was used.

When <span class="Type">'encoding'</span> and <span class="Type">'printencoding'</span> were both &quot;utf-8&quot; then &quot;:hardcopy&quot; didn't
work. (Mike Williams)

Mac: When building with &quot;--disable-gui&quot; the install directory would still be
&quot;/Applications&quot; and Vim.app would be installed.  Now install in /usr/local as
usual for a console application.

GUI: when doing completion and there is one match and still searching for
another, the cursor was displayed at the end of the line instead of after the
match.  Now show the cursor after the match while still searching for matches.

GUI: The mouse shape changed on the statusline even when <span class="Type">'mouse'</span> was empty and
they can't be dragged.

GTK2: Selecting a button in the confirm() dialog with Tab or cursor keys and
hitting Enter didn't select that button.  Removed GTK 1 specific code. (Neil
Bird)

When evaluating <span class="Type">'balloonexpr'</span> takes a long time it could be called
recursively, which could cause a crash.

exists() could not be used to detect whether &quot;:2match&quot; is supported.  Added a
check for it specifically.

GTK1: Tab page labels didn't work. (Yegappan Lakshmanan)

Insert mode completion: When finding matches use <span class="Type">'ignorecase'</span>, but when adding
matches to the list don't use it, so that all words with different case are
added, &quot;word&quot;, &quot;Word&quot; and &quot;WORD&quot;.

When <span class="Type">'cursorline'</span> and <span class="Type">'hlsearch'</span> are set and the search pattern is &quot;x\n&quot;
the rest of the line was highlighted as a match.

Cursor moved while evaluating <span class="Type">'balloonexpr'</span> that invokes &quot;:isearch&quot; and
redirects the output.  Don't move the cursor to the command line if msg_silent
is set.

exists() ignored text after a function name and option name, which could
result in false positives.

exists() ignored characters after the recognized word, which can be wrong when
using a name with non-keyword characters.  Specifically, these calls no longer
allow characters after the name: exists('*funcname') exists('*funcname(...')
exists('&amp;option') exists(':cmd') exists('g:name') exists('g:name[n]')
exists('g:name.n')

Trigger the TabEnter autocommand only after entering the current window of the
tab page, otherwise the commands are executed with an invalid current window.

Win32: When using two monitors and Vim is on the second monitor, changing the
width of the Vim window could make it jump to the first monitor.

When scrolling back at the more prompt and the quitting a line of text would
be left behind when <span class="Type">'cmdheight'</span> is 2 or more.

Fixed a few things for Insert mode completion, especially when typing BS,
<span class="Special">CTRL-N</span> or a printable character while still searching for matches.

<span class="PreProc">==============================================================================</span>
7.1 版 本					<span class="Ignore">*</span><span id="version-7.1" class="String anchor">version-7.1</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="version7.1" class="String anchor">version7.1</span><span class="Ignore">*</span>

本小节讨论 7.0 和 7.1 版本之间的改进。

这是一个漏洞修正版。没有什么突出的新特性。

改动							<span class="Ignore">*</span><span id="changed-7.1" class="String anchor">changed-7.1</span><span class="Ignore">*</span>
<span class="PreProc">-------</span>

vimrc_example.vim 里，增加了 <span class="Type">'mouse'</span> 的设置。

带 MZscheme 编译时同时寻找 &quot;plt&quot; 子目录下的头文件。FreeBSD 用到那里的文件。

Ruby 界面的模块名现在叫做 &quot;Vim&quot; 而非 &quot;VIM&quot;。但为了反向兼容起见，保留 &quot;VIM&quot; 为
其别名。 (Tim Pope)

新增							<span class="Ignore">*</span><span id="added-7.1" class="String anchor">added-7.1</span><span class="Ignore">*</span>
<span class="PreProc">-----</span>

新语法文件:
	/var/log/messages (Yakov Lerner)
	Autohotkey (Nikolai Weibull)
	AutoIt v3 (Jared Breland)
	Bazaar commit file &quot;bzr&quot; (Dmitry Vasiliev)
	Cdrdao TOC (Nikolai Weibull)
	Cmusrc (Nikolai Weibull)
	Conary recipe (rPath Inc)
	Framescript (Nikolai Weibull)
	FreeBasic (Mark Manning)
	Hamster (David Fishburn)
	IBasic (Mark Manning)
	Initng (Elan Ruusamae)
	Ldapconf (Nikolai Weibull)
	Litestep (Nikolai Weibull)
	Privoxy actions file (Doug Kearns)
	Streaming Descriptors &quot;sd&quot; (Puria Nafisi Azizi)

新教程文件:
	捷克语 (Lubos Turek)
	匈牙利语 (Arpad Horvath)
	土耳其语 (Serkan kkk)
	希腊语教程的 utf-8 版本。
	俄语教程的 utf-8 版本。
	斯洛伐克语教程的 utf-8 版本。

新文件类型插件:
	Bst (Tim Pope)
	Cobol (Tim Pope)
	Fvwm (Gautam Iyer)
	Hamster (David Fishburn)
	Django HTML 模板 (Dave Hodder)

新缩进文件:
	Bst (Tim Pope)
	Cobol (Tim Pope)
	Hamster (David Fishburn)
	Django HTML template (Dave Hodder)
	Javascript
	JSP (David Fishburn)

新键盘映射表:
	保加利亚语 (Boyko Bantchev)
	蒙古语 (Natsagdorj Shagdar)
	马尔代夫语 (Ibrahim Fayaz)
	越南语 (Samuel Thibault)

其它新运行时文件:
	Ada 支持文件。(Neil Bird, Martin Krischik)
	斯洛文尼亚语菜单翻译 (Mojca Miklavec)
	Mono C# 编译器插件 (Jarek Sobiecki)

修正							<span class="Ignore">*</span><span id="fixed-7.1" class="String anchor">fixed-7.1</span><span class="Ignore">*</span>
<span class="PreProc">-----</span>

Could not build the Win32s version.  Added a few structure definitions in
src/gui_w32.c

Patch 7.0.001
问题:       &quot;:set spellsuggest+=10&quot; does not work. (Suresh Govindachar)
解决方案:   Add P_COMMA to the <span class="Type">'spellsuggest'</span> flags.
相关文件:   src/option.c

Patch 7.0.002
问题:       C omni completion has a problem with tags files with a path
	    containing &quot;#&quot; or &quot;%&quot;.
解决方案:   Escape these characters. (Sebastian Baberowski)
相关文件:   runtime/autoload/ccomplete.vim

Patch 7.0.003
问题:       GUI: clicking in the lower part of a label in the tab pages line
	    while <span class="Type">'mousefocus'</span> is set may warp the mouse pointer. (Robert
	    Webb)
解决方案:   Check for a negative mouse position.
相关文件:   src/gui.c

Patch 7.0.004
问题:       Compiler warning for debug_saved used before set. (Todd Blumer)
解决方案:   Remove the &quot;else&quot; for calling save_dbg_stuff().
相关文件:   src/ex_docmd.c

Patch 7.0.005 (extra)
问题:       Win32: The installer doesn't remove the &quot;autoload&quot; and &quot;spell&quot;
	    directories. (David Fishburn)
解决方案:   Add the directories to the list to be removed.
相关文件:   nsis/gvim.nsi

Patch 7.0.006
问题:       Mac: &quot;make shadow&quot; doesn't make a link for infplist.xml. (Axel
	    Kielhorn)
解决方案:   Make the link.
相关文件:   src/Makefile

Patch 7.0.007
问题:       AIX: compiling fails for message.c. (Ruediger Hornig)
解决方案:   Move the #if outside of memchr().
相关文件:   src/message.c

Patch 7.0.008
问题:       Can't call a function that uses both <span class="Special">&lt;SID&gt;</span> and <span class="Special">{expr}</span>. (Thomas)
解决方案:   Check both the expanded and unexpanded name for <span class="Special">&lt;SID&gt;</span>.
相关文件:   src/eval.c

Patch 7.0.009
问题:       ml_get errors with both <span class="Type">'sidescroll'</span> and <span class="Type">'spell'</span> set.
解决方案:   Use ml_get_buf() instead of ml_get(), get the line from the right
	    buffer, not the current one.
相关文件:   src/spell.c

Patch 7.0.010
问题:       The spellfile plugin required typing login name and password.
解决方案:   Use &quot;anonymous&quot; and &quot;vim7user&quot; by default.  No need to setup a
	    .netrc file.
相关文件:   runtime/autoload/spellfile.vim

Patch 7.0.011
问题:       Can't compile without the folding and with the eval feature.
解决方案:   Add an #ifdef. (Vallimar)
相关文件:   src/option.c

Patch 7.0.012
问题:       Using the matchparen plugin, moving the cursor in Insert mode to a
	    shorter line that ends in a brace, changes the preferred column
解决方案:   Use winsaveview()/winrestview() instead of getpos()/setpos().
相关文件:   runtime/plugin/matchparen.vim

Patch 7.0.013
问题:       Insert mode completion: using <span class="Special">CTRL-L</span> to add an extra character
	    also deselects the current match, making it impossible to use
	    <span class="Special">CTRL-L</span> a second time.
解决方案:   Keep the current match.  Also make <span class="Special">CTRL-L</span> work at the original
	    text, using the first displayed match.
相关文件:   src/edit.c

Patch 7.0.014
问题:       Compiling gui_xmebw.c fails on Dec Alpha Tru64. (Rolfe)
解决方案:   Disable some code for Motif 1.2 and older.
相关文件:   src/gui_xmebw.c

Patch 7.0.015
问题:       Athena: compilation problems with modern compiler.
解决方案:   Avoid type casts for lvalue. (Alexey Froloff)
相关文件:   src/gui_at_fs.c

Patch 7.0.016
问题:       Printing doesn't work for &quot;dec-mcs&quot; encoding.
解决方案:   Add &quot;dec-mcs&quot;, &quot;mac-roman&quot; and &quot;hp-roman8&quot; to the list of
	    recognized 8-bit encodings. (Mike Williams)
相关文件:   src/mbyte.c

Patch 7.0.017 (after 7.0.014)
问题:       Linking gui_xmebw.c fails on Dec Alpha Tru64. (Rolfe)
解决方案:   Adjust defines for Motif 1.2 and older.
相关文件:   src/gui_xmebw.c

Patch 7.0.018
问题:       VMS: plugins are not loaded on startup.
解决方案:   Remove &quot;**&quot; from the path. (Zoltan Arpadffy)
相关文件:   src/main.c

Patch 7.0.019
问题:       Repeating &quot;VjA789&quot; may cause a crash. (James Vega)
解决方案:   Check the cursor column after moving it to another line.
相关文件:   src/ops.c

Patch 7.0.020
问题:       Crash when using <span class="Type">'mousefocus'</span>. (William Fulton)
解决方案:   Make buffer for mouse coordinates 2 bytes longer. (Juergen Weigert)
相关文件:   src/gui.c

Patch 7.0.021
问题:       Crash when using &quot;\\[&quot; and &quot;\\]&quot; in <span class="Type">'errorformat'</span>. (Marc Weber)
解决方案:   Check for valid submatches after matching the pattern.
相关文件:   src/quickfix.c

Patch 7.0.022
问题:       Using buffer.append() in Ruby may append the line to the wrong
	    buffer. (Alex Norman)
解决方案:   Properly switch to the buffer to do the appending.  Also for
	    buffer.delete() and setting a buffer line.
相关文件:   src/if_ruby.c

Patch 7.0.023
问题:       Crash when doing spell completion in an empty line and pressing
	    <span class="Special">CTRL-E</span>.
解决方案:   Check for a zero pointer. (James Vega)
	    Also handle a situation without a matching pattern better, report
	    &quot;No matches&quot; instead of remaining in undefined <span class="Special">CTRL-X</span> mode.  And
	    get out of <span class="Special">CTRL-X</span> mode when typing a letter.
相关文件:   src/edit.c

Patch 7.0.024
问题:       It is possible to set arbitrary &quot;v:&quot; variables.
解决方案:   Disallow setting &quot;v:&quot; variables that are not predefined.
相关文件:   src/eval.c

Patch 7.0.025
问题:       Crash when removing an element of a:000.  (Nikolai Weibull)
解决方案:   Mark the a:000 list with VAR_FIXED.
相关文件:   src/eval.c

Patch 7.0.026
问题:       Using libcall() may show an old error.
解决方案:   Invoke dlerror() to clear a previous error. (Yukihiro Nakadaira)
相关文件:   src/os_unix.c

Patch 7.0.027 (extra)
问题:       Win32: When compiled with SNIFF gvim may hang on exit.
解决方案:   Translate and dispatch the WM_USER message. (Mathias Michaelis)
相关文件:   src/gui_w48.c

Patch 7.0.028 (extra)
问题:       OS/2: Vim doesn't compile with gcc 3.2.1.
解决方案:   Add argument to after_pathsep(), don't define vim_handle_signal(),
	    define HAVE_STDARG_H. (David Sanders)
相关文件:   src/os_unix.c, src/vim.h, src/os_os2_cfg.h

Patch 7.0.029
问题:       getchar() may not position the cursor after a space.
解决方案:   Position the cursor explicitly.
相关文件:   src/eval.c

Patch 7.0.030
问题:       The &quot;:compiler&quot; command can't be used in a FileChangedRO event.
	    (Hari Krishna Dara)
解决方案:   Add the CMDWIN flag to the &quot;:compiler&quot; command.
相关文件:   src/ex_cmds.h

Patch 7.0.031
问题:       When deleting a buffer the buffer-local mappings for Select mode
	    remain.
解决方案:   Add the Select mode bit to MAP_ALL_MODES. (Edwin Steiner)
相关文件:   src/vim.h

Patch 7.0.032 (extra, after 7.0.027)
问题:       Missing semicolon.
解决方案:   Add the semicolon.
相关文件:   src/gui_w48.c

Patch 7.0.033
问题:       When pasting text, with the menu or <span class="Special">CTRL-V</span>, autoindent is removed.
解决方案:   Use &quot;x<span class="Special">&lt;BS&gt;</span>&quot; to avoid indent to be removed. (Benji Fisher)
相关文件:   runtime/autoload/paste.vim

Patch 7.0.034
问题:       After doing completion and typing more characters or using BS
	    repeating with &quot;.&quot; didn't work properly. (Martin Stubenschrott)
解决方案:   Don't put BS and other characters in the redo buffer right away,
	    do this when finishing completion.
相关文件:   src/edit.c

Patch 7.0.035
问题:       Insert mode completion works when typed but not when replayed from
	    a register. (Hari Krishna Dara)
	    Also: Mappings for Insert mode completion don't always work.
解决方案:   When finding a non-completion key in the input don't interrupt
	    completion when it wasn't typed.
	    Do use mappings when checking for typeahead while still finding
	    completions.  Avoids that completion is interrupted too soon.
	    Use &quot;compl_pending&quot; in a different way.
相关文件:   src/edit.c

Patch 7.0.036
问题:       Can't compile with small features and syntax highlighting or the
	    diff feature.
解决方案:   Define LINE_ATTR whenever syntax highlighting or the diff feature
	    is enabled.
相关文件:   src/screen.c

Patch 7.0.037
问题:       Crash when resizing the GUI window vertically when there is a line
	    that doesn't fit.
解决方案:   Don't redraw while the screen data is invalid.
相关文件:   src/screen.c

Patch 7.0.038
问题:       When calling complete() from an Insert mode expression mapping
	    text could be inserted in an improper way.
解决方案:   Make undo_allowed() global and use it in complete().
相关文件:   src/undo.c, src/proto/undo.pro, src/eval.c

Patch 7.0.039
问题:       Calling inputdialog() with a third argument in the console doesn't
	    work.
解决方案:   Make a separate function for input() and inputdialog(). (Yegappan
	    Lakshmanan)
相关文件:   src/eval.c

Patch 7.0.040
问题:       When <span class="Type">'cmdheight'</span> is larger than 1 using inputlist() or selecting
	    a spell suggestion with the mouse gets the wrong entry.
解决方案:   Start listing the first alternative on the last line of the screen.
相关文件:   src/eval.c, src/spell.c

Patch 7.0.041
问题:       cursor([1, 1]) doesn't work. (Peter Hodge)
解决方案:   Allow leaving out the third item of the list and use zero for the
	    virtual column offset.
相关文件:   src/eval.c

Patch 7.0.042
问题:       When pasting a block of text in Insert mode Vim hangs or crashes.
	    (Noam Halevy)
解决方案:   Avoid that the cursor is positioned past the NUL of a line.
相关文件:   src/ops.c

Patch 7.0.043
问题:       Using &quot;%!&quot; at the start of <span class="Type">'statusline'</span> doesn't work.
解决方案:   Recognize the special item when the option is being set.
相关文件:   src/option.c

Patch 7.0.044
问题:       Perl: setting a buffer line in another buffer may result in
	    changing the current buffer.
解决方案:   Properly change to the buffer to be changed.
相关文件:   src/if_perl.xs

Patch 7.0.045 (extra)
问题:       Win32: Warnings when compiling OLE version with MSVC 2005.
解决方案:   Move including vim.h to before windows.h. (Ilya Bobir)
相关文件:   src/if_ole.cpp

Patch 7.0.046
问题:       The matchparen plugin ignores parens in strings, but not in single
	    quotes, often marked with &quot;character&quot;.
解决方案:   Also ignore parens in syntax items matching &quot;character&quot;.
相关文件:   runtime/plugin/matchparen.vim

Patch 7.0.047
问题:       When running configure the exit status is wrong.
解决方案:   Handle the exit status properly. (Matthew Woehlke)
相关文件:   configure, src/configure

Patch 7.0.048
问题:       Writing a compressed file fails when there are parens in the name.
	    (Wang Jian)
解决方案:   Put quotes around the temp file name.
相关文件:   runtime/autoload/gzip.vim

Patch 7.0.049
问题:       Some TCL scripts are not recognized. (Steven Atkinson)
解决方案:   Check for &quot;exec wish&quot; in the file.
相关文件:   runtime/scripts.vim

Patch 7.0.050
问题:       After using the netbeans interface close command a stale pointer
	    may be used.
解决方案:   Clear the pointer to the closed buffer. (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.0.051 (after 7.0.44)
问题:       The Perl interface doesn't compile or doesn't work properly.
解决方案:   Remove the spaces before #ifdef and avoid an empty line above it.
相关文件:   src/if_perl.xs

Patch 7.0.052
问题:       The user may not be aware that the Vim server allows others more
	    functionality than desired.
解决方案:   When running Vim as root don't become a Vim server without an
	    explicit --servername argument.
相关文件:   src/main.c

Patch 7.0.053
问题:       Shortening a directory name may fail when there are multi-byte
	    characters.
解决方案:   Copy the correct bytes. (Titov Anatoly)
相关文件:   src/misc1.c

Patch 7.0.054
问题:       Mac: Using a menu name that only has a mnemonic or accelerator
	    causes a crash.  (Elliot Shank)
解决方案:   Check for an empty menu name.  Also delete empty submenus that
	    were created before detecting the error.
相关文件:   src/menu.c

Patch 7.0.055
问题:       &quot;:startinsert&quot; in a CmdwinEnter autocommand doesn't take immediate
	    effect. (Bradley White)
解决方案:   Put a NOP key in the typeahead buffer.  Also avoid that using
	    <span class="Special">CTRL-C</span> to go back to the command line moves the cursor left.
相关文件:   src/edit.c, src/ex_getln.c

Patch 7.0.056
问题:       &quot;#!something&quot; gives an error message.
解决方案:   Ignore this line, so that it can be used in an executable Vim
	    script.
相关文件:   src/ex_docmd.c

Patch 7.0.057 (extra, after 7.0.45)
问题:       Win32: Compilation problem with Borland C 5.5.
解决方案:   Include vim.h as before. (Mark S. Williams)
相关文件:   src/if_ole.cpp

Patch 7.0.058
问题:       The gbk and gb18030 encodings are not recognized.
解决方案:   Add aliases to cp936. (Edward L. Fox)
相关文件:   src/mbyte.c

Patch 7.0.059
问题:       The Perl interface doesn't compile with ActiveState Perl 5.8.8.
解决方案:   Remove the __attribute__() items. (Liu Yubao)
相关文件:   src/if_perl.xs

Patch 7.0.060 (after 7.0.51)
问题:       Code for temporarily switching to another buffer is duplicated in
	    quite a few places.
解决方案:   Use aucmd_prepbuf() and aucmd_restbuf() also when FEAT_AUTOCMD is
	    not defined.
相关文件:   src/buffer.c, src/eval.c, src/fileio.c, src/if_ruby.c,
	    src/if_perl.xs, src/quickfix.c, src/structs.h

Patch 7.0.061
问题:       Insert mode completion for Vim commands may crash if there is
	    nothing to complete.
解决方案:   Instead of freeing the pattern make it empty, so that a &quot;not
	    found&quot; error is given. (Yukihiro Nakadaira)
相关文件:   src/edit.c

Patch 7.0.062
问题:       Mac: Crash when using the popup menu for spell correction.  The
	    popup menu appears twice when letting go of the right mouse button
	    early.
解决方案:   Don't show the popup menu on the release of the right mouse
	    button.  Also check that a menu pointer is actually valid.
相关文件:   src/proto/menu.pro, src/menu.c, src/normal.c, src/term.c

Patch 7.0.063
问题:       Tiny chance for a memory leak. (coverity)
解决方案:   Free pointer when next memory allocation fails.
相关文件:   src/eval.c

Patch 7.0.064
问题:       Using uninitialized variable. (Tony Mechelynck)
解决方案:   When not used set &quot;temp&quot; to zero.  Also avoid a warning for
	    &quot;files&quot; in ins_compl_dictionaries().
相关文件:   src/edit.c

Patch 7.0.065 (extra)
问题:       Mac: left-right movement of the scrollwheel causes up-down
	    scrolling.
解决方案:   Ignore mouse wheel events that are not up-down. (Nicolas Weber)
相关文件:   src/gui_mac.c

Patch 7.0.066
问题:       After the popup menu for Insert mode completion overlaps the tab
	    pages line it is not completely removed.
解决方案:   Redraw the tab pages line after removing the popup menu. (Ori
	    Avtalion)
相关文件:   src/popupmnu.c

Patch 7.0.067
问题:       Undo doesn't always work properly when using &quot;scim&quot; input method.
	    Undo is split up when using preediting.
解决方案:   Reset xim_has_preediting also when preedit_start_col is not
	    MAXCOL.  Don't split undo when <span class="Special">&lt;Left&gt;</span> is used while preediting.
	    (Yukihiro Nakadaira)
相关文件:   src/edit.c, src/mbyte.c

Patch 7.0.068
问题:       When <span class="Type">'ignorecase'</span> is set and using Insert mode completion,
	    typing characters to change the list of matches, case is not
	    ignored. (Hugo Ahlenius)
解决方案:   Store the <span class="Type">'ignorecase'</span> flag with the matches where needed.
相关文件:   src/edit.c, src/search.c, src/spell.c

Patch 7.0.069
问题:       Setting <span class="Type">'guitablabel'</span> to %!expand(\%)  causes Vim to free an
	    invalid pointer. (Kim Schulz)
解决方案:   Don't try freeing a constant string pointer.
相关文件:   src/buffer.c

Patch 7.0.070
问题:       Compiler warnings for shadowed variables and uninitialized
	    variables.
解决方案:   Rename variables such as &quot;index&quot;, &quot;msg&quot; and &quot;dup&quot;.  Initialize
	    variables.
相关文件:   src/edit.c, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_x11.c,
	    src/hardcopy.c, src/if_cscope.c, src/main.c, src/mbyte.c,
	    src/memline.c, src/netbeans.c, src/normal.c, src/option.c,
	    src/os_unix.c, src/quickfix.c, src/regexp.c, src/screen.c,
	    src/search.c, src/spell.c, src/ui.c, src/undo.c, src/window.c,
	    src/version.c

Patch 7.0.071
问题:       Using an empty search pattern may cause a crash.
解决方案:   Avoid using a NULL pointer.
相关文件:   src/search.c

Patch 7.0.072
问题:       When starting the GUI fails there is no way to adjust settings or
	    do something else.
解决方案:   Add the GUIFailed autocommand event.
相关文件:   src/fileio.c, src/gui.c, src/vim.h

Patch 7.0.073
问题:       Insert mode completion: Typing <span class="Special">&lt;CR&gt;</span> sometimes selects the original
	    text instead of keeping what was typed.  (Justin Constantino)
解决方案:   Don't let <span class="Special">&lt;CR&gt;</span> select the original text if there is no popup menu.
相关文件:   src/edit.c

Patch 7.0.074 (extra)
问题:       Win32: tooltips were not converted from <span class="Type">'encoding'</span> to Unicode.
解决方案:   Set the tooltip to use Unicode and do the conversion.  Also
	    cleanup the code for the tab pages tooltips. (Yukihiro Nakadaira)
相关文件:   src/gui_w32.c, src/gui_w48.c

Patch 7.0.075
问题:       winsaveview() did not store the actual value of the desired cursor
	    column.  This could move the cursor in the matchparen plugin.
解决方案:   Call update_curswant() before using the value w_curswant.
相关文件:   src/eval.c

Patch 7.0.076 (after 7.0.010)
问题:       Automatic downloading of spell files only works for ftp.
解决方案:   Don't add login and password for non-ftp URLs. (Alexander Patrakov)
相关文件:   runtime/autoload/spellfile.vim

Patch 7.0.077
问题:       &quot;:unlet v:this_session&quot; causes a crash. (Marius Roets)
解决方案:   When trying to unlet a fixed variable give an error message.
相关文件:   src/eval.c

Patch 7.0.078
问题:       There are two error messages E46.
解决方案:   Change the number for the sandbox message to E794.
相关文件:   src/globals.h

Patch 7.0.079
问题:       Russian tutor doesn't work when <span class="Type">'encoding'</span> is &quot;utf-8&quot;.
解决方案:   Use tutor.ru.utf-8 as the master, and generate the other encodings
	    from it.  Select the right tutor depending on <span class="Type">'encoding'</span>. (Alexey
	    Froloff)
相关文件:   runtime/tutor/Makefile, runtime/tutor/tutor.vim,
	    runtime/tutor/tutor.ru.utf-8

Patch 7.0.080
问题:       Generating auto/pathdef.c fails for CFLAGS with a backslash.
解决方案:   Double backslashes in the string. (Alexey Froloff)
相关文件:   src/Makefile

Patch 7.0.081
问题:       Command line completion doesn't work for a shell command with an
	    absolute path.
解决方案:   Don't use $PATH when there is an absolute path.
相关文件:   src/ex_getln.c

Patch 7.0.082
问题:       Calling a function that waits for input may cause List and
	    Dictionary arguments to be freed by the garbage collector.
解决方案:   Keep a list of all arguments to internal functions.
相关文件:   src/eval.c

Patch 7.0.083
问题:       Clicking with the mouse on an item for inputlist() doesn't work
	    when <span class="Type">'compatible'</span> is set and/or when <span class="Type">'cmdheight'</span> is more than one.
	    (Christian J.  Robinson)
解决方案:   Also decrement &quot;lines_left&quot; when <span class="Type">'more'</span> isn't set.  Set
	    &quot;cmdline_row&quot; to zero to get all mouse events.
相关文件:   src/message.c, src/misc1.c

Patch 7.0.084
问题:       The garbage collector may do its work while some Lists or
	    Dictionaries are used internally, e.g., by &quot;:echo&quot; that runs into
	    the more-prompt or &quot;:echo [garbagecollect()]&quot;.
解决方案:   Only do garbage collection when waiting for a character at the
	    toplevel.  Let garbagecollect() set a flag that is handled at the
	    toplevel before waiting for a character.
相关文件:   src/eval.c, src/getchar.c, src/globals.h, src/main.c

Patch 7.0.085
问题:       When doing &quot;make test&quot; the viminfo file is modified.
解决方案:   Use another viminfo file after setting <span class="Type">'compatible'</span>.
相关文件:   src/testdir/test56.in

Patch 7.0.086
问题:       getqflist() returns entries for pattern and text with the number
	    zero.  Passing these to setqflist() results in the string &quot;0&quot;.
解决方案:   Use an empty string instead of the number zero.
相关文件:   src/quickfix.c

Patch 7.0.087
问题:       After &quot;:file fname&quot; and &quot;:saveas fname&quot; the <span class="Type">'autochdir'</span> option
	    does not take effect. (Yakov Lerner)
	    Commands for handling <span class="Type">'autochdir'</span> are repeated many times.
解决方案:   Add the DO_AUTOCHDIR macro and do_autochdir().  Use it for
	    &quot;:file fname&quot; and &quot;:saveas fname&quot;.
相关文件:   src/proto/buffer.pro, src/buffer.c, src/ex_cmds.c, src/macros.h,
	    src/netbeans.c, src/option.c, src/window.c

Patch 7.0.088
问题:       When compiled with Perl the generated prototypes have &quot;extern&quot;
	    unnecessarily added.
解决方案:   Remove the &quot;-pipe&quot; argument from PERL_CFLAGS.
相关文件:   src/auto/configure, src/configure.in

Patch 7.0.089
问题:       &quot;ga&quot; does not work properly for a non-Unicode multi-byte encoding.
解决方案:   Only check for composing chars for utf-8. (Taro Muraoka)
相关文件:   src/ex_cmds.c

Patch 7.0.090
问题:       Cancelling the conform() dialog on the console with Esc requires
	    typing it twice. (Benji Fisher)
解决方案:   When the start of an escape sequence is found use <span class="Type">'timeoutlen'</span> or
	    <span class="Type">'ttimeoutlen'</span>.
相关文件:   src/misc1.c

Patch 7.0.091
问题:       Using winrestview() while <span class="Type">'showcmd'</span> is set causes the cursor to be
	    displayed in the wrong position. (Yakov Lerner)
解决方案:   Set the window topline properly.
相关文件:   src/eval.c

Patch 7.0.092 (after 7.0.082 and 7.0.084)
问题:       The list of internal function arguments is obsolete now that
	    garbage collection is only done at the toplevel.
解决方案:   Remove the list of all arguments to internal functions.
相关文件:   src/eval.c

Patch 7.0.093
问题:       The matchparen plugin can't handle a <span class="Type">'matchpairs'</span> value where a
	    colon is matched.
解决方案:   Change the split() that is used to change <span class="Type">'matchpairs'</span> into a
	    List.
相关文件:   runtime/plugin/matchparen.vim

Patch 7.0.094
问题:       When a hidden buffer is made the current buffer and another file
	    edited later, the file message will still be given.  Using
	    &quot;:silent&quot; also doesn't prevent the file message. (Marvin Renich)
解决方案:   Reset the need_fileinfo flag when reading a file.  Don't set
	    need_fileinfo when msg_silent is set.
相关文件:   src/buffer.c, src/fileio.c

Patch 7.0.095
问题:       The Greek tutor is not available in utf-8.  &quot;el&quot; is used for the
	    language, only &quot;gr&quot; for the country is recognized.
解决方案:   Add the utf-8 Greek tutor.  Use it for conversion to iso-8859-7
	    and cp737.  (Lefteris Dimitroulakis)
相关文件:   runtime/tutor/Makefile, runtime/tutor/tutor.gr.utf-8,
	    runtime/tutor/tutor.vim

Patch 7.0.096
问题:       taglist() returns the filename relative to the tags file, while
	    the directory of the tags file is unknown. (Hari Krishna Dara)
解决方案:   Expand the file name. (Yegappan Lakshmanan)
相关文件:   src/tag.c

Patch 7.0.097
问题:       &quot;:tabclose <span class="Special">N</span>&quot; that closes another tab page does not remove the tab
	    pages line.  Same problem when using the mouse.
解决方案:   Adjust the tab pages line when needed in tabpage_close_other().
相关文件:   src/ex_docmd.c

Patch 7.0.098
问题:       Redirecting command output in a cmdline completion function
	    doesn't work. (Hari Krishna Dara)
解决方案:   Enable redirection when redirection is started.
相关文件:   src/ex_docmd.c, src/ex_getln.c

Patch 7.0.099
问题:       GUI: When the popup menu is visible using the scrollbar messes up
	    the display.
解决方案:   Disallow scrolling the current window.  Redraw the popup menu
	    after scrolling another window.
相关文件:   src/gui.c

Patch 7.0.100
问题:       &quot;zug&quot; may report the wrong filename. (Lawrence Kesteloot)
解决方案:   Call home_replace() to fill NameBuff[].
相关文件:   src/spell.c

Patch 7.0.101
问题:       When the &quot;~/.vim/spell&quot; directory does not exist &quot;zg&quot; may create
	    a wrong directory.  &quot;zw&quot; doesn't work.
解决方案:   Use the directory of the file name instead of NameBuff.  For &quot;zw&quot;
	    not only remove a good word but also add the word with &quot;!&quot;.
相关文件:   src/spell.c

Patch 7.0.102
问题:       Redrawing cmdline is not correct when using SCIM.
解决方案:   Don't call im_get_status(). (Yukihiro Nakadaira)
相关文件:   src/ex_getln.c

Patch 7.0.103 (after 7.0.101)
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Init variable.
相关文件:   src/spell.c

Patch 7.0.104
问题:       The CursorHoldI event only triggers once in Insert mode.  It also
	    triggers after <span class="Special">CTRL-V</span> and other two-key commands.
解决方案:   Set &quot;did_cursorhold&quot; before getting a second key.  Reset
	    &quot;did_cursorhold&quot; after handling a command.
相关文件:   src/edit.c, src/fileio.c

Patch 7.0.105
问题:       When using incremental search the statusline ruler isn't updated.
	    (Christoph Koegl)
解决方案:   Update the statusline when it contains the ruler.
相关文件:   src/ex_getln.c

Patch 7.0.106
问题:       The spell popup menu uses &quot;:amenu&quot;, triggering mappings.  Other
	    PopupMenu autocommands are removed. (John Little)
解决方案:   Use &quot;:anoremenu&quot; and use an autocmd group.
相关文件:   runtime/menu.vim

Patch 7.0.107
问题:       Incremental search doesn't redraw the text tabline. (Ilya Bobir)
	    Also happens in other situations with one window in a tab page.
解决方案:   Redraw the tabline after clearing the screen.
相关文件:   src/screen.c

Patch 7.0.108 (extra)
问题:       Amiga: Compilation problem.
解决方案:   Have mch_mkdir() return a failure flag. (Willy Catteau)
相关文件:   src/os_amiga.c, src/proto/os_amiga.pro

Patch 7.0.109
问题:       Lisp indenting is confused by escaped quotes in strings. (Dorai
	    Sitaram)
解决方案:   Check for backslash inside strings. (Sergey Khorev)
相关文件:   src/misc1.c

Patch 7.0.110
问题:       Amiga: Compilation problems when not using libnix.
解决方案:   Change a few #ifdefs. (Willy Catteau)
相关文件:   src/memfile.c

Patch 7.0.111
问题:       The gzip plugin can't handle filenames with single quotes.
解决方案:   Add and use the shellescape() function. (partly by Alexey Froloff)
相关文件:   runtime/autoload/gzip.vim, runtime/doc/eval.txt, src/eval.c,
	    src/mbyte.c, src/misc2.c, src/proto/misc2.pro

Patch 7.0.112
问题:       Python interface does not work with Python 2.5.
解决方案:   Change PyMem_DEL() to Py_DECREF(). (Sumner Hayes)
相关文件:   src/if_python.c

Patch 7.0.113
问题:       Using <span class="Special">CTRL-L</span> in Insert completion when there is no current match
	    may cause a crash. (Yukihiro Nakadaira)
解决方案:   Check for compl_leader to be NULL
相关文件:   src/edit.c

Patch 7.0.114
问题:       When aborting an insert with <span class="Special">CTRL-C</span> an extra undo point is
	    created in the GUI. (Yukihiro Nakadaira)
解决方案:   Call gotchars() only when advancing.
相关文件:   src/getchar.c

Patch 7.0.115
问题:       When <span class="Type">'ignorecase'</span> is set, Insert mode completion only adds &quot;foo&quot;
	    and not &quot;Foo&quot; when both are found.
	    A found match isn't displayed right away when <span class="Type">'completeopt'</span> does
	    not have &quot;menu&quot; or &quot;menuone&quot;.
解决方案:   Do not ignore case when checking if a completion match already
	    exists.  call ins_compl_check_keys() also when not using a popup
	    menu. (Yukihiro Nakadaira)
相关文件:   src/edit.c

Patch 7.0.116
问题:       64 bit Windows version reports &quot;32 bit&quot; in the &quot;:version&quot; output.
	    (M. Veerman)
解决方案:   Change the text for Win64.
相关文件:   src/version.c

Patch 7.0.117
问题:       Using &quot;extend&quot; on a syntax item inside a region with &quot;keepend&quot;, an
	    intermediate item may be truncated.
	    When applying the &quot;keepend&quot; and there is an offset to the end
	    pattern the highlighting of a contained item isn't adjusted.
解决方案:   Use the seen_keepend flag to remember when to apply the &quot;keepend&quot;
	    flag.  Adjust the keepend highlighting properly. (Ilya Bobir)
相关文件:   src/syntax.c

Patch 7.0.118
问题:       printf() does not do zero padding for strings.
解决方案:   Do allow zero padding for strings.
相关文件:   src/message.c

Patch 7.0.119
问题:       When going back from Insert to Normal mode the CursorHold event
	    doesn't trigger. (Yakov Lerner)
解决方案:   Reset &quot;did_cursorhold&quot; when leaving Insert mode.
相关文件:   src/edit.c

Patch 7.0.120
问题:       Crash when using <span class="Special">CTRL-R</span> = at the command line and entering
	    &quot;getreg('=')&quot;. (James Vega)
解决方案:   Avoid recursiveness of evaluating the = register.
相关文件:   src/ops.c

Patch 7.0.121
问题:       GUI: Dragging the last status line doesn't work when there is a
	    text tabline.  (Markus Wolf)
解决方案:   Take the text tabline into account when deciding to start modeless
	    selection.
相关文件:   src/gui.c

Patch 7.0.122
问题:       GUI: When clearing after a bold, double-wide character half a
	    character may be drawn.
解决方案:   Check for double-wide character and redraw it. (Yukihiro Nakadaira)
相关文件:   src/screen.c

Patch 7.0.123
问题:       On SCO Openserver configure selects the wrong terminal library.
解决方案:   Put terminfo before the other libraries. (Roger Cornelius)
	    Also fix a small problem compiling on Mac without Darwin.
相关文件:   src/configure.in, src/auto/configure

Patch 7.0.124
问题:       getwinvar() obtains a dictionary with window-local variables, but
	    it's always for the current window.
解决方案:   Get the variables of the specified window. (Geoff Reedy)
相关文件:   src/eval.c

Patch 7.0.125
问题:       When &quot;autoselect&quot; is in the <span class="Type">'clipboard'</span> option then the '&lt; and '&gt;
	    marks are set while Visual mode is still active.
解决方案:   Don't set the '&lt; and '&gt; marks when yanking the selected area for
	    the clipboard.
相关文件:   src/normal.c

Patch 7.0.126
问题:       When <span class="Type">'formatexpr'</span> uses setline() and later internal formatting is
	    used undo information is not correct. (Jiri Cerny, Benji Fisher)
解决方案:   Set ins_need_undo after using <span class="Type">'formatexpr'</span>.
相关文件:   src/edit.c

Patch 7.0.127
问题:       Crash when swap files has invalid timestamp.
解决方案:   Check return value of ctime() for being NULL.
相关文件:   src/memline.c

Patch 7.0.128
问题:       GUI: when closing gvim is cancelled because there is a changed
	    buffer the screen isn't updated to show the changed buffer in the
	    current window.  (Krzysztof Kacprzak)
解决方案:   Redraw when closing gvim is cancelled.
相关文件:   src/gui.c

Patch 7.0.129
问题:       GTK GUI: the GTK file dialog can't handle a relative path.
解决方案:   Make the initial directory a full path before passing it to GTK.
	    (James Vega)  Also postpone adding the default file name until
	    after setting the directory.
相关文件:   src/gui_gtk.c

Patch 7.0.130 (extra)
问题:       Win32: Trying to edit or write devices may cause Vim to get stuck.
解决方案:   Add the <span class="Type">'opendevice'</span> option, default off.  Disallow
	    reading/writing from/to devices when it's off.
	    Also detect more devices by the full name starting with &quot;\\.\&quot;.
相关文件:   runtime/doc/options.txt, src/fileio.c, src/option.c, src/option.h,
	    src/os_win32.c

Patch 7.0.131
问题:       Win32: &quot;vim -r&quot; does not list all the swap files.
解决方案:   Also check for swap files starting with a dot.
相关文件:   src/memline.c

Patch 7.0.132 (after 7.0.130)
问题:       Win32: Crash when Vim reads from stdin.
解决方案:   Only use mch_nodetype() when there is a file name.
相关文件:   src/fileio.c

Patch 7.0.133
问题:       When searching included files messages are added to the history.
解决方案:   Set msg_hist_off for messages about scanning included files.
            Set msg_silent to avoid message about wrapping around.
相关文件:   src/edit.c, src/globals.h, src/message.c, src/search.c

Patch 7.0.134
问题:       Crash when comparing a recursively looped List or Dictionary.
解决方案:   Limit recursiveness for comparing to 1000.
相关文件:   src/eval.c

Patch 7.0.135
问题:       Crash when garbage collecting list or dict with loop.
解决方案:   Don't use DEL_REFCOUNT but don't recurse into Lists and
	    Dictionaries when freeing them in the garbage collector.
	    Also add allocated Dictionaries to the list of Dictionaries to
	    avoid leaking memory.
相关文件:   src/eval.c, src/proto/eval.pro, src/tag.c

Patch 7.0.136
问题:       Using &quot;O&quot; while matching parens are highlighted may not remove the
	    highlighting. (Ilya Bobir)
解决方案:   Also trigger CursorMoved when a line is inserted under the cursor.
相关文件:   src/misc1.c

Patch 7.0.137
问题:       Configure check for big features is wrong.
解决方案:   Change &quot;==&quot; to &quot;=&quot;. (Martti Kuparinen)
相关文件:   src/auto/configure, src/configure.in

Patch 7.0.138 (extra)
问题:       Mac: modifiers don't work with function keys.
解决方案:   Use GetEventParameter() to obtain modifiers. (Nicolas Weber)
相关文件:   src/gui_mac.c

Patch 7.0.139
问题:       Using <span class="Special">CTRL-PageUp</span> or <span class="Special">CTRL-PageDown</span> in Insert mode to go to another
	    tab page does not prepare for undo properly. (Stefano Zacchiroli)
解决方案:   Call start_arrow() before switching tab page.
相关文件:   src/edit.c

Patch 7.0.140 (after 7.0.134)
问题:       Comparing recursively looped List or Dictionary doesn't work well.
解决方案:   Detect comparing a List or Dictionary with itself.
相关文件:   src/eval.c

Patch 7.0.141
问题:       When pasting a while line on the command line an extra CR is added
	    literally.
解决方案:   Don't add the trailing CR when pasting with the mouse.
相关文件:   src/ex_getln.c, src/proto/ops.pro, src/ops.c

Patch 7.0.142
问题:       Using the middle mouse button in Select mode to paste text results
	    in an extra &quot;y&quot;. (Kriton Kyrimis)
解决方案:   Let the middle mouse button replace the selected text with the
	    contents of the clipboard.
相关文件:   src/normal.c

Patch 7.0.143
问题:       Setting <span class="Type">'scroll'</span> to its default value was not handled correctly.
解决方案:   Compare the right field to PV_SCROLL.
相关文件:   src/option.c

Patch 7.0.144
问题:       May compare two unrelated pointers when matching a pattern against
	    a string.  (Dominique Pelle)
解决方案:   Avoid calling reg_getline() when REG_MULTI is false.
相关文件:   src/regexp.c

Patch 7.0.145 (after 7.0.142)
问题:       Compiler warning.
解决方案:   Add type cast.
相关文件:   src/normal.c

Patch 7.0.146
问题:       When <span class="Type">'switchbuf'</span> is set to &quot;usetab&quot; and the current tab has only a
	    quickfix window, jumping to an error always opens a new window.
	    Also, when the buffer is open in another tab page it's not found.
解决方案:   Check for the &quot;split&quot; value of <span class="Type">'switchbuf'</span> properly.  Search in
	    other tab pages for the desired buffer. (Yegappan Lakshmanan)
相关文件:   src/buffer.c, src/quickfix.c

Patch 7.0.147
问题:       When creating a session file and there are several tab pages and
	    some windows have a local directory a short file name may be used
	    when it's not valid. (Marius Roets)
	    A session with multiple tab pages may result in &quot;No Name&quot; buffers.
	    (Bill McCarthy)
解决方案:   Don't enter tab pages when going through the list, only use a
	    pointer to the first window in each tab page.
            Use &quot;tabedit&quot; instead of &quot;tabnew | edit&quot; when possible.
相关文件:   src/ex_docmd.c

Patch 7.0.148
问题:       When doing &quot;call a.xyz()&quot; and &quot;xyz&quot; does not exist in dictionary
	    &quot;a&quot; there is no error message. (Yegappan Lakshmanan)
解决方案:   Add the error message.
相关文件:   src/eval.c

Patch 7.0.149
问题:       When resizing a window that shows &quot;~&quot; lines the text sometimes
	    jumps down.
解决方案:   Remove code that uses &quot;~&quot; lines in some situations.  Fix the
            computation of the screen line of the cursor.  Also set w_skipcol
	    to handle very long lines.
相关文件:   src/misc1.c, src/window.c

Patch 7.0.150
问题:       When resizing the Vim window scrollbinding doesn't work. (Yakov
	    Lerner)
解决方案:   Do scrollbinding in set_shellsize().
相关文件:   src/term.c

Patch 7.0.151
问题:       Buttons in file dialog are not according to Gnome guidelines.
解决方案:   Swap Cancel and Open buttons. (Stefano Zacchiroli)
相关文件:   src/gui_gtk.c

Patch 7.0.152
问题:       Crash when using lesstif 2.
解决方案:   Fill in the extension field. (Ben Hutchings)
相关文件:   src/gui_xmebw.c

Patch 7.0.153
问题:       When using cscope and opening the temp file fails Vim crashes.
	    (Kaya Bekiroglu)
解决方案:   Check for NULL pointer returned from mch_open().
相关文件:   src/if_cscope.c

Patch 7.0.154
问题:       When <span class="Type">'foldnestmax'</span> is negative Vim can hang. (James Vega)
解决方案:   Avoid the fold level becoming negative.
相关文件:   src/fold.c, src/syntax.c

Patch 7.0.155
问题:       When getchar() returns a mouse button click there is no way to get
	    the mouse coordinates.
解决方案:   Add v:mouse_win, v:mouse_lnum and v:mouse_col.
相关文件:   runtime/doc/eval.txt, src/eval.c, src/vim.h

Patch 7.0.156 (extra)
问题:       Vim doesn't compile for Amiga OS 4.
解决方案:   Various changes for Amiga OS4. (Peter Bengtsson)
相关文件:   src/feature.h, src/mbyte.c, src/memfile.c, src/memline.c,
	    src/os_amiga.c, src/os_amiga.h, src/pty.c

Patch 7.0.157
问题:       When a function is used recursively the profiling information is
	    invalid. (Mikolaj Machowski)
解决方案:   Put the start time on the stack instead of in the function.
相关文件:   src/eval.c

Patch 7.0.158
问题:       In a C file with &quot;:set foldmethod=syntax&quot;, typing {<span class="Special">&lt;CR&gt;</span> on the
	    last line results in the cursor being in a closed fold. (Gautam
	    Iyer)
解决方案:   Open fold after inserting a new line.
相关文件:   src/edit.c

Patch 7.0.159
问题:       When there is an I/O error in the swap file the cause of the error
	    cannot be seen.
解决方案:   Use PERROR() instead of EMSG() where possible.
相关文件:   src/memfile.c

Patch 7.0.160
问题:       &quot;:@a&quot; echoes the command, Vi doesn't do that.
解决方案:   Set the silent flag in the typeahead buffer to avoid echoing the
	    command.
相关文件:   src/ex_docmd.c, src/normal.c, src/ops.c, src/proto/ops.pro

Patch 7.0.161
问题:       Win32: Tab pages line popup menu isn't using the right encoding.
            (Yongwei Wu)
解决方案:   Convert the text when necessary.  Also fixes the Find/Replace
	    dialog title. (Yegappan Lakshmanan)
相关文件:   src/gui_w48.c

Patch 7.0.162
问题:       &quot;vim -o a b&quot; when file &quot;a&quot; triggers the ATTENTION dialog,
	    selecting &quot;Quit&quot; exits Vim instead of editing &quot;b&quot; only.
	    When file &quot;b&quot; triggers the ATTENTION dialog selecting &quot;Quit&quot; or
	    &quot;Abort&quot; results in editing file &quot;a&quot; in that window.
解决方案:   When selecting &quot;Abort&quot; exit Vim.  When selecting &quot;Quit&quot; close the
	    window.  Also avoid hit-enter prompt when selecting Abort.
相关文件:   src/buffer.c, src/main.c

Patch 7.0.163
问题:       Can't retrieve the position of a sign after it was set.
解决方案:   Add the netbeans interface getAnno command. (Xavier de Gaye)
相关文件:   runtime/doc/netbeans.txt, src/netbeans.c

Patch 7.0.164
问题:       &quot;:redir @+&quot; doesn't work.
解决方案:   Accept &quot;@+&quot; just like &quot;@*&quot;. (Yegappan Lakshmanan)
相关文件:   src/ex_docmd.c

Patch 7.0.165
问题:       Using <span class="Special">CTRL-L</span> at the search prompt adds a &quot;/&quot; and other characters
	    without escaping, causing the pattern not to match.
解决方案:   Escape special characters with a backslash.
相关文件:   src/ex_getln.c

Patch 7.0.166
问题:       Crash in cscope code when connection could not be opened.
	    (Kaya Bekiroglu)
解决方案:   Check for the file descriptor to be NULL.
相关文件:   src/if_cscope.c

Patch 7.0.167
问题:       &quot;:function&quot; redefining a dict function doesn't work properly.
	    (Richard Emberson)
解决方案:   Allow a function name to be a number when it's a function
	    reference.
相关文件:   src/eval.c

Patch 7.0.168
问题:       Using uninitialized memory and memory leak. (Dominique Pelle)
解决方案:   Use alloc_clear() instead of alloc() for w_lines.  Free
	    b_ml.ml_stack after recovery.
相关文件:   src/memline.c, src/window.c

Patch 7.0.169
问题:       With a Visual block selection, with the cursor in the left upper
	    corner, pressing &quot;I&quot; doesn't remove the highlighting. (Guopeng
	    Wen)
解决方案:   When checking if redrawing is needed also check if Visual
	    selection is still active.
相关文件:   src/screen.c

Patch 7.0.170 (extra)
问题:       Win32: Using &quot;gvim --remote-tab foo&quot; when gvim is minimized while
	    it previously was maximized, un-maximizing doesn't work properly.
	    And the labels are not displayed properly when <span class="Type">'encoding'</span> is
	    utf-8.
解决方案:   When minimized check for SW_SHOWMINIMIZED.  When updating the tab
	    pages line use TCM_SETITEMW instead of TCM_INSERTITEMW. (Liu
	    Yubao)
相关文件:   src/gui_w48.c

Patch 7.0.171 (extra)
问题:       VMS: A file name with multiple paths is written in the wrong file.
解决方案:   Get the actually used file name. (Zoltan Arpadffy)
	    Also add info to the :version command about compilation.
相关文件:   src/Make_vms.mms, src/buffer.c, src/os_unix.c, src/version.c

Patch 7.0.172
问题:       Crash when recovering and quitting at the &quot;press-enter&quot; prompt.
解决方案:   Check for &quot;msg_list&quot; to be NULL. (Liu Yubao)
相关文件:   src/ex_eval.c

Patch 7.0.173
问题:       &quot;:call f().TT()&quot; doesn't work.  (Richard Emberson)
解决方案:   When a function returns a Dictionary or another composite continue
	    evaluating what follows.
相关文件:   src/eval.c

Patch 7.0.174
问题:       &quot;:mksession&quot; doesn't restore window layout correctly in tab pages
	    other than the current one. (Zhibin He)
解决方案:   Use the correct topframe for producing the window layout commands.
相关文件:   src/ex_docmd.c

Patch 7.0.175
问题:       The result of tr() is missing the terminating NUL. (Ingo Karkat)
解决方案:   Add the NUL.
相关文件:   src/eval.c

Patch 7.0.176
问题:       &quot;:emenu&quot; isn't executed directly, causing the encryption key
	    prompt to fail. (Life Jazzer)
解决方案:   Fix wrong #ifdef.
相关文件:   src/menu.c

Patch 7.0.177
问题:       When the press-enter prompt gets a character from a non-remappable
	    mapping, it's put back in the typeahead buffer as remappable,
	    which may cause an endless loop.
解决方案:   Restore the non-remappable flag and the silent flag when putting a
	    char back in the typeahead buffer.
相关文件:   src/getchar.c, src/message.c, src/normal.c

Patch 7.0.178
问题:       When <span class="Type">'enc'</span> is &quot;utf-8&quot; and <span class="Type">'ignorecase'</span> is set the result of &quot;:echo
	    (&quot;\xe4&quot; == &quot;\xe4&quot;)&quot; varies.
解决方案:   In mb_strnicmp() avoid looking past NUL bytes.
相关文件:   src/mbyte.c

Patch 7.0.179
问题:       Using &quot;:recover&quot; or &quot;vim -r&quot; without a swapfile crashes Vim.
解决方案:   Check for &quot;buf&quot; to be unequal NULL. (Yukihiro Nakadaira)
相关文件:   src/memline.c

Patch 7.0.180 (extra, after 7.0.171)
问题:       VMS: build failed.  Problem with swapfiles.
解决方案:   Add &quot;compiled_arch&quot;.  Always expand path and pass it to
	    buf_modname().  (Zoltan Arpadffy)
相关文件:   src/globals.h, src/memline.c, src/os_unix.c, runtime/menu.vim

Patch 7.0.181
问题:       When reloading a file that starts with an empty line, the reloaded
	    buffer has an extra empty line at the end. (Motty Lentzitzky)
解决方案:   Delete all lines, don't use bufempty().
相关文件:   src/fileio.c

Patch 7.0.182
问题:       When using a mix of undo and &quot;g-&quot; it may no longer be possible to
	    go to every point in the undo tree.  (Andy Wokula)
解决方案:   Correctly update pointers in the undo tree.
相关文件:   src/undo.c

Patch 7.0.183
问题:       Crash in &quot;:let&quot; when redirecting to a variable that's being
	    displayed. (Thomas Link)
解决方案:   When redirecting to a variable only do the assignment when
	    stopping redirection to avoid that setting the variable causes a
	    freed string to be accessed.
相关文件:   src/eval.c

Patch 7.0.184
问题:       When the cscope program is called &quot;mlcscope&quot; the Cscope interface
	    doesn't work.
解决方案:   Accept &quot;\S*cscope:&quot; instead of &quot;cscope:&quot;. (Frodak D. Baksik)
相关文件:   src/if_cscope.c

Patch 7.0.185
问题:       Multi-byte characters in a message are displayed with attributes
	    from what comes before it.
解决方案:   Don't use the attributes for a multi-byte character.  Do use
	    attributes for special characters. (Yukihiro Nakadaira)
相关文件:   src/message.c

Patch 7.0.186
问题:       Get an ml_get error when <span class="Type">'encoding'</span> is &quot;utf-8&quot; and searching for
	    &quot;/\_s*/e&quot; in an empty buffer.  (Andrew Maykov)
解决方案:   Don't try getting the line just below the last line.
相关文件:   src/search.c

Patch 7.0.187
问题:       Can't source a remote script properly.
解决方案:   Add the SourceCmd event. (Charles Campbell)
相关文件:   runtime/doc/autocmd.txt, src/ex_cmds2.c, src/fileio.c, src/vim.h

Patch 7.0.188 (after 7.0.186)
问题:       Warning for wrong pointer type.
解决方案:   Add a type cast.
相关文件:   src/search.c

Patch 7.0.189
问题:       Translated message about finding matches is truncated. (Yukihiro
	    Nakadaira)
解决方案:   Enlarge the buffer.  Also use vim_snprintf().
相关文件:   src/edit.c

Patch 7.0.190
问题:       &quot;syntax spell default&quot; results in an error message.
解决方案:   Change 4 to 7 for STRNICMP(). (Raul Nunez de Arenas Coronado)
相关文件:   src/syntax.c

Patch 7.0.191
问题:       The items used by getqflist() and setqflist() don't match.
解决方案:   Support the &quot;bufnum&quot; item for setqflist(). (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c

Patch 7.0.192
问题:       When <span class="Type">'swapfile'</span> is switched off in an empty file it is possible
	    that not all blocks are loaded into memory, causing ml_get errors
	    later.
解决方案:   Rename &quot;dont_release&quot; to &quot;mf_dont_release&quot; and also use it to
	    avoid using the cached line and locked block.
相关文件:   src/globals.h, src/memfile.c, src/memline.c

Patch 7.0.193
问题:       Using --remote or --remote-tab with an argument that matches
	    <span class="Type">'wildignore'</span> causes a crash.
解决方案:   Check the argument count before using ARGLIST[0].
相关文件:   src/ex_cmds.c

Patch 7.0.194
问题:       Once an ml_get error is given redrawing part of the screen may
	    cause it again, resulting in an endless loop.
解决方案:   Don't give the error message for a recursive call.
相关文件:   src/memline.c

Patch 7.0.195
问题:       When a buffer is modified and <span class="Type">'autowriteall'</span> is set, &quot;:quit&quot;
	    results in an endless loop when there is a conversion error while
	    writing. (Nikolai Weibull)
解决方案:   Make autowrite() return FAIL if the buffer is still changed after
	    writing it.
	    /* put the cursor on the last char, for <span class="Type">'tw'</span> formatting */
相关文件:   src/ex_cmds2.c

Patch 7.0.196
问题:       When using &quot;:vert ball&quot; the computation of the mouse pointer
	    position may be off by one column. (Stefan Karlsson)
解决方案:   Recompute the frame width when moving the vertical separator from
	    one window to another.
相关文件:   src/window.c

Patch 7.0.197 (extra)
问题:       Win32: Compiling with EXITFREE doesn't work.
解决方案:   Adjust a few #ifdefs. (Alexei Alexandrof)
相关文件:   src/misc2.c, src/os_mswin.c

Patch 7.0.198 (extra)
问题:       Win32: Compiler warnings.  No need to generate gvim.exe.mnf.
解决方案:   Add type casts.  Use &quot;*&quot; for processorArchitecture. (George Reilly)
相关文件:   src/Make_mvc.mak, src/eval.c, src/gvim.exe.mnf, src/misc2.c

Patch 7.0.199
问题:       When using multi-byte characters the combination of completion and
	    formatting may result in a wrong cursor position.
解决方案:   Don't decrement the cursor column, use dec_cursor(). (Yukihiro
	    Nakadaira)  Also check for the column to be zero.
相关文件:   src/edit.c

Patch 7.0.200
问题:       Memory leaks when out of memory.
解决方案:   Free the memory.
相关文件:   src/edit.c, src/diff.c

Patch 7.0.201
问题:       Message for &quot;:diffput&quot; about buffer not being in diff mode may be
	    wrong.
解决方案:   Check for buffer in diff mode but not modifiable.
相关文件:   src/diff.c

Patch 7.0.202
问题:       Problems on Tandem systems while compiling and at runtime.
解决方案:   Recognize root uid is 65535.  Check select() return value for it
	    not being supported.  Avoid wrong function prototypes.  Mention
	    use of -lfloss.  (Matthew Woehlke)
相关文件:   src/Makefile, src/ex_cmds.c, src/fileio.c, src/main.c,
	    src/osdef1.h.in, src/osdef2.h.in, src/os_unix.c, src/pty.c,
	    src/vim.h

Patch 7.0.203
问题:       0x80 characters in a register are not handled correctly for the
	    &quot;@&quot; command.
解决方案:   Escape CSI and 0x80 characters. (Yukihiro Nakadaira)
相关文件:   src/ops.c

Patch 7.0.204
问题:       Cscope: Parsing matches for listing isn't done properly.
解决方案:   Check for line number being found. (Yu Zhao)
相关文件:   src/if_cscope.c

Patch 7.0.205 (after 7.0.203)
问题:       Can't compile.
解决方案:   Always include the vim_strsave_escape_csi function.
相关文件:   src/getchar.c

Patch 7.0.206 (after 7.0.058)
问题:       Some characters of the &quot;gb18030&quot; encoding are not handled
	    properly.
解决方案:   Do not use &quot;cp936&quot; as an alias for &quot;gb18030&quot; encoding.  Instead
	    initialize <span class="Type">'encoding'</span> to &quot;cp936&quot;.
相关文件:   src/mbyte.c, src/option.c

Patch 7.0.207
问题:       After patch 2.0.203 CSI and K_SPECIAL characters are escaped when
	    recorded and then again when the register is executed.
解决方案:   Remove escaping before putting the recorded characters in a
	    register.  (Yukihiro Nakadaira)
相关文件:   src/getchar.c, src/ops.c, src/proto/getchar.pro

Patch 7.0.208 (after 7.0.171 and 7.0.180)
问题:       VMS: changes to path handling cause more trouble than they solve.
解决方案:   Revert changes.
相关文件:   src/buffer.c, src/memline.c, src/os_unix.c

Patch 7.0.209
问题:       When replacing a line through Python the cursor may end up beyond
	    the end of the line.
解决方案:   Check the cursor column after replacing the line.
相关文件:   src/if_python.c

Patch 7.0.210
问题:       &quot;:cbuffer&quot; and &quot;:lbuffer&quot; always fail when the buffer is modified.
	    (Gary Johnson)
解决方案:   Support adding a !. (Yegappan Lakshmanan)
相关文件:   runtime/doc/quickfix.txt, src/ex_cmds.h

Patch 7.0.211
问题:       With &quot;:set cindent noai bs=0&quot; using <span class="Special">CTRL-U</span> in Insert mode will
	    delete auto-indent.  After &quot;:set ai&quot; it doesn't.
解决方案:   Also check <span class="Type">'cindent'</span> being set. (Ryan Lortie)
相关文件:   src/edit.c

Patch 7.0.212
问题:       The GUI can't be terminated with SIGTERM. (Mark Logan)
解决方案:   Use the signal protection in the GUI as in the console, allow
	    signals when waiting for 100 msec or longer.
相关文件:   src/ui.c

Patch 7.0.213
问题:       When <span class="Type">'spellfile'</span> has two regions that use the same sound folding
	    using &quot;z=&quot; will cause memory to be freed twice. (Mark Woodward)
解决方案:   Clear the hashtable properly so that the items are only freed once.
相关文件:   src/spell.c

Patch 7.0.214
问题:       When using <span class="Special">&lt;f-args&gt;</span> in a user command it's not possible to have an
	    argument end in '\ '.
解决方案:   Change the handling of backslashes. (Yakov Lerner)
相关文件:   runtime/doc/map.txt, src/ex_docmd.c

Patch 7.0.215 (extra)
问题:       Mac: Scrollbar size isn't set.  Context menu has disabled useless
	    Help entry.  Call to MoreMasterPointers() is ignored.
解决方案:   Call SetControlViewSize() in gui_mch_set_scrollbar_thumb().  Use
	    kCMHelpItemRemoveHelp for ContextualMenuSelect().  Remove call to
	    MoreMasterPointers(). (Nicolas Weber)
相关文件:   src/gui_mac.c

Patch 7.0.216
问题:       &quot;:tab wincmd ]&quot; does not open a tab page. (Tony Mechelynck)
解决方案:   Copy the cmdmod.tab value to postponed_split_tab and use it.
相关文件:   src/globals.h, src/ex_docmd.c, src/if_cscope.c, src/window.c

Patch 7.0.217
问题:       This hangs when pressing &quot;n&quot;: &quot;:%s/\n/,\r/gc&quot;. (Ori Avtalion)
解决方案:   Set &quot;skip_match&quot; to advance to the next line.
相关文件:   src/ex_cmds.c

Patch 7.0.218
问题:       &quot;%B&quot; in <span class="Type">'statusline'</span> always shows zero in Insert mode. (DervishD)
解决方案:   Remove the exception for Insert mode, check the column for being
	    valid instead.
相关文件:   src/buffer.c

Patch 7.0.219
问题:       When using the 'editexisting.vim' script and a file is being
	    edited in another tab page the window is split.  The &quot;+123&quot;
	    argument is not used.
解决方案:   Make the tab page with the file the current tab page.  Set
	    v:swapcommand when starting up to the first &quot;+123&quot; or &quot;-c&quot; command
	    line argument.
相关文件:   runtime/macros/editexisting.vim, src/main.c

Patch 7.0.220
问题:       Crash when using winnr('#') in a new tab page. (Andy Wokula)
解决方案:   Check for not finding the window.
相关文件:   src/eval.c

Patch 7.0.221
问题:       finddir() uses <span class="Type">'path'</span> by default, where &quot;.&quot; means relative to the
	    current file.  But it works relative to the current directory.
	    (Tye Zdrojewski)
解决方案:   Add the current buffer name to find_file_in_path_option() for the
	    relative file name.
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.0.222
问题:       Perl indenting using <span class="Type">'cindent'</span> works almost right.
解决方案:   Recognize '#' to start a comment. (Alex Manoussakis)  Added '#'
	    flag in <span class="Type">'cinoptions'</span>.
相关文件:   runtime/doc/indent.txt, src/misc1.c

Patch 7.0.223
问题:       Unprintable characters in completion text mess up the popup menu.
	    (Gombault Damien)
解决方案:   Use strtrans() to make the text printable.
相关文件:   src/charset.c, src/popupmnu.c

Patch 7.0.224
问题:       When expanding &quot;##&quot; spaces are escaped twice.  (Pavol Juhas)
解决方案:   Don't escape the spaces that separate arguments.
相关文件:   src/eval.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 7.0.225
问题:       When using setline() in an InsertEnter autocommand and doing &quot;A&quot;
	    the cursor ends up on the last byte in the line. (Yukihiro
	    Nakadaira)
解决方案:   Only adjust the column when using setline() for the cursor line.
	    Move it back to the head byte if necessary.
相关文件:   src/eval.c, src/misc2.c

Patch 7.0.226
问题:       Display flickering when updating signs through the netbeans
	    interface. (Xavier de Gaye)
解决方案:   Remove the redraw_later(CLEAR) call.
相关文件:   src/netbeans.c

Patch 7.0.227
问题:       Crash when closing a window in the GUI. (Charles Campbell)
解决方案:   Don't call out_flush() from win_free().
相关文件:   src/window.c

Patch 7.0.228
问题:       Cygwin: problem with symlink to DOS style path.
解决方案:   Invoke cygwin_conv_to_posix_path(). (Luca Masini)
相关文件:   src/os_unix.c

Patch 7.0.229
问题:       When <span class="Type">'pastetoggle'</span> starts with Esc then pressing Esc in Insert
	    mode will not time out. (Jeffery Small)
解决方案:   Use KL_PART_KEY instead of KL_PART_MAP, so that <span class="Type">'ttimeout'</span> applies
	    to the <span class="Type">'pastetoggle'</span> key.
相关文件:   src/getchar.c

Patch 7.0.230
问题:       After using &quot;:lcd&quot; a script doesn't know how to restore the
	    current directory.
解决方案:   Add the haslocaldir() function. (Bob Hiestand)
相关文件:   runtime/doc/usr_41.txt, runtime/doc/eval.txt, src/eval.c

Patch 7.0.231
问题:       When recovering from a swap file the page size is likely to be
	    different from the minimum.  The block used for the first page
	    then has a buffer of the wrong size, causing a crash when it's
	    reused later.  (Zephaniah Hull)
解决方案:   Reallocate the buffer when the page size changes.  Also check that
	    the page size is at least the minimum value.
相关文件:   src/memline.c

Patch 7.0.232 (extra)
问题:       Mac: doesn't support GUI tab page labels.
解决方案:   Add GUI tab page labels. (Nicolas Weber)
相关文件:   src/feature.h, src/gui.c, src/gui.h, src/gui_mac.c,
	    src/proto/gui_mac.pro

Patch 7.0.233 (extra)
问题:       Mac: code formatted badly.
解决方案:   Fix code formatting
相关文件:   src/gui_mac.c

Patch 7.0.234
问题:       It's possible to use feedkeys() from a modeline.  That is a
	    security issue, can be used for a trojan horse.
解决方案:   Disallow using feedkeys() in the sandbox.
相关文件:   src/eval.c

Patch 7.0.235
问题:       It is possible to use writefile() in the sandbox.
解决方案:   Add a few more checks for the sandbox.
相关文件:   src/eval.c

Patch 7.0.236
问题:       Linux 2.4 uses sysinfo() with a mem_unit field, which is not
	    backwards compatible.
解决方案:   Add an autoconf check for sysinfo.mem_unit.  Let mch_total_mem()
	    return Kbyte to avoid overflow.
相关文件:   src/auto/configure, src/configure.in, src/config.h.in,
	    src/option.c, src/os_unix.c

Patch 7.0.237
问题:       For root it is recommended to not use <span class="Type">'modeline'</span>, but in
	    not-compatible mode the default is on.
解决方案:   Let <span class="Type">'modeline'</span> default to off for root.
相关文件:   runtime/doc/options.txt, src/option.c

Patch 7.0.238
问题:       Crash when &quot;:match&quot; pattern runs into <span class="Type">'maxmempattern'</span>. (Yakov
	    Lerner)
解决方案:   Don't free the regexp program of match_hl.
相关文件:   src/screen.c

Patch 7.0.239
问题:       When using local directories and tab pages &quot;:mksession&quot; uses a
	    short file name when it shouldn't.  Window-local options from a
	    modeline may be applied to the wrong window. (Teemu Likonen)
解决方案:   Add the did_lcd flag, use the full path when it's set.  Don't use
	    window-local options from the modeline when using the current
	    window for another buffer in &quot;:doautoall&quot;.
相关文件:   src/fileio.c,  src/ex_docmd.c

Patch 7.0.240
问题:       Crash when splitting a window in the GUI. (opposite of 7.0.227)
解决方案:   Don't call out_flush() from win_alloc().  Also avoid this for
	    win_delete().  Also block autocommands while the window structure
	    is invalid.
相关文件:   src/window.c

Patch 7.0.241
问题:       &quot;:windo throw <span class="Type">'foo'</span>&quot; loops forever. (Andy Wokula)
解决方案:   Detect that win_goto() doesn't work.
相关文件:   src/ex_cmds2.c

Patch 7.0.242 (extra)
问题:       Win32: Using &quot;-register&quot; in a Vim that does not support OLE causes
	    a crash.
解决方案:   Don't use EMSG() but mch_errmsg().  Check p_go for being NULL.
	    (partly by Michael Wookey)
相关文件:   src/gui_w32.c

Patch 7.0.243 (extra)
问题:       Win32: When GvimExt is built with MSVC 2005 or later, the &quot;Edit
	    with vim&quot; context menu doesn't appear in the Windows Explorer.
解决方案:   Embed the linker manifest file into the resources of GvimExt.dll.
	    (Mathias Michaelis)
相关文件:   src/GvimExt/Makefile

Fixes after Vim 7.1a BETA:

The extra archive had CVS directories included below &quot;farsi&quot; and
&quot;runtime/icons&quot;.  CVS was missing the farsi icon files.

Fix compiling with Gnome 2.18, undefine bind_textdomain_codeset. (Daniel
Drake)

Mac: &quot;make install&quot; didn't copy rgb.txt.

When editing a compressed file while there are folds caused &quot;ml_get&quot; errors
and some lines could be missing.  When decompressing failed option values were
not restored.

Patch 7.1a.001
问题:       Crash when downloading a spell file.  (Szabolcs Horvat)
解决方案:   Avoid that did_set_spelllang() is used recursively when a new
	    window is opened for the download.
	    Also avoid wiping out the wrong buffer.
相关文件:   runtime/autoload/spellfile.vim, src/buffer.c, src/ex_cmds.c,
            src/spell.c

Patch 7.1a.002 (extra)
问题:       Compilation error with MingW.
解决方案:   Check for LPTOOLTIPTEXT to be defined.
相关文件:   src/gui_w32.c

Fixes after Vim 7.1b BETA:

Made the Mzscheme interface build both with old and new versions of Mzscheme,
using an #ifdef. (Sergey Khorev)
Mzscheme interface didn't link, missing function.  Changed order of libraries
in the configure script.

Ruby interface didn't compile on Mac.  Changed #ifdef. (Kevin Ballard)

Patch 7.1b.001 (extra)
问题:       Random text in a source file.  No idea how it got there.
解决方案:   Delete the text.
相关文件:   src/gui_w32.c

Patch 7.1b.002
问题:       When <span class="Type">'maxmem'</span> is large there can be an overflow in computations.
	    (Thomas Wiegner)
解决方案:   Use the same mechanism as in mch_total_mem(): first reduce the
	    multiplier as much as possible.
相关文件:   src/memfile.c

<span class="PreProc">==============================================================================</span>
7.2 版 本					<span class="Ignore">*</span><span id="version-7.2" class="String anchor">version-7.2</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="version7.2" class="String anchor">version7.2</span><span class="Ignore">*</span>

本小节讨论 7.1 和 7.2 版本之间的改进。

这主要是一个漏洞修正版。主要的新特性是浮点数支持。<span class="Ignore">|</span><a href="eval.html#Float"><span class="Identifier">Float</span></a><span class="Ignore">|</span>

改动							<span class="Ignore">*</span><span id="changed-7.2" class="String anchor">changed-7.2</span><span class="Ignore">*</span>
<span class="PreProc">-------</span>

把命令行缓冲区的名字从 &quot;command-line&quot; 改为 &quot;[Command Line]&quot;。

删除了 &quot;:caddexpr&quot;、&quot;:cgetexpr&quot;、&quot;:cgetfile&quot;、&quot;:laddexpr&quot;、&quot;:lgetexpr&quot; 和
&quot;:lgetfile&quot; 命令可选的 !。没有必要。(Yegappan Lakshmanan)

语法匹配的位移过去是字节数而不是字符数。这很不一致而且很容易弄错。现在使用字符
位移。
(Yukihiro Nakadaira)

FileChangedShellPost 事件本来在文件没有改变的时候也会给出。
(John Little)

如果当前行过长 (放不下)，会看不见弹出菜单。现在它在屏幕行而不是文本行下方显
示。
(Francois Ingelrest)

切换到 autoconf 2.62 版本。

把 fcntl.h 的包含移到了 vim.h，从所有的 .c 文件中删除其引用。

引入 STRMOVE(d, s) 宏，类似于 STRCPY()，用于有重叠的字符串。用此宏就不需要
mch_memmove(p, p + x, STRLEN(p + x) + 1)。

删除 bulgarian.vim 键盘映射文件，它被两个更标准的文件代替 (Boyko Bantchev)

命令行补全的标签最大匹配数目从 200 增加到 300 个。

帮助文件 sql.txt 被换名为 ft_sql.txt，而 ada.txt 也被更名为 ft_ada.txt。

新增							<span class="Ignore">*</span><span id="added-7.2" class="String anchor">added-7.2</span><span class="Ignore">*</span>
<span class="PreProc">-----</span>

新语法文件:
	CUDA (Timothy B. Terriberry)
	Cdrdao config (Nikolai Weibull)
	Coco/R (Ashish Shukla)
	Denyhosts config (Nikolai Weibull)
	Dtrace script (Nicolas Weber)
	Git output、commit、config、rebase、send-email (Tim Pope)
	HASTE 和 HastePreProc (M. Tranchero)
	Haml (Tim Pope)
	Host conf (Nikolai Weibull)
	Linden script (Timo Frenay)
	MS messages (Kevin Locke)
	PDF (Tim Pope)
	ProMeLa (Maurizio Tranchero)
	Reva Foth (Ron Aaron)
	Sass (Tim Pope)
	Symbian meta-makefile、MMP (Ron Aaron)
	VOS CM macro (Andrew McGill)
	XBL (Doug Kearns)

新教程文件:
	创建了所有教程文件的 UTF-8 版本。
	希腊文把 &quot;.gr&quot; 换名为 &quot;.el&quot; (Greek vs Greece)。
	世界语 (Dominique Pelle)
	克罗地亚语 (Paul B. Mahol)

新文件类型插件:
	Cdrdao config (Nikolai Weibull)
	Debian control files (Debian Vim 维护者)
	Denyhosts (Nikolai Weibull)
	Dos .ini file (Nikolai Weibull)
	Dtrace script (Nicolas Weber)
	FnameScript (Nikolai Weibull)
	Git、Git config、Git commit、Git rebase、Git send-email (Tim Pope)
	Haml (Tim Pope)
	Host conf (Nikolai Weibull)
	Host access (Nikolai Weibull)
	Logtalk (Paulo Moura)
	MS messages (Kevin Locke)
	NSIS script (Nikolai Weibull)
	PDF (Tim Pope)
	Reva Forth (Ron Aaron)
	Sass (Tim Pope)

新缩进文件:
	DTD (Nikolai Weibull)
	Dtrace script (Nicolas Weber)
	Erlang (Csaba Hoch)
	FrameScript (Nikolai Weibull)
	Git config (Tim Pope)
	Haml (Tim Pope)
	Logtalk (Paulo Moura)
	Sass (Tim Pope)
	Tiny Fugue (Christian J. Robinson)

新编译器插件:
	RSpec (Tim Pope)

新键盘映射表:
	克罗地亚语 (Paul B. Mahol)
	俄罗斯语 Dvorak (Serhiy Boiko)
	乌克兰语 Dvorak (Serhiy Boiko)
	删除简单保加利亚语，&quot;bds&quot; 和 phonetic 足够了。

其它新运行时文件:
	世界语菜单和消息翻译。(Dominique Pelle)
	芬兰语菜单和消息翻译。(Flammie Pirinen)
	巴西葡萄牙语菜单和消息翻译。(Eduardo Dobay)

加入浮点数支持。<span class="Ignore">|</span><a href="eval.html#Float"><span class="Identifier">Float</span></a><span class="Ignore">|</span>

mode() 接受参数以返回关于当前模式更详细的信息。(Ben Schmidt)

加入 BSD 控制台鼠标的支持: <span class="Ignore">|</span><a href="term.html#sysmouse"><span class="Identifier">sysmouse</span></a><span class="Ignore">|</span>。(Paul B. Mahol)

<span class="Type">'switchbuf'</span> 选项新增 &quot;newtab&quot; 值。(部分由 Yegappan Lakshmanan 提供)

改进了 netbeans 接口的错误信息。(Philippe Fremy)

加入 screen 使用 xterm 鼠标代码的支持。(Micah Cowan)

加入跨平台编译的支持:
调整了 configure.in 并新增了 INSTALLcross.txt。(Marc Haisenko) 之后修正了
configure.in 的错误。
configure 中不使用 /usr/local/include 和 /usr/local/lib。(Philip Prindeville)
为了在 Unix 上跨平台编译 Cygwin 版本，在 src/vim.rc 中把 VIM.TLB 换名为
vim.tlb。(Tsuneo Nakagawa)

加入 v:searchforward 变量: 当前搜索的方向。(Yakov Lerner)

修正							<span class="Ignore">*</span><span id="fixed-7.2" class="String anchor">fixed-7.2</span><span class="Ignore">*</span>
<span class="PreProc">-----</span>

Patch 7.1.001
问题:	    Still can't build with Gnome libraries.
解决方案:   Fix typo in bind_textdomain_codeset. (Mike Kelly)
相关文件:   src/gui_gtk.c, src/gui_gtk_x11.c

Patch 7.1.002
问题:	    Oracle Pro*C/C++ files are not detected.
解决方案:   Add the missing star. (Micah J. Cowan)
相关文件:   runtime/filetype.vim

Patch 7.1.003 (extra)
问题:	    The &quot;Tear off this menu&quot; message appears in the message history
	    when using a menu. (Yongwei Wu)
解决方案:   Disable message history when displaying the menu tip.
相关文件:   src/gui_w32.c

Patch 7.1.004
问题:	    Crash when doing &quot;:next directory&quot;. (Raphael Finkel)
解决方案:   Do not use &quot;buf&quot;, it may be invalid after autocommands.
相关文件:   src/ex_cmds.c

Patch 7.1.005
问题:	    &quot;cit&quot; used on <span class="Special">&lt;foo&gt;</span>&lt;/foo&gt; deletes <span class="Special">&lt;foo&gt;</span>.  Should not delete
	    anything and start insertion, like &quot;ci'&quot; does on &quot;&quot;. (Michal
	    Bozon)
解决方案:   Handle an empty object specifically.  Made it work consistent for
	    various text objects.
相关文件:   src/search.c

Patch 7.1.006
问题:	    Resetting <span class="Type">'modified'</span> in a StdinReadPost autocommand doesn't work.
解决方案:   Set <span class="Type">'modified'</span> before the autocommands instead of after it.
相关文件:   src/buffer.c

Patch 7.1.007 (extra)
问题:	    Mac: Context menu doesn't work on Intel Macs.
	    Scrollbars are not dimmed when Vim is not the active application.
解决方案:   Remove the test whether context menus are supported.  They are
	    always there in OS/X.  Handle the dimming. (Nicolas Weber)
相关文件:   src/gui_mac.c, src/gui.h

Patch 7.1.008
问题:	    getfsize() returns a negative number for very big files.
解决方案:   Check for overflow and return -2.
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.1.009
问题:	    In diff mode, displaying the difference between a tab and spaces
	    is not highlighted correctly.
解决方案:   Only change highlighting at the end of displaying a tab.
相关文件:   src/screen.c

Patch 7.1.010
问题:	    The Gnome session file doesn't restore tab pages.
解决方案:   Add SSOP_TABPAGES to the session flags. (Matias D'Ambrosio)
相关文件:   src/gui_gtk_x11.c

Patch 7.1.011
问题:	    Possible buffer overflow when $VIMRUNTIME is very long. (Victor
	    Stinner)
解决方案:   Use vim_snprintf().
相关文件:   src/main.c

Patch 7.1.012
问题:	    &quot;:let &amp;shiftwidth = <span class="Type">'asdf'</span>&quot; doesn't produce an error message.
解决方案:   Check for a string argument. (Chris Lubinski)
相关文件:   src/option.c

Patch 7.1.013
问题:	    &quot;:syn include&quot; only loads the first file, while it is documented
	    as doing the equivalent of &quot;:runtime!&quot;.
解决方案:   Change the argument to source_runtime(). (James Vega)
相关文件:   src/syntax.c

Patch 7.1.014
问题:	    Crash when doing C indenting. (Chris Monson)
解决方案:   Obtain the current line again after invoking cin_islabel().
相关文件:   src/edit.c

Patch 7.1.015
问题:	    MzScheme interface: current-library-collection-paths produces no
	    list.  Interface doesn't build on a Mac.
解决方案:   Use a list instead of a pair. (Bernhard Fisseni)  Use &quot;-framework&quot;
	    argument for MZSCHEME_LIBS in configure.
相关文件:   src/configure.in, src/if_mzsch.c, src/auto/configure

Patch 7.1.016 (after patch 7.1.012)
问题:	    Error message about setting <span class="Type">'diff'</span> to a string.
解决方案:   Don't pass an empty string to set_option_value() when setting
	    <span class="Type">'diff'</span>.
相关文件:   src/quickfix.c, src/popupmnu.c

Patch 7.1.017
问题:	    &quot;:confirm w&quot; does give a prompt when <span class="Type">'readonly'</span> is set, but not
	    when the file permissions are read-only.  (Michael Schaap)
解决方案:   Provide a dialog in both situations.  (Chris Lubinski)
相关文件:   src/ex_cmds.c, src/fileio.c, src/proto/fileio.pro

Patch 7.1.018
问题:	    When <span class="Type">'virtualedit'</span> is set a &quot;p&quot; of a block just past the end of
	    the line inserts before the cursor. (Engelke)
解决方案:   Check for the cursor being just after the line (Chris Lubinski)
相关文件:   src/ops.c

Patch 7.1.019
问题:	    &quot;:py&quot; asks for an argument, &quot;:py asd&quot; then gives the error that
	    &quot;:py&quot; isn't implemented.  Should already happen for &quot;:py&quot;.
解决方案:   Compare with ex_script_ni. (Chris Lubinski)
相关文件:   src/ex_docmd.c

Patch 7.1.020
问题:	    Reading from uninitialized memory when using a dialog. (Dominique
	    Pelle)
解决方案:   In msg_show_console_dialog() append a NUL after every appended
	    character.
相关文件:   src/message.c

Patch 7.1.021 (after 7.1.015)
问题:	    Mzscheme interface doesn't compile on Win32.
解决方案:   Fix the problem that 7.1.015 fixed in a better way. (Sergey Khorev)
相关文件:   src/if_mzsch.c

Patch 7.1.022
问题:	    When setting <span class="Type">'keymap'</span> twice the b:keymap_name variable isn't set.
	    (Milan Berta)
解决方案:   Don't unlet b:keymap_name for &quot;:loadkeymap&quot;. (Martin Toft)
相关文件:   src/digraph.c

Patch 7.1.023
问题:	    &quot;dw&quot; in a line with one character deletes the line.  Vi and nvi
	    don't do this.  (Kjell Arne Rekaa)
解决方案:   Check for one-character words especially.
相关文件:   src/search.c

Patch 7.1.024
问题:	    Using a pointer that has become invalid. (Chris Monson)
解决方案:   Obtain the line pointer again after we looked at another line.
相关文件:   src/search.c

Patch 7.1.025
问题:	    search() and searchpos() don't use match under cursor at start of
	    line when using <span class="Type">'bc'</span> flags. (Viktor Kojouharov)
解决方案:   Don't go to the previous line when the 'c' flag is present.
	    Also fix that &quot;j&quot; doesn't move the cursor to the right column.
相关文件:   src/eval.c, src/search.c

Patch 7.1.026
问题:	    &quot;[p&quot; doesn't work in Visual mode. (David Brown)
解决方案:   Use checkclearop() instead of checkclearopq().
相关文件:   src/normal.c

Patch 7.1.027
问题:	    On Sun systems opening /dev/fd/<span class="Special">N</span> doesn't work, and they are used
	    by process substitutions.
解决方案:   Allow opening specific character special files for Sun systems.
	    (Gary Johnson)
相关文件:   src/fileio.c, src/os_unix.h

Patch 7.1.028
问题:	    Can't use last search pattern for &quot;:sort&quot;. (Brian McKee)
解决方案:   When the pattern is empty use the last search pattern. (Martin
	    Toft)
相关文件:   runtime/doc/change.txt, src/ex_cmds.c

Patch 7.1.029 (after 7.1.019)
问题:	    Can't compile when all interfaces are used. (Taylor Venable)
解决方案:   Only check for ex_script_ni when it's defined.
相关文件:   src/ex_docmd.c

Patch 7.1.030
问题:	    The &quot;vimtutor&quot; shell script checks for &quot;vim6&quot; but not for &quot;vim7&quot;.
	    (Christian Robinson)
解决方案:   Check for more versions, but prefer using &quot;vim&quot;.
相关文件:   src/vimtutor

Patch 7.1.031
问题:	    virtcol([123, '$']) doesn't work. (Michael Schaap)
解决方案:   When '$' is used for the column number get the last column.
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.1.032
问题:	    Potential crash when editing a command line. (Chris Monson)
解决方案:   Check the position to avoid access before the start of an array.
相关文件:   src/ex_getln.c

Patch 7.1.033
问题:	    A buffer is marked modified when it was first deleted and then
	    added again using a &quot;:next&quot; command. (John Mullin)
解决方案:   When checking if a buffer is modified use the BF_NEVERLOADED flag.
相关文件:   src/option.c

Patch 7.1.034
问题:	    Win64: A few compiler warnings.  Problems with optimizer.
解决方案:   Use int instead of size_t.  Disable the optimizer in one function.
	    (George V.  Reilly)
相关文件:   src/eval.c, src/spell.c

Patch 7.1.035
问题:	    After &quot;:s/./&amp;/#&quot; all listed lines have a line number. (Yakov
	    Lerner)
解决方案:   Reset the line number flag when not using the &quot;&amp;&quot; flag.
相关文件:   src/ex_cmds.c

Patch 7.1.036
问题:	    Completing &quot;:echohl&quot; argument should include &quot;None&quot;. (Ori
	    Avtalion)  &quot;:match&quot; should have &quot;none&quot; too.
解决方案:   Add flags to use expand_highlight().  Also fix that when disabling
	    FEAT_CMDL_COMPL compilation fails.  (Chris Lubinski)
相关文件:   src/eval.c, src/ex_docmd.c, src/ex_getln.c, src/proto/syntax.pro
	    src/syntax.c

Patch 7.1.037
问题:	    strcpy() used for overlapping strings. (Chris Monson)
解决方案:   Use mch_memmove() instead.
相关文件:   src/option.c

Patch 7.1.038
问题:	    When <span class="Type">'expandtab'</span> is set then a Tab copied for <span class="Type">'copyindent'</span> is
	    expanded to spaces, even when <span class="Type">'preserveindent'</span> is set. (Alexei
	    Alexandrov)
解决方案:   Remove the check for <span class="Type">'expandtab'</span>.  Also fix that &quot;&gt;&gt;&quot; doesn't obey
	    <span class="Type">'preserveindent'</span>. (Chris Lubinski)
相关文件:   src/misc1.c

Patch 7.1.039
问题:	    A tag in a help file that starts with &quot;help-tags&quot; and contains a
	    percent sign may make Vim crash. (Ulf Harnhammar)
解决方案:   Use puts() instead of fprintf().
相关文件:   src/ex_cmds.c

Patch 7.1.040
问题:	    &quot;:match&quot; only supports three matches.
解决方案:   Add functions clearmatches(), getmatches(), matchadd(),
	    matchdelete() and setmatches().  Changed the data structures for
	    this.  A small bug in syntax.c is fixed, so newly created
	    highlight groups can have their name resolved correctly from their
	    ID.  (Martin Toft)
相关文件:   runtime/doc/eval.txt, runtime/doc/pattern.txt,
	    runtime/doc/usr_41.txt, src/eval.c, src/ex_docmd.c,
	    src/proto/window.pro, src/screen.c, src/structs.h, src/syntax.c,
	    src/testdir/Makefile, src/testdir/test63.in,
	    src/testdir/test63.ok, src/window.c

Patch 7.1.041 (extra, after 7.1.040)
问题:	    Some changes for patch 7.1.040 are in extra files.
解决方案:   Update the extra files.
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.1.042 (after 7.1.040)
问题:	    Internal error when using matchadd(). (David Larson)
解决方案:   Check the third argument to be present before using the fourth
	    argument. (Martin Toft)
相关文件:   src/eval.c

Patch 7.1.043
问题:	    In Ex mode using <span class="Special">CTRL-D</span> twice may cause a crash.  Cursor isn't
	    positioned properly after <span class="Special">CTRL-D</span>.
解决方案:   Set prev_char properly.  Position the cursor correctly. (Antony
	    Scriven)
相关文件:   src/ex_getln.c

Patch 7.1.044
问题:	    In Insert mode 0 <span class="Special">CTRL-T</span> deletes all indent, it should add indent.
	    (Gautam Iyer)
解决方案:   Check for <span class="Special">CTRL-D</span> typed.
相关文件:   src/edit.c

Patch 7.1.045
问题:	    Unnecessary screen redrawing. (Jjgod Jiang)
解决方案:   Reset &quot;must_redraw&quot; after clearing the screen.
相关文件:   src/screen.c

Patch 7.1.046
问题:	    &quot;:s&quot; command removes combining characters. (Ron Aaron)
解决方案:   Copy composing characters individually. (Chris Lubinski)
相关文件:   src/regexp.c

Patch 7.1.047
问题:	    vim_regcomp() called with invalid argument. (Xiaozhou Liu)
解决方案:   Change TRUE to RE_MAGIC + RE_STRING.
相关文件:   src/ex_eval.c

Patch 7.1.048
问题:	    The matchparen plugin doesn't update the match when scrolling with
	    the mouse wheel. (Ilya Bobir)
解决方案:   Set the match highlighting for text that can be scrolled into the
	    viewable area without moving the cursor. (Chris Lubinski)
相关文件:   runtime/plugin/matchparen.vim

Patch 7.1.049
问题:	    Cannot compile GTK2 version with Hangul input feature.
解决方案:   Don't define FEAT_XFONTSET when using GTK2.
相关文件:   src/feature.h

Patch 7.1.050
问题:	    Possible crash when using C++ indenting. (Chris Monson)
解决方案:   Keep the line pointer to the line to compare with.  Avoid going
	    past the end of line.
相关文件:   src/misc1.c

Patch 7.1.051
问题:	    Accessing uninitialized memory when finding spell suggestions.
解决方案:   Don't try swapping characters at the end of a word.
相关文件:   src/spell.c

Patch 7.1.052
问题:	    When creating a new match not all fields are initialized, which
	    may lead to unpredictable results.
解决方案:   Initialise rmm_ic and rmm_maxcol.
相关文件:   src/window.c

Patch 7.1.053
问题:	    Accessing uninitialized memory when giving a message.
解决方案:   Check going the length before checking for a NUL byte.
相关文件:   src/message.c

Patch 7.1.054
问题:	    Accessing uninitialized memory when displaying the fold column.
解决方案:   Add a NUL to the extra array. (Dominique Pelle).  Also do this in
	    a couple of other situations.
相关文件:   src/screen.c

Patch 7.1.055
问题:	    Using strcpy() with arguments that overlap.
解决方案:   Use mch_memmove() instead.
相关文件:   src/buffer.c, src/charset.c, src/eval.c, src/ex_getln.c,
	    src/misc1.c, src/regexp.c, src/termlib.c

Patch 7.1.056
问题:	    More prompt does not behave correctly after scrolling back.
	    (Randall W. Morris)
解决方案:   Avoid lines_left becomes negative. (Chris Lubinski)  Don't check
	    mp_last when deciding to show the more prompt. (Martin Toft)
相关文件:   src/message.c

Patch 7.1.057
问题:	    Problem with CursorHoldI when using &quot;r&quot; in Visual mode (Max
	    Dyckhoff)
解决方案:   Ignore CursorHold(I) when getting a second character for a Normal
	    mode command.  Also abort the &quot;r&quot; command in Visual when a special
	    key is typed.
相关文件:   src/normal.c

Patch 7.1.058
问题:	    When <span class="Type">'rightleft'</span> is set the completion menu is positioned wrong.
	    (Baha-Eddine MOKADEM)
解决方案:   Fix the completion menu. (Martin Toft)
相关文件:   src/popupmnu.c, src/proto/search.pro, src/search.c

Patch 7.1.059
问题:	    When in Ex mode and doing &quot;g/^/vi&quot; and then pressing <span class="Special">CTRL-C</span> Vim
	    hangs and beeps. (Antony Scriven)
解决方案:   Clear &quot;got_int&quot; in the main loop to avoid the hang.  When typing
	    <span class="Special">CTRL-C</span> twice in a row abort the &quot;:g&quot; command.  This is Vi
	    compatible.
相关文件:   src/main.c

Patch 7.1.060
问题:	    Splitting quickfix window messes up window layout. (Marius
	    Gedminas)
解决方案:   Compute the window size in a smarter way. (Martin Toft)
相关文件:   src/window.c

Patch 7.1.061
问题:	    Win32: When <span class="Type">'encoding'</span> is &quot;latin1&quot; <span class="Type">'ignorecase'</span> doesn't work for
	    characters with umlaut. (Joachim Hofmann)
解决方案:   Do not use islower()/isupper()/tolower()/toupper() but our own
	    functions. (Chris Lubinski)
相关文件:   src/mbyte.c, src/regexp.c, src/vim.h

Patch 7.1.062 (after 7.1.038)
问题:	    Indents of C comments can be wrong. (John Mullin)
解决方案:   Adjust ind_len. (Chris Lubinski)
相关文件:   src/misc1.c

Patch 7.1.063 (after 7.1.040)
问题:	    Warning for uninitialized variable.
解决方案:   Initialise it to NULL.
相关文件:   src/ex_docmd.c

Patch 7.1.064
问题:	    On Interix some files appear not to exist.
解决方案:   Remove the top bit from st_mode. (Ligesh)
相关文件:   src/os_unix.c

Patch 7.1.065 (extra)
问题:	    Win32: Compilation problem for newer version of w32api.
解决方案:   Only define __IID_DEFINED__ when needed. (Chris Sutcliffe)
相关文件:   src/Make_ming.mak, src/iid_ole.c

Patch 7.1.066
问题:	    When <span class="Type">'bomb'</span> is set or reset the file should be considered
	    modified.  (Tony Mechelynck)
解决方案:   Handle like <span class="Type">'endofline'</span>. (Martin Toft)
相关文件:   src/buffer.c, src/fileio.c, src/option.c, src/structs.h

Patch 7.1.067
问题:	    <span class="Type">'thesaurus'</span> doesn't work when <span class="Type">'infercase'</span> is set. (Mohsin)
解决方案:   Don't copy the characters being completed but check the case and
	    apply it to the suggested word.  Also fix that the first word in
	    the thesaurus line is not used.  (Martin Toft)
相关文件:   src/edit.c

Patch 7.1.068
问题:	    When <span class="Type">'equalalways'</span> is set and splitting a window, it's possible
	    that another small window gets bigger.
解决方案:   Only equalize window sizes when after a split the windows are
	    smaller than another window. (Martin Toft)
相关文件:   runtime/doc/options.txt, runtime/doc/windows.txt, src/window.c

Patch 7.1.069
问题:	    GTK GUI: When using confirm() without a default button there still
	    is a default choice.
解决方案:   Ignore Enter and Space when there is no default button. (Chris
	    Lubinski)
相关文件:   src/gui_gtk.c

Patch 7.1.070 (extra)
问题:	    Win32 GUI: When using confirm() without a default button there
	    still is a default choice.
解决方案:   Set focus on something else than a button. (Chris Lubinski)
相关文件:   src/gui_w32.c

Patch 7.1.071 (after 7.1.040)
问题:	    Regexp patterns are not tested.
解决方案:   Add a basic test, to be expanded later.
	    Also add (commented-out) support for valgrind.
相关文件:   src/testdir/Makefile, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.1.072 (extra, after 7.1.041 and 7.1.071)
问题:	    Some changes for patch 7.1.071 are in extra files.
解决方案:   Update the extra files.  Also fix a few warnings from the DOS test
	    makefile.
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.1.073 (after 7.1.062)
问题:	    Wrong cursor position and crash when <span class="Type">'preserveindent'</span> is set.
	    (Charles Campbell)
解决方案:   Handle the situation that we start without indent. (Chris
	    Lubinski)
相关文件:   src/misc1.c

Patch 7.1.074
问题:	    Crash when calling string() on a recursively nested List.
解决方案:   Check result value for being NULL. (Yukihiro Nakadaira)
相关文件:   src/eval.c

Patch 7.1.075
问题:	    &quot;:let v:statusmsg&quot; reads memory already freed.
解决方案:   Don't set v:statusmsg when listing it.
相关文件:   src/eval.c

Patch 7.1.076
问题:	    Another strcpy() with overlapping arguments.
解决方案:   Use mch_memmove(). (Dominique Pelle)  And another one.
相关文件:   src/ex_docmd.c, src/normal.c

Patch 7.1.077
问题:	    Using &quot;can_spell&quot; without initializing it. (Dominique Pelle)
解决方案:   Set a default for get_syntax_attr().
相关文件:   src/syntax.c

Patch 7.1.078
问题:	    Dropping a file name on gvim that contains a CSI byte doesn't work
	    when editing the command line.
解决方案:   Escape the CSI byte when inserting in the input buffer. (Yukihiro
	    Nakadaira)
相关文件:   src/gui.c, src/ui.c

Patch 7.1.079
问题:	    When the locale is &quot;C&quot; and <span class="Type">'encoding'</span> is &quot;latin1&quot; then the &quot;@&quot;
	    character in <span class="Type">'isfname'</span>, <span class="Type">'isprint'</span>, etc. doesn't pick up accented
	    characters.
解决方案:   Instead of isalpha() use MB_ISLOWER() and MB_ISUPPER().
相关文件:   src/charset.c, src/macros.h

Patch 7.1.080 (extra)
问题:	    Compiler warnings for using &quot;const char *&quot; for &quot;char *&quot;.
解决方案:   Add type casts. (Chris Sutcliffe)
相关文件:   src/GvimExt/gvimext.cpp

Patch 7.1.081
问题:	    Command line completion for a shell command: &quot;cat &lt;/tmp/file<span class="Special">&lt;Tab&gt;</span>&quot;
	    doesn't work.
解决方案:   Start the file name at any character that can't be in a file name.
	    (Martin Toft)
相关文件:   src/ex_docmd.c

Patch 7.1.082
问题:	    After a &quot;:split&quot; the matchparen highlighting isn't there.
解决方案:   Install a WinEnter autocommand.  Also fixes that after
	    &quot;:NoMatchParen&quot; only the current window is updated. (Martin Toft)
相关文件:   runtime/doc/pi_paren.txt, runtime/plugin/matchparen.vim

Patch 7.1.083 (after 7.1.081)
问题:	    Command line completion doesn't work with wildcards.
解决方案:   Add vim_isfilec_or_wc() and use it. (Martin Toft)
相关文件:   src/charset.c, src/proto/charset.pro, src/ex_docmd.c

Patch 7.1.084
问题:	    Using the &quot;-nb&quot; argument twice causes netbeans not to get
	    fileOpened events.
解决方案:   Change &quot;&amp;&quot; to &quot;&amp;&amp;&quot;. (Xavier de Gaye)
相关文件:   src/ex_cmds.c

Patch 7.1.085
问题:	    &quot;:e fold.c&quot; then &quot;:sp fold.c&quot; results in folds of original window
	    to disappear. (Akita Noek)
解决方案:   Invoke foldUpdateAll() for all windows of the changed buffer.
	    (Martin Toft)
相关文件:   src/ex_cmds.c

Patch 7.1.086
问题:	    Crash when using specific Python syntax highlighting.  (Quirk)
解决方案:   Check for a negative index, coming from a keyword match at the
	    start of a line from a saved state.
相关文件:   src/syntax.c

Patch 7.1.087
问题:	    Reading past &quot;:cscope find&quot; command.  Writing past end of a buffer.
解决方案:   Check length of the argument before using the pattern.  Use
	    vim_strncpy().  (Dominique Pelle)
相关文件:   if_cscope.c

Patch 7.1.088 (extra)
问题:	    The coordinates used by &quot;:winpos&quot; differ from what getwinposx()
	    and getwinposy() return.
解决方案:   Use MoveWindowStructure() instead of MoveWindow(). (Michael Henry)
相关文件:   src/gui_mac.c

Patch 7.1.089
问题:	    &quot;:let loaded_getscriptPlugin&quot; doesn't clear to eol, result is
	    &quot;#1in&quot;.
解决方案:   Clear to the end of the screen after displaying the first variable
	    value.
相关文件:   src/eval.c

Patch 7.1.090
问题:	    Compiler warning on Mac OS X 10.5.
解决方案:   Don't redeclare sigaltstack(). (Hisashi T Fujinaka)
相关文件:   src/os_unix.c

Patch 7.1.091 (extra)
问题:	    Win32: Can't embed Vim inside another application.
解决方案:   Add the --windowid argument. (Nageshwar)
相关文件:   runtime/doc/gui_w32.txt, runtime/doc/starting.txt,
	    runtime/doc/vi_diff.txt, src/globals.h, src/gui_w32.c, src/main.c

Patch 7.1.092 (extra, after 7.1.088)
问题:	    Wrong arguments for MoveWindowStructure().
解决方案:   Remove &quot;TRUE&quot;. (Michael Henry)
相关文件:   src/gui_mac.c

Patch 7.1.093
问题:	    Reading past end of a screen line when determining cell width.
	    (Dominique Pelle)
解决方案:   Add an argument to mb_off2cells() for the maximum offset.
相关文件:   src/globals.h, src/gui.c, src/mbyte.c, src/proto/mbyte.pro,
	    src/screen.c

Patch 7.1.094
问题:	    When checking if syntax highlighting is present, looking in the
	    current buffer instead of the specified one.
解决方案:   Use &quot;buf&quot; instead of &quot;curbuf&quot;.
相关文件:   src/syntax.c

Patch 7.1.095
问题:	    The FocusLost and FocusGained autocommands are triggered
	    asynchronously in the GUI.  This may cause arbitrary problems.
解决方案:   Put the focus event in the input buffer and handle it when ready
	    for it.
相关文件:   src/eval.c, src/getchar.c, src/gui.c, src/gui_gtk_x11.c,
	    src/keymap.h

Patch 7.1.096
问题:	    Reading past end of a string when resizing Vim. (Dominique Pelle)
解决方案:   Check the string pointer before getting the char it points to.
相关文件:   src/message.c

Patch 7.1.097
问题:	    &quot;:setlocal stl=%!1+1&quot; does not work.
解决方案:   Adjust check for pointer. (Politz)
相关文件:   src/option.c

Patch 7.1.098
问题:	    &quot;:call s:var()&quot; doesn't work if &quot;s:var&quot; is a Funcref. (Andy Wokula)
解决方案:   Before converting &quot;s:&quot; into a script ID, check if it is a Funcref.
相关文件:   src/eval.c

Patch 7.1.099
问题:	    When the <span class="Type">'keymap'</span> and <span class="Type">'paste'</span> options have a non-default value,
	    &quot;:mkexrc&quot; and &quot;:mksession&quot; do not correctly set the options.
解决方案:   Set the options with side effects before other options.
相关文件:   src/option.c

Patch 7.1.100
问题:	    Win32: Executing cscope doesn't always work properly.
解决方案:   Use another way to invoke cscope. (Mike Williams)
相关文件:   src/if_cscope.c, src/if_cscope.h, src/main.c,
	    src/proto/if_cscope.pro

Patch 7.1.101
问题:	    Ruby: The Buffer.line= method does not work.
解决方案:   Add the &quot;self&quot; argument to set_current_line(). (Jonathan Hankins)
相关文件:   src/if_ruby.c

Patch 7.1.102
问题:	    Perl interface doesn't compile with new version of Perl.
解决方案:   Add two variables to the dynamic library loading. (Suresh
	    Govindachar)
相关文件:   src/if_perl.xs

Patch 7.1.103
问题:	    Using &quot;dw&quot; with the cursor past the end of the last line (using
	    <span class="Special">CTRL-\</span> <span class="Special">CTRL-O</span> from Insert mode) deletes a character. (Tim Chase)
解决方案:   Don't move the cursor back when the movement failed.
相关文件:   src/normal.c

Patch 7.1.104 (after 7.1.095)
问题:	    When <span class="Type">'lazyredraw'</span> is set a focus event causes redraw to be
	    postponed until a key is pressed.
解决方案:   Instead of not returning from vgetc() when a focus event is
	    encountered return K_IGNORE.  Add plain_vgetc() for when the
	    caller doesn't want to get K_IGNORE.
相关文件:   src/digraph.c, src/edit.c, src/ex_cmds.c, src/ex_getln.c,
	    src/getchar.c, src/normal.c, src/proto/getchar.pro, src/window.c

Patch 7.1.105
问题:	    Internal error when using &quot;0 ? {'a': 1} : {}&quot;. (A.Politz)
解决方案:   When parsing a dictionary value without using the value, don't try
	    obtaining the key name.
相关文件:   src/eval.c

Patch 7.1.106
问题:	    &quot;:messages&quot; doesn't quit listing on &quot;:&quot;.
解决方案:   Break the loop when &quot;got_int&quot; is set.
相关文件:   src/message.c

Patch 7.1.107
问题:	    When doing a block selection and using &quot;s&quot; to change the text,
	    while triggering auto-indenting, causes the wrong text to be
	    repeated in other lines. (Adri Verhoef)
解决方案:   Compute the change of indent and compensate for that.
相关文件:   src/ops.c

Patch 7.1.108 (after 7.1.100)
问题:	    Win32: Compilation problems in Cscope code. (Jeff Lanzarotta)
解决方案:   Use (long) instead of (intptr_t) when it's not defined.
相关文件:   src/if_cscope.c

Patch 7.1.109
问题:	    GTK: when there are many tab pages, clicking on the arrow left of
	    the labels moves to the next tab page on the right. (Simeon Bird)
解决方案:   Check the X coordinate of the click and pass -1 as value for the
	    left arrow.
相关文件:   src/gui_gtk_x11.c, src/term.c

Patch 7.1.110 (after 7.1.102)
问题:	    Win32: Still compilation problems with Perl.
解决方案:   Change the #ifdefs. (Suresh Govindachar)
相关文件:   src/if_perl.xs

Patch 7.1.111
问题:	    When using &quot;:vimgrep&quot; with the &quot;j&quot; flag folds from another buffer
	    may be displayed. (A.Politz)
解决方案:   When not jumping to another buffer update the folds.
相关文件:   src/quickfix.c

Patch 7.1.112
问题:	    Using input() with a wrong argument may crash Vim. (A.Politz)
解决方案:   Init the input() return value to NULL.
相关文件:   src/eval.c

Patch 7.1.113
问题:	    Using map() to go over an empty list causes memory to be freed
	    twice. (A.Politz)
解决方案:   Don't clear the typeval in restore_vimvar().
相关文件:   src/eval.c

Patch 7.1.114
问题:	    Memory leak in getmatches().
解决方案:   Don't increment the refcount twice.
相关文件:   src/eval.c

Patch 7.1.115 (after 7.1.105)
问题:	    Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Init variable to NULL.
相关文件:   src/eval.c

Patch 7.1.116
问题:	    Cannot display Unicode characters above 0x10000.
解决方案:   Remove the replacement with a question mark when UNICODE16 is not
	    defined. (partly by Nicolas Weber)
相关文件:   src/screen.c

Patch 7.1.117
问题:	    Can't check whether Vim was compiled with Gnome. (Tony Mechelynck)
解决方案:   Add gui_gnome to the has() list.
相关文件:   src/eval.c

Patch 7.1.118 (after 7.1.107)
问题:	    Compiler warning for Visual C compiler.
解决方案:   Add typecast. (Mike Williams)
相关文件:   src/ops.c

Patch 7.1.119
问题:	    Crash when <span class="Type">'cmdheight'</span> set to very large value. (A.Politz)
解决方案:   Limit <span class="Type">'cmdheight'</span> to <span class="Type">'lines'</span> minus one.  Store right value of
	    <span class="Type">'cmdheight'</span> when running out of room.
相关文件:   src/option.c, src/window.c

Patch 7.1.120
问题:	    Can't properly check memory leaks while running tests.
解决方案:   Add an argument to garbagecollect().  Delete functions and
	    variables in the test scripts.
相关文件:   runtime/doc/eval.txt src/eval.c, src/globals.h, src/main.c,
	    src/testdir/Makefile, src/testdir/test14.in,
	    src/testdir/test26.in, src/testdir/test34.in,
	    src/testdir/test45.in, src/testdir/test47.in,
	    src/testdir/test49.in, src/testdir/test55.in,
	    src/testdir/test56.in, src/testdir/test58.in,
	    src/testdir/test59.in, src/testdir/test60.in,
	    src/testdir/test60.vim, src/testdir/test62.in,
	    src/testdir/test63.in, src/testdir/test64.in,

Patch 7.1.121
问题:	    Using &quot;:cd %:h&quot; when editing a file in the current directory
	    results in an error message for using an empty string.
解决方案:   When &quot;%:h&quot; results in an empty string use &quot;.&quot;.
相关文件:   src/eval.c

Patch 7.1.122
问题:	    Mac: building Vim.app fails.  Using wrong architecture.
解决方案:   Use line continuation for the gui_bundle dependency.  Detect the
	    system architecture with &quot;uname -a&quot;.
相关文件:   src/main.aap

Patch 7.1.123
问题:	    Win32: &quot;:edit foo ~ foo&quot; expands &quot;~&quot;.
解决方案:   Change the call to expand_env().
相关文件:   src/ex_docmd.c, src/misc1.c, src/proto/misc1.pro, src/option.c

Patch 7.1.124 (extra)
问题:	    Mac: When dropping a file on Vim.app that is already in the buffer
	    list (from .viminfo) results in editing an empty, unnamed buffer.
	    (Axel Kielhorn)  Also: warning for unused variable.
解决方案:   Move to the buffer of the first argument.  Delete unused variable.
相关文件:   src/gui_mac.c

Patch 7.1.125
问题:	    The TermResponse autocommand event is not always triggered. (Aron
	    Griffis)
解决方案:   When unblocking autocommands check if v:termresponse changed and
	    trigger the event then.
相关文件:   src/buffer.c, src/diff.c, src/ex_getln.c, src/fileio.c,
	    src/globals.h, src/misc2.c, src/proto/fileio.pro, src/window.c

Patch 7.1.126 (extra)
问题:	    &quot;:vimgrep */*&quot; fails when a BufRead autocommand changes directory.
	    (Bernhard Kuhn)
解决方案:   Change back to the original directory after loading a file.
	    Also: use shorten_fname1() to avoid duplicating code.
相关文件:   src/buffer.c, src/ex_docmd.c, src/fileio.c, src/gui_gtk.c,
	    src/gui_w48.c, src/proto/ex_docmd.pro, src/proto/fileio.pro,
	    src/quickfix.c

Patch 7.1.127
问题:	    Memory leak when doing cmdline completion. (Dominique Pelle)
解决方案:   Free &quot;orig&quot; argument of ExpandOne() when it's not used.
相关文件:   src/ex_getln.c

Patch 7.1.128 (extra)
问题:	    Build problems with new version of Cygwin.
解决方案:   Remove -D__IID_DEFINED__, like with MingW. (Guopeng Wen)
相关文件:   src/Make_cyg.mak

Patch 7.1.129 (extra)
问题:	    Win32: Can't get the user name when it is longer than 15
	    characters.
解决方案:   Use UNLEN instead of MAX_COMPUTERNAME_LENGTH. (Alexei Alexandrov)
相关文件:   src/os_win32.c

Patch 7.1.130
问题:	    Crash with specific order of undo and redo. (A.Politz)
解决方案:   Clear and adjust pointers properly.  Add u_check() for debugging.
相关文件:   src/undo.c, src/structs.h

Patch 7.1.131
问题:	    &quot;:mksession&quot; always adds &quot;:setlocal autoread&quot;. (Christian J.
	    Robinson)
解决方案:   Skip boolean global/local option using global value.
相关文件:   src/option.c

Patch 7.1.132
问题:	    getpos(&quot;'&gt;&quot;) may return a negative column number for a Linewise
	    selection. (A.Politz)
解决方案:   Don't add one to MAXCOL.
相关文件:   src/eval.c

Patch 7.1.133 (after 7.1.126)
问题:	    shorten_fname1() linked when it's not needed.
解决方案:   Add #ifdef.
相关文件:   src/fileio.c

Patch 7.1.134 (extra)
问题:	    Win32: Can't build with VC8
解决方案:   Detect the MSVC version instead of using NMAKE_VER.
	    (Mike Williams)
相关文件:   src/Make_mvc.mak

Patch 7.1.135
问题:	    Win32: When editing a file c:\tmp\foo and c:\tmp\\foo we have two
	    buffers for the same file. (Suresh Govindachar)
解决方案:   Invoke FullName_save() when a path contains &quot;//&quot; or &quot;\\&quot;.
相关文件:   src/buffer.c

Patch 7.1.136
问题:	    Memory leak when using Ruby syntax highlighting. (Dominique Pelle)
解决方案:   Free the contained-in list.
相关文件:   src/syntax.c

Patch 7.1.137
问题:	    Build failure when using EXITFREE. (Dominique Pelle)
解决方案:   Add an #ifdef around using clip_exclude_prog.
相关文件:   src/misc2.c

Patch 7.1.138
问题:	    The Perl Msg() function doesn't stop when &quot;q&quot; is typed at the more
	    prompt. (Hari Krishna Dara)
解决方案:   Check got_int.
相关文件:   src/if_perl.xs

Patch 7.1.139
问题:	    When using marker folding and ending Insert mode with <span class="Special">CTRL-C</span> the
	    current fold is truncated. (Fred Kater)
解决方案:   Ignore got_int while updating folds.
相关文件:   src/fold.c

Patch 7.1.140
问题:	    v:count is set only after typing a non-digit, that makes it
	    difficult to make a nice mapping.
解决方案:   Set v:count while still typing the count.
相关文件:   src/normal.c

Patch 7.1.141
问题:	    GTK: -geom argument doesn't support a negative offset.
解决方案:   Compute position from the right/lower corner.
相关文件:   src/gui_gtk_x11.c

Patch 7.1.142
问题:	    &quot;:redir @A&gt;&quot; doesn't work.
解决方案:   Ignore the extra &quot;&gt;&quot; also when appending. (James Vega)
相关文件:   src/ex_docmd.c

Patch 7.1.143
问题:	    Uninitialized memory read when diffing three files. (Dominique
	    Pelle)
解决方案:   Remove &quot;+ !notset&quot; so that we don't use fields that were not
	    computed.
相关文件:   src/diff.c

Patch 7.1.144
问题:	    After &quot;:diffup&quot; cursor can be in the wrong position.
解决方案:   Force recomputing the cursor position.
相关文件:   src/diff.c

Patch 7.1.145
问题:	    Insert mode completion: When using the popup menu, after
	    completing a word and typing a non-word character Vim is still
	    completing the same word, following <span class="Special">CTRL-N</span> doesn't work.
	    Insert mode Completion: When using <span class="Special">CTRL-X</span> O and there is only
	    &quot;struct.&quot; before the cursor, typing one char to reduce the
	    matches, then BS completion stops.
解决方案:   When typing a character that is not part of the item being
	    completed, stop complete mode.  For whole line completion also
	    accept a space.  For file name completion stop at a path
	    separator.
	    For omni completion stay in completion mode even if completing
	    with empty string.
相关文件:   src/edit.c

Patch 7.1.146 (extra)
问题:	    VMS: Files with a very rare record organization (VFC) cannot be
	    properly written by Vim.
	    On older VAX systems mms runs into a syntax error.
解决方案:   Check for this special situation.  Do not wrap a comment, make it
	    one long line.  (Zoltan Arpadffy)
相关文件:   src/fileio.c, src/Make_vms.mms

Patch 7.1.147 (after 7.1.127)
问题:	    Freeing memory already freed when completing user name. (Meino
	    Cramer)
解决方案:   Use a flag to remember if &quot;orig&quot; needs to be freed.
相关文件:   src/ex_getln.c

Patch 7.1.148
问题:	    Some types are not found by configure.
解决方案:   Test for the sys/types.h header file. (Sean Boudreau)
相关文件:   src/configure.in, src/auto/configure

Patch 7.1.149
问题:	    GTK GUI: When the completion popup menu is used scrolling another
	    window by the scrollbar is OK, but using the scroll wheel it
	    behaves line <span class="Special">&lt;Enter&gt;</span>.
解决方案:   Ignore K_MOUSEDOWN and K_MOUSEUP.  Fix redrawing the popup menu.
相关文件:   src/edit.c, src/gui.c

Patch 7.1.150
问题:	    When <span class="Type">'clipboard'</span> has &quot;unnamed&quot; using &quot;p&quot; in Visual mode doesn't
	    work correctly. (Jianrong Yu)
解决方案:   When <span class="Type">'clipboard'</span> has &quot;unnamed&quot; also obtain the selection when
	    getting the default register.
相关文件:   src/ops.c

Patch 7.1.151
问题:	    Using whole line completion with <span class="Type">'ignorecase'</span> and <span class="Type">'infercase'</span> set
	    and the line is empty get an lalloc(0) error.
解决方案:   Don't try changing case for an empty match. (Matthew Wozniski)
相关文件:   src/edit.c

Patch 7.1.152
问题:	    Display problem when <span class="Type">'hls'</span> and <span class="Type">'cursorcolumn'</span> are set and
	    searching for &quot;$&quot;.  (John Mullin)  Also when scrolling
	    horizontally when <span class="Type">'wrap'</span> is off.
解决方案:   Keep track of the column where highlighting was set.  Check the
	    column offset when skipping characters.
相关文件:   src/screen.c

Patch 7.1.153
问题:	    Compiler warnings on SGI.  Undefined XpmAllocColor (Charles
	    Campbell)
解决方案:   Add type casts.  Init st_dev and st_ino separately.  Don't use
	    type casts for vim_snprintf() when HAVE_STDARG_H is defined.
	    Define XpmAllocColor when needed.
相关文件:   src/eval.c, src/ex_cmds.c, src/fileio.c, src/misc2.c,
	    src/gui_xmebw.c

Patch 7.1.154
问题:	    Compiler warning for signed/unsigned compare.
解决方案:   Add type cast.
相关文件:   src/screen.c

Patch 7.1.155
问题:	    Crash when <span class="Type">'undolevels'</span> is 0 and repeating &quot;udd&quot;. (James Vega)
解决方案:   When there is only one branch use u_freeheader() to delete it.
相关文件:   src/undo.c

Patch 7.1.156
问题:	    Overlapping arguments for strcpy() when expanding command line
	    variables.
解决方案:   Use mch_memmove() instead of STRCPY().  Also fix a few typos.
	    (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.1.157
问题:	    In Ex mode, :&quot; gives an error at end-of-file. (Michael Hordijk)
解决方案:   Only give an error for an empty line, not for a comment.
相关文件:   src/ex_docmd.c

Patch 7.1.158 (extra)
问题:	    Win32 console: When <span class="Type">'encoding'</span> is &quot;utf-8&quot; and typing Alt-y the
	    result is wrong.  Win32 GUI: Alt-y results in &quot;u&quot; when <span class="Type">'encoding'</span>
	    is &quot;cp1250&quot; (Lukas Cerman)
解决方案:   For utf-8 don't set the 7th bit in a byte, convert to the correct
	    byte sequence.  For cp1250, when conversion to <span class="Type">'encoding'</span> results
	    in the 7th bit not set, set the 7th bit after conversion.
相关文件:   src/os_win32.c, src/gui_w48.c

Patch 7.1.159
问题:	    strcpy() has overlapping arguments.
解决方案:   Use mch_memmove() instead. (Dominique Pelle)
相关文件:   src/ex_cmds.c

Patch 7.1.160
问题:	    When a focus autocommand is defined, getting or losing focus
	    causes the hit-enter prompt to be redrawn. (Bjorn Winckler)
解决方案:   Overwrite the last line.
相关文件:   src/message.c

Patch 7.1.161
问题:	    Compilation errors with tiny features and EXITFREE.
解决方案:   Add #ifdefs. (Dominique Pelle)
相关文件:   src/edit.c, src/misc2.c

Patch 7.1.162
问题:	    Crash when using a modifier before &quot;while&quot; or &quot;for&quot;. (A.Politz)
解决方案:   Skip modifiers when checking for a loop command.
相关文件:   src/proto/ex_docmd.pro, src/ex_docmd.c, src/ex_eval.c

Patch 7.1.163
问题:	    Warning for the unknown option <span class="Type">'bufsecret'</span>.
解决方案:   Remove the lines .vim that use this option. (Andy Wokula)
相关文件:   runtime/menu.vim

Patch 7.1.164
问题:	    Reading past end of regexp pattern. (Dominique Pelle)
解决方案:   Use utf_ptr2len().
相关文件:   src/regexp.c

Patch 7.1.165
问题:	    Crash related to getting X window ID. (Dominique Pelle)
解决方案:   Don't trust the window ID that we got in the past, check it every
	    time.
相关文件:   src/os_unix.c

Patch 7.1.166
问题:	    Memory leak for using &quot;gp&quot; in Visual mode.
解决方案:   Free memory in put_register(). (Dominique Pelle)
相关文件:   src/ops.c

Patch 7.1.167
问题:	    Xxd crashes when using &quot;xxd -b -c 110&quot;. (Debian bug 452789)
解决方案:   Allocate more memory.  Fix check for maximum number of columns.
相关文件:   src/xxd/xxd.c

Patch 7.1.168 (extra)
问题:	    Win32 GUI: Since patch 7.1.095, when the Vim window does not have
	    focus, clicking in it doesn't position the cursor. (Juergen
	    Kraemer)
解决方案:   Don't reset s_button_pending just after receiving focus.
相关文件:   src/gui_w48.c

Patch 7.1.169
问题:	    Using uninitialized variable when system() fails. (Dominique
	    Pelle)
解决方案:   Let system() return an empty string when it fails.
相关文件:   src/eval.c

Patch 7.1.170
问题:	    Valgrind warning for overlapping arguments for strcpy().
解决方案:   Use mch_memmove() instead. (Dominique Pelle)
相关文件:   src/getchar.c

Patch 7.1.171
问题:	    Reading one byte before allocated memory.
解决方案:   Check index not to become negative. (Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.1.172
问题:	    When <span class="Type">'buftype'</span> is &quot;acwrite&quot; Vim still checks if the file or
	    directory exists before overwriting.
解决方案:   Don't check for overwriting when the buffer name is not a file
	    name.
相关文件:   src/ex_cmds.c

Patch 7.1.173
问题:	    Accessing freed memory. (Dominique Pelle)
解决方案:   Don't call reg_getline() to check if a line is the first in the
	    file.
相关文件:   src/regexp.c

Patch 7.1.174
问题:	    Writing NUL past end of a buffer.
解决方案:   Copy one byte less when using strncat(). (Dominique Pelle)
相关文件:   src/ex_cmds.c, src/ex_docmd.c,

Patch 7.1.175
问题:	    <span class="Special">&lt;BS&gt;</span> doesn't work with some combination of <span class="Type">'sts'</span>, <span class="Type">'linebreak'</span> and
	    <span class="Type">'backspace'</span>. (Francois Ingelrest)
解决方案:   When adding white space results in not moving back delete one
	    character.
相关文件:   src/edit.c

Patch 7.1.176
问题:	    Building with Aap fails when the &quot;compiledby&quot; argument contains
	    '&lt;' or '&gt;' characters. (Alex Yeh)
解决方案:   Change how quoting is done in the Aap recipe.
相关文件:   src/main.aap

Patch 7.1.177
问题:	    Freeing memory twice when in debug mode while reading a script.
解决方案:   Ignore script input while in debug mode.
相关文件:   src/ex_cmds2.c, src/getchar.c, src/globals.h

Patch 7.1.178
问题:	    &quot;%&quot; doesn't work on &quot;/* comment <span class="Ignore">*</span><span class="String">//</span><span class="Ignore">*</span> comment */&quot;.
解决方案:   Don't handle the &quot;//&quot; in &quot;*//*&quot; as a C++ comment. (Markus
	    Heidelberg)
相关文件:   src/search.c

Patch 7.1.179
问题:	    Need to check for TCL 8.5.
解决方案:   Adjust configure script. (Alexey Froloff)
相关文件:   src/configure.in, src/auto/configure

Patch 7.1.180
问题:	    Regexp patterns not tested sufficiently.
解决方案:   Add more checks to the regexp test.
相关文件:   src/testdir/test64.in, src/testdir/test64.ok

Patch 7.1.181
问题:	    Accessing uninitialized memory in Farsi mode. (Dominique Pelle)
解决方案:   Only invoke lrF_sub() when there is something to do.
相关文件:   src/ex_cmds.c

Patch 7.1.182
问题:	    When using tab pages and an argument list the session file may
	    contain wrong &quot;next&quot; commands. (Alexander Bluem)
解决方案:   Use &quot;argu&quot; commands and only when needed.
相关文件:   src/ex_docmd.c

Patch 7.1.183
问题:	    &quot;Internal error&quot; for &quot;:echo matchstr('a', 'a\%[\&amp;]')&quot; (Mitanu
	    Paul)
解决方案:   Inside &quot;\%[]&quot; detect \&amp;, \| and \) as an error.
相关文件:   src/regexp.c

Patch 7.1.184
问题:	    Crash when deleting backwards over a line break in Insert mode.
解决方案:   Don't advance the cursor when it's already on the NUL after a
	    line. (Matthew Wozniski)
相关文件:   src/normal.c

Patch 7.1.185
问题:	    Using &quot;gR&quot; with a multi-byte encoding and typing a CR pushes
	    characters onto the replace stack incorrectly, resulting in BS
	    putting back the wrong characters. (Paul B. Mahol)
解决方案:   Push multi-byte characters onto the replace stack in reverse byte
	    order.  Add replace_push_mb().
相关文件:   src/edit.c, src/misc1.c, src/proto/edit.pro

Patch 7.1.186
问题:	    &quot;expand('<span class="Special">&lt;afile&gt;</span>')&quot; returns a bogus value after changing
	    directory. (Dave Fishburn)
解决方案:   Copy &quot;autocmd_fname&quot; to allocated memory and expand to full
	    filename.  Shorten the path when expanding <span class="Special">&lt;afile&gt;</span>.
相关文件:   src/ex_docmd.c, src/fileio.c

Patch 7.1.187
问题:	    Win32 GUI: Custom completion using system() no longer works
	    after patch 7.1.104. (Erik Falor)
解决方案:   Loop when safe_vgetc() returns K_IGNORE.
相关文件:   src/ex_getln.c

Patch 7.1.188
问题:	    When <span class="Type">'showmode'</span> is off the message for changing a readonly file is
	    given in the second column instead of the first.  (Payl B. Mahol)
解决方案:   Put the W10 message in the first column.
相关文件:   src/edit.c

Patch 7.1.189 (after 7.1.104)
问题:	    Patch 7.1.104 was incomplete.
解决方案:   Also call plain_vgetc() in ask_yesno().
相关文件:   src/misc1.c

Patch 7.1.190
问题:	    Cursor after end-of-line: &quot;iA sentence.<span class="Special">&lt;Esc&gt;</span>)&quot;
解决方案:   Move cursor back and make motion inclusive.
相关文件:   src/normal.c

Patch 7.1.191
问题:	    Win32 GUI: after patch 7.1.168 there is still a problem when
	    clicking in a scrollbar. (Juergen Jottkaerr)
解决方案:   Don't check the input buffer when dragging the scrollbar.
相关文件:   src/gui.c

Patch 7.1.192
问题:	    With Visual block selection, &quot;s&quot; and typing something, <span class="Special">CTRL-C</span>
	    doesn't stop Vim from repeating the replacement in other lines,
	    like happens for &quot;I&quot;.
解决方案:   Check for &quot;got_int&quot; to be set.
相关文件:   src/ops.c

Patch 7.1.193
问题:	    Some Vim 5.x digraphs are missing in Vim 7, even though the
	    character pairs are not used. (Philippe de Muyter)
解决方案:   Add those Vim 5.x digraphs that don't conflict with others.
相关文件:   src/digraph.c

Patch 7.1.194
问题:	    &quot;:echo glob('~/{}')&quot; results in /home/user//.
解决方案:   Don't add a slash if there already is one.
相关文件:   src/os_unix.c

Patch 7.1.195
问题:	    '0 mark doesn't work for &quot;~/foo ~ foo&quot;.
解决方案:   Don't expand the whole file name, only &quot;~/&quot;.
相关文件:   src/mark.c

Patch 7.1.196 (extra)
问题:	    Win32 GUI: &quot;\n&quot; in a tooltip doesn't cause a line break. (Erik
	    Falor)
解决方案:   Use the TTM_SETMAXTIPWIDTH message.
相关文件:   src/gui_w32.c

Patch 7.1.197
问题:	    Mac: &quot;make install&quot; doesn't work when prefix defined.
解决方案:   Pass different arguments to &quot;make installruntime&quot;.  (Jjgod Jiang)
相关文件:   src/Makefile

Patch 7.1.198
问题:	    Hang when using &quot;:s/\n//gn&quot;. (Burak Gorkemli)
解决方案:   Set &quot;skip_match&quot;.
相关文件:   src/ex_cmds.c

Patch 7.1.199
问题:	    Can't do command line completion for a specific file name
	    extension.
解决方案:   When the pattern ends in &quot;$&quot; don't add a star for completion and
	    remove the &quot;$&quot; before matching with file names.
相关文件:   runtime/doc/cmdline.txt, src/ex_getln.c

Patch 7.1.200 (after 7.1.177 and 7.1.182)
问题:	    Compiler warnings for uninitialized variables.
解决方案:   Init variables.
相关文件:   src/ex_cmds2.c, src/ex_docmd.c

Patch 7.1.201
问题:	    When reading stdin <span class="Type">'fenc'</span> and <span class="Type">'ff'</span> are not set.
解决方案:   Set the options after reading stdin. (Ben Schmidt)
相关文件:   src/fileio.c

Patch 7.1.202
问题:	    Incomplete utf-8 byte sequence is not checked for validity.
解决方案:   Check the bytes that are present for being valid. (Ben Schmidt)
相关文件:   src/mbyte.c

Patch 7.1.203
问题:	    When <span class="Type">'virtualedit'</span> is &quot;onemore&quot; then &quot;99|&quot; works but &quot;:normal 99|&quot;
	    doesn't.  (Andy Wokula)
解决方案:   Check for &quot;onemore&quot; flag in check_cursor_col().
相关文件:   src/misc2.c

Patch 7.1.204 (extra)
问题:	    Win32: Using the example at <span class="Type">'balloonexpr'</span> the balloon disappears
	    after four seconds and then comes back again.  Also moves the
	    mouse pointer a little bit.  (Yongwei Wu)
解决方案:   Set the autopop time to 30 seconds (the max value).  (Sergey
	    Khorev)  Move the mouse two pixels forward and one back to end up
	    in the same position (really!).
相关文件:   src/gui_w32.c

Patch 7.1.205
问题:	    Can't get the operator in an &quot;:omap&quot;.
解决方案:   Add the &quot;v:operator&quot; variable. (Ben Schmidt)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/normal.c, src/vim.h

Patch 7.1.206
问题:	    Compiler warnings when using MODIFIED_BY.
解决方案:   Add type casts. (Ben Schmidt)
相关文件:   src/version.c

Patch 7.1.207
问题:	    Netbeans: &quot;remove&quot; cannot delete one line.
解决方案:   Remove partial lines and whole lines properly.  Avoid a memory
	    leak.  (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.1.208
问题:	    On Alpha get an unaligned access error.
解决方案:   Store the dictitem pointer before using it. (Matthew Luckie)
相关文件:   src/eval.c

Patch 7.1.209
问题:	    GTK: When using the netrw plugin and doing &quot;:gui&quot; Vim hangs.
解决方案:   Stop getting a selection after three seconds.  This is a hack.
相关文件:   src/gui_gtk_x11.c

Patch 7.1.210
问题:	    Listing mapping for 0xdb fails when <span class="Type">'encoding'</span> is utf-8. (Tony
	    Mechelynck)
解决方案:   Recognize K_SPECIAL KS_EXTRA KE_CSI as a CSI byte.
相关文件:   src/mbyte.c

Patch 7.1.211
问题:	    The matchparen plugin may take an unexpected amount of time, so
	    that it looks like Vim hangs.
解决方案:   Add a timeout to searchpair(), searchpairpos(), search() and
	    searchpos().  Use half a second timeout in the plugin.
相关文件:   runtime/doc/eval.txt, runtime/plugin/matchparen.vim, src/edit.c,
	    src/eval.c, src/ex_cmds2.c, src/ex_docmd.c, src/normal.c,
	    src/proto/eval.pro, src/proto/ex_cmds2.pro, src/proto/search.pro,
	    src/search.c

Patch 7.1.212
问题:	    Accessing a byte before a line.
解决方案:   Check that the column is 1 or more. (Dominique Pelle)
相关文件:   src/edit.c

Patch 7.1.213
问题:	    A &quot;:tabedit&quot; command that results in the &quot;swap file exists&quot; dialog
	    and selecting &quot;abort&quot; doesn't close the new tab. (Al Budden)
解决方案:   Pass &quot;old_curwin&quot; to do_exedit().
相关文件:   src/ex_docmd.c

Patch 7.1.214
问题:	    &quot;:1s/g\n\zs1//&quot; deletes characters from the first line. (A Politz)
解决方案:   Start replacing in the line where the match starts.
相关文件:   src/ex_cmds.c

Patch 7.1.215
问题:	    It is difficult to figure out what syntax items are nested at a
	    certain position.
解决方案:   Add the synstack() function.
相关文件:   runtime/doc/eval.txt, src/eval.c, src/proto/syntax.pro,
	    src/syntax.c

Patch 7.1.216
问题:	    Variants of --remote-tab are not mentioned for &quot;vim --help&quot;.
解决方案:   Display optional -wait and -silent.
相关文件:   src/main.c

Patch 7.1.217
问题:	    The &quot;help-tags&quot; tag may be missing from runtime/doc/tags when it
	    was generated during &quot;make install&quot;.
解决方案:   Add the &quot;++t&quot; argument to &quot;:helptags&quot; to force adding the tag.
相关文件:   runtime/doc/Makefile, runtime/doc/various.txt, src/ex_cmds.c,
	    src/ex_cmds.h

Patch 7.1.218
问题:	    A syntax region without a &quot;keepend&quot;, containing a region with
	    &quot;extend&quot; could be truncated at the end of the containing region.
解决方案:   Do not call syn_update_ends() when there are no keepend items.
相关文件:   src/syntax.c

Patch 7.1.219 (after 7.1.215)
问题:	    synstack() returns situation after the current character, can't
	    see the state for a one-character region.
解决方案:   Don't update ending states in the requested column.
相关文件:   runtime/doc/eval.txt, src/eval.c, src/hardcopy.c,
	    src/proto/syntax.pro, src/screen.c, src/spell.c, src/syntax.c

Patch 7.1.220
问题:	    When a &quot;)&quot; or word movement command moves the cursor back from the
	    end of the line it may end up on the trail byte of a multi-byte
	    character.  It's also moved back when it isn't needed.
解决方案:   Add the adjust_cursor() function.
相关文件:   src/normal.c

Patch 7.1.221
问题:	    When inserting a &quot;(&quot;, triggering the matchparen plugin, the
	    following highlighting may be messed up.
解决方案:   Before triggering the CursorMovedI autocommands update the display
	    to update the stored syntax stacks for the change.
相关文件:   src/edit.c

Patch 7.1.222 (after 7.1.217)
问题:	    Wildcards in argument of &quot;:helptags&quot; are not expanded.  (Marcel
	    Svitalsky)
解决方案:   Expand wildcards in the directory name.
相关文件:   src/ex_cmds.c

Patch 7.1.223
问题:	    glob() doesn't work properly when <span class="Type">'shell'</span> is &quot;sh&quot; or &quot;bash&quot; and
	    the expanded name contains spaces, '~', single quotes and other
	    special characters.  (Adri Verhoef, Charles Campbell)
解决方案:   For Posix shells define a vimglob() function to list the matches
	    instead of using &quot;echo&quot; directly.
相关文件:   src/os_unix.c

Patch 7.1.224
问题:	    When using &quot;vim -F -o file1 file2&quot; only one window is
	    right-to-left.  Same for &quot;-H&quot;.  (Ben Schmidt)
解决方案:   use set_option_value() to set <span class="Type">'rightleft'</span>.
相关文件:   src/main.c

Patch 7.1.225
问题:	    Using uninitialized value when XGetWMNormalHints() fails.
解决方案:   Check the return value. (Dominique Pelle)
相关文件:   src/os_unix.c

Patch 7.1.226
问题:	    Command line completion doesn't work when a file name contains a
	    '&amp;' character.
解决方案:   Accept all characters in a file name, except ones that end a
	    command or white space.
相关文件:   src/ex_docmd.c

Patch 7.1.227
问题:	    Hang in syntax HL when moving over a &quot;)&quot;. (Dominique Pelle)
解决方案:   Avoid storing a syntax state in the wrong position in the list of
	    remembered states.
相关文件:   src/syntax.c

Patch 7.1.228
问题:	    When <span class="Type">'foldmethod'</span> is &quot;indent&quot; and a fold is created with &quot;&gt;&gt;&quot; it
	    can't be closed with &quot;zc&quot;.  (Daniel Shahaf)
解决方案:   Reset the &quot;small&quot; flag of a fold when adding a line to it.
相关文件:   src/fold.c

Patch 7.1.229
问题:	    A fold is closed when it shouldn't when <span class="Type">'foldmethod'</span> is &quot;indent&quot;
	    and backspacing a non-white character so that the indent increases.
解决方案:   Keep the fold open after backspacing a character.
相关文件:   src/edit.c

Patch 7.1.230
问题:	    Memory leak when executing SourceCmd autocommands.
解决方案:   Free the memory. (Dominique Pelle)
相关文件:   src/ex_cmds2.c

Patch 7.1.231
问题:	    When shifting lines the change is acted upon multiple times.
解决方案:   Don't have shift_line() call changed_bytes.
相关文件:   src/edit.c, src/ops.c, src/proto/edit.pro, src/proto/ops.pro

Patch 7.1.232 (after 7.1.207 and 7.1.211)
问题:	    Compiler warnings with MSVC.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/ex_cmds2.c, src/netbeans.c

Patch 7.1.233
问题:	    Crash when doing Insert mode completion for a user defined
	    command.  (Yegappan Lakshmanan)
解决方案:   Don't use the non-existing command line.
相关文件:   src/ex_getln.c

Patch 7.1.234
问题:	    When diff'ing three files the third one isn't displayed correctly.
	    (Gary Johnson)
解决方案:   Compute the size of diff blocks correctly when merging blocks.
	    Compute filler lines correctly when scrolling.
相关文件:   src/diff.c

Patch 7.1.235
问题:	    Pattern matching is slow when using a lot of simple patterns.
解决方案:   Avoid allocating memory by not freeing it when it's not so much.
	    (Alexei Alexandrov)
相关文件:   src/regexp.c

Patch 7.1.236
问题:	    When using <span class="Type">'incsearch'</span> and <span class="Type">'hlsearch'</span> a complicated pattern may
	    make Vim hang until <span class="Special">CTRL-C</span> is pressed.
解决方案:   Add the <span class="Type">'redrawtime'</span> option.
相关文件:   runtime/doc/options.txt, src/ex_cmds.c, src/ex_docmd.c,
	    src/ex_getln.c, src/gui.c, src/misc1.c, src/normal.c,
	    src/option.c, src/quickfix.c, src/regexp.c, src/proto/regexp.pro,
	    src/proto/search.pro, src/search.c, src/screen.c,
	    src/option.h, src/spell.c, src/structs.h, src/syntax.c, src/tag.c,
	    src/vim.h

Patch 7.1.237
问题:	    Compiler warning on an Alpha processor in Motif code.
解决方案:   Change a typecast. (Adri Verhoef)
相关文件:   src/gui_motif.c

Patch 7.1.238
问题:	    Using the 'c' flag with searchpair() may cause it to fail.  Using
	    the 'r' flag doesn't work when <span class="Type">'wrapscan'</span> is set.  (A.Politz)
解决方案:   Only use the 'c' flag for the first search, not for repeating.
	    When using 'r' imply 'W'. (Antony Scriven)
相关文件:   src/eval.c

Patch 7.1.239 (after 7.1.233)
问题:	    Compiler warning for sprintf() argument.
解决方案:   Add a typecast. (Nico Weber)
相关文件:   src/ex_getln.c

Patch 7.1.240
问题:	    When &quot;gUe&quot; turns a German sharp s into SS the operation stops
	    before the end of the word.  Latin2 has the same sharp s but it's
	    not changed to SS there.
解决方案:   Make sure all the characters are operated upon.  Detect the sharp
	    s in latin2.  Also fixes that changing case of a multi-byte
	    character that changes the byte count doesn't always work.
相关文件:   src/ops.c

Patch 7.1.241
问题:	    Focus change events not always ignored.  (Erik Falor)
解决方案:   Ignore K_IGNORE in Insert mode in a few more places.
相关文件:   src/edit.c

Patch 7.1.242 (after 7.1.005)
问题:	    &quot;cib&quot; doesn't work properly on &quot;(x)&quot;. (Tim Pope)
解决方案:   Use ltoreq() instead of lt().  Also fix &quot;ciT&quot; on &quot;<span class="Special">&lt;a&gt;</span>x&lt;/a&gt;&quot;.
相关文件:   src/search.c

Patch 7.1.243 (after 7.1.240)
问题:	    &quot;U&quot; doesn't work on all text in Visual mode. (Adri Verhoef)
解决方案:   Loop over all the lines to be changed.  Add tests for this.
相关文件:   src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.1.244
问题:	    GUI may have part of the command line cut off.
解决方案:   Don't round the number of lines up, always round down.
	    (Tony Houghton, Scott Dillard)
相关文件:   src/gui.c

Patch 7.1.245
问题:	    Pressing <span class="Special">CTRL-\</span> three times causes Vim to quit.  (Ranganath Rao).
	    Also for f <span class="Special">CTRL-\</span> <span class="Special">CTRL-\</span>.
解决方案:   When going to cooked mode in mch_delay() set a flag to ignore
	    SIGQUIT.
相关文件:   src/os_unix.c

Patch 7.1.246
问题:	    Configure hangs when the man pager is something strange. (lorien)
解决方案:   Set MANPAGER and PAGER to &quot;cat&quot;. (Micah Cowan)
相关文件:   src/auto/configure, src/configure.in

Patch 7.1.247
问题:	    When using Netbeans backspacing in Insert mode skips a character
	    now and then. (Ankit Jain)
解决方案:   Avoid calling netbeans_removed(), it frees the line pointer.
	    (partly by Dominique Pelle).
相关文件:   src/misc1.c

Patch 7.1.248
问题:	    Can't set the '&quot; mark.  Can't know if setpos() was successful.
解决方案:   Allow setting the '&quot; mark with setpos().  Have setpos() return a
	    value indicating success/failure.
相关文件:   runtime/doc/eval.txt, src/eval.c, src/mark.c

Patch 7.1.249
问题:	    After &quot;U&quot; the cursor can be past end of line.  (Adri Verhoef)
解决方案:   Adjust the cursor position in u_undoline().
相关文件:   src/undo.c

Patch 7.1.250
问题:	    &quot;:setglobal fenc=anything&quot; gives an error message in a buffer
	    where <span class="Type">'modifiable'</span> is off.  (Ben Schmidt)
解决方案:   Don't give an error if <span class="Type">'modifiable'</span> doesn't matter.
相关文件:   src/option.c

Patch 7.1.251
问题:	    Using freed memory when spell checking enabled.
解决方案:   Obtain the current line again after calling spell_move_to().
	    (Dominique Pelle)
相关文件:   src/screen.c

Patch 7.1.252 (after 7.1.243)
问题:	    Test 39 fails when the environment has a utf-8 locale. (Dominique
	    Pelle)
解决方案:   Force <span class="Type">'encoding'</span> to be latin1.
相关文件:   src/testdir/test39.in

Patch 7.1.253
问题:	    &quot;:sort&quot; doesn't work in a one line file. (Patrick Texier)
解决方案:   Don't sort if there is only one line. (Dominique Pelle)
相关文件:   src/ex_cmds.c

Patch 7.1.254
问题:	    Tests 49 and 55 fail when the locale is French.
解决方案:   Using C messages for test 49.  Filter the error message in test 55
	    such that it works when the number is halfway the message.
相关文件:   src/testdir/test49.in, src/testdir/test55.in

Patch 7.1.255
问题:	    Vim doesn't support utf-32. (Yongwei Wu)
解决方案:   Add aliases for utf-32, it's the same as ucs-4.
相关文件:   src/mbyte.c

Patch 7.1.256
问题:	    findfile() also returns directories.
解决方案:   Cleanup the code for finding files and directories in a list of
	    directories.  Remove the ugly global ff_search_ctx.
相关文件:   src/eval.c, src/misc2.c, src/vim.h, src/tag.c

Patch 7.1.257
问题:	    Configure can't always find the Tcl header files.
解决方案:   Also look in /usr/local/include/tcl$tclver and
	    /usr/include/tcl$tclver (James Vega)
相关文件:   src/auto/configure, src/configure.in

Patch 7.1.258
问题:	    Crash when doing &quot;d/\n/e&quot; and <span class="Type">'virtualedit'</span> is &quot;all&quot;. (Andy Wokula)
解决方案:   Avoid that the column becomes negative.  Also fixes other problems
	    with the end of a pattern match is in column zero. (A.Politz)
相关文件:   src/search.c

Patch 7.1.259
问题:	    Cursor is in the wrong position when <span class="Type">'rightleft'</span> is set,
	    <span class="Type">'encoding'</span> is &quot;utf-8&quot; and on an illegal byte.  (Dominique Pelle)
解决方案:   Only put the cursor in the first column when actually on a
	    double-wide character.  (Yukihiro Nakadaira)
相关文件:   src/screen.c

Patch 7.1.260
问题:	    Cursor positioning problem after ^@ wrapping halfway when
	    <span class="Type">'encoding'</span> is utf-8.
解决方案:   Only count a position for printable characters.  (partly by
	    Yukihiro Nakadaira)
相关文件:   src/charset.c

Patch 7.1.261
问题:	    When a 2 byte BOM is detected Vim uses UCS-2, which doesn't work
	    for UTF-16 text. (Tony Mechelynck)
解决方案:   Default to UTF-16.
相关文件:   src/fileio.c, src/testdir/test42.ok

Patch 7.1.262
问题:	    Can't get the process ID of Vim.
解决方案:   Implement getpid().
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.1.263
问题:	    The filetype can consist of two dot separated names.  This works
	    for syntax and ftplugin, but not for indent. (Brett Stahlman)
解决方案:   Use split() and loop over each dot separated name.
相关文件:   runtime/indent.vim

Patch 7.1.264
问题:	    Crash when indenting lines. (Dominique Pelle)
解决方案:   Set the cursor column when changing the cursor line.
相关文件:   src/ops.c, src/misc1.c

Patch 7.1.265
问题:	    When <span class="Type">'isfname'</span> contains a space, cmdline completion can hang.
	    (James Vega)
解决方案:   Reset the &quot;len&quot; variable.
相关文件:   src/ex_docmd.c

Patch 7.1.266
问题:	    When the version string returned by the terminal contains
	    unexpected characters, it is used as typed input. (James Vega)
解决方案:   Assume the escape sequence ends in a letter.
相关文件:   src/term.c

Patch 7.1.267
问题:	    When changing folds cursor may be positioned in the wrong place.
解决方案:   Call changed_window_setting_win() instead of
	    changed_window_setting().
相关文件:   src/fold.c

Patch 7.1.268
问题:	    Always shows &quot;+&quot; at end of screen line with: &quot;:set
	    listchars=eol:$,extends:+ nowrap list cursorline&quot; (Gary Johnson)
解决方案:   Check for lcs_eol_one instead of lcs_eol.
相关文件:   src/screen.c

Patch 7.1.269
问题:	    The matchparen plugin has an arbitrary limit for the number of
	    lines to look for a match.
解决方案:   Rely on the searchpair() timeout.
相关文件:   runtime/plugin/matchparen.vim

Patch 7.1.270
问题:	    &quot;:?foo?&quot; matches in current line since patch 7.1.025. (A.Politz)
解决方案:   Remove the SEARCH_START flag.
相关文件:   src/ex_docmd.c, src/search.c

Patch 7.1.271
问题:	    In a Vim build without autocommands, checking a file that was
	    changed externally causes the current buffer to be changed
	    unexpectedly.  (Karsten Hopp)
解决方案:   Store &quot;curbuf&quot; instead of &quot;buf&quot;.
相关文件:   src/fileio.c

Patch 7.1.272
问题:	    The special buffer name [Location List] is not used for a buffer
	    displayed in another tab page.
解决方案:   Use FOR_ALL_TAB_WINDOWS instead of FOR_ALL_WINDOWS. (Hiroaki
	    Nishihara)
相关文件:   src/buffer.c

Patch 7.1.273
问题:	    When profiling on Linux Vim exits early. (Liu Yubao)
解决方案:   When profiling don't exit on SIGPROF.
相关文件:   src/Makefile, src/os_unix.c

Patch 7.1.274 (after 7.1.272)
问题:	    Compiler warning for optimized build.
解决方案:   Init win to NULL.
相关文件:   src/buffer.c

Patch 7.1.275 (extra)
问题:	    Mac: ATSUI and <span class="Type">'antialias'</span> don't work properly together.
解决方案:   Fix this and the input method. (Jjgod Jiang)
相关文件:   src/vim.h, src/gui_mac.c

Patch 7.1.276
问题:	    &quot;gw&quot; uses <span class="Type">'formatexpr'</span>, even though the docs say it doesn't.
解决方案:   Don't use <span class="Type">'formatexpr'</span> for &quot;gw&quot;.
相关文件:   src/vim.h, src/edit.c, src/ops.c, src/proto/ops.pro

Patch 7.1.277
问题:	    Default for <span class="Type">'paragraphs'</span> misses some items (Colin Watson)
解决方案:   Add TP, HP, Pp, Lp and It to <span class="Type">'paragraphs'</span>. (James Vega)
相关文件:   runtime/doc/options.txt, src/option.c

Patch 7.1.278 (extra, after 7.1.275)
问题:	    Build failure when USE_CARBONKEYHANDLER is not defined.
解决方案:   Remove #ifdef.
相关文件:   src/gui_mac.c

Patch 7.1.279
问题:	    When using cscope temporary files are left behind.
解决方案:   Send the quit command to cscope and give it two seconds to exit
	    nicely before killing it. (partly by Dominique Pelle)
相关文件:   src/if_cscope.c

Patch 7.1.280  (after 7.1.275)
问题:	    Mac: build problems when not using multibyte feature. (Nicholas
	    Stallard)
解决方案:   Don't define USE_IM_CONTROL when not using multibyte.
相关文件:   src/vim.h

Patch 7.1.281 (after 7.1.279)
问题:	    sa.sa_mask is not initialized.  Cscope may not exit.
解决方案:   Use sigemptyset().  Use SIGKILL instead of SIGTERM. (Dominique
	    Pelle)
相关文件:   src/if_cscope.c

Patch 7.1.282 (extra)
问题:	    Win64: Edit with Vim context menu isn't installed correctly.
	    Compiler warnings and a few other things.
解决方案:   Add [ and ] to entry of class name.  Use UINT_PTR instead of UINT.
	    And fixes for other things. (George V.  Reilly)
相关文件:   src/GvimExt/Makefile, src/dosinst.c, src/if_ole.cpp, src/if_ole.h,
	    src/if_ole.idl, src/INSTALLpc.txt,  src/Make_mvc.mak,
	    src/os_win32.c,

Patch 7.1.283
问题:	    Non-extra part for 7.1.282.
解决方案:   Various changes.
相关文件:   src/ex_docmd.c, src/globals.h, src/if_cscope.c, src/main.c,
	    src/mark.c, src/netbeans.c, src/popupmnu.c, src/vim.h,
	    src/window.c

Patch 7.1.284
问题:	    Compiler warnings for functions without prototype.
解决方案:   Add the function prototypes. (Patrick Texier)
相关文件:   src/eval.c, src/quickfix.c

Patch 7.1.285 (extra)
问题:	    Mac: dialog hotkeys don't work.
解决方案:   Add hotkey support. (Dan Sandler)
相关文件:   src/gui_mac.c

Patch 7.1.286 (after 7.1.103)
问题:	    &quot;w&quot; at the end of the buffer moves the cursor past the end of the
	    line. (Markus Heidelberg)
解决方案:   Move the cursor back from the NUL when it was moved forward.
相关文件:   src/normal.c

Patch 7.1.287
问题:	    Crash when reversing a list after using it. (Andy Wokula)
解决方案:   Update the pointer to the last used element. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.1.288 (after 7.1.281)
问题:	    Cscope still leaves behind temp files when using gvim.
解决方案:   When getting the ECHILD error loop for a while until cscope exits.
	    (Dominique Pelle)
相关文件:   if_cscope.c

Patch 7.1.289
问题:	    When EXITFREE is defined and <span class="Type">'acd'</span> is set freed memory is used.
	    (Dominique Pelle)
解决方案:   Reset p_acd before freeing all buffers.
相关文件:   src/misc2.c

Patch 7.1.290
问题:	    Reading bytes that were not written when spell checking and a line
	    has a very large indent.
解决方案:   Don't copy the start of the next line when it only contains
	    spaces. (Dominique Pelle)
相关文件:   src/spell.c

Patch 7.1.291 (after 7.1.288)
问题:	    Compiler warning.
解决方案:   Change 50 to 50L.
相关文件:   src/if_cscope.c

Patch 7.1.292
问题:	    When using a pattern with &quot;\@&lt;=&quot; the submatches can be wrong.
	    (Brett Stahlman)
解决方案:   Save the submatches when attempting a look-behind match.
相关文件:   src/regexp.c

Patch 7.1.293
问题:	    Spell checking considers super- and subscript characters as word
	    characters.
解决方案:   Recognize the Unicode super and subscript characters.
相关文件:   src/spell.c

Patch 7.1.294
问题:	    Leaking memory when executing a shell command.
解决方案:   Free memory when not able to save for undo. (Dominique Pelle)
相关文件:   src/ex_cmds.c

Patch 7.1.295
问题:	    Vimtutor only works with vim, not gvim.
解决方案:   Add the -g flag to vimtutor. (Dominique Pelle)  Add gvimtutor.
相关文件:   src/Makefile, src/gvimtutor, src/vimtutor, runtime/doc/vimtutor.1

Patch 7.1.296
问题:	    SELinux is not supported.
解决方案:   Detect the selinux library and use mch_copy_sec(). (James Vega)
相关文件:   src/auto/configure, src/config.h.in, src/configure.in,
	    src/fileio.c, src/memfile.c, src/os_unix.c, src/proto/os_unix.pro

Patch 7.1.297
问题:	    When using the search/replace dialog the parenmatch highlighting
	    can be wrong. (Tim Duncan)
解决方案:   In the GUI redraw function invoke the CursorMoved autocmd.
相关文件:   src/gui.c

Patch 7.1.298 (after 7.1.295)
问题:	    src/gvimtutor is not distributed.
解决方案:   Add it to the list of distributed files.
相关文件:   Filelist

Patch 7.1.299
问题:	    Filetype detection doesn't work properly for file names ending in
	    a part that is ignored and contain a space or other special
	    characters.
解决方案:   Escape the special characters using the new fnameescape function.
相关文件:   runtime/doc/eval.txt, runtime/filetype.vim, src/eval.c,
	    src/ex_getln.c, src/proto/ex_getln.pro, src/vim.h

Patch 7.1.300
问题:	    Value of asmsyntax argument isn't checked for valid characters.
解决方案:   Only accepts letters and digits.
相关文件:   runtime/filetype.vim

Patch 7.1.301
问题:	    When the &quot;File/Save&quot; menu is used in Insert mode, a tab page label
	    is not updated to remove the &quot;+&quot;.
解决方案:   Call draw_tabline() from showruler(). (Bjorn Winckler)
相关文件:   src/screen.c

Patch 7.1.302 (after 7.1.299)
问题:	    Compilation error on MS-Windows.
解决方案:   Don't use xp_shell when it's not defined.
相关文件:   src/ex_getln.c

Patch 7.1.303 (after 7.1.302)
问题:	    Compilation error on MS-Windows, again.
解决方案:   Declare p.
相关文件:   src/ex_getln.c

Patch 7.1.304
问题:	    Shortpath_for_invalid_fname() does not work correctly and is
	    unnecessary complex.
解决方案:   Clean up shortpath_for_invalid_fname(). (mostly by Yegappan
	    Lakshmanan)
相关文件:   src/eval.c

Patch 7.1.305
问题:	    Editing a compressed file with special characters in the name
	    doesn't work properly.
解决方案:   Escape special characters.
相关文件:   runtime/autoload/gzip.vim

Patch 7.1.306
问题:	    Some Unicode characters are handled like word characters while
	    they are symbols.
解决方案:   Adjust the table for Unicode classification.
相关文件:   src/mbyte.c

Patch 7.1.307
问题:	    Many warnings when compiling with Python 2.5.
解决方案:   Use ssize_t instead of int for some types. (James Vega)
相关文件:   src/if_python.c

Patch 7.1.308
问题:	    When in readonly mode &quot;:options&quot; produces an error.
解决方案:   Reset <span class="Type">'readonly'</span>. (Gary Johnson)
相关文件:   runtime/optwin.vim

Patch 7.1.309
问题:	    Installing and testing with a shadow directory doesn't work.
	    (James Vega)
解决方案:   Add &quot;po&quot; to the list of directories to link.  Also link the Vim
	    scripts in testdir.  And a few more small fixes.
相关文件:   src/Makefile

Patch 7.1.310
问题:	    Incomplete utf-8 byte sequence at end of the file is not detected.
	    Accessing memory that wasn't written.
解决方案:   Check the last bytes in the buffer for being a valid utf-8
	    character. (mostly by Ben Schmidt)
	    Also fix that the reported line number of the error was wrong.
相关文件:   src/fileio.c

Patch 7.1.311
问题:	    Compiler warning for missing sentinel in X code.
解决方案:   Change 0 to NULL. (Markus Heidelberg)
相关文件:   src/mbyte.c

Patch 7.1.312
问题:	    The .po files have mistakes in error numbers.
解决方案:   Search for these mistakes in the check script. (Dominique Pelle)
相关文件:   src/po/check.vim

Patch 7.1.313
问题:	    When the netbeans interface setModified call is used the status
	    lines and window title are not updated.
解决方案:   Redraw the status lines and title. (Philippe Fremy)
相关文件:   src/netbeans.c

Patch 7.1.314
问题:	    The value of <span class="Type">'pastetoggle'</span> is written to the session file without
	    any escaping. (Randall Hansen)
解决方案:   Use put_escstr(). (Ben Schmidt)
相关文件:   src/option.c

Patch 7.1.315
问题:	    Crash with specific search pattern using look-behind match.
	    (Andreas Politz)
解决方案:   Also save the value of &quot;need_clear_subexpr&quot;.
相关文件:   src/regexp.c

Patch 7.1.316
问题:	    When <span class="Type">'cscopetag'</span> is set &quot;:tag&quot; gives an error message instead of
	    going to the next tag in the tag stack.
解决方案:   Don't call do_cstag() when there is no argument. (Mark Goldman)
相关文件:   src/ex_docmd.c

Patch 7.1.317
问题:	    Compiler warnings in Motif calls.
解决方案:   Change zero to NULL. (Dominique Pelle)
相关文件:   src/gui_motif.c

Patch 7.1.318
问题:	    Memory leak when closing xsmp connection.  Crash on exit when
	    using Lesstif.
解决方案:   Don't close the X display to work around a Lesstif bug.  Free
	    clientid.  Also fix a leak for Motif and Athena. (Dominique Pelle)
相关文件:   src/gui_x11.c, src/os_unix.c

Patch 7.1.319
问题:	    When a register has an illegal utf-8 sequence, pasting it on the
	    command line causes an illegal memory access.
解决方案:   Use mb_cptr2char_adv(). (Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.1.320 (extra)
问题:	    Win64: Warnings while compiling Python interface.
解决方案:   Use PyInt in more places.  Also update version message for the
	    console. (George Reilly)
相关文件:   src/if_python.c, src/version.c

Patch 7.1.321 (extra)
问题:	    Win32 / Win64: Install file is outdated.
解决方案:   Update the text for recent compiler. (George Reilly)
相关文件:   src/INSTALLpc.txt

Patch 7.1.322
问题:	    Can't get start of Visual area in an <span class="Special">&lt;expr&gt;</span> mapping.
解决方案:   Add the 'v' argument to getpos().
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.1.323
问题:	    Test 19 fails with some termcaps. (Dominique Pelle)
解决方案:   Set the t_kb and t_kD termcap values.
相关文件:   src/testdir/test19.in, src/testdir/test38.in

Patch 7.1.324
问题:	    File name path length on Unix is limited to 1024.
解决方案:   Use PATH_MAX when it's more than 1000.
相关文件:   src/os_unix.h

Patch 7.1.325
问题:	    When editing a command line that's longer than available space in
	    the window, the characters at the end are in reverse order.
解决方案:   Increment the insert position even when the command line doesn't
	    fit.  (Ingo Karkat)
相关文件:   src/ex_getln.c

Patch 7.1.326
问题:	    &quot;:s!from!to!&quot; works, but &quot;:smagic!from!to!&quot; doesn't.  It sees the
	    &quot;!&quot; as a flag to the command.  Same for &quot;:snomagic&quot;. (Johan Spetz)
解决方案:   When checking for a forced command also ignore &quot;:smagic&quot; and
	    &quot;:snomagic&quot;. (Ian Kelling)
相关文件:   src/ex_docmd.c

Patch 7.1.327
问题:	    The GUI tutor is installed when there is no GUI version.
解决方案:   Only install gvimtutor when building a GUI version.
相关文件:   src/Makefile

Patch 7.1.328
问题:	    Crash when using Cygwin and non-posix path name in tags file.
解决方案:   Use separate buffer for posix path. (Ben Schmidt)
相关文件:   src/os_unix.c

Patch 7.1.329
问题:	    When the popup menu is removed a column of cells, the right halve
	    of double-wide characters, may not be redrawn.
解决方案:   Check if the right halve of a character needs to be redrawn.
	    (Yukihiro Nakadaira)
相关文件:   src/screen.c

Patch 7.1.330
问题:	    Reading uninitialized memory when using Del in replace mode.
解决方案:   Use utfc_ptr2len_len() instead of mb_ptr2len(). (Dominique Pelle)
相关文件:   src/misc1.c

Warning for missing sentinel in gui_xmldlg.c. (Dominique Pelle)

A search offset from the end of a match didn't work properly for multi-byte
characters.  (Yukihiro Nakadaira)

When displaying the value of <span class="Type">'key'</span> don't show &quot;*****&quot; when the value is empty.
(Ben Schmidt)

Internal error when compiled with EXITFREE and using the nerd_tree plugin.
Set last_msg_hist to NULL when history becomes empty.  Call
free_all_functions() after garbage collection.  (Dominique Pelle)

GTK with XIM: <span class="Special">&lt;S-Space&gt;</span> does not work.  (Yukihiro Nakadaira)

Some shells do not support &quot;echo -n&quot;, which breaks glob().  Use &quot;echo&quot; instead
of &quot;echo -n $1; echo&quot;.  (Gary Johnson)

&quot;echo 22,44&quot; printed &quot;22&quot; on top of the command, the error messages caused
the rest not to be cleared.  Added the need_clr_eos flag.

Netbeans events are handled while updating the screen, causing a crash.
Change the moment when events are handled.  Rename nb_parse_messages() to
netbeans_parse_messages().  (Xavier de Gaye)

Test 11 was broken after patch 7.1.186 on Win32 console. (Daniel Shahaf)
Use shellescape() on the file name.

IM was turned off in im_preedit_end_cb() for no good reason.  (Takuhiro
Nishioka)

A corrupted spell file could cause Vim to use lots of memory.  Better
detection for running into the end of the file.  (idea from James Vega)

Mac: Included a patch to make it build with GTK.  Moved language init to
mac_lang_init() function.  (Ben Schmidt)

Problem with <span class="Type">'wildmenu'</span> after &quot;:lcd&quot;, up/down arrows don't work. (Erik Falor)

Fix configure.in to avoid &quot;implicitly declared&quot; warnings when running
configure.

Fixed a memory leak when redefining a keymap. (Dominique Pelle)

Setting <span class="Type">'pastetoggle'</span> to &quot;jj&quot; didn't work.

<span class="Type">'ic'</span> and <span class="Type">'smartcase'</span> don't work properly when using \%V in a search pattern.
(Kana Natsuno)

Patch 7.2a.001
问题:       On some systems X11/Xlib.h exists (from X11-dev package) but
	    X11/Intrinsic.h does not (in Xt-dev package).  This breaks the
	    build.  Also, on Solaris 9 sys/ptem.h isn't found.
解决方案:   Have configure only accept X11 when X11/Intrinsic.h exists.
	    Check for sys/ptem.h while including sys/stream.h. (Vladimir
	    Marek)
相关文件:   src/auto/configure, src/configure.in

Patch 7.2a.002
问题:       getbufvar(<span class="Special">N</span>, &quot;&quot;) gets the dictionary of the current buffer instead
	    of buffer <span class="Special">N</span>.
解决方案:   Set curbuf before calling find_var_in_ht(). (Kana Natsuno)
相关文件:   src/eval.c

Patch 7.2a.003
问题:       Leaking memory when using &quot;:file name&quot; and using access control
	    lists.
解决方案:   Invoke mch_free_acl() in vim_rename(). (Dominique Pelle)
相关文件:   src/fileio.c

Patch 7.2a.004
问题:       Some systems can't get spell files by ftp.
解决方案:   Use http when it looks like it's possible. (James Vega)
相关文件:   runtime/autoload/spellfile.vim

Patch 7.2a.005
问题:       A few error messages use confusing names.  Misspelling.
解决方案:   Change &quot;dissallows&quot; to &quot;disallows&quot;. (Dominique Pelle)  Change
	    &quot;number&quot; to &quot;Number&quot;.
相关文件:   src/eval.c, src/fileio.c

Patch 7.2a.006
问题:       Reading past NUL in a string.
解决方案:   Check for invalid utf-8 byte sequence. (Dominique Pelle)
相关文件:   src/charset.c

Patch 7.2a.007
问题:       &quot;:let v = 1.2.3&quot; was OK in Vim 7.1, now it gives an error.
解决方案:   Don't look for a floating point number after the &quot;.&quot; operator.
相关文件:   src/eval.c

Patch 7.2a.008
问题:       printf(&quot;%g&quot;, 1) doesn't work.
解决方案:   Convert Number to Float when needed.
相关文件:   src/message.c

Patch 7.2a.009
问题:       cygwin_conv_to_posix_path() does not specify buffer size.
解决方案:   Use new Cygwin function: cygwin_conv_path(). (Corinna Vinschen)
相关文件:   src/main.c, src/os_unix.c

Patch 7.2a.010
问题:       When a file name has an illegal byte sequence Vim may read
	    uninitialised memory.
解决方案:   Don't use UTF_COMPOSINGLIKE() on an illegal byte.  In
	    msg_outtrans_len_attr() use char2cells() instead of ptr2cells().
	    In utf_ptr2char() don't check second byte when first byte is
	    illegal.  (Dominique Pelle)
相关文件:   src/mbyte.c, src/message.c

Patch 7.2a.011
问题:       The Edit/Startup Settings menu doesn't work.
解决方案:   Expand environment variables. (Ben Schmidt)
相关文件:   runtime/menu.vim

Patch 7.2a.012
问题:       Compiler warnings for casting int to pointer.
解决方案:   Add cast to long in between. (Martin Toft)
相关文件:   src/gui_gtk_x11.c

Patch 7.2a.013
问题:       shellescape() does not escape &quot;%&quot; and &quot;#&quot; characters.
解决方案:   Add find_cmdline_var() and use it when the second argument to
	    shellescape() is non-zero.
相关文件:   runtime/doc/eval.txt, src/eval.c, src/ex_docmd.c,
	    src/proto/ex_docmd.pro, src/proto/misc2.pro, src/misc2.c

Patch 7.2a.014
问题:       Problem with % in message.
解决方案:   Put % in single quotes.
相关文件:   src/eval.c

Patch 7.2a.015 (after 7.2a.010)
问题:       Misaligned messages.
解决方案:   Compute length of unprintable chars correctly.
相关文件:   src/message.c

Patch 7.2a.016
问题:       Using <span class="Special">CTRL-W</span> v in the quickfix window results in two quickfix
	    windows, which is not allowed.  &quot;:tab split&quot; should be allowed to
	    open a new quickfix window in another tab.
解决方案:   For <span class="Special">CTRL-W</span> v instead of splitting the window open a new one.
	    When using &quot;:tab&quot; do allow splitting the quickfix window (was
	    already included in patch 7.2a.013).
相关文件:   src/window.c

Patch 7.2a.017
问题:       &quot;:doautoall&quot; executes autocommands for all buffers instead of just
	    for loaded buffers.
解决方案:   Change &quot;curbuf&quot; to &quot;buf&quot;.
相关文件:   src/fileio.c

Patch 7.2a.018
问题:       Compiler warnings when compiling with Gnome. (Tony Mechelynck)
解决方案:   Add type casts.
相关文件:   src/gui_gtk_x11.c

Patch 7.2a.019
问题:       &quot;:let &amp;g:tw = 44&quot; sets the local option value. (Cyril Slobin)
解决方案:   Use get_varp_scope() instead of get_varp(). (Ian Kelling)
相关文件:   src/option.c

There is no way to avoid adding /usr/local/{include|lib} to the build
commands.  Add the --with-local-dir argument to configure. (Michael
Haubenwallner)

When using <span class="Special">CTRL-D</span> after &quot;:help&quot;, the number of matches could be thousands.
Restrict to TAG_MANY to avoid this taking too long. (Ian Kelling)

The popup menu could be placed at a weird location.  Caused by w_wcol computed
by curs_columns().  (Dominique Pelle)

Overlapping STRCPY() arguments when using %r item in <span class="Type">'errorformat'</span>.  Use
STRMOVE() instead. (Ralf Wildenhues)

Mac: On Leopard gvim, when using the mouse wheel nothing would happen until
another event occurs, such as moving the mouse.  Then the recorded scrolling
would take place all at once. (Eckehard Berns)

Solution for cursor color not reflecting IM status for GTK 2.  Add
preedit_is_active flag. (SungHyun Nam)

filereadable() can hang on a FIFO on Linux.  Use open() instead of fopen(),
with O_NONBLOCK. (suggested by Lars Kotthoff)

Included patch to support Perl 5.10. (Yasuhiro Matsumoto)

When files are dropped on gvim while the screen is being updated, ignore the
drop command to avoid freeing memory that is being used.

In a terminal, when drawing the popup menu over double-wide characters, half
characters may not be cleared properly. (Yukihiro Nakadaira)

The #ifdef for including &quot;vimio.h&quot; was inconsistent.  In a few files it
depended on MSWIN, which isn't defined until later.

Patch 7.2b.001
问题:       Compilation problem: mb_fix_col() missing with multi-byte feature
	    but without GUI or clipboard.
解决方案:   Remove #ifdef.
相关文件:   src/mbyte.c

Patch 7.2b.002
问题:       Compiler warnings for signed/unsigned mismatch.
解决方案:   Add type casts.
相关文件:   src/screen.c

Patch 7.2b.003
问题:       Still a compilation problem, check_col() and check_row() missing.
解决方案:   Add FEAT_MBYTE to the #if.
相关文件:   src/ui.c

Patch 7.2b.004
问题:       Trying to free memory for a static string when using &quot;:helpgrep&quot;.
	    (George Reilly)
解决方案:   Set <span class="Type">'cpo'</span> to empty_option instead of an empty string.  Also for
	    searchpair() and substitute().
相关文件:   src/quickfix.c, src/eval.c

Patch 7.2b.005
问题:       The special character &quot;!&quot; isn't handled properly in shellescape().
	    (Jan Minar)
解决方案:   Escape &quot;!&quot; when using a &quot;csh&quot; like shell and with
	    shellescape(s, 1).  Twice for both.  Also escape <span class="Special">&lt;NL&gt;</span>.
相关文件:   src/misc2.c

Patch 7.2b.006
问题:       Reading past end of string when reading info from tags line.
解决方案:   Break the loop when encountering a NUL. (Dominique Pelle)
相关文件:   src/tag.c

Patch 7.2b.007
问题:       Part of a message cannot be translated.
解决方案:   Put _() around the message.
相关文件:   src/search.c

Patch 7.2b.008
问题:       A few filetypes are not detected or not detected properly.
解决方案:   Add filetype detection patterns. (Nikolai Weibull)
相关文件:   runtime/filetype.vim

Patch 7.2b.009
问题:       Reading past end of screen line. (Epicurus)
解决方案:   Avoid going past the value of Columns.
相关文件:   src/screen.c

Patch 7.2b.010
问题:       &quot;:mksession&quot; doesn't work for &quot;:map , foo&quot;, &quot;:sunmap ,&quot;. (Ethan
	    Mallove)
解决方案:   Check for &quot;nxo&quot;, &quot;nso&quot; and other strange mapping combinations.
相关文件:   src/getchar.c

Patch 7.2b.011
问题:       Configure for TCL ends up with include file in compiler command.
	    (Richard Hogg)
解决方案:   Delete items from $TCL_DEFS that do not start with a dash.
相关文件:   src/auto/configure, src/configure.in

Patch 7.2b.012
问题:       Build failure with +multi_byte but without +diff.
解决方案:   Add #ifdef. (Patrick Texier)
相关文件:   src/main.c

Patch 7.2b.013
问题:       Build fails with tiny features and Perl. (Dominique Pelle)
解决方案:   Define missing functions.  Also when compiling Python.
相关文件:   src/if_perl.xs, src/if_python.c

Patch 7.2b.014
问题:       Configure uses an unsafe temp file to store commands.
解决方案:   Create the temp file in local directory.
相关文件:   src/auto/configure, src/configure.in

Patch 7.2b.015
问题:       Build fails on Mac when using Aap.
解决方案:   Fix typo in configure script.
相关文件:   src/auto/configure, src/configure.in

Patch 7.2b.016
问题:       Build fails with normal features but without +autocmd.
解决方案:   Fix #ifdefs. (Ian Kelling)
相关文件:   src/eval.c, src/ex_cmds.c, src/quickfix.c, src/option.c,
	    src/ex_docmd.c

Patch 7.2b.017
问题:       &quot;vim -O foo foo&quot; results in only one window.  (Zdenek Sekera)
解决方案:   Handle result of ATTENTION prompt properly. (Ian Kelling)
相关文件:   src/main.c

Patch 7.2b.018
问题:       When doing command line completion on a file name for a csh-like
	    shell argument a '!' character isn't escaped properly.
解决方案:   Add another backslash.
相关文件:   src/ex_getln.c, src/misc2.c, src/proto/misc2.pro, src/screen.c

Patch 7.2b.019 (extra)
问题:       Win32: Various compiler warnings.
解决方案:   Use __w64 attribute.  Comment-out unused parameters.  Adjust a few
	    #ifdefs. (George Reilly)
相关文件:   src/gui_w48.c, src/GvimExt/gvimext.cpp, src/Make_mvc.mak,
	    src/os_mswin.c, src/os_win32.c, src/vim.h

Patch 7.2b.020
问题:       &quot;:sort n&quot; doesn't handle negative numbers. (James Vega)
解决方案:   Include '-' in the number.
相关文件:   src/charset.c, src/ex_cmds.c

Patch 7.2b.021
问题:       Reloading doesn't read the BOM correctly. (Steve Gardner)
解决方案:   Accept utf-8 BOM when specified file encoding is utf-8.
相关文件:   src/fileio.c

Patch 7.2b.022
问题:       When using &quot;:normal&quot; while updating the status line the count of
	    an operator is lost. (Dominique Pelle)
解决方案:   Save and restore &quot;opcount&quot;.
相关文件:   src/ex_docmd.c, src/globals.h, src/normal.c

Patch 7.2b.023
问题:       Crash when using the result of synstack(0,0). (Matt Wozniski)
解决方案:   Check for v_list to be NULL in a few more places.
相关文件:   src/eval.c

Patch 7.2b.024
问题:       Using &quot;:gui&quot; while the netrw plugin is active causes a delay in
	    updating the display.
解决方案:   Don't check for terminal codes when starting the GUI.
相关文件:   src/term.c

Patch 7.2b.025
问题:       When the CursorHold event triggers a pending count is lost.
	    (Juergen Kraemer)
解决方案:   Save the counts and restore them.
相关文件:   src/normal.c, src/structs.h

Patch 7.2b.026
问题:       The GTK 2 file chooser causes the ~/.recently-used.xbel file to be
	    written over and over again.  This may cause a significant
	    slowdown. (Guido Berhoerster)
解决方案:   Don't use the GTK 2 file chooser.
相关文件:   src/gui_gtk.c

Patch 7.2b.027
问题:       Memory leak for Python, Perl, etc. script command with end marker.
解决方案:   Free the memory of the end marker. (Andy Kittner)
相关文件:   src/ex_getln.c

Patch 7.2b.028
问题:       Reading uninitialized memory when doing &quot;:gui -f&quot;. (Dominique
	    Pelle)
解决方案:   Don't position the cursor when the screen size is invalid.
相关文件:   src/gui.c

Patch 7.2b.029
问题:       &quot;:help a&quot; doesn't jump to &quot;a&quot; tag in docs. (Tony Mechelynck)
解决方案:   Get all tags and throw away more than TAG_MANY after sorting.
	    When there is no argument find matches for &quot;help&quot; to avoid a long
	    delay.
相关文件:   src/ex_cmds.c, src/ex_getln.c

Patch 7.2b.030
问题:       When changing the value of t_Co from 8 to 16 the Visual
	    highlighting keeps both reverse and a background color.
解决方案:   Remove the attribute when setting the default highlight color.
	    (Markus Heidelberg)
相关文件:   src/syntax.c

Error when cancelling completion menu and auto-formatting. (fixed by Ian
Kelling)

Patch 7.2c.001
问题:       &quot;:let x=[''] | let x += x&quot; causes hang. (Matt Wozniski)
解决方案:   Only insert elements up to the original length of the List.
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2c.002
问题:       fnameescape() doesn't handle a leading '+' or '&gt;'. (Jan Minar)
解决方案:   Escape a leading '+' and '&gt;'.  And a single '-'.
相关文件:   runtime/doc/eval.txt, src/ex_getln.c

Patch 7.2c.003
问题:       Searching for &quot;foo\%[bar]\+&quot; gives a &quot;Corrupted regexp program&quot;
	    error. (Joachim Hofmann)
解决方案:   Mark the \%[] item as not being simple.
相关文件:   src/regexp.c

On Vista access to system directories is virtualized. (Michael Mutschler)
Adjusted the manifest file to avoid this. (George Reilly)

Memory leak when using <span class="Special">CTRL-C</span> to cancel listing the jump list. (Dominique
Pelle)

Mac: Could not build with Perl interface.

<span class="PreProc">==============================================================================</span>
7.3 版 本					<span class="Ignore">*</span><span id="version-7.3" class="String anchor">version-7.3</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="version7.3" class="String anchor">version7.3</span><span class="Ignore">*</span>

本小节讨论 7.2 和 7.3 版本之间的改进。

这个版本有几百个漏洞修正，和若干新特性。最主要的新特性有:

持久化撤销					<span class="Ignore">*</span><span id="new-persistent-undo" class="String anchor">new-persistent-undo</span><span class="Ignore">*</span>
<span class="PreProc">---------------</span>

保存撤销信息到文件。可以撤销到文件读入之前的状态，即使是已卸载的缓冲区也可。见
<span class="Ignore">|</span><a href="undo.html#undo-persistence"><span class="Identifier">undo-persistence</span></a><span class="Ignore">|</span> (部分由 Jordan Lewis 提供)

新增 &quot;:earlier 1f&quot; 和 &quot;:later 1f&quot; 命令。
撤销信息中新增文件保存计数。
新增 <span class="Ignore">|</span><a href="#"><span class="Identifier">undotree()</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="#"><span class="Identifier">undofile()</span></a><span class="Ignore">|</span> 函数。

新增 <span class="Type">'undoreload'</span> 选项。可以在缓冲区重载时保存当前文本，以便使重载可以撤销。

更多加密					<span class="Ignore">*</span><span id="new-more-encryption" class="String anchor">new-more-encryption</span><span class="Ignore">*</span>
<span class="PreProc">---------------</span>

支持 Blowfish 加密。新增 <span class="Type">'cryptmethod'</span> 选项。
主要由 Mohsin Ahmed 提供。

另外，也对交换文件和撤销文件的文本进行加密。

隐藏文本					<span class="Ignore">*</span><span id="new-conceal" class="String anchor">new-conceal</span><span class="Ignore">*</span>
<span class="PreProc">------------</span>

新增 <span class="Ignore">|</span><span class="Identifier">+conceal</span><span class="Ignore">|</span> 功能。(Vince Negri)
这样可以基于语法高亮隐藏成串的文本。
也可以用单个字符替换成串的文本 <span class="Ignore">|</span><span class="Identifier">:syn-cchar</span><span class="Ignore">|</span>。
<span class="Type">'conceallevel'</span> 选项指定文本匹配包含 conceal 属性的语法项目时如何操作。
<span class="Type">'concealcursor'</span> 选项指定光标行的行为。

帮助文件隐藏用于标记标签和示例的字符。

新增 <span class="Ignore">|</span><a href="#"><span class="Identifier">synconcealed()</span></a><span class="Ignore">|</span> 函数，用于 :TOhtml。(Benjamin Fritz)

新增 <span class="Type">'cursorbind'</span> 函数，使相同文本的两个窗口光标保持同步。

Lua 接口					<span class="Ignore">*</span><span id="new-lua" class="String anchor">new-lua</span><span class="Ignore">*</span>
<span class="PreProc">-------------</span>

新增 <span class="Ignore">|</span><a href="if_lua.html#Lua"><span class="Identifier">Lua</span></a><span class="Ignore">|</span> 接口。(Luis Carvalho)

Python3 接口					<span class="Ignore">*</span><span id="new-python3" class="String anchor">new-python3</span><span class="Ignore">*</span>
<span class="PreProc">-----------------</span>

新增 Python3 接口。 它和 Python 2.x 同时支持，也可以同时使用。见 <span class="Ignore">|</span><a href="if_pyth.html#python3"><span class="Identifier">python3</span></a><span class="Ignore">|</span>
(Roland Puntaier)

改动							<span class="Ignore">*</span><span id="changed-7.3" class="String anchor">changed-7.3</span><span class="Ignore">*</span>
<span class="PreProc">-------</span>

MS-Windows 安装程序不再需要用户在控制台输入任何字符。安装程序现在也可用于 64
位系统，包括 &quot;Edit with Vim&quot; 上下文菜单。
gvim 可执行程序是 32 位的，安装的 gvimext.dll 可以是 32 或 64 位 (主要由
George Reilly 提供)
DOS 安装程序可用于更多编译器。
MS-Windows big gvim 现在使用 Python 2.7 和 3.1.2、Perl 5.12 和 Ruby 1.9.1。需
要配套的 .dll 文件才能使用。

附加和语言文件不再分别发布。
所有系统需要的源代码都包含在同一个发布里。

用 &quot;:recover&quot; 或其它方式来恢复文件后，&quot;:x&quot; 和 &quot;ZZ&quot; 过去不保存你看到的内容。这
会使得工作丢失。现在恢复后的文本会和原来文本比较。如果不同，标注缓冲区为已修改
。

如果 Vim 因为收到致命信号而退出且 v:dying 为 2 或以上，不执行 VimLeavePre、
VimLeave、BufWinLeave 和 BufUnload 自动命令。

删除 GTK 1 的支持。没有人维护它，而且源代码需要很多的 #ifdef。GTK 2 应该在所有
的系统上都可用了。(James Vega)

不再允许在模式行上设置 <span class="Type">'encoding'</span> 选项。可能会破坏文本。(Patrick Texier)

把 runtime/spell/fixdup 换名为 runtime/spell/fixdup.vim。

删除废弃的 Mac 代码。

更新拼写文件使用的 Ubuntu locale 名。

切换 autoconf 2.63 到 2.65。

删除 Mupad 缩进和文件类型插件文件，没有用。

在历史中记忆的消息最大数目现在是 200 (原来是 100)。

新增							<span class="Ignore">*</span><span id="added-7.3" class="String anchor">added-7.3</span><span class="Ignore">*</span>
<span class="PreProc">-----</span>

加入 <span class="Type">'relativenumber'</span> 选项。(Markus Heidelberg)

加入 <span class="Type">'colorcolumn'</span> 选项: 高亮窗口的一到多个列。例如高亮 <span class="Type">'textwidth'</span> 之后的列。
(主要由 Gregor Uhlenheuer 提供)

加入 NetBeans 的终端支持。加入 <span class="Ignore">|</span><span class="Identifier">:nbstart</span><span class="Ignore">|</span> 和 <span class="Ignore">|</span><span class="Identifier">:nbclose</span><span class="Ignore">|</span>。(Xavier de Gaye)

更多浮点函数: <span class="Ignore">|</span><a href="#"><span class="Identifier">acos()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">asin()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">atan2()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">cosh()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">exp()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">fmod()</span></a><span class="Ignore">|</span>、
<span class="Ignore">|</span><a href="#"><span class="Identifier">log()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">sinh()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">tan()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">tanh()</span></a><span class="Ignore">|</span>。(Bill McCarthy)

加入 <span class="Ignore">|</span><a href="#"><span class="Identifier">gettabvar()</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="#"><span class="Identifier">settabvar()</span></a><span class="Ignore">|</span> 函数。(Yegappan Lakshmanan)

加入 <span class="Ignore">|</span><a href="#"><span class="Identifier">strchars()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">strwidth()</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="#"><span class="Identifier">strdisplaywidth()</span></a><span class="Ignore">|</span> 函数。

支持 Mac 上 GTK 的 GDK_SUPER_MASK。(Stephan Schulz)

使 CTRL 和 ALT 修饰符可用于鼠标滚轮。(Benjamin Haskell)

加入横向滚轮的支持。(Bjorn Winckler)

缓冲区处于比较模式时，:TOhtml 创建显示并排比较的 HTML。(Christian Brabandt)

&quot;:TOhtml&quot; 和 2html.vim 脚本的若干改进。(Benjamin Fritz)

<span class="Type">'cinoptions'</span> 新增 'L' 项目。(Manuel Konig)

改进 Javascript 缩进。<span class="Type">'cinoptions'</span> 新增 &quot;J&quot; 标志位。(Hari Kumar G)

Mac: 支持关闭反锯齿。(LC Mi)

Mac: 新增 Mac 控制台的剪贴板支持。(Bjorn Winckler)

支持把标签页标签拖拽到其它位置。(Paul B. Mahol)

建立色彩方案菜单的更好的实现。(Juergen Kraemer)

可视模式下使用 <span class="Type">'showcmd'</span> 显示字节和字符数。

编译不带 GUI 时使 synIDattr() 可以得到 GUI 属性。(Matt Wozniski)

支持 &quot;:find&quot; 进行补全。加入测试 73。(Nazri Ramliy)

:ownsyntax 和 :setfiletype 的命令行补全。(Dominique Pelle)

:lmap 和 :lunmap 的命令行补全。

支持用户命令的语法和文件类型补全。(Christian Brabandt)

避免使用 GTK mail_loop()，以便使用 GtkFileChooser。(James Vega)

<span class="Type">'formatexpr'</span> 计算非零时回到内部排版机制，&quot;gq&quot; 亦同。(James Vega)

:browse 支持接受错误文件的参数的命令。(Lech Lorens)

gvimext 支持宽文件名。(Szabolcs Horvat)

改进合并行的测试。(Milan Vancura)
使行范围的合并加快很多。(Milan Vancura)

新增改进 z/OS (OS/390) 支持的补丁。(Ralf Schandl)

新增 helphelp.txt 文件。文本来自原来的 various.txt。

新增 <span class="Type">'statusline'</span> 的 &quot;q&quot; 项目。新增 <span class="Ignore">|</span><a href="#"><span class="Identifier">w:quickfix_title</span></a><span class="Ignore">|</span>。(Lech Lorens)

VMS 的各种改进。(Zoltan Arpadffy)

<span class="PreProc">新语法文件:</span><span class="Ignore"> ~</span>
Haskell Cabal 构造文件 (Vincent Berthoux)
ChaiScript (Jason Turner)
Cucumber (Tim Pope)
Datascript (Dominique Pelle)
Fantom (Kamil Toman)
Liquid (Tim Pope)
Logcheck (Debian)
Markdown (Tim Pope)
Perl 6 (Andy Lester)
Quickfix window (Lech Lorens)
wavefront 的 obj 文件 (Vincent Berthoux)
Perl 6 (Andy Lester)
SDC - Synopsys Design Constraints (Maurizio Tranchero)
SVG - Scalable Vector Graphics (Vincent Berthoux)
task data (John Florian)
task 42 edit (John Florian)

<span class="PreProc">新文件类型插件:</span><span class="Ignore"> ~</span>
Cucumber (Tim Pope)
Liquid (Tim Pope)
Markdown (Tim Pope)
Tcl (Robert L Hicks)

<span class="PreProc">新缩进插件:</span><span class="Ignore"> ~</span>
CUDA (Bram Moolenaar)
ChaiScript (Jason Turner)
Cucumber (Tim Pope)
LifeLines (Patrick Texier)
Liquid (Tim Pope)
Mail (Bram Moolenaar)
Perl 6 (Andy Lester)

<span class="PreProc">其它新运行时文件:</span><span class="Ignore"> ~</span>
布列塔尼语拼写文件 (Dominique Pelle)
Dvorak 键盘映射表 (Ashish Shukla)
韩语翻译。(SungHyun Nam)
Python 3 补全 (Aaron Griffin)
塞尔维亚菜单翻译 (Aleksandar Jelenak)
德顿语拼写文件
巴伐利亚语教程 (Sepp Hell)
世界语教程。(Dominique Pellé)
葡萄牙语教程。
挪威教程现在可从 tutor.nb 获得

删除 Mupad 运行时文件，没有人维护。

修正							<span class="Ignore">*</span><span id="fixed-7.3" class="String anchor">fixed-7.3</span><span class="Ignore">*</span>
<span class="PreProc">-----</span>

Patch 7.2.001
问题:	    Mac: pseudo-ttys don't work properly on Leopard, resulting in the
	    shell not to have a prompt, <span class="Special">CTRL-C</span> not working, etc.
解决方案:   Don't use SVR4 compatible ptys, even though they are detected.
	    (Ben Schmidt)
相关文件:   src/pty.c

Patch 7.2.002
问题:	    Leaking memory when displaying menus.
解决方案:   Free allocated memory. (Dominique Pelle)
相关文件:   src/menu.c

Patch 7.2.003
问题:	    Typo in translated message.  Message not translated.
解决方案:   Correct spelling. Add _(). (Dominique Pelle)
相关文件:   src/spell.c, src/version.c

Patch 7.2.004
问题:	    Cscope help message is not translated.
解决方案:   Put it in _(). (Dominique Pelle)
相关文件:   src/if_cscope.c, src/if_cscope.h

Patch 7.2.005
问题:	    A few problems when profiling.  Using flag pointer instead of flag
	    value.  Allocating zero bytes.  Not freeing used memory.
解决方案:   Remove wrong '&amp;' characters.  Skip dumping when there is nothing
	    to dump.  Free used memory. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.2.006
问题:	    HTML files are not recognized by contents.
解决方案:   Add a rule to the scripts file. (Nico Weber)
相关文件:   runtime/scripts.vim

Patch 7.2.007 (extra)
问题:	    Minor issues for VMS.
解决方案:   Minor fixes for VMS.  Add float support. (Zoltan Arpadffy)
相关文件:   runtime/doc/os_vms.txt, src/os_vms_conf.h, src/Make_vms.mms,
	    src/testdir/Make_vms.mms, src/testdir/test30.in,
	    src/testdir/test54.in

Patch 7.2.008
问题:	    With a BufHidden autocommand that invokes &quot;:bunload&quot; the window
	    count for a buffer can be wrong. (Bob Hiestand)
解决方案:   Don't call enter_buffer() when already in that buffer.
相关文件:   src/buffer.c

Patch 7.2.009
问题:	    Can't compile with Perl 5.10 on MS-Windows. (Cesar Romani)
解决方案:   Add the Perl_sv_free2 function for dynamic loading. (Dan Sharp)
相关文件:   src/if_perl.xs

Patch 7.2.010
问题:	    When using &quot;K&quot; in Visual mode not all characters are properly
	    escaped. (Ben Schmidt)
解决方案:   Use a function with the functionality of shellescape(). (Jan
	    Minar)
相关文件:   src/mbyte.c, src/misc2.c, src/normal.c

Patch 7.2.011
问题:	    Get an error when inserting a float value from the expression
	    register.
解决方案:   Convert the Float to a String automatically in the same place
	    where a List would be converted to a String.
相关文件:   src/eval.c

Patch 7.2.012
问题:	    Compiler warnings when building with startup timing.
解决方案:   Add type casts.
相关文件:   src/ex_cmds2.c

Patch 7.2.013
问题:	    While waiting for the X selection Vim consumes a lot of CPU time
	    and hangs until a response is received.
解决方案:   Sleep a bit when the selection event hasn't been received yet.
	    Time out after a couple of seconds to avoid a hang when the
	    selection owner isn't responding.
相关文件:   src/ui.c

Patch 7.2.014
问题:	    synstack() doesn't work in an empty line.
解决方案:   Accept column zero as a valid position.
相关文件:   src/eval.c

Patch 7.2.015
问题:	    &quot;make all test install&quot; doesn't stop when the test fails. (Daniel
	    Shahaf)
解决方案:   When test.log contains failures exit with non-zero status.
相关文件:   src/testdir/Makefile

Patch 7.2.016
问题:	    The pattern being completed may be in freed memory when the
	    command line is being reallocated. (Dominique Pelle)
解决方案:   Keep a pointer to the expand_T in the command line structure.
	    Don't use <span class="Special">&lt;S-Tab&gt;</span> as <span class="Special">CTRL-P</span> when there are no results.  Clear the
	    completion when using a command line from the history.
相关文件:   src/ex_getln.c

Patch 7.2.017
问题:	    strlen() used on text that may not end in a NUL. (Dominique Pelle)
	    Pasting a very big selection doesn't work.
解决方案:   Use the length passed to the XtSelectionCallbackProc() function.
	    After getting the SelectionNotify event continue dispatching
	    events until the callback is actually called.  Also dispatch the
	    PropertyNotify event.
相关文件:   src/ui.c

Patch 7.2.018
问题:	    Memory leak when substitute is aborted.
解决方案:   Free the buffer allocated for the new text. (Dominique Pelle)
相关文件:   src/ex_cmds.c

Patch 7.2.019
问题:	    Completion of &quot;:noautocmd&quot; doesn't work and exists(&quot;:noautocmd&quot;)
	    returns zero. (Ben Fritz)
解决方案:   Add &quot;noautocmd&quot; to the list of modifiers and commands.
相关文件:   src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.020
问题:	    Starting the GUI when the executable starts with 'k', but the KDE
	    version no longer exists.
解决方案:   Don't have &quot;kvim&quot; start the GUI.
相关文件:   src/main.c

Patch 7.2.021
问题:	    When executing autocommands getting the full file name may be
	    slow. (David Kotchan)
解决方案:   Postpone calling FullName_save() until autocmd_fname is used.
相关文件:   src/ex_docmd.c, src/fileio.c, src/globals.h

Patch 7.2.022 (extra)
问题:	    Testing is not possible when compiling with MingW.
解决方案:   Add a MingW specific test Makefile. (Bill McCarthy)
相关文件:   Filelist, src/testdir/Make_ming.mak

Patch 7.2.023
问题:	    <span class="Type">'cursorcolumn'</span> is in the wrong place in a closed fold when the
	    display is shifted left. (Gary Johnson)
解决方案:   Subtract w_skipcol or w_leftcol when needed.
相关文件:   src/screen.c

Patch 7.2.024
问题:	    It's possible to set <span class="Type">'history'</span> to a negative value and that causes
	    an out-of-memory error.
解决方案:   Check that <span class="Type">'history'</span> has a positive value. (Doug Kearns)
相关文件:   src/option.c

Patch 7.2.025
问题:	    When a CursorHold event invokes system() it is retriggered over
	    and over again.
解决方案:   Don't reset did_cursorhold when getting K_IGNORE.
相关文件:   src/normal.c

Patch 7.2.026 (after 7.2.010)
问题:	    &quot;K&quot; doesn't use the length of the identifier but uses the rest of
	    the line.
解决方案:   Copy the desired number of characters first.
相关文件:   src/normal.c

Patch 7.2.027
问题:	    Can use cscope commands in the sandbox.
解决方案:   Disallow them, they might not be safe.
相关文件:   src/ex_cmds.h

Patch 7.2.028
问题:	    Confusing error message for missing ().
解决方案:   Change &quot;braces&quot; to &quot;parentheses&quot;. (Gary Johnson)
相关文件:   src/eval.c

Patch 7.2.029
问题:	    No completion for &quot;:doautoall&quot;.
解决方案:   Complete &quot;:doautoall&quot; like &quot;:doautocmd&quot;.  (Doug Kearns)
相关文件:   src/ex_docmd.c

Patch 7.2.030 (after 7.2.027)
问题:	    Can't compile.
解决方案:   Remove prematurely added ex_oldfiles.
相关文件:   src/ex_cmds.h

Patch 7.2.031
问题:	    Information in the viminfo file about previously edited files is
	    not available to the user.  There is no way to get a complete list
	    of files edited in previous Vim sessions.
解决方案:   Add v:oldfiles and fill it with the list of old file names when
	    first reading the viminfo file.  Add the &quot;:oldfiles&quot; command,
	    &quot;:browse oldfiles&quot; and the &quot;#&lt;123&quot; special file name.  Increase
	    the default value for <span class="Type">'viminfo'</span> from '20 to '100.
相关文件:   runtime/doc/cmdline.txt, runtime/doc/eval.txt,
	    runtime/doc/starting.txt, runtime/doc/usr_21.txt, src/eval.c,
	    src/ex_cmds.c, src/ex_cmds.h, src/ex_docmd.c, src/feature.h,
	    src/fileio.c, src/main.c, src/mark.c, src/misc1.c,
	    src/proto/eval.pro, src/proto/ex_cmds.pro, src/proto/mark.pro,
	    src/option.c, src/structs.h, src/vim.h

Patch 7.2.032 (after 7.2.031)
问题:	    Can't build with EXITFREE defined. (Dominique Pelle)
解决方案:   Change vv_string to vv_str.
相关文件:   src/eval.c

Patch 7.2.033
问题:	    When detecting a little endian BOM &quot;ucs-2le&quot; is used, but the text
	    might be &quot;utf-16le&quot;.
解决方案:   Default to &quot;utf-16le&quot;, it also works for &quot;ucs-2le&quot;. (Jia Yanwei)
相关文件:   src/fileio.c, src/testdir/test42.ok

Patch 7.2.034
问题:	    Memory leak in spell info when deleting buffer.
解决方案:   Free the memory. (Dominique Pelle)
相关文件:   src/buffer.c

Patch 7.2.035
问题:	    Mismatches between alloc/malloc, free/vim_free,
	    realloc/vim_realloc.
解决方案:   Use the right function. (Dominique Pelle)
相关文件:   src/gui_x11.c, src/mbyte.c, src/misc2.c, src/os_unix.c

Patch 7.2.036 (extra)
问题:	    Mismatches between alloc/malloc, free/vim_free,
	    realloc/vim_realloc.
解决方案:   Use the right function. (Dominique Pelle)
相关文件:   src/gui_riscos.c, src/gui_w48.c, src/mbyte.c, src/os_vms.c,
	    src/os_w32exe.c, src/os_win16.c

Patch 7.2.037
问题:	    Double free with GTK 1 and compiled with EXITFREE.
解决方案:   Don't close display. (Dominique Pelle)
相关文件:   src/os_unix.c

Patch 7.2.038
问题:	    Overlapping arguments to memcpy().
解决方案:   Use mch_memmove(). (Dominique Pelle)
相关文件:   src/if_xcmdsrv.c

Patch 7.2.039
问题:	    Accessing freed memory on exit when EXITFREE is defined.
解决方案:   Call hash_init() on the v: hash table.
相关文件:   src/eval.c

Patch 7.2.040
问题:	    When using &quot;:e ++ff=dos fname&quot; and the file contains a NL without
	    a CR before it and <span class="Type">'ffs'</span> contains &quot;unix&quot; then the fileformat
	    becomes unix.
解决方案:   Ignore <span class="Type">'ffs'</span> when using the ++ff argument. (Ben Schmidt)
	    Also remove unreachable code.
相关文件:   src/fileio.c

Patch 7.2.041
问题:	    In diff mode, when using two tabs, each with two diffed buffers,
	    editing a buffer of the other tab messes up the diff.  (Matt
	    Mzyzik)
解决方案:   Only copy options from a window where the buffer was edited that
	    doesn't have <span class="Type">'diff'</span> set or is for the current tab page.
	    Also fix that window options for a buffer are stored with the
	    wrong window.
相关文件:   src/buffer.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
	    src/ex_getln.c, src/if_sniff.c, src/main.c, src/netbeans.c,
	    src/normal.c, src/popupmnu.c, src/proto/buffer.pro,
	    src/proto/ex_cmds.pro src/quickfix.c, src/window.c

Patch 7.2.042
问题:	    When using winrestview() in a BufWinEnter autocommand the window
	    is scrolled anyway. (Matt Zyzik)
解决方案:   Don't recompute topline when above <span class="Type">'scrolloff'</span> from the bottom.
	    Don't always put the cursor halfway when entering a buffer.  Add
	    &quot;w_topline_was_set&quot;.
相关文件:   src/buffer.c, src/move.c, src/structs.h

Patch 7.2.043
问题:	    VMS: Too many characters are escaped in filename and shell
	    commands.
解决方案:   Escape fewer characters. (Zoltan Arpadffy)
相关文件:   src/vim.h

Patch 7.2.044
问题:	    Crash because of STRCPY() being over protective of the destination
	    size. (Dominique Pelle)
解决方案:   Add -D_FORTIFY_SOURCE=1 to CFLAGS.  Use an intermediate variable
	    for the pointer to avoid a warning.
相关文件:   src/auto/configure, src/configure.in, src/eval.c

Patch 7.2.045
问题:	    The Python interface has an empty entry in sys.path.
解决方案:   Filter out the empty entry. (idea from James Vega)
相关文件:   src/if_python.c

Patch 7.2.046
问题:	    Wrong check for filling buffer with encoding. (Danek Duvall)
解决方案:   Remove pointers. (Dominique Pelle)
相关文件:   src/mbyte.c

Patch 7.2.047
问题:	    Starting Vim with the -nb argument while it's not supported causes
	    the other side to hang.
解决方案:   When -nb is used while it's not supported exit Vim. (Xavier de
	    Gaye)
相关文件:   src/main.c, src/vim.h

Patch 7.2.048
问题:	    v:prevcount is changed too often.  Counts are not multiplied when
	    setting v:count.
解决方案:   Set v:prevcount properly.  Multiply counts. (idea by Ben Schmidt)
相关文件:   src/eval.c, src/normal.c, src/proto/eval.pro

Patch 7.2.049 (extra)
问题:	    Win32: the clipboard doesn't support UTF-16.
解决方案:   Change UCS-2 support to UTF-16 support. (Jia Yanwei)
相关文件:   src/gui_w32.c, src/gui_w48.c, src/mbyte.c, src/misc1.c,
	    src/os_mswin.c, src/os_win32.c, src/proto/os_mswin.pro

Patch 7.2.050
问题:	    Warnings for not checking return value of fwrite(). (Chip Campbell)
解决方案:   Use the return value.
相关文件:   src/spell.c

Patch 7.2.051
问题:	    Can't avoid <span class="Type">'wildignore'</span> and <span class="Type">'suffixes'</span> for glob() and globpath().
解决方案:   Add an extra argument to these functions. (Ingo Karkat)
相关文件:   src/eval.c, src/ex_getln.c, src/proto/ex_getln.pro,
	    runtime/doc/eval.txt, runtime/doc/options.txt

Patch 7.2.052
问题:	    synIDattr() doesn't support &quot;sp&quot; for special color.
解决方案:   Recognize &quot;sp&quot; and &quot;sp#&quot;.  (Matt Wozniski)
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2.053
问题:	    Crash when using WorkShop command &quot;:ws foo&quot;. (Dominique Pelle)
解决方案:   Avoid using a NULL pointer.
相关文件:   src/workshop.c

Patch 7.2.054
问题:	    Compilation warnings for format in getchar.c.
解决方案:   Use fputs() instead of fprintf().  (Dominique Pelle)
相关文件:   src/getchar.c

Patch 7.2.055
问题:	    Various compiler warnings with strict checking.
解决方案:   Avoid the warnings by using return values and renaming.
相关文件:   src/diff.c, src/eval.c, src/ex_cmds.c, src/ex_docmd.c,
	    src/fileio.c, src/fold.c, src/globals.h, src/gui.c,
	    src/gui_at_sb.c, src/gui_gtk_x11.c, src/gui_xmdlg.c,
	    src/gui_xmebw.c, src/main.c, src/mbyte.c, src/message.c,
	    src/netbeans.c, src/option.c, src/os_unix.c, src/spell.c,
	    src/ui.c, src/window.c

Patch 7.2.056 (after 7.2.050)
问题:	    Tests 58 and 59 fail.
解决方案:   Don't invoke fwrite() with a zero length. (Dominique Pelle)
相关文件:   src/spell.c

Patch 7.2.057 (after 7.2.056)
问题:	    Combination of int and size_t may not work.
解决方案:   Use size_t for variable.
相关文件:   src/spell.c

Patch 7.2.058
问题:	    Can't add a patch name to the &quot;:version&quot; output.
解决方案:   Add the extra_patches array.
相关文件:   src/version.c

Patch 7.2.059
问题:	    Diff display is not always updated.
解决方案:   Update the display more often.
相关文件:   src/diff.c

Patch 7.2.060
问题:	    When a spell files has many compound rules it may take a very long
	    time making the list of suggestions.  Displaying also can be slow
	    when there are misspelled words.
	    Can't parse some Hunspell .aff files.
解决方案:   Check if a compounding can possibly work before trying a
	    combination, if the compound rules don't contain wildcards.
	    Implement using CHECKCOMPOUNDPATTERN.
	    Ignore COMPOUNDRULES.  Ignore a comment after most items.
	    Accept ONLYINCOMPOUND as an alias for NEEDCOMPOUND.
	    Accept FORBIDDENWORD as an alias for BAD.
相关文件:   runtime/doc/spell.txt, src/spell.c

Patch 7.2.061
问题:	    Can't create a funcref for an autoload function without loading
	    the script first. (Marc Weber)
解决方案:   Accept autoload functions that don't exist yet in function().
相关文件:   src/eval.c

Patch 7.2.062
问题:	    &quot;[Scratch]&quot; is not translated.
解决方案:   Mark the string for translation. (Dominique Pelle)
相关文件:   src/buffer.c

Patch 7.2.063
问题:	    Warning for NULL argument of Perl_sys_init3().
解决方案:   Use Perl_sys_init() instead. (partly by Dominique Pelle)
相关文件:   src/if_perl.xs

Patch 7.2.064
问题:	    Screen update bug when repeating &quot;~&quot; on a Visual block and the
	    last line doesn't change.
解决方案:   Keep track of changes for all lines.  (Moritz Orbach)
相关文件:   src/ops.c

Patch 7.2.065
问题:	    GTK GUI: the cursor disappears when doing &quot;:vsp&quot; and the Vim
	    window is maximized.  (Dominique Pelle, Denis Smolyar)
解决方案:   Don't change &quot;Columns&quot; back to an old value at a wrong moment.
	    Do change &quot;Rows&quot; when it should not be a problem.
相关文件:   src/gui.c

Patch 7.2.066
问题:	    It's not easy to see whether <span class="Type">'encoding'</span> is a multi-byte encoding.
解决方案:   Add has('multi_byte_encoding').
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2.067
问题:	    Session file can't load extra file when the path contains special
	    characters.
解决方案:   Escape the file name. (Lech Lorens)
相关文件:   src/ex_docmd.c

Patch 7.2.068
问题:	    Emacs tags file lines can be too long, resulting in an error
	    message. (James Vega)
解决方案:   Ignore lines with errors if they are too long.
相关文件:   src/tag.c

Patch 7.2.069 (after 7.2.060)
问题:	    Compiler warning for storing size_t in int.
解决方案:   Add type cast.
相关文件:   src/spell.c

Patch 7.2.070
问题:	    Crash when a function returns a:000. (Matt Wozniski)
解决方案:   Don't put the function struct on the stack, allocate it.  Free it
	    only when nothing in it is used.
相关文件:   src/eval.c

Patch 7.2.071 (extra)
问题:	    Win32: Handling netbeans events while Vim is busy updating the
	    screen may cause a crash.
解决方案:   Like with GTK, only handle netbeans messages in the main loop.
	    (Xavier de Gaye)
相关文件:   src/gui_w48.c, src/netbeans.c

Patch 7.2.072 (extra)
问题:	    Compiler warning in Sniff code.
解决方案:   Use return value of pipe(). (Dominique Pelle)
相关文件:   src/if_sniff.c

Patch 7.2.073
问题:	    &quot;:set <span class="Special">&lt;xHome&gt;</span>&quot; has the same output as &quot;:set <span class="Special">&lt;Home&gt;</span>&quot;. (Matt
	    Wozniski)
解决方案:   Don't translate &quot;x&quot; keys to its alternative for &quot;:set&quot;.
相关文件:   src/gui_mac.c, src/misc2.c, src/option.c, src/proto/misc2.pro

Patch 7.2.074 (extra, after 7.2.073)
问题:	    &quot;:set <span class="Special">&lt;xHome&gt;</span>&quot; has the same output as &quot;:set <span class="Special">&lt;Home&gt;</span>&quot;. (Matt
	    Wozniski)
解决方案:   Don't translate &quot;x&quot; keys to its alternative for &quot;:set&quot;.
相关文件:   src/gui_mac.c

Patch 7.2.075 (after 7.2.058)
问题:	    Explanation about making a diff for extra_patches is unclear.
解决方案:   Adjust comment.
相关文件:   src/version.c

Patch 7.2.076
问题:	    rename(from, to) deletes the file if &quot;from&quot; and &quot;to&quot; are not equal
	    but still refer to the same file.  E.g., on a FAT32 filesystem
	    under Unix.
解决方案:   Go through another file name.
相关文件:   src/fileio.c

Patch 7.2.077 (after 7.2.076)
问题:	    rename(from, to) doesn't work if &quot;from&quot; and &quot;to&quot; differ only in
	    case on a system that ignores case in file names.
解决方案:   Go through another file name.
相关文件:   src/fileio.c

Patch 7.2.078
问题:	    When deleting a fold that is specified with markers the cursor
	    position may be wrong.  Folds may not be displayed properly after
	    a delete.  Wrong fold may be deleted.
解决方案:   Fix the problems. (mostly by Lech Lorens)
相关文件:   src/fold.c

Patch 7.2.079
问题:	    &quot;killed&quot; netbeans events are not handled correctly.
解决方案:   A &quot;killed&quot; netbeans event is sent when the buffer is deleted or
	    wiped out (in this case, the netbeans annotations in this buffer
	    have been removed).  A user can still remove a sign with the
	    command &quot;:sign unplace&quot; and this does not trigger a &quot;killed&quot;
	    event.  (Xavier de Gaye)
相关文件:   runtime/doc/netbeans.txt, src/buffer.c, src/globals.h,
	    src/netbeans.c, src/proto/netbeans.pro

Patch 7.2.080
问题:	    When typing a composing character just after starting completion
	    may access memory before its allocation point. (Dominique Pelle)
解决方案:   Don't delete before the completion start column.  Add extra checks
	    for the offset not being negative.
相关文件:   src/edit.c

Patch 7.2.081
问题:	    Compiler warning for floating point overflow on VAX.
解决方案:   For VAX use a smaller number. (Zoltan Arpadffy)
相关文件:   src/message.c

Patch 7.2.082
问题:	    When <span class="Type">'ff'</span> is &quot;mac&quot; then &quot;ga&quot; on a ^J shows 0x0d instead of 0x0a.
	    (Andy Wokula)
解决方案:   Use NL for this situation. (Lech Lorens)
相关文件:   src/ex_cmds.c

Patch 7.2.083
问题:	    &quot;:tag&quot; does not return to the right tag entry from the tag stack.
解决方案:   Don't change the current match when there is no argument.
	    (Erik Falor)
相关文件:   src/tag.c

Patch 7.2.084
问题:	    Recursive structures are not handled properly in Python
	    vim.eval().
解决方案:   Keep track of references in a better way. (Yukihiro Nakadaira)
相关文件:   src/if_python.c

Patch 7.2.085
问题:	    &quot;:set <span class="Special">&lt;M-b&gt;</span>=<span class="Special">&lt;Esc&gt;</span>b&quot; does not work when <span class="Type">'encoding'</span> is utf-8.
解决方案:   Put the <span class="Special">&lt;M-b&gt;</span> character in the input buffer as valid utf-8.
	    (partly by Matt Wozniski)
相关文件:   src/term.c

Patch 7.2.086
问题:	    Using &quot;:diffget 1&quot; in buffer 1 corrupts the text.
解决方案:   Don't do anything when source and destination of &quot;:diffget&quot; or
	    &quot;:diffput&quot; is the same buffer. (Dominique Pelle)
相关文件:   src/diff.c

Patch 7.2.087
问题:	    Adding URL to <span class="Type">'path'</span> doesn't work to edit a file.
解决方案:   Skip simplify_filename() for URLs. (Matt Wozniski)
相关文件:   src/misc2.c

Patch 7.2.088 (extra)
问题:	    OpenClipboard() may fail when another application is using the
	    clipboard.
解决方案:   Retry OpenClipboard() a few times. (Jianrong Yu)
相关文件:   src/os_mswin.c

Patch 7.2.089 (extra)
问题:	    Win32: crash when using Ultramon buttons.
解决方案:   Don't use a WM_OLE message of zero size. (Ray Megal)
相关文件:   src/if_ole.cpp, src/gui_w48.c

Patch 7.2.090
问题:	    User command containing 0x80 in multi-byte character does not work
	    properly. (Yasuhiro Matsumoto)
解决方案:   Undo replacement of K_SPECIAL and CSI characters when executing
	    the command.
相关文件:   src/ex_docmd.c

Patch 7.2.091
问题:	    &quot;:cs help&quot; output is not aligned for some languages.
解决方案:   Compute character size instead of byte size. (Dominique Pelle)
相关文件:   src/if_cscope.c

Patch 7.2.092
问题:	    Some error messages are not translated.
解决方案:   Add _() around the messages. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.2.093 (extra)
问题:	    Win32: inputdialog() and find/replace dialogs can't handle
	    multi-byte text.
解决方案:   Use the wide version of dialog functions when available. (Yanwei
	    Jia)
相关文件:   src/gui_w32.c, src/gui_w48.c

Patch 7.2.094
问题:	    Compiler warning for signed/unsigned compare.
解决方案:   Add type cast.  Also fix a few typos.
相关文件:   src/edit.c

Patch 7.2.095
问题:	    With Visual selection, &quot;r&quot; and then <span class="Special">CTRL-C</span> Visual mode is stopped
	    but the highlighting is not removed.
解决方案:   Call reset_VIsual().
相关文件:   src/normal.c

Patch 7.2.096
问题:	    After &quot;:number&quot; the &quot;Press Enter&quot; message may be on the wrong
	    screen, if switching screens for shell commands.
解决方案:   Reset info_message. (James Vega)
相关文件:   src/ex_cmds.c

Patch 7.2.097
问题:	    &quot;!xterm&amp;&quot; doesn't work when <span class="Type">'shell'</span> is &quot;bash&quot;.
解决方案:   Ignore SIGHUP after calling setsid(). (Simon Schubert)
相关文件:   src/os_unix.c

Patch 7.2.098
问题:	    Warning for signed/unsigned pointer.
解决方案:   Add type cast.
相关文件:   src/eval.c

Patch 7.2.099
问题:	    Changing GUI options causes an unnecessary redraw when the GUI
	    isn't active.
解决方案:   Avoid the redraw. (Lech Lorens)
相关文件:   src/option.c

Patch 7.2.100
问题:	    When using &quot;:source&quot; on a FIFO or something else that can't rewind
	    the first three bytes are skipped.
解决方案:   Instead of rewinding read the first line and detect a BOM in that.
	    (mostly by James Vega)
相关文件:   src/ex_cmds2.c

Patch 7.2.101 (extra)
问题:	    MSVC version not recognized.
解决方案:   Add the version number to the list.  (Zhong Zhang)
相关文件:   src/Make_mvc.mak

Patch 7.2.102 (after 7.2.100)
问题:	    When <span class="Type">'encoding'</span> is &quot;utf-8&quot; a BOM at the start of a Vim script is
	    not removed. (Tony Mechelynck)
解决方案:   When no conversion is taking place make a copy of the line without
	    the BOM.
相关文件:   src/ex_cmds2.c

Patch 7.2.103
问题:	    When <span class="Type">'bomb'</span> is changed the window title is updated to show/hide a
	    &quot;+&quot;, but the tab page label isn't. (Patrick Texier)
解决方案:   Set &quot;redraw_tabline&quot; in most places where &quot;need_maketitle&quot; is set.
	    (partly by Lech Lorens)
相关文件:   src/option.c

Patch 7.2.104
问题:	    When using &quot;:saveas bar.c&quot; the tab label isn't updated right away.
解决方案:   Set redraw_tabline. (Francois Ingelrest)
相关文件:   src/ex_cmds.c

Patch 7.2.105
问题:	    Modeline setting for <span class="Type">'foldmethod'</span> overrules diff options. (Ingo
	    Karkat)
解决方案:   Don't set <span class="Type">'foldmethod'</span> and <span class="Type">'wrap'</span> from a modeline when <span class="Type">'diff'</span> is
	    on.
相关文件:   src/option.c

Patch 7.2.106
问题:	    Endless loop when using &quot;]s&quot; in HTML when there are no
	    misspellings. (Ingo Karkat)
解决方案:   Break the search loop.  Also fix pointer alignment for systems
	    with pointers larger than int.
相关文件:   src/spell.c

Patch 7.2.107
问题:	    When using a GUI dialog and &quot;:echo&quot; commands the messages are
	    deleted after the dialog. (Vincent Birebent)
解决方案:   Don't call msg_end_prompt() since there was no prompt.
相关文件:   src/message.c

Patch 7.2.108 (after 7.2.105)
问题:	    Can't build without the diff feature.
解决方案:   Add #ifdef.
相关文件:   src/option.c

Patch 7.2.109
问题:	    <span class="Type">'langmap'</span> does not work for multi-byte characters.
解决方案:   Add a list of mapped multi-byte characters. (based on work by
	    Konstantin Korikov, Agathoklis Hatzimanikas)
相关文件:   runtime/doc/options.txt, src/edit.c, src/getchar.c, src/macros.h,
	    src/normal.c, src/option.c, src/proto/option.pro, src/window.c

Patch 7.2.110
问题:	    Compiler warning for unused variable.
解决方案:   Init the variable.
相关文件:   src/ex_docmd.c

Patch 7.2.111
问题:	    When using Visual block mode with <span class="Type">'cursorcolumn'</span> it's unclear what
	    is selected.
解决方案:   Don't use <span class="Type">'cursorcolumn'</span> highlighting inside the Visual selection.
	    (idea by Dominique Pelle)
相关文件:   src/screen.c

Patch 7.2.112
问题:	    Cursor invisible in Visual mode when <span class="Type">'number'</span> is set and cursor in
	    first column. (Matti Niemenmaa, Renato Alves)
解决方案:   Check that vcol_prev is smaller than vcol.
相关文件:   src/screen.c

Patch 7.2.113
问题:	    Crash for substitute() call using submatch(1) while there is no
	    such submatch. (Yukihiro Nakadaira)
解决方案:   Also check the start of the submatch is set, it can be NULL when
	    an attempted match didn't work out.
相关文件:   src/regexp.c

Patch 7.2.114
问题:	    Using wrong printf format.
解决方案:   Use &quot;%ld&quot; instead of &quot;%d&quot;. (Dominique Pelle)
相关文件:   src/netbeans.c

Patch 7.2.115
问题:	    Some debugging code is never used.
解决方案:   Remove nbtrace() and nbprt(). (Dominique Pelle)
相关文件:   src/nbdebug.c, src/nbdebug.h

Patch 7.2.116
问题:	    Not all memory is freed when EXITFREE is defined.
解决方案:   Free allocated memory on exit. (Dominique Pelle)
相关文件:   src/ex_docmd.c, src/gui_gtk_x11.c, src/misc2.c, src/search.c,
	    src/tag.c

Patch 7.2.117
问题:	    Location list incorrectly labelled &quot;Quickfix List&quot;.
解决方案:   Break out of both loops for finding window for location list
	    buffer. (Lech Lorens)
相关文件:   src/buffer.c, src/quickfix.c, src/screen.c

Patch 7.2.118
问题:	    <span class="Special">&lt;PageUp&gt;</span> at the more prompt only does half a page.
解决方案:   Make <span class="Special">&lt;PageUp&gt;</span> go up a whole page.  Also make 'f' go a page
	    forward, but not quit the more prompt. (Markus Heidelberg)
相关文件:   src/message.c

Patch 7.2.119
问题:	    Status line is redrawn too often.
解决方案:   Check ScreeenLinesUC[] properly. (Yukihiro Nakadaira)
相关文件:   src/screen.c

Patch 7.2.120
问题:	    When opening the quickfix window or splitting the window and
	    setting the location list, the location list is copied and then
	    deleted, which is inefficient.
解决方案:   Don't copy the location list when not needed. (Lech Lorens)
相关文件:   src/quickfix.c, src/vim.h, src/window.c

Patch 7.2.121
问题:	    In gvim &quot;!grep a *.c&quot; spews out a lot of text that can't be
	    stopped with <span class="Special">CTRL-C</span>.
解决方案:   When looping to read and show text, do check for typed characters
	    every two seconds.
相关文件:   src/os_unix.c

Patch 7.2.122
问题:	    Invalid memory access when the VimResized autocommand changes
	    <span class="Type">'columns'</span> and/or <span class="Type">'lines'</span>.
解决方案:   After VimResized check for changed values. (Dominique Pelle)
相关文件:   src/screen.c

Patch 7.2.123
问题:	    Typing 'q' at more prompt for &quot;:map&quot; output still displays another
	    line, causing another more prompt. (Markus Heidelberg)
解决方案:   Quit listing maps when 'q' typed.
相关文件:   src/getchar.c

Patch 7.2.124
问题:	    Typing 'q' at more prompt for &quot;:tselect&quot; output still displays
	    more lines, causing another more prompt. (Markus Heidelberg)
解决方案:   Quit listing tags when 'q' typed.
相关文件:   src/tag.c

Patch 7.2.125
问题:	    Leaking memory when reading XPM bitmap for a sign.
解决方案:   Don't allocate the memory twice. (Dominique Pelle)
相关文件:   src/gui_x11.c

Patch 7.2.126
问题:	    When EXITFREE is defined signs are not freed.
解决方案:   Free all signs on exit.  Also free keymaps. (Dominique Pelle)
相关文件:   src/misc2.c, src/ex_cmds.c, src/proto/ex_cmds.pro

Patch 7.2.127
问题:	    When listing mappings and a wrapping line causes the more prompt,
	    after typing 'q' there can be another more prompt. (Markus
	    Heidelberg)
解决方案:   Set &quot;lines_left&quot; to allow more lines to be displayed.
相关文件:   src/message.c

Patch 7.2.128 (after 7.2.055)
问题:	    Using &quot;:lcd&quot; makes session files not work.
解决方案:   Compare return value of mch_chdir() properly. (Andreas Bernauer)
相关文件:   src/ex_docmd.c

Patch 7.2.129
问题:	    When opening a command window from input() it uses the search
	    history.
解决方案:   Use get_cmdline_type(). (James Vega)
相关文件:   src/ex_getln.c

Patch 7.2.130
问题:	    Vim may hang until <span class="Special">CTRL-C</span> is typed when using <span class="Special">CTRL-Z</span>.
解决方案:   Avoid using pause().  Also use &quot;volatile&quot; for variables used in
	    signal functions. (Dominique Pelle)
相关文件:   src/auto/configure, src/configure.in, src/config.h.in,
	    src/globals.h, src/os_unix.c

Patch 7.2.131
问题:	    When <span class="Type">'keymap'</span> is cleared may still use the cursor highlighting for
	    when it's enabled.
解决方案:   Reset <span class="Type">'iminsert'</span> and <span class="Type">'imsearch'</span>. (partly by Dominique Pelle)
	    Also avoid &quot;:setlocal&quot; for these options have a global effect.
相关文件:   src/option.c

Patch 7.2.132
问题:	    When changing directory during a SwapExists autocmd freed memory
	    may be accessed. (Dominique Pelle)
解决方案:   Add the allbuf_lock flag.
相关文件:   src/ex_getln.c, src/globals.h, src/fileio.c,
	    src/proto/ex_getln.pro

Patch 7.2.133
问题:	    &quot;:diffoff!&quot; changes settings in windows not in diff mode.
解决方案:   Only change settings in other windows when <span class="Type">'diff'</span> is set, always
	    do it for the current window. (Lech Lorens)
相关文件:   src/diff.c

Patch 7.2.134
问题:	    Warning for discarding &quot;const&quot; from pointer.
解决方案:   Don't pass const pointer to mch_memmove().
相关文件:   src/fileio.c

Patch 7.2.135
问题:	    Memory leak when redefining user command with complete argument.
解决方案:   Free the old complete argument. (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.2.136 (after 7.2.132)
问题:	    &quot;:cd&quot; is still possible in a SwapExists autocmd.
解决方案:   Check the allbuf_lock flag in ex_cd().
相关文件:   src/ex_docmd.c

Patch 7.2.137
问题:	    When <span class="Type">'virtualedit'</span> is set, a left shift of a blockwise selection
	    that starts and ends inside a tab shifts too much. (Helmut
	    Stiegler)
解决方案:   Redo the block left shift code. (Lech Lorens)
相关文件:   src/ops.c, src/testdir/Makefile, src/testdir/test66.in,
	    src/testdir/test66.ok

Patch 7.2.138 (extra part of 7.2.137)
问题:	    See 7.2.137.
解决方案:   See 7.2.137.
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms

Patch 7.2.139
问题:	    Crash when <span class="Type">'virtualedit'</span> is &quot;all&quot;. (James Vega)
解决方案:   Avoid overflow when column is MAXCOL. (Dominique Pelle)
相关文件:   src/misc2.c

Patch 7.2.140
问题:	    Diff highlighting isn't displayed before the Visual area if it
	    starts at the cursor position. (Markus Heidelberg)
解决方案:   Also check fromcol_prev.
相关文件:   src/screen.c

Patch 7.2.141
问题:	    When redrawing a character for bold spill this causes the next
	    character to be redrawn as well.
解决方案:   Only redraw one extra character. (Yukihiro Nakadaira)
相关文件:   src/screen.c

Patch 7.2.142
问题:	    Motif and Athena balloons don't use tooltip colors.
解决方案:   Set the colors. (Matt Wozniski)
相关文件:   src/gui_beval.c

Patch 7.2.143
问题:	    No command line completion for &quot;:cscope&quot; command.
解决方案:   Add the completion for &quot;:cscope&quot;. (Dominique Pelle)
相关文件:   src/ex_docmd.c, src/ex_getln.c, src/if_cscope.c,
	    src/proto/if_cscope.pro, src/vim.h

Patch 7.2.144
问题:	    When <span class="Type">'t_Co'</span> is set to the value it already had the color scheme is
	    reloaded anyway.
解决方案:   Only load the colorscheme when the t_Co value changes. (Dominique
	    Pelle)
相关文件:   src/option.c

Patch 7.2.145
问题:	    White space in &quot;:cscope find&quot; is not ignored.
解决方案:   Ignore the white space, but not when the leading white space is
	    useful for the argument.
相关文件:   runtime/doc/if_scop.txt, src/if_cscope.c

Patch 7.2.146
问题:	    v:warningmsg isn't used for all warnings.
解决方案:   Set v:warningmsg for relevant warnings. (Ingo Karkat)
相关文件:   src/fileio.c, src/misc1.c, src/option.c

Patch 7.2.147
问题:	    When compiled as small version and <span class="Type">'number'</span> is on the cursor is
	    displayed in the wrong position after a tab. (James Vega)
解决方案:   Don't increment vcol when still displaying the line number.
相关文件:   src/screen.c

Patch 7.2.148
问题:	    When searching for &quot;$&quot; while <span class="Type">'hlsearch'</span> is set, highlighting the
	    character after the line does not work in the cursor column.
	    Also highlighting for Visual mode after the line end when this
	    isn't needed.  (Markus Heidelberg)
解决方案:   Only compare the cursor column in the cursor line.  Only highlight
	    for Visual selection after the last character when it's needed to
	    see where the Visual selection ends.
相关文件:   src/screen.c

Patch 7.2.149
问题:	    Using return value of function that doesn't return a value results
	    in reading uninitialized memory.
解决方案:   Set the default to return zero.  Make cursor() return -1 on
	    failure.  Let complete() return an empty string in case of an
	    error.  (partly by Dominique Pelle)
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2.150 (extra)
问题:	    Can't use tab pages from VisVim.
解决方案:   Add tab page support to VisVim. (Adam Slater)
相关文件:   src/VisVim/Commands.cpp, src/VisVim/Resource.h,
	    src/VisVim/VisVim.rc

Patch 7.2.151
问题:	    &quot;:hist a&quot; doesn't work like &quot;:hist all&quot; as the docs suggest.
解决方案:   Make &quot;:hist a&quot; and &quot;:hist al&quot; work. (Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.2.152
问题:	    When using &quot;silent echo x&quot; inside &quot;:redir&quot; a next echo may start
	    halfway the line. (Tony Mechelynck, Dennis Benzinger)
解决方案:   Reset msg_col after redirecting silently.
相关文件:   src/ex_docmd.c, src/message.c, src/proto/message.pro

Patch 7.2.153
问题:	    Memory leak for &quot;:recover empty_dir/&quot;.
解决方案:   Free files[] when it becomes empty. (Dominique Pelle)
相关文件:   src/memline.c

Patch 7.2.154 (after 7.2.132)
问题:	    &quot;:cd&quot; is still possible in a SwapExists autocmd.
解决方案:   Set allbuf_lock in do_swapexists().
相关文件:   src/memline.c

Patch 7.2.155
问题:	    Memory leak in &quot;:function /pat&quot;.
解决方案:   Free the memory. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.2.156 (after 7.2.143)
问题:	    No completion for :scscope and :lcscope commands.
解决方案:   Implement the completion. (Dominique Pelle)
相关文件:   src/if_cscope.c, src/ex_docmd.c, src/proto/if_cscope.pro

Patch 7.2.157
问题:	    Illegal memory access when searching in path.
解决方案:   Avoid looking at a byte after end of a string. (Dominique Pelle)
相关文件:   src/search.c

Patch 7.2.158
问题:	    Warnings from VisualC compiler.
解决方案:   Add type casts. (George Reilly)
相关文件:   src/ops.c

Patch 7.2.159
问题:	    When $x_includes ends up being &quot;NONE&quot; configure fails.
解决方案:   Check for $x_includes not to be &quot;NONE&quot; (Rainer)
相关文件:   src/auto/configure, src/configure.in

Patch 7.2.160
问题:	    Search pattern not freed on exit when <span class="Type">'rightleft'</span> set.
解决方案:   Free mr_pattern_alloced.
相关文件:   src/search.c

Patch 7.2.161
问题:	    Folds messed up in other tab page. (Vlad Irnov)
解决方案:   Instead of going over all windows in current tab page go over all
	    windows in all tab pages.  Also free memory for location lists in
	    other tab pages when exiting. (Lech Lorens)
相关文件:   src/fileio.c, src/mark.c, src/misc1.c, src/misc2.c

Patch 7.2.162
问题:	    The quickfix window may get wrong filetype.
解决方案:   Do not detect the filetype for the quickfix window. (Lech Lorens)
相关文件:   src/quickfix.c

Patch 7.2.163
问题:	    The command line window may get folding.
解决方案:   Default to no/manual folding. (Lech Lorens)
相关文件:   src/ex_getln.c

Patch 7.2.164
问题:	    When <span class="Type">'showbreak'</span> is set the size of the Visual block may be
	    reported wrong. (Eduardo Daudt Flach)
解决方案:   Temporarily make <span class="Type">'sbr'</span> empty.
相关文件:   src/normal.c, src/ops.c

Patch 7.2.165
问题:	    The argument for the FuncUndefined autocmd event is expanded like
	    a file name.
解决方案:   Don't try expanding it. (Wang Xu)
相关文件:   src/fileio.c

Patch 7.2.166
问题:	    No completion for &quot;:sign&quot; command.
解决方案:   Add &quot;:sign&quot; completion. (Dominique Pelle)
相关文件:   src/ex_cmds.c, src/ex_docmd.c, src/ex_getln.c, src/vim.h,
	    src/proto/ex_cmds.pro

Patch 7.2.167
问题:	    Splint doesn't work well for checking the code.
解决方案:   Add splint arguments in the Makefile.  Exclude some code from
	    splint that it can't handle.  Tune splint arguments to give
	    reasonable errors.  Add a filter for removing false warnings from
	    splint output.  Many small changes to avoid warnings.  More to
	    follow...
相关文件:   Filelist, src/Makefile, src/buffer.c, src/charset.c,
	    src/cleanlint.vim, src/digraph.c, src/edit.c, src/ex_cmds.c,
	    src/globals.h, src/ops.c, src/os_unix.c, src/os_unix.h,
	    src/proto/buffer.pro, src/proto/edit.pro, src/screen.c,
	    src/structs.h

Patch 7.2.168
问题:	    When no ctags program can be found, &quot;make tags&quot; attempts to
	    execute the first C file.
解决方案:   Default to &quot;ctags&quot; when no ctags program can be found.
相关文件:   src/configure.in, src/auto/configure

Patch 7.2.169
问题:	    Splint complains about a lot of things.
解决方案:   Add type casts, #ifdefs and other changes to avoid warnings.
	    Change colnr_T from unsigned to int.  Avoids mistakes with
	    subtracting columns.
相关文件:   src/cleanlint.vim, src/diff.c, src/edit.c, src/ex_cmds.c,
	    src/ex_cmds2.c, src/ex_docmd.c, src/proto/ex_cmds.pro,
	    src/proto/spell.pro, src/quickfix.c, src/spell.c, src/structs.h,
	    src/term.h, src/vim.h

Patch 7.2.170
问题:	    Using b_dev while it was not set. (Dominique Pelle)
解决方案:   Add the b_dev_valid flag.
相关文件:   src/buffer.c, src/fileio.c, src/structs.h

Patch 7.2.171 (after 7.2.169)
问题:	    Compiler warnings. (Tony Mechelynck)
解决方案:   Add function prototype. (Patrick Texier)  Init variable.
相关文件:   src/ex_cmds.c

Patch 7.2.172 (extra)
问题:	    Compiler warning.
解决方案:   Adjust function prototype. (Patrick Texier)
相关文件:   src/os_mswin.c

Patch 7.2.173
问题:	    Without lint there is no check for unused function arguments.
解决方案:   Use gcc -Wunused-parameter instead of lint.  For a few files add
	    attributes to arguments that are known not to be used.
相关文件:   src/auto/configure, src/buffer.c, src/charset.c, src/diff.c,
	    src/configure.in, src/config.h.in, src/edit.c, src/ex_cmds.c,
	    src/ex_cmds2.c, src/version.c, src/vim.h

Patch 7.2.174
问题:	    Too many warnings from gcc -Wextra.
解决方案:   Change initializer.  Add UNUSED.  Add type casts.
相关文件:   src/edit.c, src/eval.c, src/ex_cmds.c, src/ex_docmd.c,
	    src/ex_getln.c, src/fileio.c, getchar.c, globals.h, main.c,
	    memline.c, message.c, src/misc1.c, src/move.c, src/normal.c,
	    src/option.c, src/os_unix.c, src/os_unix.h, src/regexp.c,
	    src/search.c, src/tag.c

Patch 7.2.175
问题:	    Compiler warning in OpenBSD.
解决方案:   Add type cast for NULL. (Dasn)
相关文件:   src/if_cscope.c

Patch 7.2.176
问题:	    Exceptions for splint are not useful.
解决方案:   Remove the S_SPLINT_S ifdefs.
相关文件:   src/edit.c, src/ex_cmds.c, src/ex_docmd.c, src/os_unix.c,
	    src/os_unix.h, src/os_unixx.h, src/structs.h, src/term.h

Patch 7.2.177
问题:	    Compiler warnings when using -Wextra
解决方案:   Add UNUSED and type casts.
相关文件:   src/eval.c, src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
	    src/fileio.c, src/hardcopy.c, src/if_cscope.c, src/if_xcmdsrv.c,
	    src/farsi.c, src/mark.c, src/menu.c

Patch 7.2.178
问题:	    Using negative value for device number might not work.
解决方案:   Use a separate flag for whether ffv_dev was set.
相关文件:   src/misc2.c

Patch 7.2.179
问题:	    Using negative value for device number might not work.
解决方案:   Use a separate flag for whether sn_dev was set.
相关文件:   src/ex_cmds2.c

Patch 7.2.180
问题:	    Some more compiler warnings when using gcc -Wextra.
解决方案:   Add UNUSED and type casts.
相关文件:   src/buffer.c, src/ex_cmds.c, src/macros.h, src/main.c,
	    src/menu.c, src/message.c, src/misc1.c, src/mbyte.c,
	    src/normal.c, src/option.c, src/os_unix.c, src/quickfix.c,
	    src/screen.c, src/search.c, src/spell.c, src/syntax.c, src/tag.c,
	    src/term.c, src/ui.c

Patch 7.2.181
问题:	    Some more compiler warnings when using gcc -Wextra.
解决方案:   Add UNUSED and type casts.
相关文件:   src/if_mzsch.c, src/gui.c, src/gui_gtk.c, src/gui_gtk_x11.c,
	    src/gui_gtk_f.c, src/gui_beval.c, src/netbeans.c

Patch 7.2.182 (after 7.2.181)
问题:	    Compilation problems after previous patch for Motif.  Gvim with
	    GTK crashes on startup.
解决方案:   Add comma.  Init form structure to zeroes.
相关文件:   src/netbeans.c, src/gui_gtk_f.c

Patch 7.2.183
问题:	    Configure problem for sys/sysctl.h on OpenBSD. (Dasn)
解决方案:   Add separate check for this header file.  Also switch to newer
	    version of autoconf.
相关文件:   src/auto/configure, src/configure.in

Patch 7.2.184
问题:	    Some more compiler warnings when using gcc -Wextra.
解决方案:   Add UNUSED and type casts.  Autoconf check for wchar_t.
相关文件:   src/auto/configure, src/config.h.in, src/configure.in,
	    src/gui_athena.c, src/gui_x11.c, src/gui.c, src/gui_beval.c,
	    src/gui_at_sb.c, src/gui_at_fs.c, src/gui_motif.c,
	    src/gui_xmdlg.c, src/gui_xmebw.c, src/if_python.c, src/window.c,
	    src/workshop.c

Patch 7.2.185
问题:	    Some more compiler warnings when using gcc -Wextra.
解决方案:   Add UNUSED and type casts.
相关文件:   src/Makefile, src/if_tlc.c, src/if_ruby.c

Patch 7.2.186
问题:	    Some more compiler warnings when using gcc -Wextra.
解决方案:   Now with the intended if_tcl.c changes.
相关文件:   src/if_tcl.c

Patch 7.2.187 (after 7.2.186)
问题:	    Doesn't build with older versions of TCL. (Yongwei Wu)
解决方案:   Add #ifdefs. (Dominique Pelle)
相关文件:   src/if_tcl.c

Patch 7.2.188
问题:	    Crash with specific use of function calls. (Meikel Brandmeyer)
解决方案:   Make sure the items referenced by a function call are not freed
	    twice.  (based on patch from Nico Weber)
相关文件:   src/eval.c

Patch 7.2.189
问题:	    Possible hang for deleting auto-indent. (Dominique Pelle)
解决方案:   Make sure the position is not beyond the end of the line.
相关文件:   src/edit.c

Patch 7.2.190
问题:	    The register executed by @@ isn't restored.
解决方案:   Mark the executable register in the viminfo file.
相关文件:   src/ops.c

Patch 7.2.191
问题:	    Mzscheme interface doesn't work on Ubuntu.
解决方案:   Change autoconf rules.  Define missing macro.  Some changes to
	    avoid gcc warnings.  Remove per-buffer namespace. (Sergey Khorev)
相关文件:   runtime/doc/if_mzsch.txt, src/Makefile, src/Make_ming.mak,
	    src/Make_mvc.mak, src/auto/configure, src/configure.in,
	    src/config.mk.in, src/eval.c, src/if_mzsch.c, src/if_mzsch.h,
	    src/main.c, src/proto/if_mzsch.pro

Patch 7.2.192 (after 7.2.188)
问题:	    Still a crash in the garbage collector for a very rare situation.
解决方案:   Make sure current_copyID is always incremented correctly. (Kent
	    Sibilev)
相关文件:   src/eval.c

Patch 7.2.193
问题:	    Warning for uninitialized values.
解决方案:   Initialize all the struct items.
相关文件:   src/eval.c

Patch 7.2.194 (extra)
问题:	    MSVC: rem commands are echoed.
解决方案:   Add commands to switch off echo. (Wang Xu)
相关文件:   src/msvc2008.bat

Patch 7.2.195
问题:	    Leaking memory for the command Vim was started with.
解决方案:   Remember the pointer and free it.
相关文件:   src/gui_gtk_x11.c

Patch 7.2.196 (after 7.2.167)
问题:	    Turns out splint doesn't work well enough to be usable.
解决方案:   Remove splint support.
相关文件:   Filelist, src/cleanlint.vim

Patch 7.2.197
问题:	    Warning for uninitialized values.
解决方案:   Initialize all the struct items of typebuf.
相关文件:   src/globals.h

Patch 7.2.198
问题:	    Size of buffer used for tgetent() may be too small.
解决方案:   Use the largest known size everywhere.
相关文件:   src/vim.h

Patch 7.2.199
问题:	    Strange character in comment.
解决方案:   Change to &quot;message&quot;. (Yongwei Wu)
相关文件:   src/term.c

Patch 7.2.200
问题:	    Reading past end of string when navigating the menu bar or
	    resizing the window.
解决方案:   Add and use mb_ptr2len_len(). (partly by Dominique Pelle)
	    Also add mb_ptr2cells_len() to prevent more trouble.
相关文件:   src/gui_gtk_x11.c, src/os_unix.c, src/globals.h, src/mbyte.c,
	    src/proto/mbyte.pro

Patch 7.2.201
问题:	    Cannot copy/paste HTML to/from Firefox via the clipboard.
解决方案:   Implement this for GTK.  Add the &quot;html&quot; value to <span class="Type">'clipboard'</span>.
相关文件:   runtime/doc/options.txt, src/globals.h, src/gui_gtk_x11.c,
	    src/mbyte.c, src/proto/mbyte.pro, src/option.c

Patch 7.2.202
问题:	    BufWipeout autocommand that edits another buffer causes problems.
解决方案:   Check for the situation, give an error and quit the operation.
相关文件:   src/fileio.c

Patch 7.2.203
问题:	    When reloading a buffer or doing anything else with a buffer that
	    is not displayed in a visible window, autocommands may be applied
	    to the current window, folds messed up, etc.
解决方案:   Instead of using the current window for the hidden buffer use a
	    special window, splitting the current one temporarily.
相关文件:   src/fileio.c, src/globals.h, src/gui.c, src/if_perl.xs,
	    src/progo/gui.pro, src/proto/window.pro, src/screen.c,
	    src/structs.h, src/window.c

Patch 7.2.204 (extra)
问题:	    Win32: Can't build with Visual Studio 2010 beta 1.
解决方案:   Fix the makefile. (George Reilly)
相关文件:   src/Make_mvc.mak

Patch 7.2.205 (extra)
问题:	    Win32: No support for High DPI awareness.
解决方案:   Fix the manifest file. (George Reilly)
相关文件:   src/Make_mvc.mak, src/gvim.exe.mnf

Patch 7.2.206
问题:	    Win32: Can't build netbeans interface with Visual Studio 2010.
解决方案:   Undefine ECONNREFUSED. (George Reilly)
相关文件:   src/netbeans.c

Patch 7.2.207
问题:	    Using freed memory with &quot;:redrawstatus&quot; when it works recursively.
解决方案:   Prevent recursively updating the status line. (partly by Dominique
	    Pelle)
相关文件:   src/screen.c

Patch 7.2.208
问题:	    &quot;set novice&quot; gives an error message, it should be ignored.
解决方案:   Don't see &quot;no&quot; in &quot;novice&quot; as unsetting an option.  (Patrick
	    Texier)
相关文件:   src/option.c

Patch 7.2.209
问题:	    For xxd setmode() is undefined on Cygwin.
解决方案:   Include io.h. (Dominique Pelle)
相关文件:   src/xxd/xxd.c

Patch 7.2.210
问题:	    When a file that is being edited has its timestamp updated outside
	    of Vim and &quot;:checktime&quot; is used still get a warning when writing
	    the file. (Matt Mueller)
解决方案:   Store the timestamp in b_mtime_read when the timestamp is the only
	    thing that changed.
相关文件:   src/fileio.c

Patch 7.2.211
问题:	    Memory leak when expanding a series of file names.
解决方案:   Use ga_clear_strings() instead of ga_clear().
相关文件:   src/misc1.c

Patch 7.2.212 (extra)
问题:	    Warnings for redefining SIG macros.
解决方案:   Don't define them if already defined. (Bjorn Winckler)
相关文件:   src/os_mac.h

Patch 7.2.213
问题:	    Warning for using vsprintf().
解决方案:   Use vim_vsnprintf().
相关文件:   src/netbeans.c

Patch 7.2.214
问题:	    Crash with complete function for user command. (Andy Wokula)
解决方案:   Avoid using a NULL pointer (Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.2.215
问题:	    ml_get error when using &quot;:vimgrep&quot;.
解决方案:   Load the memfile for the hidden buffer before putting it in a
	    window.  Correct the order of splitting the window and filling
	    the window and buffer with data.
相关文件:   src/fileio.c, src/proto/window.pro, src/quickfix.c, src/window.c

Patch 7.2.216
问题:	    Two error messages have the same number E812.
解决方案:   Give one message a different number.
相关文件:   runtime/doc/autocmd.txt, runtime/doc/if_mzsch.txt, src/if_mzsch.c

Patch 7.2.217
问题:	    Running tests with valgrind doesn't work as advertised.
解决方案:   Fix the line in the Makefile.
相关文件:   src/testdir/Makefile

Patch 7.2.218
问题:	    Cannot build GTK with hangul_input feature. (Dominique Pelle)
解决方案:   Adjust #ifdef.  (SungHyun Nam)
相关文件:   src/gui.c

Patch 7.2.219 (extra)
问题:	    Photon GUI is outdated.
解决方案:   Updates for QNX 6.4.0. (Sean Boudreau)
相关文件:   src/gui_photon.c

Patch 7.2.220 (after 7.2.215)
问题:	    a BufEnter autocommand that changes directory causes problems.
	    (Ajit Thakkar)
解决方案:   Disable autocommands when opening a hidden buffer in a window.
相关文件:   src/fileio.c

Patch 7.2.221
问题:	    X cut_buffer0 text is used as-is, it may be in the wrong encoding.
解决方案:   Convert between <span class="Type">'enc'</span> and latin1. (James Vega)
相关文件:   src/gui_gtk_x11.c, src/message.c, src/ops.c, src/proto/ui.pro,
	    src/ui.c

Patch 7.2.222
问题:	   &quot;:mksession&quot; doesn't work properly with <span class="Type">'acd'</span> set.
解决方案:   Make it work. (Yakov Lerner)
相关文件:   src/ex_docmd.c

Patch 7.2.223
问题:	    When a script is run with &quot;:silent&quot; it is not able to give warning
	    messages.
解决方案:   Add the &quot;:unsilent&quot; command.
相关文件:   runtime/doc/various.txt, src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.224
问题:	    Crash when using <span class="Type">'completefunc'</span>. (Ingo Karkat)
解决方案:   Disallow entering edit() recursively when doing completion.
相关文件:   src/edit.c

Patch 7.2.225
问题:	    When using &quot;:normal&quot; a saved character may be executed.
解决方案:   Also store old_char when saving typeahead.
相关文件:   src/getchar.c, src/structs.h

Patch 7.2.226
问题:	    ml_get error after deleting the last line. (Xavier de Gaye)
解决方案:   When adjusting marks a callback may be invoked.  Adjust the cursor
	    position before invoking deleted_lines_mark().
相关文件:   src/ex_cmds.c, src/ex_docmd.c, src/if_mzsch.c, src/if_python.c,
	    src/if_perl.xs, src/misc1.c

Patch 7.2.227
问题:	    When using &quot;:cd&quot; in a script there is no way to track this.
解决方案:   Display the directory when <span class="Type">'verbose'</span> is 5 or higher.
相关文件:   src/ex_docmd.c

Patch 7.2.228
问题:	    Cscope is limited to 8 connections.
解决方案:   Allocated the connection array to handle any number of
	    connections. (Dominique Pelle)
相关文件:   runtime/doc/if_cscop.txt, src/if_cscope.h, src/if_cscope.c

Patch 7.2.229
问题:	    Warning for shadowed variable.
解决方案:   Rename &quot;wait&quot; to &quot;wait_time&quot;.
相关文件:   src/os_unix.c

Patch 7.2.230
问题:	    A few old lint-style ARGUSED comments.
解决方案:   Change to the new UNUSED style.
相关文件:   src/getchar.c

Patch 7.2.231
问题:	    Warning for unreachable code.
解决方案:   Add #ifdef.
相关文件:   src/if_perl.xs

Patch 7.2.232
问题:	    Cannot debug problems with being in a wrong directory.
解决方案:   When <span class="Type">'verbose'</span> is 5 or higher report directory changes.
相关文件:   src/os_unix.c, src/os_unix.h, src/proto/os_unix.pro

Patch 7.2.233 (extra part of 7.2.232)
问题:	    Cannot debug problems with being in a wrong directory.
解决方案:   When <span class="Type">'verbose'</span> is 5 or higher report directory changes.
相关文件:   src/os_msdos.c, src/os_mswin.c, src/os_riscos.c, src/os_mac.h

Patch 7.2.234
问题:	    It is not possible to ignore file names without a suffix.
解决方案:   Use an empty entry in <span class="Type">'suffixes'</span> for file names without a dot.
相关文件:   runtime/doc/cmdline.txt, src/misc1.c

Patch 7.2.235
问题:	    Using <span class="Special">CTRL-O</span> z= in Insert mode has a delay before redrawing.
解决方案:   Reset msg_didout and msg_scroll.
相关文件:   src/misc1.c, src/spell.c

Patch 7.2.236
问题:	    Mac: Compiling with Ruby doesn't always work.
解决方案:   In configure filter out the --arch argument (Bjorn Winckler)
相关文件:   src/configure.in, src/auto/configure

Patch 7.2.237
问题:	    Crash on exit when window icon not set.
解决方案:   Copy terminal name when using it for the icon name.
相关文件:   src/os_unix.c

Patch 7.2.238
问题:	    Leaking memory when setting term to &quot;builtin_dumb&quot;.
解决方案:   Free memory when resetting term option t_Co.
相关文件:   src/option.c, src/proto/option.pro, src/term.c

Patch 7.2.239
问题:	    Using :diffpatch twice or when patching fails causes memory
	    corruption and/or a crash.  (Bryan Venteicher)
解决方案:   Detect missing output file.  Avoid using non-existing buffer.
相关文件:   src/diff.c

Patch 7.2.240
问题:	    Crash when using find/replace dialog repeatedly. (Michiel
	    Hartsuiker)
解决方案:   Avoid doing the operation while busy or recursively.  Also refuse
	    replace when text is locked.
相关文件:   src/gui.c

Patch 7.2.241
问题:	    When using a combination of &quot;:bufdo&quot; and &quot;doautoall&quot; we may end up
	    in the wrong directory. (Ajit Thakkar)
	    Crash when triggering an autocommand in &quot;:vimgrep&quot;.  (Yukihiro
	    Nakadaira)
解决方案:   Clear w_localdir and globaldir when using the aucmd_win.
	    Use a separate flag to decide aucmd_win needs to be restored.
相关文件:   src/fileio.c, src/globals.h, src/structs.h

Patch 7.2.242
问题:	    Setting <span class="Type">'lazyredraw'</span> causes the cursor column to be recomputed.
	    (Tom Link)
解决方案:   Only recompute the cursor column for a boolean option if changes
	    the cursor position.
相关文件:   src/option.c

Patch 7.2.243
问题:	    Memory leak when using :vimgrep and resizing. (Dominique Pelle)
解决方案:   Free memory for aucmd_win when resizing and don't allocate it
	    twice.
相关文件:   src/screen.c

Patch 7.2.244
问题:	    When <span class="Type">'enc'</span> is utf-8 and <span class="Type">'fenc'</span> is latin1, writing a non-latin1
	    character gives a conversion error without any hint what is wrong.
解决方案:   When known add the line number to the error message.
相关文件:   src/fileio.c

Patch 7.2.245
问题:	    When <span class="Type">'enc'</span> is &quot;utf-16&quot; and <span class="Type">'fenc'</span> is &quot;utf-8&quot; writing a file does
	    conversion while none should be done. (Yukihiro Nakadaira) When
	    <span class="Type">'fenc'</span> is empty the file is written as utf-8 instead of utf-16.
解决方案:   Do proper comparison of encodings, taking into account that all
	    Unicode values for <span class="Type">'enc'</span> use utf-8 internally.
相关文件:   src/fileio.c

Patch 7.2.246
问题:	    Cscope home page link is wrong.
解决方案:   Update the URL. (Sergey Khorev)
相关文件:   runtime/doc/if_cscop.txt

Patch 7.2.247
问题:	    Mzscheme interface minor problem.
解决方案:   Better error message when build fails. (Sergey Khorev)
相关文件:   src/if_mzsch.c

Patch 7.2.248 (extra)
问题:	    Mzscheme interface building minor problems.
解决方案:   Update Win32 makefiles. (Sergey Khorev)
相关文件:   src/Make_cyg.mak, src/Make_ming.mak, src/Make_mvc.mak

Patch 7.2.249
问题:	    The script to check .po files can't handle '%' in plural forms.
解决方案:   Remove &quot;Plural-Forms:&quot; from the checked string.
相关文件:   src/po/check.vim

Patch 7.2.250 (extra)
问题:	    Possible buffer overflow.
解决方案:   Compute the remaining space. (Dominique Pelle)
相关文件:   src/GvimExt/gvimext.cpp

Patch 7.2.251 (after 7.2.044)
问题:	    Compiler adds invalid memory bounds check.
解决方案:   Remove _FORTIFY_SOURCE=2 from CFLAGS. (Dominique Pelle)
相关文件:   src/auto/configure, src/configure.in

Patch 7.2.252
问题:	    When using a multi-byte <span class="Type">'enc'</span> the <span class="Type">'iskeyword'</span> option cannot
	    contain characters above 128.
解决方案:   Use mb_ptr2char_adv().
相关文件:   src/charset.c

Patch 7.2.253
问题:	    Netbeans interface: getLength always uses current buffer.
解决方案:   Use ml_get_buf() instead of ml_get(). (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.2.254
问题:	    Compiler warning for assigning size_t to int.
解决方案:   Use size_t for the variable. (George Reilly)
相关文件:   src/fileio.c

Patch 7.2.255 (after 7.2.242)
问题:	    Setting <span class="Type">'rightleft'</span>, <span class="Type">'linebreak'</span> and <span class="Type">'wrap'</span> may cause cursor to be
	    in wrong place.
解决方案:   Recompute the cursor column for these options.
相关文件:   src/option.c

Patch 7.2.256
问题:	    When <span class="Type">'guifont'</span> was not set GTK font dialog doesn't have a default.
	    (Andreas Metzler)
解决方案:   Set default to DEFAULT_FONT. (James Vega)
相关文件:   src/gui_gtk_x11.c

Patch 7.2.257
问题:	    With GTK 2.17 lots of assertion error messages.
解决方案:   Remove check for static gravity. (Sebastian Droege)
相关文件:   src/gui_gtk_f.c

Patch 7.2.258
问题:	    v:beval_col and b:beval_text are wrong in UTF-8 text. (Tony
	    Mechelynck)
解决方案:   Use byte number instead of character number for the column.
相关文件:   src/ui.c

Patch 7.2.259
问题:	    exists() doesn't work properly for an empty aucmd group.
解决方案:   Change how au_exists() handles a missing pattern.  Also add a
	    test for this. (Bob Hiestand)
相关文件:   src/fileio.c, src/testdir/Makefile, src/testdir/test67.in,
	    src/testdir/test67.ok

Patch 7.2.260 (extra part of 7.2.259)
问题:	    exists() doesn't work properly for empty aucmd group.
解决方案:   Change how au_exists() handles a missing pattern.  Also add a
	    test for this. (Bob Hiestand)
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms

Patch 7.2.261
问题:	    When deleting lines with a specific folding configuration E38 may
	    appear. (Shahaf)
解决方案:   When adjusting nested folds for deleted lines take into account
	    that they don't start at the top of the enclosing fold.
相关文件:   src/fold.c

Patch 7.2.262
问题:	    When using custom completion for a user command the pattern string
	    goes beyond the cursor position. (Hari Krishna Dara)
解决方案:   Truncate the string at the cursor position.
相关文件:   src/ex_getln.c, src/structs.h

Patch 7.2.263
问题:	    GTK2: when using the -geom argument with an offset from the right
	    edge and the size is smaller than the default, the Vim window is
	    not positioned properly.
解决方案:   Use another function to set the size. (Vitaly Minko)
相关文件:   src/gui_gtk_x11.c

Patch 7.2.264
问题:	    GTK2: When the Vim window is maximized setting <span class="Type">'columns'</span> or
	    <span class="Type">'lines'</span> doesn't work.
解决方案:   Unmaximize the window before setting the size. (Vitaly Minko)
相关文件:   src/gui.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro

Patch 7.2.265
问题:	    When using &quot;:silent broken&quot; inside try/catch silency may persist.
	    (dr-dr xp)
解决方案:   Set msg_silent when there is an error and it's bigger than the
	    saved value.
相关文件:   src/ex_docmd.c

Patch 7.2.266
问题:	    When an expression abbreviation is triggered, the typed character
	    is unknown.
解决方案:   Make the typed character available in v:char.
相关文件:   runtime/doc/map.txt, src/eval.c, src/getchar.c, src/ops.c,
	    src/proto/eval.pro

Patch 7.2.267
问题:	    Crash for narrow window and double-width character.
解决方案:   Check for zero width.  (Taro Muraoka)
相关文件:   src/charset.c

Patch 7.2.268
问题:	    Crash when using Python to set cursor beyond end of line.
	    (winterTTr)
解决方案:   Check the column to be valid.
相关文件:   src/if_python.c

Patch 7.2.269
问题:	    Many people struggle to find out why Vim startup is slow.
解决方案:   Add the --startuptime command line flag.
相关文件:   runtime/doc/starting.txt, src/globals.h, src/feature.h,
	    src/main.c, src/macros.h

Patch 7.2.270
问题:	    Using &quot;:@c&quot; when the c register contains a CR causes the rest to
	    be executed later. (Dexter Douglas)
解决方案:   Don't check for typeahead to start with ':', keep executing
	    commands until all added typeahead has been used.
相关文件:   src/ex_docmd.c

Patch 7.2.271
问题:	    Using freed memory in Motif GUI version when making a choice.
解决方案:   Free memory only after using it. (Dominique Pelle)
相关文件:   src/gui_xmdlg.c

Patch 7.2.272
问题:	    &quot;_.svz&quot; is not recognized as a swap file. (David M. Besonen)
解决方案:   Accept .s[uvw][a-z] as a swap file name extension.
相关文件:   src/memline.c

Patch 7.2.273
问题:	    Crash with redir to unknown array. (Christian Brabandt)
解决方案:   Don't assign the redir result when there was an error.
相关文件:   src/eval.c

Patch 7.2.274
问题:	    Syntax folding doesn't work properly when adding a comment.
解决方案:   Fix it and add a test. (Lech Lorens)
相关文件:   src/fold.c, src/testdir/test45.in, src/testdir/test45.ok

Patch 7.2.275
问题:	    Warning for unused argument and comparing signed and unsigned.
解决方案:   Add type cast.
相关文件:   src/memline.c

Patch 7.2.276
问题:	    Crash when setting <span class="Type">'isprint'</span> to a small bullet. (Raul Coronado)
解决方案:   Check for the character to be &lt; 256.  Also make it possible to
	    specify a range of multi-byte characters. (Lech Lorens)
相关文件:   src/charset.c

Patch 7.2.277
问题:	    <span class="Special">CTRL-Y</span> in a diff'ed window may move the cursor outside of the
	    window. (Lech Lorens)
解决方案:   Limit the number of filler lines to the height of the window.
	    Don't reset filler lines to zero for an empty buffer.
相关文件:   src/move.c

Patch 7.2.278
问题:	    Using magic number in the folding code.
解决方案:   Use the defined MAX_LEVEL.
相关文件:   src/fold.c

Patch 7.2.279
问题:	    Invalid memory read with visual mode &quot;r&quot;. (Dominique Pelle)
解决方案:   Make sure the cursor position is valid.  Don't check the cursor
	    position but the position being used.  And make sure we get the
	    right line.
相关文件:   src/misc2.c, src/ops.c

Patch 7.2.280
问题:	    A redraw in a custom statusline with %! may cause a crash.
	    (Yukihiro Nakadaira)
解决方案:   Make a copy of <span class="Type">'statusline'</span>.  Also fix typo in function name
	    redraw_custom_statusline. (partly by Dominique Pelle)
相关文件:   src/screen.c

Patch 7.2.281
问题:	    <span class="Type">'cursorcolumn'</span> highlighting is wrong in diff mode.
解决方案:   Adjust the column computation. (Lech Lorens)
相关文件:   src/screen.c

Patch 7.2.282
问题:	    A fold can't be closed.
解决方案:   Initialize fd_small to MAYBE. (Lech Lorens)
相关文件:   src/fold.c

Patch 7.2.283
问题:	    Changing font while the window is maximized doesn't keep the
	    window maximized.
解决方案:   Recompute number of lines and columns after changing font. (James
	    Vega)
相关文件:   src/gui_gtk_x11.c

Patch 7.2.284
问题:	    When editing the same buffer in two windows, one with folding,
	    display may be wrong after changes.
解决方案:   Call set_topline() to take care of side effects. (Lech Lorens)
相关文件:   src/misc1.c

Patch 7.2.285 (after 7.2.169)
问题:	    <span class="Special">CTRL-U</span> in Insert mode also deletes indent. (Andrey Voropaev)
解决方案:   Fix mistake made in patch 7.2.169.
相关文件:   src/edit.c

Patch 7.2.286 (after 7.2.269)
问题:	    The &quot;--startuptime=<span class="Special">&lt;file&gt;</span>&quot; argument is not consistent with other
	    arguments.
解决方案:   Use &quot;--startuptime <span class="Special">&lt;file&gt;</span>&quot;.  Added the +startuptime feature.
相关文件:   runtime/doc/eval.txt, runtime/doc/starting.txt,
	    runtime/doc/various.txt, src/eval.c, src/main.c, src/version.c

Patch 7.2.287
问题:	    Warning from gcc 3.4 about uninitialized variable.
解决方案:   Move assignment outside of #ifdef.
相关文件:   src/if_perl.xs

Patch 7.2.288
问题:	    Python 2.6 pyconfig.h redefines macros.
解决方案:   Undefine the macros before including pyconfig.h.
相关文件:   src/if_python.c

Patch 7.2.289
问题:	    Checking wrong struct member.
解决方案:   Change tb_buf to tb_noremap. (Dominique Pelle)
相关文件:   src/getchar.c

Patch 7.2.290
问题:	    Not freeing memory from &quot;:lmap&quot;, &quot;:xmap&quot; and &quot;:menutranslate&quot;.
解决方案:   Free the memory when exiting. (Dominique Pelle)
相关文件:   src/misc2.c

Patch 7.2.291
问题:	    Reading uninitialised memory in arabic mode.
解决方案:   Use utfc_ptr2char_len() rather than utfc_ptr2char().  (Dominique
	    Pelle)
相关文件:   src/screen.c

Patch 7.2.292
问题:	    Block right-shift doesn't work properly with multi-byte encoding
	    and <span class="Type">'list'</span> set.
解决方案:   Add the missing &quot;else&quot;. (Lech Lorens)
相关文件:   src/ops.c

Patch 7.2.293
问题:	    When setting <span class="Type">'comments'</span> option it may be used in a wrong way.
解决方案:   Don't increment after skipping over digits. (Yukihiro Nakadaira)
相关文件:   src/misc1.c

Patch 7.2.294
问题:	    When using TEMPDIRS dir name could get too long.
解决方案:   Overwrite tail instead of appending each time.  Use mkdtemp() when
	    available. (James Vega)
相关文件:   src/auto/configure, src/config.h.in, src/configure.in, src/fileio.c

Patch 7.2.295
问题:	    When using map() on a List the index is not known.
解决方案:   Set v:key to the  index. (Hari Krishna Dara)
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.2.296
问题:	    Help message about startuptime is wrong. (Dominique Pelle)
解决方案:   Remove the equal sign.
相关文件:   src/main.c

Patch 7.2.297
问题:	    Reading freed memory when writing &quot;:reg&quot; output to a register.
	    (Dominique Pelle)
解决方案:   Skip the register being written to.
相关文件:   src/ops.c

Patch 7.2.298
问题:	    &quot;:vimgrep&quot; crashes when there is an autocommand that sets a
	    window-local variable.
解决方案:   Initialize the w: hashtab for re-use. (Yukihiro Nakadaira)
相关文件:   src/fileio.c

Patch 7.2.299
问题:	    Crash when comment middle is longer than start.
解决方案:   Fix size computation. (Lech Lorens)
相关文件:   src/misc1.c

Patch 7.2.300
问题:	    Vim doesn't close file descriptors when forking and executing
	    another command, e.g., &quot;:shell&quot;.
解决方案:   Use FD_CLOEXEC when available. (James Vega)
相关文件:   auto/configure, src/config.h.in, src/configure.in,
	    src/ex_cmdds2.c, src/fileio.c, src/memfile.c, src/memline.c

Patch 7.2.301
问题:	    Formatting is wrong when <span class="Type">'tw'</span> is set to a small value.
解决方案:   Fix it and add tests.  Also fix behavior of &quot;1&quot; in <span class="Type">'fo'</span>. (Yukihiro
	    Nakadaira)
相关文件:   src/edit.c, src/testdir/Makefile, src/testdir/test68.in,
	    src/testdir/test68.ok, src/testdir/test69.in,
	    src/testdir/test69,ok

Patch 7.2.302 (extra part of 7.2.301)
问题:	    Formatting wrong with small <span class="Type">'tw'</span> value.
解决方案:   Add build rules for tests.
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms

Patch 7.2.303 (after 7.2.294)
问题:	    Can't build on MS-Windows.
解决方案:   Add #ifdef around vim_settempdir(). (James Vega)
相关文件:   src/fileio.c

Patch 7.2.304
问题:	    Compiler warning for bad pointer cast.
解决方案:   Use another variable for int pointer.
相关文件:   src/ops.c

Patch 7.2.305
问题:	    Recursively redrawing causes a memory leak. (Dominique Pelle)
解决方案:   Disallow recursive screen updating.
相关文件:   src/screen.c

Patch 7.2.306
问题:	    shellescape(&quot;10%%&quot;, 1) only escapes first %. (Christian Brabandt)
解决方案:   Don't copy the character after the escaped one.
相关文件:   src/misc2.c

Patch 7.2.307
问题:	    Crash with a very long syntax match statement. (Guy Gur Ari)
解决方案:   When the offset does not fit in the two bytes available give an
	    error instead of continuing with invalid pointers.
相关文件:   src/regexp.c

Patch 7.2.308
问题:	    When using a regexp in the &quot;\=&quot; expression of a substitute
	    command, submatch() returns empty strings for further lines.
	    (Clockwork Jam)
解决方案:   Save and restore the line number and line count when calling
	    reg_getline().
相关文件:   src/regexp.c

Patch 7.2.309 (after 7.2.308)
问题:	    Warning for missing function prototype. (Patrick Texier)
解决方案:   Add the prototype.
相关文件:   src/regexp.c

Patch 7.2.310
问题:	    When a filetype plugin in ~/.vim/ftdetect uses &quot;:setfiletype&quot; and
	    the file starts with a &quot;# comment&quot; it gets &quot;conf&quot; filetype.
解决方案:   Check for &quot;conf&quot; filetype after using ftdetect plugins.
相关文件:   runtime/filetype.vim

Patch 7.2.311
问题:	    Can't compile with FreeMiNT.
解决方案:   Change #ifdef for limits.h. (Alan Hourihane)
相关文件:   src/fileio.c

Patch 7.2.312
问题:	    iconv() returns an invalid character sequence when conversion
	    fails.  It should return an empty string. (Yongwei Wu)
解决方案:   Be more strict about invalid characters in the input.
相关文件:   src/mbyte.c

Patch 7.2.313
问题:	    Command line completion doesn't work after &quot;%:h&quot; and similar.
解决方案:   Expand these items before doing the completion.
相关文件:   src/ex_getln.c, src/misc1.c, src/proto/misc1.pro

Patch 7.2.314
问题:	    Missing function in small build.
解决方案:   Always include concat_str.
相关文件:   src/misc1.c

Patch 7.2.315
问题:	    Python libs can't be found on 64 bit system.
解决方案:   Add lib64 to the list of directories. (Michael Henry)
相关文件:   src/auto/configure, src/configure.in

Patch 7.2.316
问题:	    May get multiple _FORTIFY_SOURCE arguments. (Tony Mechelynck)
解决方案:   First remove all these arguments and then add the one we want.
	    (Dominique Pelle)
相关文件:   src/auto/configure, src/configure.in

Patch 7.2.317
问题:	    Memory leak when adding a highlight group with unprintable
	    characters, resulting in E669.
解决方案:   Free the memory.  And fix a few typos. (Dominique Pelle)
相关文件:   src/syntax.c

Patch 7.2.318
问题:	    Wrong locale value breaks floating point numbers for gvim.
解决方案:   Set the locale again after doing GUI inits. (Dominique Pelle)
相关文件:   src/main.c

Patch 7.2.319
问题:	    Motif: accessing freed memory when cancelling font dialog.
解决方案:   Destroy the widget only after accessing it. (Dominique Pelle)
相关文件:   src/gui_xmdlg.c

Patch 7.2.320
问题:	    Unused function in Mzscheme interface.
解决方案:   Remove the function and what depends on it. (Dominique Pelle)
相关文件:   src/if_mzsch.c, src/proto/if_mzsch.pro

Patch 7.2.321
问题:	    histadd() and searching with &quot;*&quot; fails to add entry to history
	    when it is empty.
解决方案:   Initialize the history. (Lech Lorens)
相关文件:   src/eval.c, src/normal.c

Patch 7.2.322
问题:	    Wrong indenting in virtual replace mode with <span class="Special">CTRL-Y</span> below a short
	    line.
解决方案:   Check for character to be NUL. (suggested by Lech Lorens)
相关文件:   src/edit.c

Patch 7.2.323 (extra)
问题:	    Balloon evaluation crashes on Win64.
解决方案:   Change pointer types. (Sergey Khorev)
相关文件:   src/gui_w32.c

Patch 7.2.324
问题:	    A negative column argument in setpos() may cause a crash.
解决方案:   Check for invalid column number. (James Vega)
相关文件:   src/eval.c, src/misc2.c

Patch 7.2.325
问题:	    A stray &quot;w&quot; in the startup vimrc file causes the edited file to be
	    replaced with an empty file. (Stone Kang).
解决方案:   Do not write a buffer when it has never been loaded.
相关文件:   src/fileio.c

Patch 7.2.326
问题:	    Win32: $HOME doesn't work when %HOMEPATH% is not defined.
解决方案:   Use &quot;\&quot; for %HOMEPATH% when it is not defined.
相关文件:   src/misc1.c

Patch 7.2.327
问题:	    Unused functions in Workshop.
解决方案:   Add &quot;#if 0&quot; and minor cleanup. (Dominique Pelle)
相关文件:   src/workshop.c, src/integration.c, src/integration.h

Patch 7.2.328
问题:	    has(&quot;win64&quot;) does not return 1 on 64 bit MS-Windows version.
解决方案:   Also check for _WIN64 besides WIN64.
相关文件:   src/eval.c

Patch 7.2.329
问题:	    &quot;g_&quot; doesn't position cursor correctly when in Visual mode and
	    <span class="Type">'selection'</span> is &quot;exclusive&quot;. (Ben Fritz)
解决方案:   Call adjust_for_sel().
相关文件:   src/normal.c

Patch 7.2.330
问题:	    Tables for Unicode case operators are outdated.
解决方案:   Add a Vim script for generating the tables.  Include tables for
	    Unicode 5.2.
相关文件:   runtime/tools/README.txt, runtime/tools/unicode.vim, src/mbyte.c

Patch 7.2.331
问题:	    Can't interrupt &quot;echo list&quot; for a very long list.
解决方案:   Call line_breakcheck() in list_join().
相关文件:   src/eval.c

Patch 7.2.332
问题:	    Crash when spell correcting triggers an autocommand that reloads
	    the buffer.
解决方案:   Make a copy of the line to be modified. (Dominique Pelle)
相关文件:   src/spell.c

Patch 7.2.333
问题:	    Warnings from static code analysis.
解决方案:   Small changes to various lines. (Dominique Pelle)
相关文件:   src/buffer.c, src/edit.c, src/ex_getln.c, src/fileio.c,
	    src/if_cscope.c, src/netbeans.c, src/ops.c, src/quickfix.c,
	    src/syntax.c, src/ui.c

Patch 7.2.334
问题:	    Postponing keys in Netbeans interface does not work properly.
解决方案:   Store the key string instead of the number.  Avoid an infinite
	    loop. (Mostly by Xavier de Gaye)
相关文件:   src/netbeans.c, src/proto/netbeans.pro

Patch 7.2.335
问题:	    The <span class="Special">CTRL-]</span> command escapes too many characters.
解决方案:   Use a different list of characters to be escaped. (Sergey Khorev)
相关文件:   src/normal.c

Patch 7.2.336
问题:	    MzScheme interface can't evaluate an expression.
解决方案:   Add mzeval(). (Sergey Khorev)
相关文件:   runtime/doc/eval.txt, runtime/doc/if_mzsch.txt,
	    runtime/doc/usr_41.txt, src/eval.c, src/if_mzsch.c,
	    src/proto/eval.pro, src/proto/if_mzsch.pro,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Makefile, src/testdir/main.aap, src/testdir/test1.in,
	    src/testdir/test70.in, src/testdir/test70.ok

Patch 7.2.337
问题:	    The :compiler command doesn't function properly when invoked in a
	    function.
解决方案:   Add &quot;g:&quot; before &quot;current_compiler&quot;. (Yukihiro Nakadaira)
相关文件:   src/ex_cmds2.c

Patch 7.2.338 (after 7.2.300)
问题:	    Part of FD_CLOEXEC change is missing.
解决方案:   Include source file skipped because of typo.
相关文件:   src/ex_cmds2.c

Patch 7.2.339 (after 7.2.269)
问题:	    Part of --startuptime patch is missing.
解决方案:   Add check for time_fd.
相关文件:   src/ex_cmds2.c

Patch 7.2.340
问题:	    Gcc warning for condition that can never be true. (James Vega)
解决方案:   Use start_lvl instead flp-&gt;lvl.
相关文件:   src/fold.c

Patch 7.2.341
问题:	    Popup menu wraps to next line when double-wide character doesn't
	    fit. (Jiang Ma)
解决方案:   Display a &quot;&gt;&quot; instead. (Dominique Pelle)
相关文件:   src/screen.c

Patch 7.2.342
问题:	    Popup menu displayed wrong in <span class="Type">'rightleft'</span> mode when there are
	    multi-byte characters.
解决方案:   Adjust the column computations. (Dominique Pelle)
相关文件:   src/popupmnu.c

Patch 7.2.343 (after 7.2.338)
问题:	    Can't compile on Win32.
解决方案:   Insert the missing '|'.
相关文件:   src/ex_cmds2.c

Patch 7.2.344 (after 7.2.343)
问题:	    Can't compile on some systems
解决方案:   Move the #ifdef outside of the mch_open macro. (Patrick Texier)
相关文件:   src/ex_cmds2.c

Patch 7.2.345
问题:	    Tab line is not updated when the value of <span class="Type">'bt'</span> is changed.
解决方案:   Call redraw_titles(). (Lech Lorens)
相关文件:   src/option.c

Patch 7.2.346
问题:	    Repeating a command with @: causes a mapping to be applied twice.
解决方案:   Do not remap characters inserted in the typeahead buffer. (Kana
	    Natsuno)
相关文件:   src/ops.c

Patch 7.2.347
问题:	    Crash when executing <span class="Special">&lt;expr&gt;</span> mapping redefines that same mapping.
解决方案:   Save the values used before evaluating the expression.
相关文件:   src/getchar.c

Patch 7.2.348 (after 7.2.330)
问题:	    Unicode double-width characters are not up-to date.
解决方案:   Produce the double-width table like the others.
相关文件:   runtime/tools/unicode.vim, src/mbyte.c

Patch 7.2.349
问题:	    <span class="Special">CTRL-W</span> gf doesn't put the new tab in the same place as &quot;tab split&quot;
	    and &quot;gf&quot;. (Tony Mechelynck)
解决方案:   Store the tab number in cmdmod.tab.
相关文件:   src/window.c

Patch 7.2.350
问题:	    Win32: When changing font the window may jump from the secondary
	    to the primary screen. (Michael Wookey)
解决方案:   When the screen position was negative don't correct it to zero.
相关文件:   src/gui.c

Patch 7.2.351 (after 7.2.347)
问题:	    Can't build with some compilers.
解决方案:   Move the #ifdef outside of a macro.  Cleanup the code.
相关文件:   src/getchar.c

Patch 7.2.352 (extra)
问题:	    Win64: Vim doesn't work when cross-compiled with MingW libraries.
解决方案:   Always return TRUE for the WM_NCCREATE message. (Andy Kittner)
相关文件:   src/gui_w48.c

Patch 7.2.353
问题:	    No command line completion for &quot;:profile&quot;.
解决方案:   Complete the subcommand and file name.
相关文件:   src/ex_docmd.c, src/ex_cmds2.c, src/ex_getln.c,
	    src/proto/ex_cmds2.pro, src/vim.h

Patch 7.2.354
问题:	    Japanese single-width double-byte characters not handled correctly.
解决方案:   Put 0x8e in ScreenLines[] and the second byte in ScreenLines2[].
	    (partly by Kikuchan)
相关文件:   src/screen.c

Patch 7.2.355
问题:	    Computing the cursor column in validate_cursor_col() is wrong when
	    line numbers are used and 'n' is not in <span class="Type">'cpoptions'</span>, causing the
	    popup menu to be positioned wrong.
解决方案:   Correctly use the offset. (partly by Dominique Pelle)
相关文件:   src/move.c

Patch 7.2.356
问题:	    When <span class="Type">'foldmethod'</span> is changed not all folds are closed as expected.
解决方案:   In foldUpdate() correct the start position and reset fd_flags when
	    w_foldinvalid is set. (Lech Lorens)
相关文件:   src/fold.c

Patch 7.2.357
问题:	    When changing <span class="Type">'fileformat'</span> from/to &quot;mac&quot; and there is a CR in the
	    text the display is wrong.
解决方案:   Redraw the text when <span class="Type">'fileformat'</span> is changed. (Ben Schmidt)
相关文件:   src/option.c

Patch 7.2.358
问题:	    Compiler warnings on VMS. (Zoltan Arpadffy)
解决方案:   Pass array itself instead its address.  Return a value.
相关文件:   src/gui_gtk_x11.c, src/os_unix.c

Patch 7.2.359
问题:	    Crash when using the Netbeans join command.
解决方案:   Make sure the ml_flush_line() function is not used recursively.
	    (Xavier de Gaye)
相关文件:   src/memline.c

Patch 7.2.360
问题:	    Ruby on MS-Windows: can't use sockets.
解决方案:   Call NtInitialize() during initialization. (Ariya Mizutani)
相关文件:   src/if_ruby.c

Patch 7.2.361
问题:	    Ruby 1.9 is not supported.
解决方案:   Add Ruby 1.9 support. (Masaki Suketa)
相关文件:   src/Makefile, src/auto/configure, src/configure.in, src/if_ruby.c

Patch 7.2.362 (extra, after 7.2.352)
问题:	    Win64: Vim doesn't work when cross-compiled with MingW libraries.
解决方案:   Instead of handling WM_NCCREATE, create wide text area window
	    class if the parent window iw side. (Sergey Khorev)
相关文件:   src/gui_w32.c, src/gui_w48.c

Patch 7.2.363
问题:	    Can't dynamically load Perl 5.10.
解决方案:   Add the function Perl_croak_xs_usage. (Sergey Khorev)
相关文件:   src/if_perl.xs

Patch 7.2.364 (extra)
问题:	    Can't build gvimext.dll on Win 7 x64 using MinGW (John Marriott)
解决方案:   Check if _MSC_VER is defined. (Andy Kittner)
相关文件:   src/GvimExt/gvimext.h

Patch 7.2.365 (extra)
问题:	    MS-Windows with MingW: &quot;File-&gt;Save As&quot; does not work. (John
	    Marriott)
解决方案:   Correctly fill in structure size. (Andy Kittner)
相关文件:   src/gui_w48.c

Patch 7.2.366
问题:	    <span class="Special">CTRL-B</span> doesn't go back to the first line of the buffer.
解决方案:   Avoid an overflow when adding MAXCOL.
相关文件:   src/move.c

Patch 7.2.367
问题:	    &quot;xxd -r -p&quot; doesn't work as documented.
解决方案:   Skip white space. (James Vega)
相关文件:   src/xxd/xxd.c

Patch 7.2.368 (after 7.2.361)
问题:	    Ruby interface: Appending line doesn't work. (Michael Henry)
解决方案:   Reverse check for NULL line. (James Vega)
相关文件:   src/if_ruby.c

Patch 7.2.369
问题:	    Error message is not easy to understand.
解决方案:   Add quotes. (SungHyun Nam)
相关文件:   src/ex_cmds2.c

Patch 7.2.370 (after 7.2.356)
问题:	    A redraw may cause folds to be closed.
解决方案:   Revert part of the previous patch.  Add a test. (Lech Lorens)
相关文件:   src/diff.c, src/fold.c, src/option.c, src/testdir/test45.in,
	    src/testdir/test45.ok

Patch 7.2.371
问题:	    Build problems on Tandem NonStop.
解决方案:   A few changes to #ifdefs (Joachim Schmitz)
相关文件:   src/auto/configure, src/configure.in, src/config.h.in, src/vim.h,
	    src/if_cscope.c, src/osdef1.h.in, src/tag.c

Patch 7.2.372 (extra)
问题:	    Cross-compiling GvimExt and xxd doesn't work.
解决方案:   Change the build files. (Markus Heidelberg)
相关文件:   src/INSTALLpc.txt, src/GvimExt/Make_ming.mak, src/Make_cyg.mak,
	    src/Make_ming.mak, src/xxd/Make_cyg.mak

Patch 7.2.373
问题:	    Gcc 4.5 adds more error messages. (Chris Indy)
解决方案:   Update default <span class="Type">'errorformat'</span>.
相关文件:   src/option.h

Patch 7.2.374
问题:	    Ruby eval() doesn't understand Vim types.
解决方案:   Add the vim_to_ruby() function.  (George Gensure)
相关文件:   src/eval.c, src/if_ruby.c

Patch 7.2.375
问题:	    ml_get errors when using &quot;:bprevious&quot; in a BufEnter autocmd.
	    (Dominique Pelle)
解决方案:   Clear w_valid when entering another buffer.
相关文件:   src/buffer.c

Patch 7.2.376
问题:	    ml_get error when using SiSU syntax. (Nathan Thomas)
解决方案:   If the match ends below the last line move it to the end of the
	    last line.
相关文件:   src/syntax.c

Patch 7.2.377 (extra, after 7.2.372)
问题:	    Misplaced assignment.  Duplicate build line for gvimext.dll.
解决方案:   Move setting CROSS_COMPILE to before ifneq.  Remove the wrong
	    build line. (Markus Heidelberg)
相关文件:   src/Make_ming.mak

Patch 7.2.378
问题:	    C function declaration indented too much. (Rui)
解决方案:   Don't see a line containing { or } as a type. (Matt Wozniski)
相关文件:   src/misc1.c

Patch 7.2.379
问题:	    <span class="Type">'eventignore'</span> is set to an invalid value inside &quot;:doau&quot;. (Antony
	    Scriven)
解决方案:   Don't include the leading comma when the option was empty.
相关文件:   src/fileio.c

Patch 7.2.380 (after 7.2.363)
问题:	    Perl interface builds with 5.10.1 but not with 5.10.0.
解决方案:   Change the #ifdefs. (Sergey Khorev)
相关文件:   src/if_perl.xs

Patch 7.2.381
问题:	    No completion for :behave.
解决方案:   Add :behave completion.  Minor related fixes. (Dominique Pelle)
相关文件:   src/ex_docmd.c, src/ex_getln.c, src/proto/ex_docmd.pro, src/vim.h

Patch 7.2.382
问题:	    Accessing freed memory when closing the cmdline window when
	    <span class="Type">'bufhide'</span> is set to &quot;wipe&quot;.
解决方案:   Check if the buffer still exists before invoking close_buffer()
	    (Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.2.383
问题:	    Vim doesn't build cleanly with MSVC 2010.
解决方案:   Change a few types. (George Reilly)
相关文件:   src/ex_cmds2.c, src/if_python.c, src/syntax.c

Patch 7.2.384 (extra)
问题:	    Vim doesn't build properly with MSVC 2010.
解决方案:   Add the nmake version to the build file. (George Reilly)
相关文件:   src/Make_mvc.mak, src/testdir/Make_dos.mak

Patch 7.2.385
问题:	    When in the command line window dragging status line only works
	    for last-but-one window. (Jean Johner)
解决方案:   Remove the code that disallows this.
相关文件:   src/ui.c

Patch 7.2.386
问题:	    Focus hack for KDE 3.1 causes problems for other window managers.
解决方案:   Remove the hack. (forwarded by Joel Bradshaw)
相关文件:   src/gui_gtk.c

Patch 7.2.387
问题:	    Ruby with MingW still doesn't build all versions.
解决方案:   More #ifdefs for the  Ruby code. (Sergey Khorev)
相关文件:   src/if_ruby.c

Patch 7.2.388 (extra part of 7.2.387)
问题:	    Ruby with MingW still doesn't build all versions.
解决方案:   Different approach to build file. (Sergey Khorev)
相关文件:   src/Make_ming.mak

Patch 7.2.389
问题:	    synIDattr() cannot return the font.
解决方案:   Support the &quot;font&quot; argument. (Christian Brabandt)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/syntax.c

Patch 7.2.390
问题:	    In some situations the popup menu can be displayed wrong.
解决方案:   Remove the popup menu if the cursor moved. (Lech Lorens)
相关文件:   src/edit.c

Patch 7.2.391
问题:	    Internal alloc(0) error when doing &quot;<span class="Special">CTRL-V</span> $ c&quot;. (Martti Kuparinen)
解决方案:   Fix computations in getvcol(). (partly by Lech Lorens)
相关文件:   src/charset.c, src/memline.c

Patch 7.2.392
问题:	    Netbeans hangs reading from a socket at the maximum block size.
解决方案:   Use select() or poll(). (Xavier de Gaye)
相关文件:   src/vim.h, src/os_unixx.h, src/if_xcmdsrv.c, src/netbeans.c

Patch 7.2.393
问题:	    Mac: Can't build with different Xcode developer tools directory.
解决方案:   make &quot;Developer&quot; directory name configurable. (Rainer Muller)
相关文件:   src/configure.in, src/auto/configure

Patch 7.2.394
问题:	    .lzma and .xz files are not supported.
解决方案:   Recognize .lzma and .xz files so that they can be edited.
相关文件:   runtime/plugin/gzip.vim

Patch 7.2.395
问题:	    In help CTRL=] on g?g? escapes the ?, causing it to fail. (Tony
	    Mechelynck)
解决方案:   Don't escape ? for a help command. (Sergey Khorev)
相关文件:   src/normal.c

Patch 7.2.396
问题:	    Get E38 errors. (Dasn)
解决方案:   Set cursor to line 1 instead of 0. (Dominique Pelle)
相关文件:   src/popupmnu.c

Patch 7.2.397
问题:	    Redundant check for w_lines_valid.
解决方案:   Remove the if.  (Lech Lorens)
相关文件:   src/fold.c

Patch 7.2.398
问题:	    When moving windows the cursor ends up in the wrong line.
解决方案:   Set the window width and height properly. (Lech Lorens)
相关文件:   src/window.c

Patch 7.2.399 (extra, after 7.2.388)
问题:	    Cannot compile on MingW.
解决方案:   Move ifneq to separate line. (Vlad Sandrini, Dominique Pelle)
相关文件:   src/Make_ming.mak

Patch 7.2.400 (after 7.2.387)
问题:	    Dynamic Ruby is not initialised properly for version 1.9.1.
	    Ruby cannot create strings from NULL.
解决方案:   Cleanup #ifdefs.  Handle NULL like an empty string.  Add
	    ruby_init_stack. (Sergey Khorev)
相关文件:   src/if_ruby.c

Patch 7.2.401
问题:	    &quot;:e dir<span class="Special">&lt;Tab&gt;</span>&quot; with <span class="Type">'wildmode'</span> set to &quot;list&quot; doesn't highlight
	    directory names with a space. (Alexandre Provencio)
解决方案:   Remove the backslash before checking if the name is a directory.
	    (Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.2.402
问题:	    This gives a #705 error: let X = function(<span class="Type">'haslocaldir'</span>)
	    let X = function(<span class="Type">'getcwd'</span>)
解决方案:   Don't give E705 when the name is found in the hashtab. (Sergey
	    Khorev)
相关文件:   src/eval.c

Patch 7.2.403 (after 7.2.400)
问题:	    Compiler warning for pointer type. (Tony Mechelynck)
解决方案:   Move type cast to the right place.
相关文件:   src/if_ruby.c

Patch 7.2.404
问题:	    Pointers for composing characters are not properly initialized.
解决方案:   Compute the size of the pointer, not what it points to. (Yukihiro
	    Nakadaira)
相关文件:   src/screen.c

Patch 7.2.405
问题:	    When built with small features the matching text is not
	    highlighted for &quot;:s/pat/repl/c&quot;.
解决方案:   Remove the #ifdef for IncSearch. (James Vega)
相关文件:   src/syntax.c

Patch 7.2.406
问题:	    Patch 7.2.119 introduces uninit mem read. (Dominique Pelle)
解决方案:   Only used ScreeenLinesC when ScreeenLinesUC is not zero. (Yukihiro
	    Nakadaira)  Also clear ScreeenLinesC when allocating.
相关文件:   src/screen.c

Patch 7.2.407
问题:	    When using an expression in &quot;:s&quot; backslashes in the result are
	    dropped. (Sergey Goldgaber, Christian Brabandt)
解决方案:   Double backslashes.
相关文件:   src/regexp.c

Patch 7.2.408
问题:	    With &quot;:g/the/s/foo/bar/&quot; the '[ and '] marks can be set to a line
	    that was not changed.
解决方案:   Only set '[ and '] marks when a substitution was done.
相关文件:   src/ex_cmds.c

Patch 7.2.409
问题:	    Summary of number of substitutes is incorrect for &quot;:folddo&quot;. (Jean
	    Johner)
解决方案:   Reset sub_nsubs and sub_nlines in global_exe().
相关文件:   src/ex_cmds.c

Patch 7.2.410
问题:	    Highlighting directories for completion doesn't work properly.
解决方案:   Don't halve backslashes when not needed, expanded &quot;~/&quot;.
	    (Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.2.411
问题:	    When parsing <span class="Type">'cino'</span> a comma isn't skipped properly.
解决方案:   Skip the comma. (Lech Lorens)
相关文件:   src/misc1.c

Patch 7.2.412
问题:	    [ or ] followed by mouse click doesn't work.
解决方案:   Reverse check for key being a mouse event. (Dominique Pelle)
相关文件:   src/normal.c

Patch 7.2.413
问题:	    Large file support is incorrect.
解决方案:   Add AC_SYS_LARGEFILE to configure. (James Vega)
相关文件:   src/configure.in, src/config.h.in, src/auto/configure

Patch 7.2.414
问题:	    CTRK-K <span class="Special">&lt;space&gt;</span> <span class="Special">&lt;space&gt;</span> does not produce 0xa0 as expected. (Tony
	    Mechelynck)
解决方案:   Remove the Unicode range 0xe000 - 0xefff from digraphs, these are
	    not valid characters.
相关文件:   src/digraph.c

Patch 7.2.415
问题:	    Win32: Can't open a remote file when starting Vim.
解决方案:   Don't invoke cygwin_conv_path() for URLs. (Tomoya Adachi)
相关文件:   src/main.c

Patch 7.2.416
问题:	    Logtalk.dict is not installed.
解决方案:   Add it to the install target. (Markus Heidelberg)
相关文件:   src/Makefile

Patch 7.2.417
问题:	    When <span class="Type">'shell'</span> has an argument with a slash then <span class="Type">'shellpipe'</span> is not
	    set properly. (Britton Kerin)
解决方案:   Assume there are no spaces in the path, arguments follow.
相关文件:   src/option.c

Patch 7.2.418
问题:	    Vim tries to set the background or foreground color in a terminal
	    to -1.  (Graywh)  Happens with &quot;:hi Normal ctermbg=NONE&quot;.
解决方案:   When resetting the foreground or background color don't set the
	    color, let the clear screen code do that.
相关文件:   src/syntax.c

Patch 7.2.419
问题:	    Memory leak in Motif when clicking on &quot;Search Vim Help&quot;.
解决方案:   Free string returned by XmTextGetString(). (Dominique Pelle)
相关文件:   src/gui_motif.c

Patch 7.2.420
问题:	    &quot;:argedit&quot; does not accept &quot;++enc=utf8&quot; as documented. (Dominique
	    Pelle)
解决方案:   Add the ARGOPT flag to &quot;:argedit&quot;.
相关文件:   src/ex_cmds.h

Patch 7.2.421
问题:	    Folds are sometimes not updated properly and there is no way to
	    force an update.
解决方案:   Make &quot;zx&quot; and &quot;zX&quot; recompute folds (suggested by Christian
	    Brabandt)
相关文件:   src/normal.c

Patch 7.2.422
问题:	    May get E763 when using spell dictionaries.
解决方案:   Avoid utf-8 case folded character to be truncated to 8 bits and
	    differ from latin1. (Dominique Pelle)
相关文件:   src/spell.c

Patch 7.2.423
问题:	    Crash when assigning s: to variable. (Yukihiro Nakadaira)
解决方案:   Make ga_scripts contain pointer to scriptvar_T instead of
	    scriptvar_T itself. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.2.424
问题:	    &quot;:colorscheme&quot; without an argument doesn't do anything.
解决方案:   Make it echo the current color scheme name.  (partly by Christian
	    Brabandt)
相关文件:   runtime/doc/syntax.txt, src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.425
问题:	    Some compilers complain about fourth EX() argument.
解决方案:   Add cast to long_u.
相关文件:   src/ex_cmds.h

Patch 7.2.426
问题:	    Commas in <span class="Type">'langmap'</span> are not always handled correctly.
解决方案:   Require commas to be backslash escaped. (James Vega)
相关文件:   src/option.c

Patch 7.2.427
问题:	    The swapfile is created using the destination of a symlink, but
	    recovery doesn't follow symlinks.
解决方案:   When recovering, resolve symlinks. (James Vega)
相关文件:   src/memline.c

Patch 7.2.428
问题:	    Using setqflist([]) to clear the error list doesn't work properly.
解决方案:   Set qf_nonevalid to TRUE when appropriate. (Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.2.429
问题:	    A file that exists but access is denied may result in a &quot;new file&quot;
	    message.  E.g. when its directory is unreadable.
解决方案:   Specifically check for ENOENT to decide a file doesn't exist.
	    (partly by James Vega)
相关文件:   src/fileio.c

Patch 7.2.430
问题:	    The ++bad argument is handled wrong, resulting in an invalid
	    memory access.
解决方案:   Use the bad_char field only for the replacement character, add
	    bad_char_idx to store the position. (Dominique Pelle)
相关文件:   src/eval.c, src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.431
问题:	    &quot;:amenu&quot; moves the cursor when in Insert mode.
解决方案:   Use <span class="Special">CTRL-\</span> <span class="Special">CTRL-O</span> instead of <span class="Special">CTRL-O</span>. (Christian Brabandt)
相关文件:   src/menu.c

Patch 7.2.432
问题:	    When menus are translated they can only be found by the translated
	    name.  That makes &quot;:emenu&quot; difficult to use.
解决方案:   Store the untranslated name and use it for completion and :emenu.
	    (Liang Peng (Bezetek James), Edward L. Fox)
相关文件:   src/menu.c, src/structs.h

Patch 7.2.433
问题:	    Can't use cscope with QuickFixCmdPre and QuickFixCmdPost.
解决方案:   Add cscope support for these autocmd events. (Bryan Venteicher)
相关文件:   runtime/doc/autocmd.txt, src/if_cscope.c

Patch 7.2.434 (after 7.2.432)
问题:	    Compilation fails without the multi-lang feature.
解决方案:   Add #ifdefs. (John Marriott)
相关文件:   src/menu.c

Patch 7.2.435 (after 7.2.430)
问题:	    Crash when using bad_char_idx uninitialized. (Patrick Texier)
解决方案:   Don't use bad_char_idx, reproduce the ++bad argument from bad_char.
相关文件:   src/eval.c, src/ex_cmds.h, src/ex_docmd.c

Patch 7.2.436
问题:	    Reproducible crash in syntax HL. (George Reilly, Dominique Pelle)
解决方案:   Make sst_stacksize an int instead of short. (Dominique Pelle)
相关文件:   src/structs.h

Patch 7.2.437 (after 7.2.407)
问题:	    When &quot;\\\n&quot; appears in the expression result the \n doesn't result
	    in a line break. (Andy Wokula)
解决方案:   Also replace a \n after a backslash into \r.
相关文件:   src/regexp.c

Patch 7.2.438 (after 7.2.427)
问题:	    &quot;vim -r&quot; crashes.
解决方案:   Don't use NULL pointer argument.
相关文件:   src/memline.c

Patch 7.2.439
问题:	    Invalid memory access when doing thesaurus completion and
	    <span class="Type">'infercase'</span> is set.
解决方案:   Use the minimal length of completed word and replacement.
	    (Dominique Pelle)
相关文件:   src/edit.c

Patch 7.2.440
问题:	    Calling a function through a funcref, where the function deletes
	    the funcref, leads to an invalid memory access.
解决方案:   Make a copy of the function name. (Lech Lorens)
相关文件:   src/eval.c, src/testdir/test34.in, src/testdir/test34.ok

Patch 7.2.441
问题:	    When using &quot;:earlier&quot; undo information may be wrong.
解决方案:   When changing alternate branches also adjust b_u_oldhead.
相关文件:   src/undo.c

Patch 7.2.442 (after 7.2.201)
问题:	    Copy/paste with OpenOffice doesn't work.
解决方案:   Do not offer the HTML target when it is not supported. (James
	    Vega)
相关文件:   src/gui_gtk_x11.c, src/option.c, src/proto/gui_gtk_x11.pro

Patch 7.2.443
问题:	    Using taglist() on a tag file with duplicate fields generates an
	    internal error. (Peter Odding)
解决方案:   Check for duplicate field names.
相关文件:   src/eval.c, src/proto/eval.pro, src/tag.c

Patch 7.2.444 (after 7.2.442)
问题:	    Can't build with GTK 1, gtk_selection_clear_targets() is not
	    available. (Patrick Texier)
解决方案:   Don't change the targets for GTK 1, set them once.
相关文件:   src/gui_gtk_x11.c, src/option.c

Patch 7.2.445
问题:	    Crash when using undo/redo and a FileChangedRO autocmd event that
	    reloads the buffer. (Dominique Pelle)
解决方案:   Do not allow autocommands while performing and undo or redo.
相关文件:   src/misc1.c, src/undo.c

Patch 7.2.446
问题:	    Crash in GUI when closing the last window in a tabpage. (ryo7000)
解决方案:   Remove the tabpage from the list before freeing the window.
相关文件:   src/window.c

When writing a file, switching tab pages and selecting a word the file write
message would be displayed again.  This happened in Insert mode and with
<span class="Type">'cmdheight'</span> set to 2.

When using &quot;:lang&quot; to set a locale that uses a comma for decimal separator and
using GTK floating point numbers stop working.  Use gtk_disable_setlocale().
(James Vega)

&quot;g8&quot; didn't produce the right value on a NUL. (Dominique Pelle)

Use BASEMODLIBS instead of MODLIBS for Python configuration to pick up the
right compiler flags. (Michael Bienia)

Window title was not updated after dropping a file on Vim. (Hari G)

synstack() did not return anything when just past the end of the line.  Useful
when using the cursor position in Insert mode.

When entering a digraph or special character after a line that fits the window
the '?' or '^' on the next line is not redrawn. (Ian Kelling)

Composing characters in <span class="Ignore">|</span><span class="Identifier">:s</span><span class="Ignore">|</span> substitute text were dropped.

<span class="Ignore">|</span><a href="#"><span class="Identifier">exists()</span></a><span class="Ignore">|</span> was causing an autoload script to be loaded.

Filter out -pthread for cproto.

Make <span class="Special">CTRL-L</span> in command line mode respect <span class="Type">'ignorecase'</span> and <span class="Type">'smartcase'</span>. (Martin
Toft)

Spell menu moved the cursor, causing Copy not to work.  Spell replacement
didn't work in <span class="Type">'compatible'</span> mode.

Various small fixes from Dominique Pelle.

Fix that :mksession may generate &quot;2argu&quot; even though there is no such
argument. (Peter Odding)

Fixes for time in clipboard request.  Also fix ownership.  (David Fries)

Fixed completion of file names with '%' and '*'.

Fixed MSVC makefile use of /Wp64 flag.

Correct use of long instead of off_t for file size. (James Vega)

Add a few #ifdefs to exclude functions that are not used. (Dominique Pelle)

Remove old and unused method to allocate memory for undo.

Fix definition of UINT_PTR for 64 bit systems.

Some versions of Ruby redefine rb_str_new2 to rb_str_new_cstr.

Window title not updated after file dropped.

Fixed crash for &quot;:find&quot; completion, might also happen in other path expansion
usage.

When <span class="Type">'searchhl'</span> causes a hang make <span class="Special">CTRL-C</span> disable <span class="Type">'searchhl'</span>.

When resetting both <span class="Type">'title'</span> and <span class="Type">'icon'</span> the title would be set after a shell
command.

Reset <span class="Type">'title'</span> and <span class="Type">'icon'</span> in test47 to avoid the xterm title getting messed up.

Fix for compiler warning about function prototype in pty.c.

Added <span class="Type">'window'</span> to the options window.

Fixed: errors for allocating zero bytes when profiling an empty function.

Remove -arch flag from build flags for Perl. (Bjorn Wickler)

Fix <span class="Type">'autochdir'</span> not showing up in :options window. (Dominique Pelle)

Fix: test 69 didn't work on MS-Windows.  Test 72 beeped too often.

Avoid illegal memory access in spell suggestion. (Dominique Pelle)
Fix: crash in spell checking with a 0x300 character.

Avoid that running tests changes viminfo.

Fix: changing case of a character removed combining characters.
Fixed: <span class="Special">CTRL-R</span> in Insert mode doesn't insert composing characters.

Added the WOW64 flag to OLE registration, for 64 bit Windows systems.

Various fixes for coverity warnings.

Fix compile warnings, esp. for 64-bit systems.  (Mike Williams)

Fix: :redir to a dictionary that is changed before &quot;:redir END&quot; causes a
memory access error.

Fix: terminal title not properly restored when there are multi-byte
characters.  (partly by James Vega)

Set <span class="Type">'wrapscan'</span> when checking the .po files. (Mike Williams)

Win32: Put quotes around the gvim.exe path for the &quot;Open with&quot; menu entry.

On MS-Windows sometimes files with number 4913 or higher are left behind.

<span class="Type">'suffixesadd'</span> was used for finding tags file.

Removed unused code.

Improved positioning of combining characters in GTK.

Made test 11 pass when there is no gzip program. (John Beckett)

Changed readfile() to ignore byte order marks, unless in binary mode.

On MS-Windows completion of shell commands didn't work.

An unprintable multi-byte character at the start of the screen line caused the
following text to be drawn at the wrong position.

Got ml_get errors when using undo with <span class="Type">'virtualedit'</span>.

Call gui_mch_update() before triggering GuiEnter autocmd. (Ron Aaron)

Unix &quot;make install&quot; installed a few Amiga .info files.

Disallow setting <span class="Type">'ambiwidth'</span> to &quot;double&quot; when <span class="Type">'listchars'</span> or <span class="Type">'fillchars'</span>
contains a character that would become double width.

Set <span class="Type">'wrapscan'</span> when checking the .po files. (Mike Williams)

Fixed: using expression in command line may cause a crash.

Avoid warnings from the clang compiler. (Dominique Pelle)

Fix: Include wchar.h in charset.c for towupper().

Fixed: Using &quot;:read file&quot; in an empty buffer when <span class="Type">'compatible'</span> is set caused
an error.  Was caused by patch 7.2.132.

Make the references to features in the help more consistent. (Sylvain Hitier)

<span class="PreProc">==============================================================================</span>
7.4 版 本				<span class="Ignore">*</span><span id="version-7.4" class="String anchor">version-7.4</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="version7.4" class="String anchor">version7.4</span><span class="Ignore">*</span> <span class="Ignore">*</span><span id="vim-7.4" class="String anchor">vim-7.4</span><span class="Ignore">*</span>

本小节讨论 7.3 和 7.4 版本之间的改进。

这个版本有几百个漏洞修正，和若干新特性。最主要的新特性有:

- 新正规表达式引擎		<span class="Ignore">|</span><a href="version7.html#new-regexp-engine"><span class="Identifier">new-regexp-engine</span></a><span class="Ignore">|</span>
- 更象 python 的 Python 接口	<span class="Ignore">|</span><a href="version7.html#better-python-interface"><span class="Identifier">better-python-interface</span></a><span class="Ignore">|</span>

新正规表达式引擎					<span class="Ignore">*</span><span id="new-regexp-engine" class="String anchor">new-regexp-engine</span><span class="Ignore">*</span>
<span class="PreProc">-----------------</span>

现在我们称为 &quot;老式的&quot; 正规表达式引擎使用一种回溯算法。它试图用一种方式匹配模式
与文本，如果失败，回退再试一种方式。这对简单模式很好，但对复杂模式和很长的文本
上会很慢。

新的引擎使用状态机。它会尝试当前字符所有的可能性，并保存模式的所有可能状态。对
简单模式会稍慢些，但对复杂模式和长文本会快很多。

尤其显著地是，Javascript 和 XML 文件对长行的语法高亮现在好多了。过去 Vim 可能
会停顿很久。

详情见: <span class="Ignore">|</span><a href="pattern.html#two-engines"><span class="Identifier">two-engines</span></a><span class="Ignore">|</span>

更好的 Python 接口				<span class="Ignore">*</span><span id="better-python-interface" class="String anchor">better-python-interface</span><span class="Ignore">*</span>
<span class="PreProc">-----------------------</span>

新增 <span class="Ignore">|</span><a href="if_pyth.html#python-bindeval"><span class="Identifier">python-bindeval</span></a><span class="Ignore">|</span> 函数。和 <span class="Ignore">|</span><a href="if_pyth.html#python-eval"><span class="Identifier">python-eval</span></a><span class="Ignore">|</span> 不同，这个函数分别为字典、列表和
函数返回 <span class="Ignore">|</span><a href="if_pyth.html#python-Dictionary"><span class="Identifier">python-Dictionary</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="if_pyth.html#python-List"><span class="Identifier">python-List</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="if_pyth.html#python-Function"><span class="Identifier">python-Function</span></a><span class="Ignore">|</span> 对象，而不是
它们的 Python 内建对应对象 (说起函数的话就是 None)。
   对简单类型，此函数返回 Python 内建类型，而不是像 <span class="Ignore">|</span><a href="if_pyth.html#python-eval"><span class="Identifier">python-eval</span></a><span class="Ignore">|</span> 那样返回
Python <span class="Ignore">`</span><span class="Comment">str()</span><span class="Ignore">`</span>。Python 3 则返回 <span class="Ignore">`</span><span class="Comment">bytes()</span><span class="Ignore">`</span> 对象而不是 <span class="Ignore">`</span><span class="Comment">str()</span><span class="Ignore">`</span>，以避免出错
UnicodeDecodeError 的可能性。
   新对象的接口一定程度上模仿标准 Python 的 <span class="Ignore">`</span><span class="Comment">dict()</span><span class="Ignore">`</span> 和 <span class="Ignore">`</span><span class="Comment">list()</span><span class="Ignore">`</span> 接口。将来
会改进模仿的程度。

新增特殊的 <span class="Ignore">|</span><a href="if_pyth.html#python-vars"><span class="Identifier">python-vars</span></a><span class="Ignore">|</span> 对象，也可用于 <span class="Ignore">|</span><a href="if_pyth.html#python-buffer"><span class="Identifier">python-buffer</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="if_pyth.html#python-window"><span class="Identifier">python-window</span></a><span class="Ignore">|</span>。
它们方便了从 Python 访问 Vim 脚本变量。

现在你不再需要修改 <span class="Ignore">`</span><span class="Comment">sys.path</span><span class="Ignore">`</span> 来导入自己的模块: 特殊的钩子现在负责从
<span class="Special">{rtp}</span>/python2、<span class="Special">{rtp}</span>/python3 和 <span class="Special">{rtp}</span>/pythonx 目录 (分别用于 Python 2、Python
3 和两者都可用的版本) 导入模块。
见 <span class="Ignore">|</span><a href="if_pyth.html#python-special-path"><span class="Identifier">python-special-path</span></a><span class="Ignore">|</span>。

现在可以通过 <span class="Ignore">|</span><a href="if_pyth.html#python-tabpage"><span class="Identifier">python-tabpage</span></a><span class="Ignore">|</span> 对象来访问 <span class="Ignore">|</span><a href="tabpage.html#tabpage"><span class="Identifier">tabpage</span></a><span class="Ignore">|</span>。

新增 Vim 错误和例外到 Python 例外的自动转换。

改变 <span class="Ignore">|</span><a href="if_pyth.html#python-buffers"><span class="Identifier">python-buffers</span></a><span class="Ignore">|</span> 对象的行为: 现在使用缓冲区编号而不是内部缓冲区列表的缓冲
区序列号作为键。这不应该影响任何现有的程序，因为过去得到该序列号的唯一方法是遍
历 <span class="Ignore">|</span><a href="if_pyth.html#python-buffers"><span class="Identifier">python-buffers</span></a><span class="Ignore">|</span>。

新增 <span class="Ignore">|</span><span class="Identifier">:pydo</span><span class="Ignore">|</span> 和 <span class="Ignore">|</span><span class="Identifier">:py3do</span><span class="Ignore">|</span> 命令。

新增 <span class="Ignore">|</span><a href="#"><span class="Identifier">pyeval()</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="#"><span class="Identifier">py3eval()</span></a><span class="Ignore">|</span> 函数。

现在所有过去支持 <span class="Ignore">`</span><span class="Comment">str()</span><span class="Ignore">`</span> 对象的地方，都能同时接受 <span class="Ignore">`</span><span class="Comment">str()</span><span class="Ignore">`</span> 和 <span class="Ignore">`</span><span class="Comment">unicode()</span><span class="Ignore">`</span>
(Python 2) 或 <span class="Ignore">`</span><span class="Comment">bytes()</span><span class="Ignore">`</span> 和 <span class="Ignore">`</span><span class="Comment">str()</span><span class="Ignore">`</span> (Python 3)。

<span class="Ignore">|</span><a href="if_pyth.html#python-window"><span class="Identifier">python-window</span></a><span class="Ignore">|</span> 有了 <span class="Ignore">`</span><span class="Comment">.col</span><span class="Ignore">`</span> 和 <span class="Ignore">`</span><span class="Comment">.row</span><span class="Ignore">`</span> 属性，这是现在唯一可以得到内部窗口位置的
方法。

新增或修正 Vim Python 对象对 <span class="Ignore">`</span><span class="Comment">dir()</span><span class="Ignore">`</span> 的支持。

改动							<span class="Ignore">*</span><span id="changed-7.4" class="String anchor">changed-7.4</span><span class="Ignore">*</span>
<span class="PreProc">-------</span>

不再支持旧的 Python 版本 (≤2.2)。反正也不能正确地进行编译了。

选项:
	非 GUI 版本的 Vim 现在可以自动保存选择区到系统剪贴板 (<span class="Type">'clipboard'</span> 中的
	autoselectplus)。也可以使用系统剪贴板为缺省寄存器 (以前只能用主选择
	区)。(Ivan Krasilnikov, Christian Brabandt, Bram Moolenaar)

	新增 <span class="Type">'shiftwidth'</span> 的特殊值，使 <span class="Type">'sw'</span> 可以依赖于 <span class="Type">'tabstop'</span>。因为
	<span class="Type">'indentexpr'</span> 的缩进会因此变得麻烦，又加入 <span class="Ignore">|</span><a href="#"><span class="Identifier">shiftwidth()</span></a><span class="Ignore">|</span> 函数。还增加
	了等价的 <span class="Type">'softtabstop'</span> 的特殊值。(Christian Brabandt, so8res)

	<span class="Type">'relativenumber'</span> 选项打开时在行号列显示绝对行号。现在 <span class="Type">'number'</span> 和
	<span class="Type">'relativenumber'</span> 有四种不同的组合。(Christian Brabandt)

命令:
	<span class="Ignore">|</span><span class="Identifier">:diffoff</span><span class="Ignore">|</span> 现在保存某些设置的局部值并恢复，而不是盲目地重设为它们的缺
	省值。(Christian Brabandt)

其他:
	Lua 接口现在也使用用户数据来绑定到 Vim 数据结构。(Taro Muraoka, Luis
	Carvalho)

	glob() 和自动命令的模式过去可以使用未公开的正规表达式学来的 &quot;\{n,m\}&quot;
	项目。&quot;\{&quot; 现在是按本义出现的 &quot;{&quot;，因为这是外壳文件模式的正常行为。
	现在须用 &quot;\\\{n,m\}&quot; 来得到类似于正规表达式模式的 &quot;\<span class="Special">{n,m}</span>&quot;。

新增							<span class="Ignore">*</span><span id="added-7.4" class="String anchor">added-7.4</span><span class="Ignore">*</span>
<span class="PreProc">-----</span>

新增若干语法、缩进和其他插件。

新增 <span class="Ignore">|</span><a href="starting.html#viminfo"><span class="Identifier">viminfo</span></a><span class="Ignore">|</span> 对 <span class="Ignore">|</span><a href="eval.html#Lists"><span class="Identifier">Lists</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="eval.html#Dictionaries"><span class="Identifier">Dictionaries</span></a><span class="Ignore">|</span> 的支持。(Christian Brabandt)

函数:
	位操作函数: <span class="Ignore">|</span><a href="#"><span class="Identifier">and()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">or()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">invert()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">xor()</span></a><span class="Ignore">|</span>.

	新增 <span class="Ignore">|</span><a href="#"><span class="Identifier">luaeval()</span></a><span class="Ignore">|</span> 函数。(Taro Muraoka, Luis Carvalho)

	新增 <span class="Ignore">|</span><a href="#"><span class="Identifier">sha256()</span></a><span class="Ignore">|</span> 函数。(Tyru, Hirohito Higashi)

	新增 <span class="Ignore">|</span><a href="#"><span class="Identifier">wildmenumode()</span></a><span class="Ignore">|</span> 函数。(Christian Brabandt)

	调试函数: <span class="Ignore">|</span><a href="#"><span class="Identifier">screenattr()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">screenchar()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">screencol()</span></a><span class="Ignore">|</span>、
	<span class="Ignore">|</span><a href="#"><span class="Identifier">screenrow()</span></a><span class="Ignore">|</span>。(Simon Ruderich, Bram Moolenaar)

	新增 <span class="Ignore">|</span><a href="#"><span class="Identifier">sort()</span></a><span class="Ignore">|</span> 通过可选的第三个参数使用 <span class="Ignore">|</span><a href="eval.html#Dictionary-function"><span class="Identifier">Dictionary-function</span></a><span class="Ignore">|</span> 的功能。
	(Nikolay Pavlov)

	新增特殊的 <span class="Ignore">|</span><a href="#"><span class="Identifier">expand()</span></a><span class="Ignore">|</span>参数，用于扩展当前行号。

	现在可以强制 <span class="Ignore">|</span><a href="#"><span class="Identifier">char2nr()</span></a><span class="Ignore">|</span> 给出 unicode 代码点，而不取决于当前编码。
	(Yasuhiro Matsumoto)

	现在可以使返回文件列表的函数生成 <span class="Ignore">|</span><a href="eval.html#List"><span class="Identifier">List</span></a><span class="Ignore">|</span> 而不是 NL 分隔的字符串。(例如
	<span class="Ignore">|</span><a href="#"><span class="Identifier">glob()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">expand()</span></a><span class="Ignore">|</span>) (Christian Brabandt)

	从指定窗口、标签页或缓冲区读取变量的函数现在可以在找不到变量时返回指定
	的缺省值，而不是空字符串。(<span class="Ignore">|</span><a href="#"><span class="Identifier">gettabvar()</span></a><span class="Ignore">|</span>、<span class="Ignore">|</span><a href="#"><span class="Identifier">getwinvar()</span></a><span class="Ignore">|</span>、
	<span class="Ignore">|</span><a href="#"><span class="Identifier">getbufvar()</span></a><span class="Ignore">|</span>) (Shougo Matsushita, Hirohito Higashi)

自动命令:
	新增 <span class="Ignore">|</span><a href="autocmd.html#InsertCharPre"><span class="Identifier">InsertCharPre</span></a><span class="Ignore">|</span> 事件，在插入字符前发生。
	(Jakson A. Aquino)

	新增 <span class="Ignore">|</span><a href="autocmd.html#CompleteDone"><span class="Identifier">CompleteDone</span></a><span class="Ignore">|</span> 事件，在插入模式补全结束后发生。(Florian Klein 的
	主意)

	新增 <span class="Ignore">|</span><a href="autocmd.html#QuitPre"><span class="Identifier">QuitPre</span></a><span class="Ignore">|</span> 事件，在可以关闭 Vim 或只是关闭若干窗口的命令执行时发
	生。

	新增 <span class="Ignore">|</span><a href="autocmd.html#TextChanged"><span class="Identifier">TextChanged</span></a><span class="Ignore">|</span> 和 <span class="Ignore">|</span><a href="autocmd.html#TextChangedI"><span class="Identifier">TextChangedI</span></a><span class="Ignore">|</span> 事件，在文本修改时发生。

命令:
	<span class="Ignore">|</span><span class="Identifier">:syntime</span><span class="Ignore">|</span> 命令，用于调试。

	现在可以用 <span class="Ignore">|</span><span class="Identifier">:sign-unplace</span><span class="Ignore">|</span> 删除当前缓冲区的所有标号。 (Christian
	Brabandt)

	新增 <span class="Ignore">|</span><span class="Identifier">:language</span><span class="Ignore">|</span> 自动补全。(Dominique Pelle)

	新增更多 <span class="Ignore">|</span><span class="Identifier">:command-complete</span><span class="Ignore">|</span> 补全类型: <span class="Ignore">|</span><span class="Identifier">:behave</span><span class="Ignore">|</span> 子选项、色彩方案、编
	译器、<span class="Ignore">|</span><span class="Identifier">:cscope</span><span class="Ignore">|</span> 子选项、<span class="Type">'path'</span> 里的文件、<span class="Ignore">|</span><span class="Identifier">:history</span><span class="Ignore">|</span> 子选项、locale
	名、<span class="Ignore">|</span><span class="Identifier">:syntime</span><span class="Ignore">|</span> 子选项、用户名。(Dominique Pelle)

	加入 <span class="Ignore">|</span><span class="Identifier">:map-nowait</span><span class="Ignore">|</span>，若创建映射的 lhs 是另一映射的 lhs 的前缀时，不允许
	Vim 等待用户输入更多字符来消除二义性，而总是迫使 Vim 使用较短的选择:
	带 <span class="Special">&lt;nowait&gt;</span> 的那个。

选项:
	现在可以补全时忽略大小写: <span class="Type">'wildignorecase'</span>。

	可以用 <span class="Type">'formatoptions'</span> 的 <span class="Ignore">`</span><span class="Comment">j</span><span class="Ignore">`</span> 标志位使得 <span class="Ignore">|</span><span class="Identifier">J</span><span class="Ignore">|</span> 删除注释前导符
	(<span class="Ignore">|</span><a href="change.html#fo-table"><span class="Identifier">fo-table</span></a><span class="Ignore">|</span>)。(Lech Lorens)

	现在可以控制 namespace 里如何缩进: <span class="Ignore">|</span><a href="indent.html#cino-N"><span class="Identifier">cino-N</span></a><span class="Ignore">|</span>。(Konstantin Lepa)

	现在可以分别控制 <span class="Ignore">`</span><span class="Comment">if</span><span class="Ignore">`</span> 条件内的对齐和函数参数内的对齐: <span class="Ignore">|</span><a href="indent.html#cino-k"><span class="Identifier">cino-k</span></a><span class="Ignore">|</span>。
	(Lech Lorens)

其他:
	改进 cmd.exe 的支持。(Ben Fritz, Bram Moolenaar)

	加入 <span class="Ignore">|</span><a href="#"><span class="Identifier">v:windowid</span></a><span class="Ignore">|</span> 参数，包含 GUI Vim 的当前窗口号。(Christian J.
	Robinson, Lech Lorens)

	加入 rxvt-unicode 和 SGR 鼠标支持。(Yiding Jia, Hayaki Saito)

7.4 版本的所有修正						<span class="Ignore">*</span><span id="fixed-7.4" class="String anchor">fixed-7.4</span><span class="Ignore">*</span>
<span class="PreProc">------------------</span>

Patch 7.3.001
问题:       When editing &quot;src/main.c&quot; and <span class="Type">'path'</span> set to &quot;./proto&quot;,
	    &quot;:find e&lt;C-D&quot; shows ./proto/eval.pro instead of eval.pro.
解决方案:   Check for path separator when comparing names. (Nazri Ramliy)
相关文件:   src/misc1.c

Patch 7.3.002
问题:       &quot;:find&quot; completion doesn't work when halfway an environment
	    variable. (Dominique Pelle)
解决方案:   Only use in-path completion when expanding file names. (Nazri
	    Ramliy)
相关文件:   src/ex_docmd.c

Patch 7.3.003
问题:       Crash with specific BufWritePost autocmd. (Peter Odding)
解决方案:   Don't free the quickfix title twice. (Lech Lorens)
相关文件:   src/quickfix.c

Patch 7.3.004
问题:       Crash when using very long regexp. (Peter Odding)
解决方案:   Reset reg_toolong. (Carlo Teubner)
相关文件:   src/regexp.c

Patch 7.3.005
问题:       Crash when using undotree(). (Christian Brabandt)
解决方案:   Increase the list reference count.  Add a test for undotree()
	    (Lech Lorens)
相关文件:   src/eval.c, src/testdir/Makefile, src/testdir/test61.in

Patch 7.3.006
问题:       Can't build some multi-byte code with C89.
解决方案:   Move code to after declarations. (Joachim Schmitz)
相关文件:   src/mbyte.c, src/spell.c

Patch 7.3.007
问题:       Python code defines global &quot;buffer&quot;.  Re-implements a grow-array.
解决方案:   Use a grow-array instead of coding the same functionality.  Handle
	    out-of-memory situation properly.
相关文件:   src/if_py_both.h

Patch 7.3.008
问题:       <span class="Type">'cursorbind'</span> is kept in places where <span class="Type">'scrollbind'</span> is reset.
解决方案:   Reset <span class="Type">'cursorbind'</span>.
相关文件:   src/buffer.c, src/diff.c, src/ex_cmds.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/if_cscope.c, src/macros.h,
	    src/quickfix.c, src/search.c, src/tag.c, src/window.c

Patch 7.3.009
问题:       Win32: Crash on Windows when using a bad argument for strftime().
	    (Christian Brabandt)
解决方案:   Use the bad_param_handler(). (Mike Williams)
相关文件:   src/os_win32.c

Patch 7.3.010
问题:       Mac GUI: Missing break statements.
解决方案:   Add the break statements. (Dominique Pelle)
相关文件:   src/gui_mac.c

Patch 7.3.011
问题:       X11 clipboard doesn't work in Athena/Motif GUI.  First selection
	    after a shell command doesn't work.
解决方案:   When using the GUI use XtLastTimestampProcessed() instead of
	    changing a property.  (partly by Toni Ronkko)
	    When executing a shell command disown the selection.
相关文件:   src/ui.c, src/os_unix.c

Patch 7.3.012
问题:       Problems building with MingW.
解决方案:   Adjust the MingW makefiles. (Jon Maken)
相关文件:   src/Make_ming.mak, src/GvimExt/Make_ming.mak

Patch 7.3.013
问题:       Dynamic loading with Ruby doesn't work for 1.9.2.
解决方案:   Handle rb_str2cstr differently.  Also support dynamic loading on
	    Unix. (Jon Maken)
相关文件:   src/if_ruby.c

Patch 7.3.014
问题:       Ending a line in a backslash inside an &quot;:append&quot; or &quot;:insert&quot;
	    command in Ex mode doesn't work properly. (Ray Frush)
解决方案:   Halve the number of backslashes, only insert a NUL after an odd
	    number of backslashes.
相关文件:   src/ex_getln.c

Patch 7.3.015
问题:       Test is using error message that no longer exists.
解决方案:   Change E106 to E121. (Dominique Pelle)
相关文件:   src/testdir/test49.vim

Patch 7.3.016
问题:       Netbeans doesn't work under Athena.
解决方案:   Support Athena, just like Motif. (Xavier de Gaye)
相关文件:   runtime/doc/netbeans.txt, src/gui.c, src/main.c, src/netbeans.c

Patch 7.3.017
问题:       smatch reports errors.
解决方案:   Fix the reported errors. (Dominique Pelle)
相关文件:   src/spell.c, src/syntax.c

Patch 7.3.018 (after 7.3.012)
问题:       Missing argument to windres in MingW makefiles.
解决方案:   Add the argument that was wrapped in the patch. (Jon Maken)
相关文件:   src/Make_ming.mak, src/GvimExt/Make_ming.mak

Patch 7.3.019
问题:       &quot;:nbstart&quot; can fail silently.
解决方案:   Give an error when netbeans is not supported by the GUI. (Xavier
	    de Gaye)
相关文件:   src/netbeans.c

Patch 7.3.020
问题:       Cursor position wrong when joining multiple lines and
	    <span class="Type">'formatoptions'</span> contains &quot;a&quot;. (Moshe Kamensky)
解决方案:   Adjust cursor position for skipped indent. (Carlo Teubner)
相关文件:   src/ops.c, src/testdir/test68.in, src/testdir/test68.ok

Patch 7.3.021
问题:       Conflict for defining Boolean in Mac header files.
解决方案:   Define NO_X11_INCLUDES. (Rainer Muller)
相关文件:   src/os_macosx.m, src/vim.h

Patch 7.3.022
问题:       When opening a new window the <span class="Type">'spellcapcheck'</span> option is cleared.
解决方案:   Copy the correct option value. (Christian Brabandt)
相关文件:   src/option.c

Patch 7.3.023
问题:       External program may hang when it tries to write to the tty.
解决方案:   Don't close the slave tty until after the child exits. (Nikola
	    Knezevic)
相关文件:   src/os_unix.c

Patch 7.3.024
问题:       Named signs do not use a negative number as intended.
解决方案:   Fix the numbering of named signs. (Xavier de Gaye)
相关文件:   src/ex_cmds.c

Patch 7.3.025
问题:       &quot;:mksession&quot; does not square brackets escape file name properly.
解决方案:   Improve escaping of file names. (partly by Peter Odding)
相关文件:   src/ex_docmd.c

Patch 7.3.026
问题:       <span class="Special">CTRL-]</span> in a help file doesn't always work. (Tony Mechelynck)
解决方案:   Don't escape special characters. (Carlo Teubner)
相关文件:   src/normal.c

Patch 7.3.027
问题:       Opening a file on a network share is very slow.
解决方案:   When fixing file name case append &quot;\*&quot; to directory, server and
	    network share names. (David Anderson, John Beckett)
相关文件:   src/os_win32.c

Patch 7.3.028 (after 7.3.024)
问题:       Signs don't show up. (Charles Campbell)
解决方案:   Don't use negative numbers.  Also assign a number to signs that
	    have a name of all digits to avoid using a sign number twice.
相关文件:   src/ex_cmds.c

Patch 7.3.029
问题:       &quot;:sort n&quot; sorts lines without a number as number zero. (Beeyawned)
解决方案:   Make lines without a number sort before lines with a number.  Also
	    fix sorting negative numbers.
相关文件:   src/ex_cmds.c, src/testdir/test57.in, src/testdir/test57.ok

Patch 7.3.030
问题:       Cannot store Dict and List in viminfo file.
解决方案:   Add support for this. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, src/eval.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/main.aap, src/testdir/test74.in,
	    src/testdir/test74.ok

Patch 7.3.031
问题:       Can't pass the X window ID to another application.
解决方案:   Add v:windowid. (Christian J. Robinson, Lech Lorens)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/gui.c, src/vim.h,
	    src/os_unix.c

Patch 7.3.032
问题:       maparg() doesn't return the flags, such as <span class="Special">&lt;buffer&gt;</span>, <span class="Special">&lt;script&gt;</span>,
	    <span class="Special">&lt;silent&gt;</span>.  These are needed to save and restore a mapping.
解决方案:   Improve maparg(). (also by Christian Brabandt)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/getchar.c, src/gui_w48.c,
	    src/message.c, src/proto/getchar.pro, src/proto/message.pro,
	    src/structs.h src/testdir/test75.in, src/testdir/test75.ok

Patch 7.3.033 (after 7.3.032)
问题:       Can't build without FEAT_LOCALMAP.
解决方案:   Add an #ifdef. (John Marriott)
相关文件:   src/getchar.c

Patch 7.3.034
问题:       Win32: may be loading .dll from the wrong directory.
解决方案:   Go to the Vim executable directory when opening a library.
相关文件:   src/gui_w32.c, src/if_lua.c, src/if_mzsch.c, src/if_perl.xs,
	    src/if_python.c, src/if_python3.c, src/if_ruby.c, src/mbyte.c,
	    src/os_mswin.c, src/os_win32.c, src/proto/os_win32.pro

Patch 7.3.035 (after 7.3.034)
问题:       Stray semicolon after if statement. (Hari G)
解决方案:   Remove the semicolon.
相关文件:   src/os_win32.c

Patch 7.3.036
问题:       Win32 GUI: When building without menus, the font for dialogs and
	    tab page headers also changes.
解决方案:   Define USE_SYSMENU_FONT always. (Harig G.)
相关文件:   src/gui_w32.c

Patch 7.3.037
问题:       Compiler warnings for loss of data. (Mike Williams)
解决方案:   Add type casts.
相关文件:   src/if_py_both.h, src/getchar.c, src/os_win32.c

Patch 7.3.038
问题:       v:windowid isn't set on MS-Windows.
解决方案:   Set it to the window handle. (Chris Sutcliffe)
相关文件:   runtime/doc/eval.txt, src/gui_w32.c

Patch 7.3.039
问题:       Crash when using skk.vim plugin.
解决方案:   Get length of expression evaluation result only after checking for
	    NULL.  (Noriaki Yagi, Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.3.040
问题:       Comparing strings while ignoring case goes beyond end of the
	    string when there are illegal bytes. (Dominique Pelle)
解决方案:   Explicitly check for illegal bytes.
相关文件:   src/mbyte.c

Patch 7.3.041
问题:       Compiler warning for accessing mediumVersion. (Tony Mechelynck)
解决方案:   Use the pointer instead of the array itself. (Dominique Pelle)
相关文件:   src/version.c

Patch 7.3.042
问题:       No spell highlighting when re-using an empty buffer.
解决方案:   Clear the spell checking info only when clearing the options for a
	    buffer. (James Vega)
相关文件:   src/buffer.c

Patch 7.3.043
问题:       Can't load Ruby dynamically on Unix.
解决方案:   Adjust the configure script. (James Vega)
相关文件:   src/Makefile, src/config.h.in, src/configure.in,
	    src/auto/configure, src/if_ruby.c

Patch 7.3.044
问题:       The preview window opened by the popup menu is larger than
	    specified with <span class="Type">'previewheight'</span>. (Benjamin Haskell)
解决方案:   Use <span class="Type">'previewheight'</span> if it's set and smaller.
相关文件:   src/popupmnu.c

Patch 7.3.045
问题:       Compiler warning for uninitialized variable.
解决方案:   Initialize the variable always.
相关文件:   src/getchar.c

Patch 7.3.046 (after 7.3.043)
问题:       Can't build Ruby on MS-Windows.
解决方案:   Add #ifdef, don't use WIN3264 before including vim.h.
相关文件:   src/if_ruby.c

Patch 7.3.047 (after 7.3.032)
问题:       Missing makefile updates for test 75.
解决方案:   Update the makefiles.
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Makefile, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.3.048
问题:       &quot;:earlier 1f&quot; doesn't work after loading undo file.
解决方案:   Set b_u_save_nr_cur when loading an undo file. (Christian
	    Brabandt)
	    Fix only showing time in &quot;:undolist&quot;
相关文件:   src/undo.c

Patch 7.3.049
问题:       PLT has rebranded their Scheme to Racket.
解决方案:   Add support for Racket 5.x. (Sergey Khorev)
相关文件:   src/Make_cyg.mak, src/Make_ming.mak, src/Make_mvc.mak,
	    src/auto/configure, src/configure.in, src/if_mzsch.c

Patch 7.3.050
问题:       The link script is clumsy.
解决方案:   Use the --as-needed linker option if available. (Kirill A.
	    Shutemov)
相关文件:   src/Makefile, src/auto/configure, src/config.mk.in,
	    src/configure.in, src/link.sh

Patch 7.3.051
问题:       Crash when $PATH is empty.
解决方案:   Check for vim_getenv() returning NULL. (Yasuhiro Matsumoto)
相关文件:   src/ex_getln.c, src/os_win32.c

Patch 7.3.052
问题:       When <span class="Type">'completefunc'</span> opens a new window all kinds of errors follow.
	    (Xavier Deguillard)
解决方案:   When <span class="Type">'completefunc'</span> goes to another window or buffer and when it
	    deletes text abort completion.  Add a test for <span class="Type">'completefunc'</span>.
相关文件:   src/edit.c, src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test76.in, src/testdir/test76.ok

Patch 7.3.053
问题:       complete() function doesn't reset complete direction.  Can't use
	    an empty string in the list of matches.
解决方案:   Set compl_direction to FORWARD.  Add &quot;empty&quot; key to allow empty
	    words. (Kikuchan)
相关文件:   src/edit.c

Patch 7.3.054
问题:       Can define a user command for :Print, but it doesn't work. (Aaron
	    Thoma)
解决方案:   Let user command :Print overrule the builtin command (Christian
	    Brabandt)  Disallow :X and :Next as a user defined command.
相关文件:   src/ex_docmd.c

Patch 7.3.055
问题:       Recursively nested lists and dictionaries cause a near-endless
	    loop when comparing them with a copy. (ZyX)
解决方案:   Limit recursiveness in a way that non-recursive structures can
	    still be nested very deep.
相关文件:   src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.3.056
问题:       &quot;getline&quot; argument in do_cmdline() shadows global.
解决方案:   Rename the argument.
相关文件:   src/ex_docmd.c

Patch 7.3.057
问题:       Segfault with command line abbreviation. (Randy Morris)
解决方案:   Don't retrigger the abbreviation when abandoning the command line.
	    Continue editing the command line after the error.
相关文件:   src/ex_getln.c

Patch 7.3.058
问题:       Error &quot;code converter not found&quot; when loading Ruby script.
解决方案:   Load Gem module. (Yasuhiro Matsumoto)
相关文件:   src/if_ruby.c

Patch 7.3.059
问题:       Netbeans: Problem with recursively handling messages for Athena
	    and Motif.
解决方案:   Call netbeans_parse_messages() in the main loop, like it's done
	    for GTK. (Xavier de Gaye)
相关文件:   src/gui_x11.c, src/netbeans.c

Patch 7.3.060
问题:       Netbeans: crash when socket is disconnected unexpectedly.
解决方案:   Don't cleanup when a read fails, put a message in the queue and
	    disconnect later. (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.3.061
问题:       Remote &quot;:drop&quot; does not respect <span class="Type">'autochdir'</span>. (Peter Odding)
解决方案:   Don't restore the directory when <span class="Type">'autochdir'</span> is set. (Benjamin
	    Fritz)
相关文件:   src/main.c

Patch 7.3.062
问题:       Python doesn't work properly when installed in another directory
	    than expected.
解决方案:   Figure out home directory in configure and use Py_SetPythonHome()
	    at runtime. (Roland Puntaier)
相关文件:   src/configure.in, src/auto/configure, src/if_python.c,
	    src/if_python3.c

Patch 7.3.063
问题:       Win32: Running a filter command makes Vim lose focus.
解决方案:   Use SW_SHOWMINNOACTIVE instead of SW_SHOWMINIMIZED. (Hong Xu)
相关文件:   src/os_win32.c

Patch 7.3.064
问题:       Win32: &quot;:dis +&quot; shows nothing, but &quot;+p does insert text.
解决方案:   Display the * register, since that's what will be inserted.
	    (Christian Brabandt)
相关文件:   src/globals.h, src/ops.c

Patch 7.3.065
问题:       Can't get current line number in a source file.
解决方案:   Add the <span class="Special">&lt;slnum&gt;</span> item, similar to <span class="Special">&lt;sfile&gt;</span>.
相关文件:   src/ex_docmd.c

Patch 7.3.066
问题:       Crash when changing to another window while in a :vimgrep command.
	    (Christian Brabandt)
解决方案:   When wiping out the dummy before, remove it from aucmd_win.
相关文件:   src/quickfix.c

Patch 7.3.067 (after 7.3.058)
问题:       Ruby: Init_prelude is not always available.
解决方案:   Remove use of Init_prelude. (Yasuhiro Matsumoto)
相关文件:   src/if_ruby.c

Patch 7.3.068
问题:       Using freed memory when doing &quot;:saveas&quot; and an autocommand sets
	    <span class="Type">'autochdir'</span>. (Kevin Klement)
解决方案:   Get the value of fname again after executing autocommands.
相关文件:   src/ex_cmds.c

Patch 7.3.069
问题:       GTK: pressing Enter in inputdialog() doesn't work like clicking OK
	    as documented.
解决方案:   call gtk_entry_set_activates_default(). (Britton Kerin)
相关文件:   src/gui_gtk.c

Patch 7.3.070
问题:       Can set environment variables in the sandbox, could be abused.
解决方案:   Disallow it.
相关文件:   src/eval.c

Patch 7.3.071
问题:       Editing a file in a window that's in diff mode resets <span class="Type">'diff'</span>
	    but not cursor binding.
解决方案:   Reset cursor binding in two more places.
相关文件:   src/quickfix.c, src/option.c

Patch 7.3.072
问题:       Can't complete file names while ignoring case.
解决方案:   Add <span class="Type">'wildignorecase'</span>.
相关文件:   src/ex_docmd.c, src/ex_getln.c, src/misc1.c, src/option.c,
	    src/option.h, src/vim.h, src/runtime/options.txt

Patch 7.3.073
问题:       Double free memory when netbeans command follows DETACH.
解决方案:   Only free the node when owned. (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.3.074
问题:       Can't use the &quot;+ register like &quot;* for yank and put.
解决方案:   Add &quot;unnamedplus&quot; to the <span class="Type">'clipboard'</span> option. (Ivan Krasilnikov)
相关文件:   runtime/doc/options.txt, src/eval.c, src/globals.h, src/ops.c,
	    src/option.c

Patch 7.3.075 (after 7.3.072)
问题:       Missing part of <span class="Type">'wildignorecase'</span>
解决方案:   Also adjust expand()
相关文件:   src/eval.c

Patch 7.3.076
问题:       Clang warnings for dead code.
解决方案:   Remove it. (Carlo Teubner)
相关文件:   src/gui_gtk.c, src/if_ruby.c, src/misc2.c, src/netbeans.c,
	    src/spell.c

Patch 7.3.077
问题:       When updating crypt of swapfile fails there is no error message.
	    (Carlo Teubner)
解决方案:   Add the error message.
相关文件:   src/memline.c

Patch 7.3.078
问题:       Warning for unused variable.
解决方案:   Adjust #ifdefs.
相关文件:   src/ops.c

Patch 7.3.079
问题:       Duplicate lines in makefile.
解决方案:   Remove the lines. (Hong Xu)
相关文件:   src/Make_mvc.mak

Patch 7.3.080
问题:       Spell doesn't work on VMS.
解决方案:   Use different file names. (Zoltan Bartos, Zoltan Arpadffy)
相关文件:   src/spell.c

Patch 7.3.081
问题:       Non-printable characters in <span class="Type">'statusline'</span> cause trouble. (ZyX)
解决方案:   Use transstr(). (partly by Caio Ariede)
相关文件:   src/screen.c

Patch 7.3.082
问题:       Leaking file descriptor when hostname doesn't exist.
解决方案:   Remove old debugging lines.
相关文件:   src/netbeans.c

Patch 7.3.083
问题:       When a read() or write() is interrupted by a signal it fails.
解决方案:   Add read_eintr() and write_eintr().
相关文件:   src/fileio.c, src/proto/fileio.pro, src/memfile.c, src/memline.c,
	    src/os_unix.c, src/undo.c, src/vim.h

Patch 7.3.084
问题:       When splitting the window, the new one scrolls with the cursor at
	    the top.
解决方案:   Compute w_fraction before setting the new height.
相关文件:   src/window.c

Patch 7.3.085 (after 7.3.083)
问题:       Inconsistency with preproc symbols.  void * computation.
解决方案:   Include vimio.h from vim.h.  Add type cast.
相关文件:   src/eval.c, src/ex_cmds.c, src/ex_cmds2.c, src/fileio.c,
	    src/if_cscope.c, src/if_sniff.c, src/main.c, src/memfile.c,
	    src/memline.c, src/netbeans.c, src/os_msdos.c, src/os_mswin.c,
	    src/os_win16.c, src/os_win32.c, src/spell.c, src/tag.c,
	    src/undo.c, src/vim.h

Patch 7.3.086
问题:       When using a mapping with an expression and there was no count,
	    v:count has the value of the previous command. (ZyX)
解决方案:   Also set v:count and v:count1 before getting the character that
	    could be a command or a count.
相关文件:   src/normal.c

Patch 7.3.087
问题:       EINTR is not always defined.
解决方案:   Include errno.h in vim.h.
相关文件:   src/if_cscope.c, src/if_tcl.c, src/integration.c, src/memline.c,
	    src/os_mswin.c, src/os_win16.c, src/os_win32.c, src/vim.h,
	    src/workshop.c

Patch 7.3.088
问题:       Ruby can't load Gems sometimes, may cause a crash.
解决方案:   Undefine off_t.  Use ruby_process_options(). (Yasuhiro Matsumoto)
相关文件:   src/if_ruby.c

Patch 7.3.089
问题:       Compiler warning on 64 bit MS-Windows.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/netbeans.c

Patch 7.3.090
问题:       Wrong help text for Cscope.
解决方案:   Adjust the help text for &quot;t&quot;. (Dominique Pelle)
相关文件:   src/if_cscope.c

Patch 7.3.091
问题:       &quot;vim -w foo&quot; writes special key codes for removed escape
	    sequences. (Josh Triplett)
解决方案:   Don't write K_IGNORE codes.
相关文件:   src/getchar.c, src/misc1.c, src/term.c, src/vim.h

Patch 7.3.092
问题:       Resizing the window when exiting.
解决方案:   Don't resize when exiting.
相关文件:   src/term.c

Patch 7.3.093
问题:       New DLL dependencies in MingW with gcc 4.5.0.
解决方案:   Add STATIC_STDCPLUS, LDFLAGS and split up WINDRES. (Guopeng Wen)
相关文件:   src/GvimExt/Make_ming.mak, src/Make_ming.mak

Patch 7.3.094
问题:       Using abs() requires type cast to int.
解决方案:   Use labs() so that the value remains long. (Hong Xu)
相关文件:   src/screen.c

Patch 7.3.095
问题:       Win32: In Chinese tear-off menu doesn't work. (Weasley)
解决方案:   Use menu_name_equal().  (Alex Jakushev)
相关文件:   src/menu.c

Patch 7.3.096
问题:       &quot;gvim -nb&quot; is not interruptible.  Leaking file descriptor on
	    netbeans connection error.
解决方案:   Check for <span class="Special">CTRL-C</span> typed.  Free file descriptor.  (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.3.097
问题:       Using &quot;:call&quot; inside &quot;if 0&quot; does not see that a function returns a
	    Dict and gives error for &quot;.&quot; as string concatenation.
解决方案:   Use eval0() to skip over the expression.  (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.3.098
问题:       Function that ignores error still causes called_emsg to be set.
	    E.g. when expand() fails the status line is disabled.
解决方案:   Move check for emsg_not_now() up. (James Vega)
相关文件:   src/message.c

Patch 7.3.099
问题:       Crash when splitting a window with zero height. (Yukihiro
	    Nakadaira)
解决方案:   Don't set the fraction in a window with zero height.
相关文件:   src/window.c

Patch 7.3.100
问题:       When using :normal v:count isn't set.
解决方案:   Call normal_cmd() with toplevel set to TRUE.
相关文件:   src/ex_docmd.c

Patch 7.3.101
问题:       ino_t defined with wrong size.
解决方案:   Move including auto/config.h before other includes. (Marius
	    Geminas)
相关文件:   src/if_ruby.c, src/if_lua.c

Patch 7.3.102
问题:       When using &quot;:make&quot;, typing the next command and then getting the
	    &quot;reload&quot; prompt the next command is (partly) eaten by the reload
	    prompt.
解决方案:   Accept ':' as a special character at the reload prompt to accept
	    the default choice and execute the command.
相关文件:   src/eval.c, src/fileio.c, src/gui.c, src/gui_xmdlg.c,
	    src/memline.c, src/message.c, src/proto/message.pro,
	    src/gui_athena.c, src/gui_gtk.c, src/gui_mac.c, src/gui_motif.c,
	    src/gui_photon.c, src/gui_w16.c, src/gui_w32.c, src/os_mswin.c
	    src/proto/gui_athena.pro, src/proto/gui_gtk.pro,
	    src/proto/gui_mac.pro, src/proto/gui_motif.pro,
	    src/proto/gui_photon.pro, src/proto/gui_w16.pro,
	    src/proto/gui_w32.pro

Patch 7.3.103
问题:       Changing <span class="Type">'fileformat'</span> and then using &quot;:w&quot; in an empty file sets
	    the <span class="Type">'modified'</span> option.
解决方案:   In unchanged() don't ignore <span class="Type">'ff'</span> for an empty file.
相关文件:   src/misc1.c, src/option.c, src/proto/option.pro, src/undo.c

Patch 7.3.104
问题:       Conceal: using Tab for cchar causes problems. (ZyX)
解决方案:   Do not accept a control character for cchar.
相关文件:   src/syntax.c

Patch 7.3.105
问题:       Can't get the value of &quot;b:changedtick&quot; with getbufvar().
解决方案:   Make it work. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.3.106
问题:       When <span class="Type">'cursorbind'</span> is set another window may scroll unexpectedly
	    when <span class="Type">'scrollbind'</span> is also set. (Xavier Wang)
解决方案:   Don't call update_topline() if <span class="Type">'scrollbind'</span> is set.
相关文件:   src/move.c

Patch 7.3.107
问题:       Year number for :undolist can be confused with month or day.
解决方案:   Change &quot;%y&quot; to &quot;%Y&quot;.
相关文件:   src/undo.c

Patch 7.3.108
问题:       Useless check for NULL when calling vim_free().
解决方案:   Remove the check. (Dominique Pelle)
相关文件:   src/eval.c, src/ex_cmds.c, src/os_win32.c

Patch 7.3.109
问题:       Processing new Esperanto spell file fails and crashes Vim.
	    (Dominique Pelle)
解决方案:   When running out of memory give an error.  Handle '?' in
	    COMPOUNDRULE properly.
相关文件:   src/spell.c

Patch 7.3.110
问题:       The &quot;nbsp&quot; item in <span class="Type">'listchars'</span> isn't used for &quot;:list&quot;.
解决方案:   Make it work. (Christian Brabandt)
相关文件:   src/message.c

Patch 7.3.111 (after 7.3.100)
问题:       Executing a :normal command in <span class="Type">'statusline'</span> evaluation causes the
	    cursor to move. (Dominique Pelle)
解决方案:   When updating the cursor for <span class="Type">'cursorbind'</span> allow the cursor beyond
	    the end of the line.  When evaluating <span class="Type">'statusline'</span> temporarily
	    reset <span class="Type">'cursorbind'</span>.
相关文件:   src/move.c, src/screen.c

Patch 7.3.112
问题:       Setting <span class="Type">'statusline'</span> to &quot;%!'asdf%' reads uninitialized memory.
解决方案:   Check for NUL after %.
相关文件:   src/buffer.c

Patch 7.3.113
问题:       Windows: Fall back directory for creating temp file is wrong.
解决方案:   Use &quot;.&quot; instead of empty string. (Hong Xu)
相关文件:   src/fileio.c

Patch 7.3.114
问题:       Potential problem in initialization when giving an error message
	    early.
解决方案:   Initialize <span class="Type">'verbosefile'</span> empty. (Ben Schmidt)
相关文件:   src/option.h

Patch 7.3.115
问题:       Vim can crash when tmpnam() returns NULL.
解决方案:   Check for NULL. (Hong Xu)
相关文件:   src/fileio.c

Patch 7.3.116
问题:       <span class="Type">'cursorline'</span> is displayed too short when there are concealed
	    characters and <span class="Type">'list'</span> is set.  (Dennis Preiser)
解决方案:   Check for <span class="Type">'cursorline'</span> when <span class="Type">'list'</span> is set. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.3.117
问题:       On some systems --as-needed does not work, because the &quot;tinfo&quot;
	    library is included indirectly from &quot;ncurses&quot;. (Charles Campbell)
解决方案:   In configure prefer using &quot;tinfo&quot; instead of &quot;ncurses&quot;.
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.118
问题:       Ruby uses SIGVTALARM which makes Vim exit. (Alec Tica)
解决方案:   Ignore SIGVTALARM. (Dominique Pelle)
相关文件:   src/os_unix.c

Patch 7.3.119
问题:       Build problem on Mac. (Nicholas Stallard)
解决方案:   Use &quot;extern&quot; instead of &quot;EXTERN&quot; for p_vfile.
相关文件:   src/option.h

Patch 7.3.120
问题:       The message for an existing swap file is too long to fit in a 25
	    line terminal.
解决方案:   Make the message shorter. (Chad Miller)
相关文件:   src/memline.c

Patch 7.3.121
问题:       Complicated <span class="Type">'statusline'</span> causes a crash. (Christian Brabandt)
解决方案:   Check that the number of items is not too big.
相关文件:   src/buffer.c

Patch 7.3.122
问题:       Having auto/config.mk in the repository causes problems.
解决方案:   Remove auto/config.mk from the distribution.  In the toplevel
	    Makefile copy it from the &quot;dist&quot; file.
相关文件:   Makefile, src/Makefile, src/auto/config.mk

Patch 7.3.123
问题:       ml_get error when executing register being recorded into, deleting
	    lines and <span class="Type">'conceallevel'</span> is set. (ZyX)
解决方案:   Don't redraw a line for concealing when it doesn't exist.
相关文件:   src/main.c

Patch 7.3.124
问题:       When writing a file in binary mode it may be missing the final EOL
	    if a file previously read was missing the EOL. (Kevin Goodsell)
解决方案:   Move the write_no_eol_lnum into the buffer struct.
相关文件:   src/structs.h, src/fileio.c, src/globals.h, src/os_unix.c

Patch 7.3.125
问题:       MSVC: Problem with quotes in link argument.
解决方案:   Escape backslashes and quotes. (Weasley)
相关文件:   src/Make_mvc.mak

Patch 7.3.126
问题:       Compiler warning for signed pointer.
解决方案:   Use unsigned int argument for sscanf().
相关文件:   src/blowfish.c

Patch 7.3.127
问题:       Compiler complains about comma.
解决方案:   Remove comma after last enum element.
相关文件:   src/ex_cmds2.c

Patch 7.3.128
问题:       Another compiler warning for signed pointer.
解决方案:   Use unsigned int argument for sscanf().
相关文件:   src/mark.c

Patch 7.3.129
问题:       Using integer like a boolean.
解决方案:   Nicer check for integer being non-zero.
相关文件:   src/tag.c

Patch 7.3.130
问题:       Variable misplaced in #ifdef.
解决方案:   Move clipboard_event_time outside of #ifdef.
相关文件:   src/gui_gtk_x11.c

Patch 7.3.131
问题:       Including errno.h too often.
解决方案:   Don't include errno.h in Unix header file.
相关文件:   src/os_unix.h

Patch 7.3.132
问题:       C++ style comments.
解决方案:   Change to C comments.
相关文件:   src/if_python3.c

Patch 7.3.133
问题:       When using encryption it's not clear what method was used.
解决方案:   In the file message show &quot;blowfish&quot; when using blowfish.
相关文件:   src/fileio.c

Patch 7.3.134
问题:       Drag-n-drop doesn't work in KDE Dolphin.
解决方案:   Add GDK_ACTION_MOVE flag. (Florian Degner)
相关文件:   src/gui_gtk_x11.c

Patch 7.3.135
问题:       When there is no previous substitute pattern, the previous search
	    pattern is used.  The other way around doesn't work.
解决方案:   When there is no previous search pattern, use the previous
	    substitute pattern if possible. (Christian Brabandt)
相关文件:   src/search.c

Patch 7.3.136
问题:       Duplicate include of assert.h.
解决方案:   Remove it.
相关文件:   src/if_cscope.c

Patch 7.3.137 (after 7.3.091)
问题:       When <span class="Type">'lazyredraw'</span> is set the screen may not be updated. (Ivan
	    Krasilnikov)
解决方案:   Call update_screen() before waiting for input.
相关文件:   src/misc1.c, src/getchar.c

Patch 7.3.138
问题:       &quot;:com&quot; changes the multi-byte text of :echo. (Dimitar Dimitrov)
解决方案:   Search for K_SPECIAL as a byte, not a character. (Ben Schmidt)
相关文件:   src/ex_docmd.c

Patch 7.3.139 (after 7.3.137)
问题:       When <span class="Type">'lazyredraw'</span> is set &quot;:ver&quot; output can't be read.
解决方案:   Don't redraw the screen when at a prompt or command line.
相关文件:   src/getchar.c, src/message.c, src/misc1.c

Patch 7.3.140
问题:       Crash when drawing the &quot;$&quot; at end-of-line for list mode just after
	    the window border and <span class="Type">'cursorline'</span> is set.
解决方案:   Don't check for <span class="Type">'cursorline'</span>. (Quentin Carbonneaux)
相关文件:   src/screen.c

Patch 7.3.141
问题:       When a key code is not set get a confusing error message.
解决方案:   Change the error message to say the key code is not set.
相关文件:   src/option.c, runtime/doc/options.txt

Patch 7.3.142
问题:       Python stdout doesn't have a flush() method, causing an import to
	    fail.
解决方案:   Add a dummy flush() method. (Tobias Columbus)
相关文件:   src/if_py_both.h

Patch 7.3.143
问题:       Memfile is not tested sufficiently.  Looking up blocks in a
	    memfile is slow when there are many blocks.
解决方案:   Add high level test and unittest.  Adjust the number of hash
	    buckets to the number of blocks.  (Ivan Krasilnikov)
相关文件:   Filelist, src/Makefile, src/main.c, src/memfile.c,
	    src/memfile_test.c src/structs.h src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mak,
	    src/testdir/Makefile, src/testdir/test77.in, src/testdir/test77.ok

Patch 7.3.144
问题:       Crash with &quot;:python help(dir)&quot;. (Kearn Holliday)
解决方案:   Fix the way the type is set on objects. (Tobias Columbus)
相关文件:   src/if_python.c

Patch 7.3.145 (after 7.3.144)
问题:       Can't build with Python dynamically loading.
解决方案:   Add dll_PyType_Ready.
相关文件:   src/if_python.c

Patch 7.3.146
问题:       It's possible to assign to a read-only member of a dict.
	    It's possible to create a global variable &quot;0&quot;. (ZyX)
            It's possible to add a v: variable with &quot;:let v:.name = 1&quot;.
解决方案:   Add check for dict item being read-only.
	    Check the name of g: variables.
	    Disallow adding v: variables.
相关文件:   src/eval.c

Patch 7.3.147 (after 7.3.143)
问题:       Can't build on HP-UX.
解决方案:   Remove an unnecessary backslash. (John Marriott)
相关文件:   src/Makefile

Patch 7.3.148
问题:       A syntax file with a huge number of items or clusters causes weird
	    behavior, a hang or a crash. (Yukihiro Nakadaira)
解决方案:   Check running out of IDs. (partly by Ben Schmidt)
相关文件:   src/syntax.c

Patch 7.3.149
问题:       The cursor disappears after the processing of the 'setDot'
	    netbeans command when vim runs in a terminal.
解决方案:   Show the cursor after a screen update. (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.3.150
问题:       readline() does not return the last line when the NL is missing.
	    (Hong Xu)
解决方案:   When at the end of the file Also check for a previous line.
相关文件:   src/eval.c

Patch 7.3.151 (after 7.3.074)
问题:       When &quot;unnamedplus&quot; is in <span class="Type">'clipboard'</span> the selection is sometimes
	    also copied to the star register.
解决方案:   Avoid copy to the star register when undesired. (James Vega)
相关文件:   src/ops.c

Patch 7.3.152
问题:       Xxd does not check for errors from library functions.
解决方案:   Add error checks. (Florian Zumbiehl)
相关文件:   src/xxd/xxd.c

Patch 7.3.153 (after 7.3.152)
问题:       Compiler warning for ambiguous else, missing prototype.
解决方案:   Add braces. (Dominique Pelle)  Add prototype for die().
相关文件:   src/xxd/xxd.c

Patch 7.3.154 (after 7.3.148)
问题:       Can't compile with tiny features. (Tony Mechelynck)
解决方案:   Move #define outside of #ifdef.
相关文件:   src/syntax.c

Patch 7.3.155
问题:       Crash when using map(), filter() and remove() on v:. (ZyX)
            Also for extend(). (Yukihiro Nakadaira)
解决方案:   Mark v: as locked.  Also correct locking error messages.
相关文件:   src/eval.c

Patch 7.3.156
问题:       Tty names possibly left unterminated.
解决方案:   Use vim_strncpy() instead of strncpy().
相关文件:   src/pty.c

Patch 7.3.157
问题:       Superfluous assignment.
解决方案:   Remove assignment.
相关文件:   src/misc1.c

Patch 7.3.158
问题:       Might use uninitialized memory in C indenting.
解决方案:   Init arrays to empty.
相关文件:   src/misc1.c

Patch 7.3.159
问题:       Using uninitialized pointer when out of memory.
解决方案:   Check for NULL return value.
相关文件:   src/mbyte.c

Patch 7.3.160
问题:       Unsafe string copying.
解决方案:   Use vim_strncpy() instead of strcpy().  Use vim_strcat() instead
	    of strcat().
相关文件:   src/buffer.c, src/ex_docmd.c, src/hardcopy.c, src/menu.c,
	    src/misc1.c, src/misc2.c, src/proto/misc2.pro, src/netbeans.c,
	    src/os_unix.c, src/spell.c, src/syntax.c, src/tag.c

Patch 7.3.161
问题:       Items on the stack may be too big.
解决方案:   Make items static or allocate them.
相关文件:   src/eval.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
	    src/fileio.c, src/hardcopy.c, src/quickfix.c, src/main.c,
	    src/netbeans.c, src/spell.c, src/tag.c, src/vim.h, src/xxd/xxd.c

Patch 7.3.162
问题:       No error message when assigning to a list with an index out of
	    range. (Yukihiro Nakadaira)
解决方案:   Add the error message.
相关文件:   src/eval.c

Patch 7.3.163
问题:       For the default of <span class="Type">'shellpipe'</span> &quot;mksh&quot; and &quot;pdksh&quot; are not
	    recognized.
解决方案:   Recognize these shell names.
相关文件:   src/option.c

Patch 7.3.164
问题:       C-indenting: a preprocessor statement confuses detection of a
	    function declaration.
解决方案:   Ignore preprocessor lines. (Lech Lorens)  Also recognize the style
	    to put a comma before the argument name.
相关文件:   src/misc1.c, testdir/test3.in, testdir/test3.ok

Patch 7.3.165
问题:       &quot;:find&quot; completion does not escape spaces in a directory name.
	    (Isz)
解决方案:   Add backslashes for EXPAND_FILES_IN_PATH. (Carlo Teubner)
相关文件:   src/ex_getln.c

Patch 7.3.166
问题:       Buffer on the stack may be too big
解决方案:   Allocate the space.
相关文件:   src/option.c

Patch 7.3.167
问题:       When using the internal grep QuickFixCmdPost is not triggered.
	    (Yukihiro Nakadaira)
解决方案:   Change the place where autocommands are triggered.
相关文件:   src/quickfix.c

Patch 7.3.168
问题:       When the second argument of input() contains a CR the text up to
	    that is used without asking the user. (Yasuhiro Matsumoto)
解决方案:   Change CR, NL and ESC in the text to a space.
相关文件:   src/getchar.c

Patch 7.3.169
问题:       Freeing memory already freed, warning from static code analyzer.
解决方案:   Initialize pointers to NULL, correct use of &quot;mustfree&quot;. (partly by
	    Dominique Pelle)
相关文件:   src/mis1.c

Patch 7.3.170
问题:       VMS Makefile for testing was not updated for test77.
解决方案:   Add test77 to the Makefile.
相关文件:   src/testdir/Make_vms.mms

Patch 7.3.171
问题:       When the clipboard isn't supported: &quot;:yank*&quot; gives a confusing
	    error message.
解决方案:   Specifically mention that the register name is invalid.
	    (Jean-Rene David)
相关文件:   runtime/doc/change.txt, src/ex_docmd.c, src/globals.h

Patch 7.3.172
问题:       MS-Windows: rename() might delete the file if the name differs but
	    it's actually the same file.
解决方案:   Use the file handle to check if it's the same file. (Yukihiro
	    Nakadaira)
相关文件:   src/if_cscope.c, src/fileio.c, src/os_win32.c,
	    src/proto/os_win32.pro, src/vim.h

Patch 7.3.173
问题:       After using setqflist() to make the quickfix list empty &quot;:cwindow&quot;
	    may open the window anyway.  Also after &quot;:vimgrep&quot;.
解决方案:   Correctly check whether the list is empty. (Ingo Karkat)
相关文件:   src/quickfix.c

Patch 7.3.174
问题:       When Exuberant ctags binary is exctags it's not found.
解决方案:   Add configure check for exctags. (Hong Xu)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.175
问题:       When <span class="Type">'colorcolumn'</span> is set locally to a window, &quot;:new&quot; opens a
	    window with the same highlighting but <span class="Type">'colorcolumn'</span> is empty.
	    (Tyru)
解决方案:   Call check_colorcolumn() after clearing and copying options.
	    (Christian Brabandt)
相关文件:   src/buffer.c

Patch 7.3.176
问题:       Ruby linking doesn't work properly on Mac OS X.
解决方案:   Fix the configure check for Ruby. (Bjorn Winckler)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.177
问题:       MS-Windows: mkdir() doesn't work properly when <span class="Type">'encoding'</span> is
	    &quot;utf-8&quot;.
解决方案:   Convert to utf-16. (Yukihiro Nakadaira)
相关文件:   src/os_win32.c, src/os_win32.h, src/proto/os_win32.pro

Patch 7.3.178
问题:       C-indent doesn't handle code right after { correctly.
解决方案:   Fix detecting unterminated line. (Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.179
问题:       C-indent doesn't handle colon in string correctly.
解决方案:   Skip the string. (Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.180
问题:       When both a middle part of <span class="Type">'comments'</span> matches and an end part, the
	    middle part was used erroneously.
解决方案:   After finding the middle part match continue looking for a better
	    end part match. (partly by Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.181
问题:       When repeating the insert of <span class="Special">CTRL-V</span> or a digraph the display may
	    not be updated correctly.
解决方案:   Only call edit_unputchar() after edit_putchar(). (Lech Lorens)
相关文件:   src/edit.c

Patch 7.3.182 (after 7.3.180)
问题:       Compiler warning for uninitialized variable.
解决方案:   Add dummy initializer.
相关文件:   src/misc1.c

Patch 7.3.183 (after 7.3.174)
问题:       When Exuberant ctags binary is exuberant-ctags it's not found.
解决方案:   Add configure check for exuberant-ctags.
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.184
问题:       Static code analysis errors in riscOS.
解决方案:   Make buffer size bigger. (Dominique Pelle)
相关文件:   src/gui_riscos.c

Patch 7.3.185
问题:       &quot;:windo g/pattern/q&quot; closes windows and reports &quot;<span class="Special">N</span> more lines&quot;.
	    (Tim Chase)
解决方案:   Remember what buffer &quot;:global&quot; started in. (Jean-Rene David)
相关文件:   src/ex_cmds.c

Patch 7.3.186
问题:       When <span class="Type">'clipboard'</span> contains &quot;unnamed&quot; or &quot;unnamedplus&quot; the value of
	    v:register is wrong for operators without a specific register.
解决方案:   Adjust the register according to <span class="Type">'clipboard'</span>. (Ingo Karkat)
相关文件:   src/normal.c

Patch 7.3.187
问题:       The RISC OS port has obvious errors and is not being maintained.
解决方案:   Remove the RISC OS files and code.
相关文件:   src/ascii.h, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/fileio.c, src/globals.h, src/gui.c, src/gui.h,
	    src/main.c, src/memfile.c, src/memline.c, src/misc1.c,
	    src/proto.h, src/quickfix.c, src/search.c, src/structs.h,
	    src/term.c, src/termlib.c, src/version.c, src/vim.h,
	    src/gui_riscos.h, src/os_riscos.h, src/gui_riscos.c,
	    src/os_riscos.c, runtime/doc/os_risc.txt

Patch 7.3.188
问题:       More RISC OS files to remove.
解决方案:   Remove them.  Update the file list.
相关文件:   src/proto/gui_riscos.pro, src/proto/os_riscos.pro, Filelist

Patch 7.3.189 (after 7.3.186)
问题:       Can't build without +clipboard feature. (Christian Ebert)
解决方案:   Add the missing #ifdef.
相关文件:   src/normal.c

Patch 7.3.190
问题:       When there is a &quot;containedin&quot; syntax argument highlighting may be
	    wrong. (Radek)
解决方案:   Reset current_next_list. (Ben Schmidt)
相关文件:   src/syntax.c

Patch 7.3.191
问题:       Still some RISC OS stuff to remove.
解决方案:   Remove files and lines. (Hong Xu)
	    Remove the <span class="Type">'osfiletype'</span> option code.
相关文件:   README_extra.txt, src/Make_ro.mak, src/INSTALL, src/Makefile,
	    src/buffer.c, src/eval.c, src/feature.h, src/option.c,
	    src/option.h, src/structs.h, src/version.c, src/pty.c, Filelist

Patch 7.3.192
问题:       Ex command &quot;:s/ \?/ /g&quot; splits multi-byte characters into bytes.
	    (Dominique Pelle)
解决方案:   Advance over whole character instead of one byte.
相关文件:   src/ex_cmds.c

Patch 7.3.193
问题:       In the command line window &quot;:close&quot; doesn't work properly. (Tony
	    Mechelynck)
解决方案:   Use Ctrl_C instead of K_IGNORE for cmdwin_result. (Jean-Rene
	    David)
相关文件:   src/ex_docmd.c, src/ex_getln.c

Patch 7.3.194
问题:       When &quot;b&quot; is a symlink to directory &quot;a&quot;, resolve(&quot;b/&quot;) doesn't
	    result in &quot;a/&quot;.  (ZyX)
解决方案:   Remove the trailing slash. (Jean-Rene David)
相关文件:   src/eval.c

Patch 7.3.195
问题:       &quot;} else&quot; causes following lines to be indented too much. (Rouben
	    Rostamian)
解决方案:   Better detection for the &quot;else&quot;. (Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.196
问题:       Can't intercept a character that is going to be inserted.
解决方案:   Add the InsertCharPre autocommand event. (Jakson A. Aquino)
相关文件:   runtime/doc/autocmd.txt, runtime/doc/eval.txt,
	    runtime/doc/map.txt, src/edit.c, src/eval.c, src/fileio.c,
	    src/vim.h

Patch 7.3.197
问题:       When a QuickfixCmdPost event removes all errors, Vim still tries
	    to jump to the first error, resulting in E42.
解决方案:   Get the number of error after the autocmd event. (Mike Lundy)
相关文件:   src/quickfix.c

Patch 7.3.198
问题:       No completion for &quot;:lang&quot;.
解决方案:   Get locales to complete from. (Dominique Pelle)
相关文件:   src/eval.c, src/ex_cmds2.c, src/ex_getln.c,
	    src/proto/ex_cmds2.pro, src/proto/ex_getln.pro, src/vim.h

Patch 7.3.199
问题:       MS-Windows: Compilation problem of OLE with MingW compiler.
解决方案:   Put #ifdef around declarations. (Guopeng Wen)
相关文件:   src/if_ole.h

Patch 7.3.200 (after 7.3.198)
问题:       <span class="Special">CTRL-D</span> doesn't complete :lang.
解决方案:   Add the missing part of the change. (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.3.201 (after 7.3.195)
问题:       &quot;} else&quot; still causes following lines to be indented too much.
解决方案:   Better detection for the &quot;else&quot; block. (Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.202
问题:       Cannot influence the indent inside a namespace.
解决方案:   Add the &quot;<span class="Special">N</span>&quot; <span class="Type">'cino'</span> parameter. (Konstantin Lepa)
相关文件:   runtime/doc/indent.txt, src/misc1.c, src/testdir/test3.in,
	    src/testdir/test3.ok

Patch 7.3.203
问题:       MS-Windows: Can't run an external command without a console window.
解决方案:   Support &quot;:!start /b cmd&quot;. (Xaizek)
相关文件:   runtime/doc/os_win32.txt, src/os_win32.c

Patch 7.3.204 (after 7.3.201)
问题:       Compiler warning.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/misc1.c

Patch 7.3.205
问题:       Syntax &quot;extend&quot; doesn't work correctly.
解决方案:   Avoid calling check_state_ends() recursively (Ben Schmidt)
相关文件:   src/syntax.c

Patch 7.3.206
问题:       64bit MS-Windows compiler warning.
解决方案:   Use HandleToLong() instead of type cast. (Mike Williams)
相关文件:   src/gui_w32.c

Patch 7.3.207
问题:       Can't compile with MSVC with pentium4 and 64 bit.
解决方案:   Only use SSE2 for 32 bit. (Mike Williams)
相关文件:   src/Make_mvc.mak

Patch 7.3.208
问题:       Early terminated if statement.
解决方案:   Remove the semicolon. (Lech Lorens)
相关文件:   src/gui_mac.c

Patch 7.3.209
问题:       MSVC Install instructions point to wrong batch file.
解决方案:   Add a batch file for use with MSVC 10.
相关文件:   src/msvc2010.bat, src/INSTALLpc.txt, Filelist

Patch 7.3.210
问题:       Can't always find the file when using cscope.
解决方案:   Add the <span class="Type">'cscoperelative'</span> option. (Raghavendra D Prabhu)
相关文件:   runtime/doc/if_cscop.txt, runtime/doc/options.txt,
	    src/if_cscope.c

Patch 7.3.211 (after 7.3.210)
问题:       Compiler warning.
解决方案:   Add type cast.
相关文件:   src/if_cscope.c

Patch 7.3.212
问题:       With Python 3.2 &quot;:py3&quot; fails.
解决方案:   Move PyEval_InitThreads() to after Py_Initialize(). (Roland
	    Puntaier)  Check abiflags in configure. (Andreas Behr)
相关文件:   src/if_python3.c, src/auto/configure, src/configure.in

Patch 7.3.213
问题:       Javascript object literal is not indented correctly.
解决方案:   Make a special case for when &quot;J1&quot; is in <span class="Type">'cino'</span>. (Luc Deschenaux)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.214
问题:       The text displayed by &quot;:z-&quot; isn't exactly like old Vi.
解决方案:   Add one to the start line number. (ChangZhuo Chen)
相关文件:   src/ex_cmds.c

Patch 7.3.215 (after 7.3.210)
问题:       Wrong file names in previous patch. (Toothpik)
解决方案:   Include the option changes.
相关文件:   src/option.c, src/option.h

Patch 7.3.216
问题:       When recovering a file a range of lines is missing. (Charles Jie)
解决方案:   Reset the index when advancing to the next pointer block.  Add a
	    test to verify recovery works.
相关文件:   src/memline.c, src/testdir/test78.in, src/testdir/test78.ok,
	    src/testdir/Makefile, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.3.217
问题:       Inside an &quot;if&quot; a &quot;:wincmd&quot; causes problems.
解决方案:   When skipping commands let &quot;:wincmd&quot; skip over its argument.
相关文件:   src/ex_docmd.c

Patch 7.3.218 (after 7.3.212)
问题:       Tiny configuration problem with Python 3.
解决方案:   Add abiflags in one more place. (Andreas Behr)
相关文件:   src/auto/configure, src/configure.in

Patch 7.3.219
问题:       Can't compile with GTK on Mac.
解决方案:   Add some #ifdef trickery. (Ben Schmidt)
相关文件:   src/os_mac_conv.c, src/os_macosx.m, src/vim.h

Patch 7.3.220
问题:       Python 3: vim.error is a <span class="Type">'str'</span> instead of an 'Exception' object,
	    so <span class="Type">'except'</span> or <span class="Type">'raise'</span> it causes a 'SystemError' exception.
	    Buffer objects do not support slice assignment.
	    When exchanging text between Vim and Python, multibyte texts become
	    garbage or cause Unicode Exceptions, etc.
	    'py3file' tries to read in the file as Unicode, sometimes causes
	    UnicodeDecodeException
解决方案:   Fix the problems. (lilydjwg)
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.3.221
问题:       Text from the clipboard is sometimes handled as linewise, but not
	    consistently.
解决方案:   Assume the text is linewise when it ends in a CR or NL.
相关文件:   src/gui_gtk_x11.c, src/gui_mac.c, src/ops.c, src/os_msdos.c,
	    src/os_mswin.c, src/os_qnx.c, src/ui.c

Patch 7.3.222
问题:       Warning for building GvimExt.
解决方案:   Comment-out the DESCRIPTION line. (Mike Williams)
相关文件:   src/GvimExt/gvimext.def, src/GvimExt/gvimext_ming.def

Patch 7.3.223
问题:       MingW cross compilation doesn't work with tiny features.
解决方案:   Move acp_to_enc(), enc_to_utf16() and utf16_to_enc() outside of
	    &quot;#ifdef CLIPBOARD&quot;.  Fix typo in makefile.
相关文件:   src/Make_ming.mak, src/os_mswin.c

Patch 7.3.224
问题:       Can't pass dict to sort function.
解决方案:   Add the optional <span class="Special">{dict}</span> argument to sort(). (ZyX)
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.3.225
问题:       Using &quot;\n&quot; in a substitute inside &quot;:s&quot; does not result in a line
	    break.
解决方案:   Change behavior inside vim_regexec_nl().   Add tests.  (Motoya
	    Kurotsu)
相关文件:   src/regexp.c, src/testdir/test79.in, src/testdir/test79.ok,
	    src/testdir/test80.in, src/testdir/test80.ok,
	    src/testdir/Makefile, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.3.226
问题:       On a 64 bit system &quot;syn sync fromstart&quot; is very slow.  (Bjorn
	    Steinbrink)
解决方案:   Store the state when starting to parse from the first line.
相关文件:   src/syntax.c

Patch 7.3.227 (after 7.3.221)
问题:       Mac OS doesn't have the linewise clipboard fix.
解决方案:   Also change the Mac OS file. (Bjorn Winckler)
相关文件:   src/os_macosx.m

Patch 7.3.228
问题:       &quot;2gj&quot; does not always move to the correct position.
解决方案:   Get length of line after moving to a next line. (James Vega)
相关文件:   src/normal.c

Patch 7.3.229
问题:       Using fork() makes gvim crash on Mac when build with
	    CoreFoundation.
解决方案:   Disallow fork() when __APPLE__ is defined. (Hisashi T Fujinaka)
相关文件:   src/gui.c

Patch 7.3.230
问题:       &quot;:wundo&quot; and &quot;:rundo&quot; don't unescape their argument.  (Aaron
	    Thoma)
解决方案:   Use FILE1 instead of XFILE.
相关文件:   src/ex_cmds.h

Patch 7.3.231
问题:       Runtime file patches failed.
解决方案:   Redo the patches made against the patched files instead of the
	    files in the mercurial repository.
相关文件:   runtime/doc/indent.txt, runtime/doc/os_win32.txt

Patch 7.3.232
问题:       Python doesn't compile without +multi_byte
解决方案:   Use &quot;latin1&quot; when MULTI_BYTE is not defined.
相关文件:   src/if_py_both.h

Patch 7.3.233
问题:       &quot;:scriptnames&quot; and &quot;:breaklist&quot; show long file names.
解决方案:   Shorten to use &quot;~/&quot; when possible. (Jean-Rene David)
相关文件:   src/ex_cmds2.c

Patch 7.3.234
问题:       With GTK menu may be popping down.
解决方案:   Use event time instead of GDK_CURRENT_TIME. (Hong Xu)
相关文件:   src/gui.c, src/gui.h, src/gui_gtk.c, src/gui_gtk_x11.c

Patch 7.3.235
问题:       &quot;;&quot; gets stuck on a &quot;t&quot; command, it's not useful.
解决方案:   Add the ';' flag in <span class="Type">'cpo'</span>. (Christian Brabandt)
相关文件:   runtime/doc/motion.txt, runtime/doc/options.txt, src/option.h,
	    src/search.c src/testdir/test81.in, src/testdir/test81.ok,
	    src/testdir/Makefile, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.3.236 (after 7.3.232)
问题:       Python 3 doesn't compile without +multi_byte
解决方案:   Use &quot;latin1&quot; when MULTI_BYTE is not defined. (lilydjwg)
相关文件:   src/if_python3.c

Patch 7.3.237
问题:       &quot;filetype&quot; completion doesn't work on Windows. (Yue Wu)
解决方案:   Don't use a glob pattern for the directories, use a list of
	    directories. (Dominique Pelle)
相关文件:   src/ex_getln.c

Patch 7.3.238
问题:       Compiler warning for conversion.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/ex_getln.c

Patch 7.3.239
问题:       Python corrects the cursor column without taking <span class="Type">'virtualedit'</span>
	    into account. (lilydjwg)
解决方案:   Call check_cursor_col_win().
相关文件:   src/if_py_both.h, src/mbyte.c, src/misc2.c, src/normal.c,
	    src/proto/mbyte.pro, src/proto/misc2.pro

Patch 7.3.240
问题:       External commands can't use pipes on MS-Windows.
解决方案:   Implement pipes and use them when <span class="Type">'shelltemp'</span> isn't set. (Vincent
	    Berthoux)
相关文件:   src/eval.c, src/ex_cmds.c, src/misc2.c, src/os_unix.c,
	    src/os_win32.c, src/proto/misc2.pro, src/ui.c

Patch 7.3.241
问题:       Using <span class="Special">CTRL-R</span> <span class="Special">CTRL-W</span> on the command line may insert only part of
	    the word.
解决方案:   Use the cursor position instead of assuming it is at the end of
	    the command. (Tyru)
相关文件:   src/ex_getln.c

Patch 7.3.242
问题:       Illegal memory access in after_pathsep().
解决方案:   Check that the pointer is not at the start of the file name.
	    (Dominique Pelle)
相关文件:   src/misc2.c

Patch 7.3.243
问题:       Illegal memory access in readline().
解决方案:   Swap the conditions. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.3.244
问题:       MS-Windows: Build problem with old compiler. (John Beckett)
解决方案:   Only use HandleToLong() when available. (Mike Williams)
相关文件:   src/gui_w32.c

Patch 7.3.245
问题:       Python 3.2 libraries not correctly detected.
解决方案:   Add the suffix to the library name. (Niclas Zeising)
相关文件:   src/auto/configure, src/configure.in

Patch 7.3.246 (after 7.3.235)
问题:       Repeating &quot;f4&quot; in &quot;4444&quot; skips one 4.
解决方案:   Check the t_cmd flag. (Christian Brabandt)
相关文件:   src/search.c

Patch 7.3.247
问题:       Running tests changes the users viminfo file.  Test for patch
	    7.3.246 missing.
解决方案:   Add &quot;nviminfo&quot; to the <span class="Type">'viminfo'</span> option.  Include the test.
相关文件:   src/testdir/test78.in, src/testdir/test81.in

Patch 7.3.248
问题:       PC Install instructions missing install instructions.
解决方案:   Step-by-step explanation. (Michael Soyka)
相关文件:   src/INSTALLpc.txt

Patch 7.3.249
问题:       Wrong indenting for array initializer.
解决方案:   Detect '}' in a better way. (Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.250
问题:       Python: Errors in Unicode characters not handled nicely.
解决方案:   Add the surrogateescape error handler. (lilydjwg)
相关文件:   src/if_python3.c

Patch 7.3.251
问题:       &quot;gH<span class="Special">&lt;Del&gt;</span>&quot; deletes the current line, except when it's the last
	    line.
解决方案:   Set the &quot;include&quot; flag to indicate the last line is to be deleted.
相关文件:   src/normal.c, src/ops.c

Patch 7.3.252 (after 7.3.247)
问题:       Tests fail. (David Northfield)
解决方案:   Add missing update for .ok file.
相关文件:   src/testdir/test81.ok

Patch 7.3.253
问题:       &quot;echo <span class="Type">'abc'</span> &gt; ''&quot; returns 0 or 1, depending on <span class="Type">'ignorecase'</span>.
	    Checks in mb_strnicmp() for illegal and truncated bytes are
	    wrong.  Should not assume that byte length is equal before case
	    folding.
解决方案:   Add utf_safe_read_char_adv() and utf_strnicmp(). Add a test for
	    this. (Ivan Krasilnikov)
相关文件:   src/mbyte.c src/testdir/test82.in, src/testdir/test82.ok,
	    src/testdir/Makefile, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.3.254
问题:       The coladd field is not reset when setting the line number for a
	    &quot;:call&quot; command.
解决方案:   Reset it.
相关文件:   src/eval.c

Patch 7.3.255
问题:       When editing a file such as &quot;File[2010-08-15].vim&quot; an E16 error is
	    given. (Manuel Stol)
解决方案:   Don't give an error for failing to compile the regexp.
相关文件:   src/ex_docmd.c, src/misc1.c, src/vim.h

Patch 7.3.256
问题:       Javascript indenting not sufficiently tested.
解决方案:   Add more tests. (Luc Deschenaux)  Mark the lines that are indented
	    wrong.
相关文件:   src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.257
问题:       Not all completions are available to user commands.
解决方案:   Add &quot;color&quot;, &quot;compiler&quot;, &quot;file_in_path&quot; and &quot;locale&quot;. (Dominique
	    Pelle)
相关文件:   src/ex_docmd.c, runtime/doc/map.txt

Patch 7.3.258
问题:       MS-Windows: The edit with existing vim context menu entries can be
	    unwanted.
解决方案:   Let a registry entry disable them. (Jerome Vuarand)
相关文件:   src/GvimExt/gvimext.cpp

Patch 7.3.259
问题:       Equivalence classes only work for latin characters.
解决方案:   Add the Unicode equivalence characters. (Dominique Pelle)
相关文件:   runtime/doc/pattern.txt, src/regexp.c, src/testdir/test44.in,
	    src/testdir/test44.ok

Patch 7.3.260
问题:       CursorHold triggers on an incomplete mapping. (Will Gray)
解决方案:   Don't trigger CursorHold when there is typeahead.
相关文件:   src/fileio.c

Patch 7.3.261
问题:       G++ error message erroneously recognized as error.
解决方案:   Ignore &quot;In file included from&quot; line also when it ends in a colon.
	    (Fernando Castillo)
相关文件:   src/option.h

Patch 7.3.262
问题:       Photon code style doesn't match Vim style.
解决方案:   Clean up some of it.  (Elias Diem)
相关文件:   src/gui_photon.c

Patch 7.3.263
问题:       Perl and Tcl have a few code style problems.
解决方案:   Clean it up.  (Elias Diem)
相关文件:   src/if_perl.xs, src/if_tcl.c

Patch 7.3.264
问题:       When the current directory name contains wildcard characters, such
	    as &quot;foo[with]bar&quot;, the tags file can't be found.  (Jeremy
	    Erickson)
解决方案:   When searching for matching files also match without expanding
	    wildcards.  This is a bit of a hack.
相关文件:   src/vim.h, src/misc1.c, src/misc2.c

Patch 7.3.265
问题:       When storing a pattern in search history there is no proper check
	    for the separator character.
解决方案:   Pass the separator character to in_history(). (Taro Muraoka)
相关文件:   src/ex_getln.c

Patch 7.3.266
问题:       In gvim with iBus typing space in Insert mode doesn't work.
解决方案:   Clear xim_expected_char after checking it.
相关文件:   src/mbyte.c

Patch 7.3.267
问题:       Ruby on Mac OS X 10.7 may crash.
解决方案:   Avoid alloc(0). (Bjorn Winckler)
相关文件:   src/if_ruby.c

Patch 7.3.268
问题:       Vim freezes when executing an external command with zsh.
解决方案:   Use O_NOCTTY both in the master and slave. (Bjorn Winckler)
相关文件:   src/os_unix.c

Patch 7.3.269
问题:       <span class="Type">'shellcmdflag'</span> only works with one flag.
解决方案:   Split into multiple arguments. (Gary Johnson)
相关文件:   src/os_unix.c

Patch 7.3.270
问题:       Illegal memory access.
解决方案:   Swap conditions. (Dominique Pelle)
相关文件:   src/ops.c

Patch 7.3.271
问题:       Code not following Vim coding style.
解决方案:   Fix the style. (Elias Diem)
相关文件:   src/gui_photon.c

Patch 7.3.272
问题:       &quot;:put =list&quot; does not add an empty line for a trailing empty
	    item.
解决方案:   Add a trailing NL when turning a list into a string.
相关文件:   src/eval.c

Patch 7.3.273
问题:       A BOM in an error file is seen as text. (Aleksey Baibarin)
解决方案:   Remove the BOM from the text before evaluating. (idea by Christian
	    Brabandt)
相关文件:   src/quickfix.c, src/mbyte.c, src/proto/mbyte.pro,
	    src/testdir/test10.in

Patch 7.3.274
问题:       With concealed characters tabs do not have the right size.
解决方案:   Use VCOL_HLC instead of vcol. (Eiichi Sato)
相关文件:   src/screen.c

Patch 7.3.275
问题:       MS-Windows: When using a black background some screen updates
	    cause the window to flicker.
解决方案:   Add WS_CLIPCHILDREN to CreateWindow().  (René Aguirre)
相关文件:   src/gui_w32.c

Patch 7.3.276
问题:       GvimExt sets $LANG in the wrong way.
解决方案:   Save the environment and use it for gvim. (Yasuhiro Matsumoto)
相关文件:   src/GvimExt/gvimext.cpp

Patch 7.3.277
问题:       MS-Windows: some characters do not show in dialogs.
解决方案:   Use the wide methods when available. (Yanwei Jia)
相关文件:   src/gui_w32.c, src/gui_w48.c, src/os_mswin.c, src/os_win32.c,
	    src/os_win32.h

Patch 7.3.278
问题:       Passing the file name to open in VisVim doesn't work.
解决方案:   Adjust the index and check for end of buffer. (Jiri Sedlak)
相关文件:   src/VisVim/Commands.cpp

Patch 7.3.279
问题:       With GTK, when gvim is full-screen and a tab is opened and using a
	    specific monitor configuration the window is too big.
解决方案:   Adjust the window size like on MS-Windows. (Yukihiro Nakadaira)
相关文件:   src/gui.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro

Patch 7.3.280
问题:       &quot;:lmake&quot; does not update the quickfix window title.
解决方案:   Update the title. (Lech Lorens)
相关文件:   src/quickfix.c, src/testdir/test10.in, src/testdir/test10.ok

Patch 7.3.281
问题:       After using &quot;expand('%:8')&quot; the buffer name is changed.
解决方案:   Make a copy of the file name before shortening it.
相关文件:   src/eval.c

Patch 7.3.282
问题:       When using input() and :echo in a loop the displayed text is
	    incorrect. (Benjamin Fritz)
解决方案:   Only restore the cursor position when there is a command line.
	    (Ben Schmidt)
相关文件:   src/ex_getln.c

Patch 7.3.283
问题:       An expression mapping with a multi-byte character containing a
	    0x80 byte gets messed up. (ZyX)
解决方案:   Unescape the expression before evaluating it (Yukihiro Nakadaira)
相关文件:   src/getchar.c

Patch 7.3.284
问题:       The str2special() function doesn't handle multi-byte characters
	    properly.
解决方案:   Recognize multi-byte characters. (partly by Vladimir Vichniakov)
相关文件:   src/getchar.c, src/message.c, src/misc2.c

Patch 7.3.285 (after 7.3.284)
问题:       Mapping <span class="Special">&lt;Char-123&gt;</span> no longer works.
解决方案:   Properly check for &quot;char-&quot;.  Add a test for it.
相关文件:   src/misc2.c, src/testdir/test75.in, src/testdir/test75.ok

Patch 7.3.286
问题:       Crash when using &quot;zd&quot; on a large number of folds. (Sam King)
解决方案:   Recompute pointer after reallocating array.  Move fewer entries
	    when making room.
相关文件:   src/fold.c

Patch 7.3.287
问题:       Can't compile with MSVC and tiny options.
解决方案:   Move variables and #ifdefs. (Sergey Khorev)
相关文件:   src/os_win32.c

Patch 7.3.288
问题:       has(<span class="Type">'python'</span>) may give an error message for not being able to load
	    the library after using python3.
解决方案:   Only give the error when the verbose argument is true.
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.3.289
问题:       Complete function isn't called when the leader changed.
解决方案:   Call ins_compl_restart() when the leader changed.  (Taro Muraoka)
相关文件:   src/edit.c

Patch 7.3.290
问题:       When a BufWriteCmd autocommand resets <span class="Type">'modified'</span> this doesn't
	    change older buffer states to be marked as <span class="Type">'modified'</span> like
	    &quot;:write&quot; does.  (Yukihiro Nakadaira)
解决方案:   When the BufWriteCmd resets <span class="Type">'modified'</span> then adjust the undo
	    information like &quot;:write&quot; does.
相关文件:   src/fileio.c

Patch 7.3.291
问题:       Configure doesn't work properly with Python3.
解决方案:   Put -ldl before $LDFLAGS. Add PY3_NO_RTLD_GLOBAL. (Roland
	    Puntaier)
相关文件:   src/config.h.in, src/auto/configure, src/configure.in

Patch 7.3.292
问题:       Crash when using fold markers and selecting a visual block that
	    includes a folded line and goes to end of line. (Sam Lidder)
解决方案:   Check for the column to be MAXCOL. (James Vega)
相关文件:   src/screen.c

Patch 7.3.293
问题:       MSVC compiler has a problem with non-ASCII characters.
解决方案:   Avoid non-ASCII characters. (Hong Xu)
相关文件:   src/ascii.h, src/spell.c

Patch 7.3.294 (after 7.3.289)
问题:       Patch 289 causes more problems than it solves.
解决方案:   Revert the patch until a better solution is found.
相关文件:   src/edit.c

Patch 7.3.295
问题:       When filtering text with an external command Vim may not read all
	    the output.
解决方案:   When select() is interrupted loop and try again. (James Vega)
相关文件:   src/os_unix.c

Patch 7.3.296
问题:       When writing to an external command a zombie process may be left
	    behind.
解决方案:   Wait on the process. (James Vega)
相关文件:   src/os_unix.c

Patch 7.3.297
问题:       Can't load Perl 5.14 dynamically.
解决方案:   Add code in #ifdefs. (Charles Cooper)
相关文件:   if_perl.xs

Patch 7.3.298
问题:       Built-in colors are different from rgb.txt.
解决方案:   Adjust the color values. (Benjamin Haskell)
相关文件:   src/gui_photon.c, src/gui_w48.c

Patch 7.3.299
问题:       Source code not in Vim style.
解决方案:   Adjust the style. (Elias Diem)
相关文件:   src/gui_photon.c

Patch 7.3.300
问题:       Python doesn't parse multi-byte argument correctly.
解决方案:   Use &quot;t&quot; instead of &quot;s&quot;. (lilydjwg)
相关文件:   src/if_py_both.h

Patch 7.3.301
问题:       When <span class="Type">'smartindent'</span> and <span class="Type">'copyindent'</span> are set a Tab is used even
	    though <span class="Type">'expandtab'</span> is set.
解决方案:   Do not insert Tabs. Add a test. (Christian Brabandt)
相关文件:   src/misc1.c, src/testdir/test19.in, src/testdir/test19.ok

Patch 7.3.302 (after 7.3.301)
问题:       Test 19 fails without <span class="Type">'smartindent'</span> and +eval.
解决方案:   Don't use &quot;:exe&quot;. Source small.vim.
相关文件:   src/testdir/test19.in

Patch 7.3.303 (after 7.3.296)
问题:       Compilation error.
解决方案:   Correct return type from int to pid_t. (Danek Duvall)
相关文件:   src/os_unix.c

Patch 7.3.304
问题:       Strawberry Perl doesn't work on MS-Windows.
解决方案:   Use xsubpp if needed. (Yasuhiro Matsumoto)
相关文件:   src/Make_ming.mak, src/Make_mvc.mak

Patch 7.3.305
问题:       Auto-loading a function while editing the command line causes
	    scrolling up the display.
解决方案:   Don't set msg_scroll when defining a function and the user is not
	    typing. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.3.306
问题:       When closing a window there is a chance that deleting a scrollbar
	    triggers a GUI resize, which uses the window while it is not in a
	    valid state.
解决方案:   Set the buffer pointer to NULL to be able to detect the invalid
	    situation.  Fix a few places that used the buffer pointer
	    incorrectly.
相关文件:   src/buffer.c, src/ex_cmds.c, src/term.c, src/window.c

Patch 7.3.307
问题:       Python 3 doesn't support slice assignment.
解决方案:   Implement slices. (Brett Overesch, Roland Puntaier)
相关文件:   src/if_python3.c

Patch 7.3.308
问题:       Writing to <span class="Type">'verbosefile'</span> has problems, e.g. for :highlight.
解决方案:   Do not use a separate verbose_write() function but write with the
	    same code that does redirecting. (Yasuhiro Matsumoto)
相关文件:   src/message.c

Patch 7.3.309 (after 7.3.307)
问题:       Warnings for pointer types.
解决方案:   Change PySliceObject to PyObject.
相关文件:   src/if_python3.c

Patch 7.3.310
问题:       Code not following Vim style.
解决方案:   Fix the style. (Elias Diem)
相关文件:   src/gui_photon.c

Patch 7.3.311 (replaces 7.3.289)
问题:       Complete function isn't called when the leader changed.
解决方案:   Allow the complete function to return a dictionary with a flag
	    that indicates ins_compl_restart() is to be called when the leader
	    changes. (Taro Muraoka)
相关文件:   runtime/insert.txt, src/edit.c, src/eval.c, src/proto/eval.pro

Patch 7.3.312 (after 7.3.306)
问题:       Can't compile with tiny features.
解决方案:   Add #ifdef around win_valid().
相关文件:   src/buffer.c

Patch 7.3.313 (after 7.3.307)
问题:       One more warning when compiling with dynamic Python 3.
解决方案:   Change PySliceObject to PyObject.
相关文件:   src/if_python3.c

Patch 7.3.314 (after 7.3.304)
问题:       Missing parenthesis.
解决方案:   Add it. (Benjamin R. Haskell)
相关文件:   src/Make_mvc.mak

Patch 7.3.315
问题:       Opening a window before forking causes problems for GTK.
解决方案:   Fork first, create the window in the child and report back to the
	    parent process whether it worked.  If successful the parent exits,
	    if unsuccessful the child exits and the parent continues in the
	    terminal. (Tim Starling)
相关文件:   src/gui.c

Patch 7.3.316 (after 7.3.306)
问题:       Crash when <span class="Type">'colorcolumn'</span> is set and closing buffer.
解决方案:   Check for w_buffer to be NULL. (Yasuhiro Matsumoto)
相关文件:   src/option.c

Patch 7.3.317
问题:       Calling debug.debug() in Lua may cause Vim to hang.
解决方案:   Add a better debug method. (Rob Hoelz, Luis Carvalho)
相关文件:   src/if_lua.c

Patch 7.3.318
问题:       &quot;C&quot; on the last line deletes that line if it's blank.
解决方案:   Only delete the last line for a delete operation. (James Vega)
相关文件:   src/ops.c

Patch 7.3.319 (after 7.3.311)
问题:       Redobuff doesn't always include changes of the completion leader.
解决方案:   Insert backspaces as needed. (idea by Taro Muraoka)
相关文件:   src/edit.c

Patch 7.3.320
问题:       When a 0xa0 character is in a sourced file the error message for
	    unrecognized command does not show the problem.
解决方案:   Display 0xa0 as <span class="Special">&lt;a0&gt;</span>.
相关文件:   src/ex_docmd.c

Patch 7.3.321
问题:       Code not following Vim style.
解决方案:   Fix the style. (Elias Diem)
相关文件:   src/os_qnx.c

Patch 7.3.322
问题:       #ifdef for PDP_RETVAL doesn't work, INT_PTR can be a typedef.
解决方案:   Check the MSC version and 64 bit flags. (Sergiu Dotenco)
相关文件:   src/os_mswin.c

Patch 7.3.323
问题:       The default <span class="Type">'errorformat'</span> does not ignore some &quot;included from&quot;
	    lines.
解决方案:   Add a few more patterns. (Ben Boeckel)
相关文件:   src/option.h

Patch 7.3.324 (after 7.3.237)
问题:       Completion for &quot;:compiler&quot; shows color scheme names.
解决方案:   Fix the directory name. (James Vega)
相关文件:   src/ex_getln.c

Patch 7.3.325
问题:       A duplicated function argument gives an internal error.
解决方案:   Give a proper error message. (based on patch by Tyru)
相关文件:   src/eval.c

Patch 7.3.326
问题:       MingW 4.6 no longer supports the -mno-cygwin option.
解决方案:   Split the Cygwin and MingW makefiles. (Matsushita Shougo)
相关文件:   src/GvimExt/Make_cyg.mak, src/GvimExt/Make_ming.mak,
	    src/Make_cyg.mak, src/Make_ming.mak, src/xxd/Make_ming.mak,
	    Filelist

Patch 7.3.327
问题:       When jumping to a help tag a closed fold doesn't open.
解决方案:   Save and restore KeyTyped. (Yasuhiro Matsumoto)
相关文件:   src/ex_cmds.c

Patch 7.3.328
问题:       When command line wraps the cursor may be displayed wrong when
	    there are multi-byte characters.
解决方案:   Position the cursor before drawing the text. (Yasuhiro Matsumoto)
相关文件:   src/ex_getln.c

Patch 7.3.329
问题:       When skipping over code from &quot;:for&quot; to &quot;:endfor&quot; get an error for
	    calling a dict function. (Yasuhiro Matsumoto)
解决方案:   Ignore errors when skipping over :call command.
相关文件:   src/ex_docmd.c, src/eval.c

Patch 7.3.330
问题:       When longjmp() is invoked if the X server gives an error the state
	    is not properly restored.
解决方案:   Reset vgetc_busy. (Yukihiro Nakadaira)
相关文件:   src/main.c

Patch 7.3.331
问题:       &quot;vit&quot; selects wrong text when a tag name starts with the same text
	    as an outer tag name. (Ben Fritz)
解决方案:   Add &quot;\&gt;&quot; to the pattern to check for word boundary.
相关文件:   src/search.c

Patch 7.3.332 (after 7.3.202)
问题:       Indent after &quot;public:&quot; is not increased in C++ code. (Lech Lorens)
解决方案:   Check for namespace after the regular checks. (partly by Martin
	    Gieseking)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.333
问题:       Using &quot;.&quot; to repeat a Visual delete counts the size in bytes, not
	    characters.  (Connor Lane Smith)
解决方案:   Store the virtual column numbers instead of byte positions.
相关文件:   src/normal.c

Patch 7.3.334
问题:       Latest MingW about XSUBPP referencing itself. (Gongqian Li)
解决方案:   Rename the first use to XSUBPPTRY.
相关文件:   src/Make_ming.mak

Patch 7.3.335
问题:       When <span class="Type">'imdisable'</span> is reset from an autocommand in Insert mode it
	    doesn't take effect.
解决方案:   Call im_set_active() in Insert mode. (Taro Muraoka)
相关文件:   src/option.c

Patch 7.3.336
问题:       When a tags file specifies an encoding different from <span class="Type">'enc'</span> it
	    may hang and using a pattern doesn't work.
解决方案:   Convert the whole line.  Continue reading the header after the
	    SORT tag.  Add test83. (Yukihiro Nakadaira)
相关文件:   src/tag.c, src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test83-tags2, src/testdir/test83-tags3,
	    src/testdir/test83.in, src/testdir/test83.ok

Patch 7.3.337 (after 7.3.295)
问题:       Screen doesn't update after resizing the xterm until a character
	    is typed.
解决方案:   When the select call is interrupted check do_resize. (Taylor
	    Hedberg)
相关文件:   src/os_unix.c

Patch 7.3.338
问题:       Using getchar() in an expression mapping doesn't work well.
解决方案:   Don't save and restore the typeahead. (James Vega)
相关文件:   src/getchar.c, src/testdir/test34.ok

Patch 7.3.339
问题:       &quot;make shadow&quot; doesn't link all test files.
解决方案:   Add a line in Makefile and Filelist.
相关文件:   src/Makefile, Filelist

Patch 7.3.340
问题:       When <span class="Type">'verbosefile'</span> is set ftplugof.vim can give an error.
解决方案:   Only remove filetypeplugin autocommands when they exist. (Yasuhiro
	    Matsumoto)
相关文件:   runtime/ftplugof.vim

Patch 7.3.341
问题:       Local help files are only listed in help.txt, not in translated
	    help files.
解决方案:   Also find translated help files. (Yasuhiro Matsumoto)
相关文件:   src/ex_cmds.c

Patch 7.3.342
问题:       Code not in Vim style.
解决方案:   Fix the style. (Elias Diem)
相关文件:   src/os_amiga.c, src/os_mac_conv.c, src/os_win16.c

Patch 7.3.343
问题:       No mouse support for urxvt.
解决方案:   Implement urxvt mouse support, also for &gt; 252 columns.  (Yiding
	    Jia)
相关文件:   src/feature.h, src/keymap.h, src/option.h, src/os_unix.c,
	    src/term.c, src/version.c

Patch 7.3.344
问题:       Problem with GUI startup related to XInitThreads.
解决方案:   Use read() and write() instead of fputs() and fread(). (James
	    Vega)
相关文件:   src/gui.c

Patch 7.3.345
问题:       When switching language with &quot;:lang&quot; the window title doesn't
	    change until later.
解决方案:   Update the window title right away. (Dominique Pelle)
相关文件:   src/ex_cmds2.c

Patch 7.3.346
问题:       It's hard to test netbeans commands.
解决方案:   Process netbeans commands after :sleep. (Xavier de Gaye)
相关文件:   runtime/doc/netbeans.txt, src/ex_docmd.c, src/netbeans.c

Patch 7.3.347
问题:       When dropping text from a browser on Vim it receives HTML even
	    though &quot;html&quot; is excluded from <span class="Type">'clipboard'</span>. (Andrei Avk)
解决方案:   Fix the condition for TARGET_HTML.
相关文件:   src/gui_gtk_x11.c

Patch 7.3.348
问题:       &quot;call range(1, 947948399)&quot; causes a crash. (ZyX)
解决方案:   Avoid a loop in the out of memory message.
相关文件:   src/misc2.c

Patch 7.3.349
问题:       When running out of memory during startup trying to open a
	    swapfile will loop forever.
解决方案:   Let findswapname() set dirp to NULL if out of memory.
相关文件:   src/memline.c

Patch 7.3.350
问题:       Block of code after &quot;:lua &lt;&lt; EOF&quot; may not work. (Paul Isambert)
解决方案:   Recognize the &quot;:lua&quot; command, skip to EOF.
相关文件:   src/eval.c

Patch 7.3.351
问题:       Text formatting uses start of insert position when it should not.
	    (Peter Wagenaar)
解决方案:   Do not use Insstart when intentionally formatting.
相关文件:   src/edit.c

Patch 7.3.352
问题:       When completing methods dict functions and script-local functions
	    get in the way.
解决方案:   Sort function names starting with &quot;&lt;&quot; to the end. (Yasuhiro
	    Matsumoto)
相关文件:   src/ex_getln.c

Patch 7.3.353 (after 7.3.343)
问题:       Missing part of the urxvt patch.
解决方案:   Add the change in term.c
相关文件:   src/term.c

Patch 7.3.354
问题:       &quot;:set backspace+=eol&quot; doesn't work when <span class="Type">'backspace'</span> has a
	    backwards compatible value of 2.
解决方案:   Convert the number to a string. (Hirohito Higashi)
相关文件:   src/option.c

Patch 7.3.355
问题:       GTK warnings when using netrw.vim. (Ivan Krasilnikov)
解决方案:   Do not remove the beval event handler twice.
相关文件:   src/option.c

Patch 7.3.356
问题:       Using &quot;o&quot; with <span class="Type">'cindent'</span> set may freeze Vim. (lolilolicon)
解决方案:   Skip over {} correctly. (Hari G)
相关文件:   src/misc1.c

Patch 7.3.357
问题:       Compiler warning in MS-Windows console build.
解决方案:   Adjust return type of PrintHookProc(). (Mike Williams)
相关文件:   src/os_mswin.c

Patch 7.3.358 (after 7.3.353)
问题:       Mouse support doesn't work properly.
解决方案:   Add HMT_URXVT. (lilydjwg, James McCoy)
相关文件:   src/term.c

Patch 7.3.359
问题:       Command line completion shows dict functions.
解决方案:   Skip dict functions for completion. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.3.360
问题:       Interrupting the load of an autoload function may cause a crash.
解决方案:   Do not use the hashitem when not valid. (Yukihiro Nakadaira)
相关文件:   src/eval.c

Patch 7.3.361
问题:       Accessing memory after it is freed when EXITFREE is defined.
解决方案:   Don't access curwin when firstwin is NULL. (Dominique Pelle)
相关文件:   src/buffer.c

Patch 7.3.362
问题:       ml_get error when using &quot;:g&quot; with folded lines.
解决方案:   Adjust the line number for changed_lines(). (Christian Brabandt)
相关文件:   src/ex_cmds.c

Patch 7.3.363
问题:       C indenting is wrong after #endif followed by a semicolon.
解决方案:   Add special handling for a semicolon in a line by itself. (Lech
	    Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.364 (after 7.3.353)
问题:       Can't compile on HP-UX. (John Marriott)
解决方案:   Only use TTYM_URXVT when it is defined.
相关文件:   src/term.c

Patch 7.3.365
问题:       Crash when using a large Unicode character in a file that has
	    syntax highlighting. (ngollan)
解决方案:   Check for going past the end of the utf tables. (Dominique Pelle)
相关文件:   src/mbyte.c

Patch 7.3.366
问题:       A tags file with an extremely long name causes errors.
解决方案:   Ignore tags that are too long. (Arno Renevier)
相关文件:   src/tag.c

Patch 7.3.367
问题:       :wundo and :rundo use a wrong checksum.
解决方案:   Include the last line when computing the hash. (Christian Brabandt)
相关文件:   src/undo.c

Patch 7.3.368
问题:       Gcc complains about redefining _FORTIFY_SOURCE.
解决方案:   Undefine it before redefining it.
相关文件:   src/Makefile, src/configure.in, src/auto/configure

Patch 7.3.369
问题:       When compiled with Gnome get an error message when using --help.
解决方案:   Don't fork. (Ivan Krasilnikov)
相关文件:   src/main.c

Patch 7.3.370
问题:       Compiler warns for unused variable in Lua interface.
解决方案:   Remove the variable.
相关文件:   src/if_lua.c

Patch 7.3.371
问题:       Crash in autocomplete. (Greg Weber)
解决方案:   Check not going over allocated buffer size.
相关文件:   src/misc2.c

Patch 7.3.372
问题:       When using a command line mapping to <span class="Special">&lt;Up&gt;</span> with file name
	    completion to go one directory up, <span class="Type">'wildchar'</span> is inserted.
	    (Yasuhiro Matsumoto)
解决方案:   Set the KeyTyped flag.
相关文件:   src/ex_getln.c

Patch 7.3.373 (after 7.3.366)
问题:       A tags file with an extremely long name may cause an infinite loop.
解决方案:   When encountering a long name switch to linear search.
相关文件:   src/tag.c

Patch 7.3.374
问题:       ++encoding does not work properly.
解决方案:   Recognize ++encoding before ++enc. (Charles Cooper)
相关文件:   src/ex_docmd.c

Patch 7.3.375
问题:       Duplicate return statement.
解决方案:   Remove the superfluous one. (Dominique Pelle)
相关文件:   src/gui_mac.c

Patch 7.3.376
问题:       Win32: Toolbar repainting does not work when the mouse pointer
	    hovers over a button.
解决方案:   Call DefWindowProc() when not handling an event. (Sergiu Dotenco)
相关文件:   src/gui_w32.c

Patch 7.3.377
问题:       No support for bitwise AND, OR, XOR and invert.
解决方案:   Add and(), or(), invert() and xor() functions.
相关文件:   src/eval.c, src/testdir/test49.in, src/testdir/test65.in,
	    src/testdir/test65.ok, runtime/doc/eval.txt

Patch 7.3.378
问题:       When cross-compiling the check for uint32_t fails.
解决方案:   Only give a warning message. (Maksim Melnikau)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.379
问题:       C-indenting wrong for static enum.
解决方案:   Skip over &quot;static&quot;. (Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.380
问题:       C-indenting wrong for a function header.
解决方案:   Skip to the start paren. (Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.381
问题:       Configure silently skips interfaces that won't work.
解决方案:   Add the --enable-fail_if_missing argument. (Shlomi Fish)
相关文件:   src/Makefile, src/configure.in, src/auto/configure

Patch 7.3.382 (after 7.3.376)
问题:       IME characters are inserted twice.
解决方案:   Do not call DefWindowProc() if the event was handled. (Yasuhiro
	    Matsumoto)
相关文件:   src/gui_w32.c

Patch 7.3.383
问题:       For EBCDIC pound sign is defined as 't'.
解决方案:   Correctly define POUND.
相关文件:   src/ascii.h

Patch 7.3.384
问题:       Mapping <span class="Special">CTRL-K</span> in Insert mode breaks <span class="Special">CTRL-X</span> <span class="Special">CTRL-K</span> for dictionary
	    completion.
解决方案:   Add <span class="Special">CTRL-K</span> to the list of recognized keys. (James McCoy)
相关文件:   src/edit.c

Patch 7.3.385
问题:       When using an expression mapping on the command line the cursor
	    ends up in the wrong place. (Yasuhiro Matsumoto)
解决方案:   Save and restore msg_col and msg_row when evaluating the
	    expression.
相关文件:   src/getchar.

Patch 7.3.386
问题:       Test 83 fails when iconv does not support cp932. (raf)
解决方案:   Test if conversion works. (Yukihiro Nakadaira)
相关文件:   src/testdir/test83.in

Patch 7.3.387 (after 7.3.386)
问题:       Test 83 may fail for some encodings.
解决方案:   Set <span class="Type">'encoding'</span> to utf-8 earlier.
相关文件:   src/testdir/test83.in

Patch 7.3.388
问题:       Crash on exit when EXITFREE is defined and using tiny features.
解决方案:   Check for NULL window pointer. (Dominique Pelle)
相关文件:   src/buffer.c

Patch 7.3.389
问题:       After typing at a prompt the &quot;MORE&quot; message appears too soon.
解决方案:   reset lines_left in msg_end_prompt(). (Eswald)
相关文件:   src/message.c

Patch 7.3.390
问题:       Using NULL buffer pointer in a window.
解决方案:   Check for w_buffer being NULL in more places. (Bjorn Winckler)
相关文件:   src/ex_cmds.c, src/quickfix.c, src/window.c

Patch 7.3.391
问题:       Can't check if the XPM_W32 feature is enabled.
解决方案:   Add xpm_w32 to the list of features. (kat)
相关文件:   src/eval.c

Patch 7.3.392
问题:       When setting <span class="Type">'undofile'</span> while the file is already loaded but
	    unchanged, try reading the undo file. (Andy Wokula)
解决方案:   Compute a checksum of the text when <span class="Type">'undofile'</span> is set. (Christian
	    Brabandt)
相关文件:   src/option.c, src/testdir/test72.in, src/testdir/test72.ok

Patch 7.3.393
问题:       Win32: When resizing Vim it is always moved to the primary monitor
	    if the secondary monitor is on the left.
解决方案:   Use the nearest monitor. (Yukihiro Nakadaira)
相关文件:   src/gui_w32.c

Patch 7.3.394
问题:       When placing a mark while starting up a screen redraw messes up
	    the screen. (lith)
解决方案:   Don't redraw while still starting up. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.3.395 (after 7.3.251)
问题:       &quot;dv?bar&quot; in the last line deletes too much and breaks undo.
解决方案:   Only adjust the cursor position when it's after the last line of
	    the buffer.  Add a test. (Christian Brabandt)
相关文件:   src/ops.c, src/testdir/test43.in, src/testdir/test43.ok

Patch 7.3.396
问题:       After forcing an operator to be characterwise it can still become
	    linewise when spanning whole lines.
解决方案:   Don't make the operator linewise when motion_force was set.
	    (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.3.397
问题:       &quot;:helpgrep&quot; does not work properly when <span class="Type">'encoding'</span> is not utf-8 or
	    latin1.
解决方案:   Convert non-ascii lines to <span class="Type">'encoding'</span>. (Yasuhiro Matsumoto)
相关文件:   src/quickfix.c, src/spell.c, src/misc2.c, src/proto/misc2.pro

Patch 7.3.398
问题:       When creating more than 10 location lists and adding items one by
	    one a previous location may be used. (Audrius Kažukauskas)
解决方案:   Clear the location list completely when adding the tenth one.
相关文件:   src/quickfix.c

Patch 7.3.399
问题:       &quot;:cd&quot; doesn't work when the path contains wildcards. (Yukihiro
	    Nakadaira)
解决方案:   Ignore wildcard errors when the EW_NOTWILD flag is used.
相关文件:   src/misc1.c

Patch 7.3.400
问题:       Compiler warnings for shadowed variables.
解决方案:   Remove or rename the variables.
相关文件:   src/charset.c, src/digraph.c, src/edit.c, src/eval.c, src/fold.c,
	    src/getchar.c, src/message.c, src/misc2.c, src/move.c,
	    src/netbeans.c, src/option.c, src/os_unix.c, src/screen.c,
	    src/search.c, src/spell.c, src/syntax.c, src/tag.c, src/window.c

Patch 7.3.401
问题:       A couple more shadowed variables.
解决方案:   Rename the variables.
相关文件:   src/netbeans.c

Patch 7.3.402
问题:       When jumping to the first error a line of the buffer is sometimes
	    redrawn on top of the list of errors.
解决方案:   Do not call update_topline_redraw() if the display was scrolled
	    up.
相关文件:   src/quickfix.c

Patch 7.3.403
问题:       &quot;:helpgrep&quot; does not trigger QuickFixCmd* autocommands.
解决方案:   Trigger the autocommands. (Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.3.404
问题:       When a complete function uses refresh &quot;always&quot; redo will not work
	    properly.
解决方案:   Do not reset compl_leader when compl_opt_refresh_always is set.
	    (Yasuhiro Matsumoto)
相关文件:   src/edit.c

Patch 7.3.405
问题:       When xterm gets back the function keys it may delete the urxvt
	    mouse termcap code.
解决方案:   Check for the whole code, not just the start. (Egmont Koblinger)
相关文件:   src/keymap.h, src/misc2.c, src/term.c

Patch 7.3.406
问题:       Multi-byte characters in b:browsefilter are not handled correctly.
解决方案:   First use convert_filter() normally and then convert to wide
	    characters. (Taro Muraoka)
相关文件:   src/gui_w48.c

Patch 7.3.407
问题:       &quot;:12verbose call F()&quot; may duplicate text while trying to truncate.
	    (Thinca)
解决方案:   Only truncate when there is not enough room.  Also check the byte
	    length of the buffer.
相关文件:   src/buffer.c, src/eval.c, src/ex_getln.c, src/message.c,
	    src/proto/message.pro

Patch 7.3.408 (after 7.3.406)
问题:       Missing declaration.
解决方案:   Add the declaration. (John Marriott)
相关文件:   src/gui_w48.c

Patch 7.3.409
问题:       The license in pty.c is unclear.
解决方案:   Add a comment about the license.
相关文件:   src/pty.c

Patch 7.3.410
问题:       Compiler error for // comment. (Joachim Schmitz)
解决方案:   Turn into /* comment */.
相关文件:   src/message.c

Patch 7.3.411
问题:       Pasting in Visual mode using the &quot;&quot; register does not work. (John
	    Beckett)
解决方案:   Detect that the write is overwriting the pasted register.
	    (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.3.412
问题:       Storing a float in a session file has an additional '&amp;'.
解决方案:   Remove the '&amp;'. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.3.413
问题:       Build warnings on MS-Windows.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/ex_getln.c, src/message.c, src/term.c

Patch 7.3.414
问题:       Using <span class="Special">CTRL-A</span> on &quot;000&quot; drops the leading zero, while on &quot;001&quot; it
	    doesn't.
解决方案:   Detect &quot;000&quot; as an octal number. (James McCoy)
相关文件:   src/charset.c

Patch 7.3.415 (after 7.3.359)
问题:       Completion of functions stops once a dictionary is encountered.
	    (James McCoy)
解决方案:   Return an empty string instead of NULL.
相关文件:   src/eval.c

Patch 7.3.416 (after 7.3.415)
问题:       Compiler warning for wrong pointer.
解决方案:   Add type cast.
相关文件:   src/eval.c

Patch 7.3.417 (after 7.3.395)
问题:       Test 43 fails with a tiny build.
解决方案:   Only run test 43 with at least a small build.
相关文件:   src/testdir/test43.in

Patch 7.3.418
问题:       When a user complete function returns -1 an error message is
	    given.
解决方案:   When -2 is returned stop completion silently. (Yasuhiro Matsumoto)
相关文件:   src/edit.

Patch 7.3.419
问题:       DBCS encoding in a user command does not always work.
解决方案:   Skip over DBCS characters. (Yasuhiro Matsumoto)
相关文件:   src/ex_docmd.c

Patch 7.3.420
问题:       &quot;it&quot; and &quot;at&quot; don't work properly with a dash in the tag name.
解决方案:   Require a space to match the tag name. (Christian Brabandt)
相关文件:   src/search.c

Patch 7.3.421
问题:       Get E832 when setting <span class="Type">'undofile'</span> in vimrc and there is a file to
	    be edited on the command line. (Toothpik)
解决方案:   Do not try reading the undo file for a file that wasn't loaded.
相关文件:   src/option.c

Patch 7.3.422
问题:       Python 3 does not have __members__.
解决方案:   Add &quot;name&quot; and &quot;number&quot; in another way. (lilydjwg)
相关文件:   src/if_py_both.h, src/if_python3.c

Patch 7.3.423
问题:       Small mistakes in comments, proto and indent.
解决方案:   Fix the mistakes.
相关文件:   src/ex_cmds2.c, src/structs.h, src/ui.c, src/proto/ex_docmd.pro

Patch 7.3.424
问题:       Win16 version missing some functions.
解决方案:   Add #defines for the functions.
相关文件:   src/gui_w16.c

Patch 7.3.425 (after 7.3.265)
问题:       Search history lines are duplicated. (Edwin Steiner)
解决方案:   Convert separator character from space to NUL.
相关文件:   src/ex_getln.c

Patch 7.3.426
问题:       With '$' in <span class="Type">'cpoptions'</span> the $ is not displayed in the first
	    column.
解决方案:   Use -1 instead of 0 as a special value. (Hideki Eiraku and
	    Hirohito Higashi)
相关文件:   src/edit.c, src/globals.h, src/move.c, src/screen.c, src/search.c

Patch 7.3.427
问题:       readfile() can be slow with long lines.
解决方案:   Use realloc() instead of alloc(). (John Little)
相关文件:   src/eval.c

Patch 7.3.428
问题:       Win32: an xpm file without a mask crashes Vim.
解决方案:   Fail when the mask is missing. (Dave Bodenstab)
相关文件:   src/xpm_w32.c

Patch 7.3.429
问题:       When <span class="Type">'cpoptions'</span> includes &quot;E&quot; &quot;c0&quot; in the first column is an
	    error. The redo register is then set to the erroneous command.
解决方案:   Do not set the redo register if the command fails because of an
	    empty region. (Hideki Eiraku)
相关文件:   src/getchar.c, src/normal.c, src/proto/getchar.pro

Patch 7.3.430
问题:       When a custom filetype detection uses &quot;augroup END&quot; the conf
	    fileytpe detection does not have the filetypedetect group.
解决方案:   Always end the group and include filetypedetect in the conf
	    autocommand. (Lech Lorens)
相关文件:   runtime/filetype.vim

Patch 7.3.431
问题:       Fetching a key at a prompt may be confused by escape sequences.
	    Especially when getting a prompt at a VimEnter autocommand.
	    (Alex Efros)
解决方案:   Properly handle escape sequences deleted by check_termcode().
相关文件:   src/getchar.c, src/misc1.c, src/term.c, src/proto/term.pro

Patch 7.3.432
问题:       ACLs are not supported for ZFS or NFSv4 on Solaris.
解决方案:   Add configure check and code. (Danek Duvall)
相关文件:   src/configure.in, src/auto/configure, src/config.h.in,
	    src/os_unix.c

Patch 7.3.433
问题:       Using continued lines in a Vim script can be slow.
解决方案:   Instead of reallocating for every line use a growarray. (Yasuhiro
	    Matsumoto)
相关文件:   src/ex_cmds2.c

Patch 7.3.434
问题:       Using join() can be slow.
解决方案:   Compute the size of the result before allocation to avoid a lot of
	    allocations and copies. (Taro Muraoka)
相关文件:   src/eval.c

Patch 7.3.435
问题:       Compiler warning for unused variable.
解决方案:   Move the variable inside #ifdef.
相关文件:   src/ex_cmds2.c

Patch 7.3.436
问题:       Compiler warnings for types on Windows.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/eval.c

Patch 7.3.437
问题:       Continue looping inside FOR_ALL_TAB_WINDOWS even when already done.
解决方案:   Use goto instead of break. (Hirohito Higashi)
相关文件:   src/fileio.c, src/globals.h

Patch 7.3.438
问题:       There is no way to avoid &quot;:doautoall&quot; reading modelines.
解决方案:   Add the <span class="Special">&lt;nomodeline&gt;</span> argument. Adjust documentation.
相关文件:   src/fileio.c, runtime/doc/autocmd.txt

Patch 7.3.439
问题:       Compiler warnings to size casts in Perl interface.
解决方案:   Use XS macros. (James McCoy)
相关文件:   src/if_perl.xs, src/typemap

Patch 7.3.440
问题:       Vim does not support UTF8_STRING for the X selection.
解决方案:   Add UTF8_STRING atom support. (Alex Efros) Use it only when
	    <span class="Type">'encoding'</span> is set to Unicode.
相关文件:   src/ui.c

Patch 7.3.441
问题:       Newer versions of MzScheme (Racket) require earlier (trampolined)
	    initialisation.
解决方案:   Call mzscheme_main() early in main(). (Sergey Khorev)
相关文件:   src/Make_mvc.mak, src/if_mzsch.c, src/main.c,
	    src/proto/if_mzsch.pro

Patch 7.3.442 (after 7.3.438)
问题:       Still read modelines for &quot;:doautocmd&quot;.
解决方案:   Move check for <span class="Special">&lt;nomodeline&gt;</span> to separate function.
相关文件:   src/fileio.c, src/ex_docmd.c, src/proto/fileio.pro,
	    runtime/doc/autocmd.txt

Patch 7.3.443
问题:       MS-Windows: <span class="Type">'shcf'</span> and <span class="Type">'shellxquote'</span> defaults are not very good.
解决方案:   Make a better guess when <span class="Type">'shell'</span> is set to &quot;cmd.exe&quot;. (Ben Fritz)
相关文件:   src/option.c, runtime/doc/options.txt

Patch 7.3.444
问题:       &quot;:all!&quot; and &quot;:sall!&quot; give error E477, even though the
	    documentation says these are valid commands.
解决方案:   Support the exclamation mark. (Hirohito Higashi)
相关文件:   src/ex_cmds.h, src/testdir/test31.in, src/testdir/test31.ok

Patch 7.3.445 (after 7.3.443)
问题:       Can't properly escape commands for cmd.exe.
解决方案:   Default <span class="Type">'shellxquote'</span> to '('.  Append ')' to make '(command)'.
	    No need to use &quot;/s&quot; for <span class="Type">'shellcmdflag'</span>.
相关文件:   src/misc2.c, src/option.c, src/os_win32.c

Patch 7.3.446 (after 7.3.445)
问题:       Win32: External commands with special characters don't work.
解决方案:   Add the <span class="Type">'shellxescape'</span> option.
相关文件:   src/misc2.c, src/option.c, src/option.h, runtime/doc/options.txt

Patch 7.3.447 (after 7.3.446)
问题:       Win32: External commands with &quot;start&quot; do not work.
解决方案:   Unescape part of the command. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.3.448 (after 7.3.447)
问题:       Win32: Still a problem with &quot;!start /b&quot;.
解决方案:   Escape only '|'. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.3.449
问题:       Crash when a BufWinLeave autocommand closes the only other window.
	    (Daniel Hunt)
解决方案:   Abort closing a buffer when it becomes the only one.
相关文件:   src/buffer.c, src/proto/buffer.pro, src/ex_cmds.c, src/ex_getln.c,
	    src/misc2.c, src/quickfix.c, src/window.c, src/proto/window.pro

Patch 7.3.450 (after 7.3.448)
问题:       Win32: Still a problem with &quot;!start /b&quot;.
解决方案:   Fix pointer use. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.3.451
问题:       Tcl doesn't work on 64 MS-Windows.
解决方案:   Make it work. (Dave Bodenstab)
相关文件:   src/Make_mvc.mak, src/if_tcl.c

Patch 7.3.452
问题:       Undo broken when pasting close to the last line. (Andrey Radev)
解决方案:   Use a flag to remember if the deleted included the last line.
	    (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.3.453
问题:       Pasting in the command line is slow.
解决方案:   Don't redraw if there is another character to read. (Dominique
	    Pelle)
相关文件:   src/ex_getln.c

Patch 7.3.454
问题:       Re-allocating memory slows Vim down.
解决方案:   Use realloc() in ga_grow(). (Dominique Pelle)
相关文件:   src/misc2.c

Patch 7.3.455
问题:       Using many continuation lines can be slow.
解决方案:   Adjust the reallocation size to the current length.
相关文件:   src/ex_cmds2.c

Patch 7.3.456
问题:       &quot;:tab drop file&quot; has several problems, including moving the
	    current window and opening a new tab for a file that already has a
	    window.
解决方案:   Refactor &quot;:tab drop&quot; handling. (Hirohito Higashi)
相关文件:   src/buffer.c, src/testdir/test62.in, src/testdir/test62.ok

Patch 7.3.457
问题:       When setting $VIMRUNTIME later the directory for fetching
	    translated messages is not adjusted.
解决方案:   Put bindtextdomain() in vim_setenv().
相关文件:   src/misc1.c

Patch 7.3.458
问题:       Crash when calling smsg() during startup.
解决方案:   Don't use <span class="Type">'shortmess'</span> when it is not set yet.
相关文件:   src/option.c

Patch 7.3.459
问题:       Win32: Warnings for type conversion.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/misc2.c, src/os_win32.c

Patch 7.3.460
问题:       Win32: UPX does not compress 64 bit binaries.
解决方案:   Mention and add the alternative: mpress. (Dave Bodenstab)
相关文件:   src/INSTALLpc.txt, src/Make_ming.mak

Patch 7.3.461
问题:       The InsertCharPre autocommand event is not triggered during
	    completion and when typing several characters quickly.
解决方案:   Also trigger InsertCharPre during completion.  Do not read ahead
	    when an InsertCharPre autocommand is defined. (Yasuhiro Matsumoto)
相关文件:   src/edit.c, src/fileio.c, src/proto/fileio.pro

Patch 7.3.462
问题:       When using &quot;:loadview&quot; folds may be closed unexpectedly.
解决方案:   Take into account foldlevel. (Xavier de Gaye)
相关文件:   src/fold.c

Patch 7.3.463
问题:       When using &quot;:s///c&quot; the cursor is moved away from the match.
	    (Lawman)
解决方案:   Don't move the cursor when do_ask is set. (Christian Brabandt)
相关文件:   src/ex_cmds.c

Patch 7.3.464
问题:       Compiler warning for sprintf.
解决方案:   Put the length in a variable. (Dominique Pelle)
相关文件:   src/version.c

Patch 7.3.465
问题:       Cannot get file name with newline from glob().
解决方案:   Add argument to glob() and expand() to indicate they must return a
	    list. (Christian Brabandt)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/ex_getln.c, src/vim.h

Patch 7.3.466
问题:       Get ml_get error hen &quot;:behave mswin&quot; was used and selecting
	    several lines.  (A. Sinan Unur)
解决方案:   Adjust the end of the operation. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.3.467
问题:       Cursor positioned wrong at the command line when regaining focus
	    and using some input method.
解决方案:   Do not position the cursor in command line mode.
相关文件:   src/mbyte.c

Patch 7.3.468
问题:       For some compilers the error file is not easily readable.
解决方案:   Use QuickFixCmdPre for more commands. (Marcin Szamotulski)
相关文件:   runtime/doc/autocmd.txt, src/quickfix.c

Patch 7.3.469
问题:       Compiler warning for unused argument without some features.
解决方案:   Add UNUSED.
相关文件:   src/buffer.c

Patch 7.3.470
问题:       Test 62 fails when compiled without GUI and X11.
解决方案:   Don't test :drop when it is not supported.
相关文件:   src/testdir/test62.in

Patch 7.3.471
问题:       Can't abort listing placed signs.
解决方案:   Check &quot;got_int&quot;. (Christian Brabandt)
相关文件:   src/buffer.c, src/ex_cmds.c

Patch 7.3.472
问题:       Crash when using &quot;:redraw&quot; in a BufEnter autocommand and
	    switching to another tab. (驼峰)
解决方案:   Move triggering the autocommands to after correcting the
	    option values. Also check the row value to be out of bounds.
	    (Christian Brabandt, Sergey Khorev)
相关文件:   src/screen.c, src/window.c

Patch 7.3.473
问题:       <span class="Type">'cursorbind'</span> does not work correctly in combination with
	    <span class="Type">'virtualedit'</span> set to &quot;all&quot;.
解决方案:   Copy coladd. (Gary Johnson)
相关文件:   src/move.c

Patch 7.3.474
问题:       Perl build with gcc 4 fails.
解决方案:   Remove XS() statements. (Yasuhiro Matsumoto)
相关文件:   src/if_perl.xs

Patch 7.3.475
问题:       In a terminal with few colors the omnicomplete menu may be hard to
	    see when using the default colors.
解决方案:   Use more explicit colors. (suggested by Alex Henrie)
相关文件:   src/syntax.c

Patch 7.3.476
问题:       When selecting a block, using &quot;$&quot; to include the end of each line
	    and using &quot;A&quot; and typing a backspace strange things happen.
	    (Yuangchen Xie)
解决方案:   Avoid using a negative length. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.3.477
问题:       Using &quot;:echo&quot; to output enough lines to scroll, then using &quot;j&quot; and
	    &quot;k&quot; at the more prompt, displays the command on top of the output.
	    (Marcin Szamotulski)
解决方案:   Put the output below the command. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.3.478
问题:       Memory leak using the ':rv!' command when reading dictionary or
	    list global variables i.e. with <span class="Type">'viminfo'</span> containing !.
解决方案:   Free the typeval. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.3.479
问题:       When <span class="Type">'cursorline'</span> is set the line number highlighting can't be set
	    separately.
解决方案:   Add &quot;CursorLineNr&quot;. (Howard Buchholz)
相关文件:   src/option.c, src/screen.c, src/syntax.c, src/vim.h

Patch 7.3.480
问题:       When using &quot;:qa&quot; and there is a changed buffer picking the buffer
	    to jump to is not very good.
解决方案:   Consider current and other tab pages. (Hirohito Higashi)
相关文件:   src/ex_cmds2.c

Patch 7.3.481
问题:       Changing <span class="Type">'virtualedit'</span> in an operator function to &quot;all&quot; does not
	    have the desired effect. (Aaron Bohannon)
解决方案:   Save, reset and restore virtual_op when executing an operator
	    function.
相关文件:   src/normal.c

Patch 7.3.482
问题:       With <span class="Type">'cursorbind'</span> set moving up/down does not always keep the same
	    column.
解决方案:   Set curswant appropriately. (Gary Johnson)
相关文件:   src/move.c

Patch 7.3.483  (after 7.3.477)
问题:       More prompt shows up too often.
解决方案:   Instead of adding a line break, only start a new line in the
	    message history. (Christian Brabandt)
相关文件:   src/eval.c, src/message.c, src/proto/message.pro

Patch 7.3.484
问题:       The -E and --echo-wid command line arguments are not mentioned in
	    &quot;vim --help&quot;.
解决方案:   Add the help lines. (Dominique Pelle)
相关文件:   src/main.c

Patch 7.3.485
问题:       When building Vim LDFLAGS isn't passed on to building xxd.
解决方案:   Pass the LDFLAGS value. (James McCoy)
相关文件:   src/Makefile

Patch 7.3.486
问题:       Build error with mingw64 on Windows 7.
解决方案:   Avoid the step of going through vimres.res. (Guopeng Wen)
相关文件:   src/Make_ming.mak

Patch 7.3.487
问题:       When setting <span class="Type">'timeoutlen'</span> or <span class="Type">'ttimeoutlen'</span> the column for vertical
	    movement is reset unnecessarily.
解决方案:   Do not set w_set_curswant for every option. Add a test for this.
	    (Kana Natsuno) Add the P_CURSWANT flag for options.
相关文件:   src/option.c, src/testdir/test84.in, src/testdir/test84.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.3.488
问题:       &quot;:help!&quot; in a help file does not work as documented.
解决方案:   When in a help file don't give an error message. (thinca)
相关文件:   src/ex_cmds.c

Patch 7.3.489
问题:       <span class="Special">CTRL-]</span> in Insert mode does not expand abbreviation when used in a
	    mapping. (Yichao Zhou)
解决方案:   Special case using <span class="Special">CTRL-]</span>. (Christian Brabandt)
相关文件:   src/getchar.c, src/edit.c

Patch 7.3.490
问题:       Member confusion in Lua interface.
解决方案:   Fix it.  Add luaeval(). (Taro Muraoka, Luis Carvalho)
相关文件:   runtime/doc/if_lua.txt, src/eval.c, src/if_lua.c,
	    src/proto/if_lua.pro

Patch 7.3.491
问题:       No tests for Lua.
解决方案:   Add some simple tests for Lua. (Luis Carvalho)
相关文件:   src/testdir/test1.in, src/testdir/test85.in, src/testdir/test85.ok
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.3.492
问题:       Can't indent conditions separately from function arguments.
解决方案:   Add the 'k' flag in <span class="Type">'cino'</span>. (Lech Lorens)
相关文件:   runtime/doc/indent.txt, src/misc1.c, src/testdir/test3.in,
	    src/testdir/test3.ok

Patch 7.3.493 (after 7.3.492)
问题:       Two unused variables.
解决方案:   Remove them. (Hong Xu)
相关文件:   src/misc1.c

Patch 7.3.494 (after 7.3.491)
问题:       Can't compile with Lua 5.1 or dynamic Lua.
解决方案:   Fix dll_ methods. Fix luado(). (Muraoka Taro, Luis Carvalho)
相关文件:   src/if_lua.c

Patch 7.3.495 (after 7.3.492)
问题:       Compiler warnings.
解决方案:   Add function declaration.  Remove &quot;offset&quot; argument.
相关文件:   src/misc1.c

Patch 7.3.496
问题:       MS-DOS: When &quot;diff&quot; trips over difference in line separators some
	    tests fail.
解决方案:   Make some .ok files use unix line separators. (David Pope)
相关文件:   src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 7.3.497
问题:       Crash when doing &quot;:python print&quot; and compiled with gcc and
	    the optimizer enabled.
解决方案:   Avoid the crash, doesn't really fix the problem. (Christian
	    Brabandt)
相关文件:   src/if_py_both.h

Patch 7.3.498
问题:       The behavior of the &quot;- register changes depending on value of
	    the <span class="Type">'clipboard'</span> option. (Szamotulski)
解决方案:   Also set the &quot;- register when the register is &quot;*&quot; or &quot;+&quot;.
	    (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.3.499
问题:       When using any interface language when Vim is waiting for a child
	    process it gets confused by a child process started through the
	    interface.
解决方案:   Always used waitpid() instead of wait(). (Yasuhiro Matsumoto)
相关文件:   src/os_unix.c

Patch 7.3.500
问题:       Ming makefile unconditionally sets WINVER.
解决方案:   Only defined when not already defined. (Yasuhiro Matsumoto)
相关文件:   src/Make_ming.mak

Patch 7.3.501
问题:       Error for &quot;flush&quot; not being defined when using Ruby command.
解决方案:   Defined &quot;flush&quot; as a no-op method. (Kent Sibilev)
相关文件:   src/if_ruby.c

Patch 7.3.502
问题:       Netbeans insert halfway a line actually appends to the line.
解决方案:   Insert halfway the line. (Brian Victor)
相关文件:   src/netbeans.c

Patch 7.3.503 (after 7.3.501)
问题:       Warning for unused argument.
解决方案:   Add UNUSED.
相关文件:   src/if_ruby.c

Patch 7.3.504
问题:       Commands in help files are not highlighted.
解决方案:   Allow for commands in backticks.  Adjust <span class="Special">CTRL-]</span> to remove the
	    backticks.
相关文件:   src/ex_cmds.c

Patch 7.3.505
问题:       Test 11 fails on MS-Windows in some versions.
解决方案:   Fix #ifdefs for whether filtering through a pipe is possible. Move
	    setting b_no_eol_lnum back to where it was before patch 7.3.124.
	    (David Pope)
相关文件:   src/feature.h, src/eval.c, src/ex_cmds.c, src/fileio.c

Patch 7.3.506
问题:       GTK gives an error when selecting a non-existent file.
解决方案:   Add a handler to avoid the error. (Christian Brabandt)
相关文件:   src/gui_gtk.c

Patch 7.3.507
问题:       When exiting with unsaved changes, selecting an existing file in
	    the file dialog, there is no dialog to ask whether the existing
	    file should be overwritten. (Felipe G. Nievinski)
解决方案:   Call check_overwrite() before writing. (Christian Brabandt)
相关文件:   src/ex_cmds.c, src/ex_cmds2.c, src/proto/ex_cmds.pro

Patch 7.3.508
问题:       Default for v:register is not set.
解决方案:   Init v:register in eval_init(). Correct for <span class="Type">'clipboard'</span> before the
	    main loop. (Ingo Karkat)
相关文件:   src/eval.c, src/main.c

Patch 7.3.509
问题:       &quot;:vimgrep&quot; fails when <span class="Type">'autochdir'</span> is set.
解决方案:   A more generic solution for changing directory. (Ben Fritz)
相关文件:   src/quickfix.c

Patch 7.3.510
问题:       Test 77 fails on Solaris 7. (Michael Soyka)
解决方案:   Replace any tabs with spaces.
相关文件:   src/testdir/test77.in

Patch 7.3.511
问题:       Using a FileReadCmd autocommand that does &quot;:e! <span class="Special">{file}</span>&quot; may cause a
	    crash. (Christian Brabandt)
解决方案:   Properly restore curwin-&gt;w_s.
相关文件:   src/fileio.c

Patch 7.3.512
问题:       undofile() returns a useless name when passed an empty string.
解决方案:   Return an empty string. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.3.513
问题:       Cannot use <span class="Special">CTRL-E</span> and <span class="Special">CTRL-Y</span> with &quot;r&quot;.
解决方案:   Make <span class="Special">CTRL-E</span> and <span class="Special">CTRL-Y</span> work like in Insert mode. (Christian
	    Brabandt)
相关文件:   src/edit.c, src/normal.c, src/proto/edit.pro

Patch 7.3.514
问题:       No completion for :history command.
解决方案:   Add the completion and update the docs. Also fix &quot;:behave&quot;
	    completion. (Dominique Pelle)
相关文件:   runtime/doc/cmdline.txt, runtime/doc/map.txt, src/ex_docmd.c,
	    src/ex_getln.c, src/vim.h

Patch 7.3.515
问题:       <span class="Type">'wildignorecase'</span> only applies to the last part of the path.
解决方案:   Also ignore case for letters earlier in the path.
相关文件:   src/misc1.c

Patch 7.3.516
问题:       extend(o, o) may crash Vim.
解决方案:   Fix crash and add test. (Thinca and Hirohito Higashi)
相关文件:   src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.3.517
问题:       Crash when using &quot;vipvv&quot;. (Alexandre Provencio)
解决方案:   Don't let the text length become negative.
相关文件:   src/ops.c

Patch 7.3.518
问题:       When <span class="Type">'encoding'</span> is a double-byte encoding &quot;:helptags&quot; may not find
	    tags correctly.
解决方案:   Use vim_strbyte() instead of vim_strchr(). (Yasuhiro Matsumoto)
相关文件:   src/ex_cmds.c

Patch 7.3.519
问题:       When completefunction returns it cannot indicate end of completion
	    mode.
解决方案:   Recognize completefunction returning -3.  (Matsushita Shougo)
相关文件:   src/edit.c

Patch 7.3.520
问题:       gvim starts up slow on Ubuntu 12.04.
解决方案:   Move the call to gui_mch_init_check() to after fork(). (Yasuhiro
	    Matsumoto)  Do check $DISPLAY being set.
相关文件:   src/gui.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro

Patch 7.3.521
问题:       Using &quot;z=&quot; on a multi-byte character may cause a crash.
解决方案:   Don't use strlen() on an int pointer.
相关文件:   src/spell.c

Patch 7.3.522
问题:       Crash in vim_realloc() when using MEM_PROFILE.
解决方案:   Avoid using a NULL argument. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.3.523
问题:       &quot;:diffupdate&quot; doesn't check for files changed elsewhere.
解决方案:   Add the ! flag. (Christian Brabandt)
相关文件:   runtime/doc/diff.txt, src/diff.c, src/ex_cmds.h

Patch 7.3.524 (after 7.3.523)
问题:       Missing comma.
解决方案:   Add the comma.
相关文件:   src/version.c

Patch 7.3.525
问题:       Compiler warning on 64 bit MS-Windows.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/ex_getln.c

Patch 7.3.526
问题:       Confusing indenting for #ifdef.
解决方案:   Remove and add indent. (Elias Diem)
相关文件:   src/normal.c

Patch 7.3.527
问题:       Clang complains about non-ASCII characters in a string.
解决方案:   Change to \x88 form. (Dominique Pelle)
相关文件:   src/charset.c

Patch 7.3.528
问题:       Crash when closing last window in a tab. (Alex Efros)
解决方案:   Use common code in close_last_window_tabpage(). (Christian
	    Brabandt)
相关文件:   src/window.c

Patch 7.3.529
问题:       Using a count before &quot;v&quot; and &quot;V&quot; does not work (Kikyous)
解决方案:   Make the count select that many characters or lines. (Christian
	    Brabandt)
相关文件:   src/normal.c

Patch 7.3.530 (after 7.3.520)
问题:       gvim does not work when <span class="Type">'guioptions'</span> includes &quot;f&quot;. (Davido)
解决方案:   Call gui_mch_init_check() when running GUI in the foreground.
	    (Yasuhiro Matsumoto)
相关文件:   src/gui.c

Patch 7.3.531 (after 7.3.530)
问题:       GUI does not work on MS-Windows.
解决方案:   Add the missing #ifdef. (Patrick Avery)
相关文件:   src/gui.c

Patch 7.3.532
问题:       Compiler warning from Clang.
解决方案:   Use a different way to point inside a string. (Dominique Pelle)
相关文件:   src/syntax.c

Patch 7.3.533
问题:       Memory leak when writing undo file.
解决方案:   Free the ACL. (Dominique Pelle)
相关文件:   src/undo.c

Patch 7.3.534 (after 7.3.461)
问题:       When using an InsertCharPre autocommand autoindent fails.
解决方案:   Proper handling of v:char. (Alexey Radkov)
相关文件:   src/edit.c

Patch 7.3.535
问题:       Many #ifdefs for MB_MAXBYTES.
解决方案:   Also define MB_MAXBYTES without the +multi_byte feature.  Fix
	    places where the buffer didn't include space for a NUL byte.
相关文件:   src/arabic.c, src/edit.c, src/eval.c, src/getchar.c, src/mbyte.c,
	    src/misc1.c, src/screen.c, src/spell.c, src/vim.h

Patch 7.3.536
问题:       When spell checking the German sharp s is not seen as a word
	    character. (Aexl Bender)
解决方案:   In utf_islower() return true for the sharp s. <span class="Todo">Note</span>: also need
	    updated spell file for this to take effect.
相关文件:   src/mbyte.c

Patch 7.3.537
问题:       Unnecessary call to init_spell_chartab().
解决方案:   Delete the call.
相关文件:   src/spell.c

Patch 7.3.538
问题:       <span class="Type">'efm'</span> does not handle Tabs in pointer lines.
解决方案:   Add Tab support. Improve tests. (Lech Lorens)
相关文件:   src/quickfix.c, src/testdir/test10.in, src/testdir/test10.ok

Patch 7.3.539
问题:       Redrawing a character on the command line does not work properly
	    for multi-byte characters.
解决方案:   Count the number of bytes in a character. (Yukihiro Nakadaira)
相关文件:   src/ex_getln.c

Patch 7.3.540
问题:       Cursor is left on the text instead of the command line.
解决方案:   Don't call setcursor() in command line mode.
相关文件:   src/getchar.c

Patch 7.3.541
问题:       When joining lines comment leaders need to be removed manually.
解决方案:   Add the 'j' flag to <span class="Type">'formatoptions'</span>. (Lech Lorens)
相关文件:   runtime/doc/change.txt, src/edit.c, src/ex_docmd.c, src/misc1.c,
	    src/normal.c, src/ops.c, src/option.h, src/proto/misc1.pro,
	    src/proto/ops.pro, src/search.c, src/testdir/test29.in,
	    src/testdir/test29.ok

Patch 7.3.542 (after 7.3.506)
问题:       Function is sometimes unused.
解决方案:   Add #ifdef.
相关文件:   src/gui_gtk.c

Patch 7.3.543
问题:       The cursor is in the wrong line after using &quot;:copen&quot;. (John
	    Beckett)
解决方案:   Invoke more drastic redraw method.
相关文件:   src/eval.c

Patch 7.3.544
问题:       There is no good way to close a quickfix window when closing the
	    last ordinary window.
解决方案:   Add the QuitPre autocommand.
相关文件:   src/ex_docmd.c, src/fileio.c, src/vim.h

Patch 7.3.545
问题:       When closing a window or buffer autocommands may close it too,
	    causing problems for where the autocommand was invoked from.
解决方案:   Add the w_closing and b_closing flags.  When set disallow &quot;:q&quot; and
	    &quot;:close&quot; to prevent recursive closing.
相关文件:   src/structs.h, src/buffer.c, src/ex_docmd.c, src/window.c

Patch 7.3.546
问题:       Bogus line break.
解决方案:   Remove the line break.
相关文件:   src/screen.c

Patch 7.3.547 (after 7.3.541)
问题:       Compiler warning for uninitialized variable.
解决方案:   Initialize it.
相关文件:   src/ops.c

Patch 7.3.548
问题:       Compiler warning on 64 bit Windows.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/ops.c

Patch 7.3.549
问题:       In <span class="Type">'cinoptions'</span> &quot;0s&quot; is interpreted as one shiftwidth. (David
	    Pineau)
解决方案:   Use the zero as zero. (Lech Lorens)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.550 (after 7.3.541)
问题:       With &quot;j&quot; in <span class="Type">'formatoptions'</span> a list leader is not removed. (Gary
	    Johnson)
解决方案:   Don't ignore the start of a three part comment. (Lech Lorens)
相关文件:   src/ops.c, src/testdir/test29.in, src/testdir/test29.ok

Patch 7.3.551
问题:       When using :tablose a TabEnter autocommand is triggered too early.
	    (Karthick)
解决方案:   Don't trigger *Enter autocommands before closing the tab.
	    (Christian Brabandt)
相关文件:   src/buffer.c, src/eval.c, src/ex_cmds2.c, src/fileio.c,
	    src/proto/window.pro, src/window.c

Patch 7.3.552
问题:       Formatting inside comments does not use the &quot;2&quot; flag in
	    <span class="Type">'formatoptions'</span>.
解决方案:   Support the &quot;2&quot; flag.  (Tor Perkins)
相关文件:   src/vim.h, src/ops.c, src/edit.c, src/misc1.c,
	    src/testdir/test68.in, src/testdir/test68.ok

Patch 7.3.553
问题:       With double-width characters and <span class="Type">'listchars'</span> containing &quot;precedes&quot;
	    the text is displayed one cell off.
解决方案:   Check for double-width character being overwritten by the
	    &quot;precedes&quot; character. (Yasuhiro Matsumoto)
相关文件:   src/screen.c

Patch 7.3.554 (after 7.3.551)
问题:       Compiler warning for unused argument.
解决方案:   Add UNUSED.
相关文件:   src/window.c

Patch 7.3.555
问题:       Building on IBM z/OS fails.
解决方案:   Adjust configure. Use the QUOTESED value from config.mk instead of
	    the hard coded one in Makefile. (Stephen Bovy)
相关文件:   src/configure.in, src/auto/configure, src/Makefile

Patch 7.3.556
问题:       Compiler warnings on 64 bit Windows.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/misc1.c

Patch 7.3.557
问题:       Crash when an autocommand wipes out a buffer when it is hidden.
解决方案:   Restore the current window when needed. (Christian Brabandt)
相关文件:   src/buffer.c

Patch 7.3.558
问题:       Memory access error. (Gary Johnson)
解决方案:   Allocate one more byte. (Dominique Pelle)
相关文件:   src/misc1.c

Patch 7.3.559
问题:       home_replace() does not work with 8.3 filename.
解决方案:   Make &quot;:p&quot; expand 8.3 name to full path. (Yasuhiro Matsumoto)
相关文件:   src/eval.c, src/misc1.c

Patch 7.3.560
问题:       Get an error for a locked argument in extend().
解决方案:   Initialize the lock flag for a dictionary. (Yukihiro Nakadaira)
相关文件:   src/eval.c

Patch 7.3.561
问题:       Using refresh: always in a complete function breaks the &quot;.&quot;
	    command. (Val Markovic)
解决方案:   Add match leader to the redo buffer. (Yasuhiro Matsumoto)
相关文件:   src/edit.c

Patch 7.3.562
问题:       &quot;:profdel&quot; should not work when the +profile feature is disabled.
解决方案:   Call ex_ni(). (Yasuhiro Matsumoto)
相关文件:   src/ex_cmds2.c

Patch 7.3.563 (after 7.3.557)
问题:       Can't build with tiny features.
解决方案:   Add #ifdef.
相关文件:   src/buffer.c

Patch 7.3.564 (after 7.3.559)
问题:       Warning for pointer conversion.
解决方案:   Add type cast.
相关文件:   src/misc1.c

Patch 7.3.565
问题:       Can't generate proto file for Python 3.
解决方案:   Add PYTHON3_CFLAGS to LINT_CFLAGS.
相关文件:   src/Makefile

Patch 7.3.566 (after 7.3.561)
问题:       Redo after completion does not work correctly when refresh: always
	    is not used. (Raymond Ko)
解决方案:   Check the compl_opt_refresh_always flag. (Christian Brabandt)
相关文件:   src/edit.c

Patch 7.3.567
问题:       Missing copyright notice.
解决方案:   Add Vim copyright notice. (Taro Muraoka)
相关文件:   src/dehqx.py

Patch 7.3.568
问题:       Bad indents for #ifdefs.
解决方案:   Add and remove spaces. (Elias Diem)
相关文件:   src/globals.h

Patch 7.3.569
问题:       Evaluating Vim expression in Python is insufficient.
解决方案:   Add vim.bindeval().  Also add pyeval() and py3eval(). (ZyX)
相关文件:   runtime/doc/eval.txt, runtime/doc/if_pyth.txt, src/eval.c,
	    src/if_lua.c, src/if_py_both.h, src/if_python.c, src/if_python3.c,
	    src/proto/eval.pro, src/proto/if_python.pro,
	    src/proto/if_python3.pro, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Makefile,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.570
问题:       &quot;:vimgrep&quot; does not obey <span class="Type">'wildignore'</span>.
解决方案:   Apply <span class="Type">'wildignore'</span> and <span class="Type">'suffixes'</span> to &quot;:vimgrep&quot;. (Ingo Karkat)
相关文件:   src/ex_cmds2.c, src/proto/ex_cmds2.pro, src/quickfix.c, src/spell.c

Patch 7.3.571
问题:       Duplicated condition.
解决方案:   Remove one. (Dominique Pelle)
相关文件:   src/os_win32.c

Patch 7.3.572
问题:       Duplicate statement in if and else. (Dominique Pelle)
解决方案:   Remove the condition and add a TODO.
相关文件:   src/gui_xmebw.c

Patch 7.3.573
问题:       Using array index before bounds checking.
解决方案:   Swap the parts of the condition. (Dominique Pelle)
相关文件:   src/ops.c

Patch 7.3.574
问题:       When pasting a register in the search command line a <span class="Special">CTRL-L</span>
	    character is not pasted. (Dominique Pelle)
解决方案:   Escape the <span class="Special">CTRL-L</span>. (Christian Brabandt)
相关文件:   src/ex_getln.c

Patch 7.3.575
问题:       &quot;ygt&quot; tries to yank instead of giving an error. (Daniel Mueller)
解决方案:   Check for a pending operator.
相关文件:   src/normal.c

Patch 7.3.576
问题:       Formatting of lists inside comments is not right yet.
解决方案:   Use another solution and add a test. (Tor Perkins)
相关文件:   src/edit.c, src/misc1.c, src/testdir/test68.in,
	    src/testdir/test69.ok

Patch 7.3.577
问题:       Size of memory does not fit in 32 bit unsigned.
解决方案:   Use Kbyte instead of byte.  Call GlobalMemoryStatusEx() instead of
	    GlobalMemoryStatus() when available.
相关文件:   src/misc2.c, src/option.c, src/os_amiga.c, src/os_msdos.c,
	    src/os_win16.c, src/os_win32.c

Patch 7.3.578
问题:       Misplaced declaration.
解决方案:   Move declaration to start of block.
相关文件:   src/if_py_both.h

Patch 7.3.579 (after 7.3.569)
问题:       Can't compile with Python 2.5.
解决方案:   Use PyCObject when Capsules are not available.
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.3.580
问题:       Warning on 64 bit MS-Windows.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/if_py_both.h

Patch 7.3.581
问题:       Problems compiling with Python.
解决方案:   Pick UCS2 or UCS4 function at runtime. (lilydjwg)
相关文件:   src/if_python.c

Patch 7.3.582 (after 7.3.576)
问题:       Missing parts of the test OK file.
解决方案:   Add the missing parts.
相关文件:   src/testdir/test68.ok

Patch 7.3.583
问题:       PyObject_NextNotImplemented is not defined before Python 2.7.
	    (Danek Duvall)
解决方案:   Add #ifdefs.
相关文件:   src/if_python.c

Patch 7.3.584
问题:       PyCObject is not always defined.
解决方案:   Use PyObject instead.
相关文件:   src/if_py_both.h, src/if_python.c

Patch 7.3.585
问题:       Calling changed_bytes() too often.
解决方案:   Move changed_bytes() out of a loop. (Tor Perkins)
相关文件:   src/edit.c

Patch 7.3.586
问题:       When compiling with Cygwin or MingW MEMORYSTATUSEX is not defined.
解决方案:   Set the default for WINVER to 0x0500.
相关文件:   src/Make_ming.mak, src/Make_cyg.mak

Patch 7.3.587
问题:       Compiler warning for local var shadowing global var.
解决方案:   Rename the var and move it to an inner block. (Christian Brabandt)
相关文件:   src/buffer.c

Patch 7.3.588
问题:       Crash on NULL pointer.
解决方案:   Fix the immediate problem by checking for NULL. (Lech Lorens)
相关文件:   src/window.c

Patch 7.3.589
问题:       Crash when $HOME is not set.
解决方案:   Check for a NULL pointer. (Chris Webb)
相关文件:   src/misc1.c

Patch 7.3.590
问题:       The '&lt; and '&gt; marks cannot be set directly.
解决方案:   Allow setting '&lt; and '&gt;. (Christian Brabandt)
相关文件:   src/mark.c

Patch 7.3.591
问题:       Can only move to a tab by absolute number.
解决方案:   Move a number of tabs to the left or the right. (Lech Lorens)
相关文件:   runtime/doc/tabpage.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/testdir/test62.in, src/testdir/test62.ok, src/window.c

Patch 7.3.592
问题:       Vim on GTK does not support g:browsefilter.
解决方案:   Add a GtkFileFilter to the file chooser. (Christian Brabandt)
相关文件:   src/gui_gtk.c

Patch 7.3.593
问题:       No easy way to decide if b:browsefilter will work.
解决方案:   Add the browsefilter feature.
相关文件:   src/gui_gtk.c, src/eval.c, src/vim.h

Patch 7.3.594
问题:       The X command server doesn't work perfectly. It sends an empty
	    reply for as-keys requests.
解决方案:   Remove duplicate ga_init2(). Do not send a reply for as-keys
	    requests. (Brian Burns)
相关文件:   src/if_xcmdsrv.c

Patch 7.3.595
问题:       The X command server responds slowly
解决方案:   Change the loop that waits for replies. (Brian Burns)
相关文件:   src/if_xcmdsrv.c

Patch 7.3.596
问题:       Can't remove all signs for a file or buffer.
解决方案:   Support &quot;*&quot; for the sign id. (Christian Brabandt)
相关文件:   runtime/doc/sign.txt, src/buffer.c, src/ex_cmds.c,
	    src/proto/buffer.pro

Patch 7.3.597
问题:       <span class="Type">'clipboard'</span> &quot;autoselect&quot; only applies to the * register. (Sergey
	    Vakulenko)
解决方案:   Make <span class="Type">'autoselect'</span> work for the + register. (Christian Brabandt)
	    Add the &quot;autoselectplus&quot; option in <span class="Type">'clipboard'</span> and the &quot;P&quot; flag in
	    <span class="Type">'guioptions'</span>.
相关文件:   runtime/doc/options.txt, src/normal.c, src/ops.c, src/screen.c,
	    src/ui.c, src/globals.h, src/proto/ui.pro, src/option.h, src/gui.c

Patch 7.3.598
问题:       Cannot act upon end of completion. (Taro Muraoka)
解决方案:   Add an autocommand event that is triggered when completion has
	    finished. (Idea by Florian Klein)
相关文件:   src/edit.c, src/fileio.c, src/vim.h

Patch 7.3.599 (after 7.3.597)
问题:       Missing change in one file.
解决方案:   Patch for changed clip_autoselect().
相关文件:   src/option.c

Patch 7.3.600
问题:       <span class="Special">&lt;f-args&gt;</span> is not expanded properly with DBCS encoding.
解决方案:   Skip over character instead of byte. (Yukihiro Nakadaira)
相关文件:   src/ex_docmd.c

Patch 7.3.601
问题:       Bad code style.
解决方案:   Insert space, remove parens.
相关文件:   src/farsi.c

Patch 7.3.602
问题:       Missing files in distribution.
解决方案:   Update the list of files.
相关文件:   Filelist

Patch 7.3.603
问题:       It is possible to add replace builtin functions by calling
	    extend() on g:.
解决方案:   Add a flag to a dict to indicate it is a scope.  Check for
	    existing functions. (ZyX)
相关文件:   src/buffer.c, src/eval.c, src/proto/eval.pro, src/structs.h,
	    src/testdir/test34.in, src/testdir/test34.ok, src/window.c

Patch 7.3.604
问题:       inputdialog() doesn't use the cancel argument in the console.
	    (David Fishburn)
解决方案:   Use the third argument. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.3.605 (after 7.3.577)
问题:       MS-Windows: Can't compile with older compilers. (Titov Anatoly)
解决方案:   Add #ifdef for MEMORYSTATUSEX.
相关文件:   src/os_win32.c

Patch 7.3.606
问题:       <span class="Special">CTRL-P</span> completion has a problem with multi-byte characters.
解决方案:   Check for next character being NUL properly.  (Yasuhiro Matsumoto)
相关文件:   src/search.c, src/macros.h

Patch 7.3.607
问题:       With an 8 color terminal the selected menu item is black on black,
	    because darkGrey as bg is the same as black.
解决方案:   Swap fg and bg colors. (James McCoy)
相关文件:   src/syntax.c

Patch 7.3.608
问题:       winrestview() does not always restore the view correctly.
解决方案:   Call win_new_height() and win_new_width(). (Lech Lorens)
相关文件:   src/eval.c, src/proto/window.pro, src/window.c

Patch 7.3.609
问题:       File names in :checkpath! output are garbled.
解决方案:   Check for \zs in the pattern. (Lech Lorens)
相关文件:   src/search.c, src/testdir/test17.in, src/testdir/test17.ok

Patch 7.3.610
问题:       Cannot operate on the text that a search pattern matches.
解决方案:   Add the &quot;gn&quot; and &quot;gN&quot; commands. (Christian Brabandt)
相关文件:   runtime/doc/index.txt, runtime/doc/visual.txt, src/normal.c,
	    src/proto/search.pro, src/search.c, src/testdir/test53.in,
	    src/testdir/test53.ok

Patch 7.3.611
问题:       Can't use Vim dictionary as self argument in Python.
解决方案:   Fix the check for the &quot;self&quot; argument. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.612
问题:       Auto formatting messes up text when <span class="Type">'fo'</span> contains &quot;2&quot;. (ZyX)
解决方案:   Decrement &quot;less_cols&quot;. (Tor Perkins)
相关文件:   src/misc1.c, src/testdir/test68.in, src/testdir/test68.ok

Patch 7.3.613
问题:       Including Python's config.c in the build causes trouble.  It is
	    not clear why it was there.
解决方案:   Omit the config file. (James McCoy)
相关文件:   src/Makefile, src/auto/configure, src/configure.in

Patch 7.3.614
问题:       Number argument gets turned into a number while it should be a
	    string.
解决方案:   Add flag to the call_vim_function() call. (Yasuhiro Matsumoto)
相关文件:   src/edit.c, src/eval.c, src/proto/eval.pro

Patch 7.3.615
问题:       Completion for a user command does not recognize backslash before
	    a space.
解决方案:   Recognize escaped characters. (Yasuhiro Matsumoto)
相关文件:   src/ex_docmd.c

Patch 7.3.616 (after 7.3.610)
问题:       Can't compile without +visual.
解决方案:   Add #ifdef.
相关文件:   src/normal.c

Patch 7.3.617 (after 7.3.615)
问题:       Hang on completion.
解决方案:   Skip over the space. (Yasuhiro Matsumoto)
相关文件:   src/ex_docmd.c

Patch 7.3.618 (after 7.3.616)
问题:       Still doesn't compile with small features.
解决方案:   Move current_search() out of #ifdef. (Dominique Pelle)
相关文件:   src/normal.c, src/search.c

Patch 7.3.619
问题:       When executing a shell command Vim may become slow to respond.
解决方案:   Don't wait after every processed message. (idea by Yasuhiro
	    Matsumoto)
相关文件:   src/os_win32.c

Patch 7.3.620
问题:       Building with recent Ruby on Win32 doesn't work.
解决方案:   Add a separate argument for the API version. (Yasuhiro Matsumoto)
相关文件:   src/Make_ming.mak, src/Make_mvc.mak

Patch 7.3.621
问题:       Compiler warnings on 64 bit windows.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/ex_docmd.c, src/search.c

Patch 7.3.622
问题:       XPM library for Win32 can't be found.
解决方案:   Suggest using the one from the Vim ftp site.
相关文件:   src/Make_mvc.mak

Patch 7.3.623
问题:       Perl 5.14 commands crash Vim on MS-Windows.
解决方案:   Use perl_get_sv() instead of GvSV(). (Raymond Ko)
相关文件:   src/if_perl.xs

Patch 7.3.624
问题:       When cancelling input() it returns the third argument. That should
	    only happen for inputdialog().
解决方案:   Check if inputdialog() was used. (Hirohito Higashi)
相关文件:   src/eval.c

Patch 7.3.625
问题:       &quot;gn&quot; does not handle zero-width matches correctly.
解决方案:   Handle zero-width patterns specially. (Christian Brabandt)
相关文件:   src/search.c

Patch 7.3.626
问题:       Python interface doesn't build with Python 2.4 or older.
解决方案:   Define Py_ssize_t. (Benjamin Bannier)
相关文件:   src/if_py_both.h

Patch 7.3.627
问题:       When using the &quot;n&quot; flag with the &quot;:s&quot; command a \= substitution
	    will not be evaluated.
解决方案:   Do perform the evaluation, so that a function can be invoked at
	    every matching position without changing the text. (Christian
	    Brabandt)
相关文件:   src/ex_cmds.c

Patch 7.3.628
问题:       &quot;:open&quot; does not allow for a !, which results in a confusing error
	    message. (Shawn Wilson)
解决方案:   Allow ! on &quot;:open&quot;. (Christian Brabandt)
相关文件:   src/ex_cmds.h

Patch 7.3.629
问题:       There is no way to make <span class="Type">'shiftwidth'</span> follow <span class="Type">'tabstop'</span>.
解决方案:   When <span class="Type">'shiftwidth'</span> is zero use the value of <span class="Type">'tabstop'</span>. (Christian
	    Brabandt)
相关文件:   src/edit.c, src/ex_getln.c, src/fold.c, src/misc1.c, src/ops.c,
	    src/option.c, src/proto/option.pro

Patch 7.3.630
问题:       &quot;|&quot; does not behave correctly when <span class="Type">'virtualedit'</span> is set.
解决方案:   Call validate_virtcol(). (David Bürgin)
相关文件:   src/normal.c

Patch 7.3.631
问题:       Cannot complete user names.
解决方案:   Add user name completion.  (Dominique Pelle)
相关文件:   runtime/doc/map.txt, src/auto/configure, src/config.h.in,
	    src/configure.in, src/ex_docmd.c, src/ex_getln.c, src/misc1.c,
	    src/misc2.c, src/proto/misc1.pro, src/vim.h

Patch 7.3.632
问题:       Cannot select beyond 222 columns with the mouse in xterm.
解决方案:   Add support for SGR mouse tracking. (Hayaki Saito)
相关文件:   runtime/doc/options.txt, src/feature.h, src/keymap.h, src/misc2.c,
	    src/option.h, src/os_unix.c, src/term.c, src/version.c

Patch 7.3.633
问题:       Selection remains displayed as selected after selecting another
	    text.
解决方案:   Call xterm_update() before select(). (Andrew Pimlott)
相关文件:   src/os_unix.c

Patch 7.3.634
问题:       Month/Day format for undo is confusing. (Marcin Szamotulski)
解决方案:   Always use Year/Month/Day, should work for everybody.
相关文件:   src/undo.c

Patch 7.3.635
问题:       Issue 21: System call during startup sets <span class="Type">'lines'</span> to a wrong
	    value. (Karl Yngve)
解决方案:   Don't set the shell size while the GUI is still starting up.
	    (Christian Brabandt)
相关文件:   src/ui.c

Patch 7.3.636 (after 7.3.625)
问题:       Not all zero-width matches handled correctly for &quot;gn&quot;.
解决方案:   Move zero-width detection to a separate function. (Christian
	    Brabandt)
相关文件:   src/search.c

Patch 7.3.637
问题:       Cannot catch the error caused by a foldopen when there is no fold.
	    (ZyX, Issue 48)
解决方案:   Do not break out of the loop early when inside try/catch.
	    (Christian Brabandt) Except when there is a syntax error.
相关文件:   src/ex_docmd.c, src/globals.h

Patch 7.3.638
问题:       Unnecessary redraw of the previous character.
解决方案:   Check if the character is double-width. (Jon Long)
相关文件:   src/screen.c

Patch 7.3.639
问题:       It's not easy to build Vim on Windows with XPM support.
解决方案:   Include the required files, they are quite small.  Update the
	    MSVC makefile to use them.  Binary files are in the next patch.
	    (Sergey Khorev)
相关文件:   src/xpm/COPYRIGHT, src/xpm/README.txt, src/xpm/include/simx.h,
	    src/xpm/include/xpm.h, src/Make_mvc.mak, src/bigvim.bat,
	    src/bigvim64.bat, Filelist

Patch 7.3.640
问题:       It's not easy to build Vim on Windows with XPM support.
解决方案:   Binary files for 7.3.639. (Sergey Khorev)
相关文件:   src/xpm/x64/lib/libXpm.lib, src/xpm/x86/lib/libXpm.a,
	    src/xpm/x86/lib/libXpm.lib

Patch 7.3.641
问题:       &quot;:mkview&quot; uses &quot;:normal&quot; instead of &quot;:normal!&quot; for folds. (Dan)
解决方案:   Add the bang. (Christian Brabandt)
相关文件:   src/fold.c

Patch 7.3.642
问题:       Segfault with specific autocommands.  Was OK after 7.3.449 and
	    before 7.3.545. (Richard Brown)
解决方案:   Pass TRUE for abort_if_last in the call to close_buffer().
	    (Christian Brabandt)
相关文件:   src/window.c

Patch 7.3.643 (after 7.3.635)
问题:       MS-Windows: When starting gvim maximized <span class="Type">'lines'</span> and <span class="Type">'columns'</span> are
	    wrong. (Christian Robinson)
解决方案:   Move the check for gui.starting from ui_get_shellsize() to
	    check_shellsize().
相关文件:   src/ui.c, src/term.c

Patch 7.3.644
问题:       Dead code for BeOS GUI.
解决方案:   Remove unused __BEOS__ stuff.
相关文件:   src/gui.c

Patch 7.3.645
问题:       No tests for patch 7.3.625 and 7.3.637.
解决方案:   Add more tests for the &quot;gn&quot; command and try/catch. (Christian
	    Brabandt)
相关文件:   src/testdir/test53.in, src/testdir/test53.ok,
	    src/testdir/test55.in, src/testdir/test55.ok

Patch 7.3.646
问题:       When reloading a buffer the undo file becomes unusable unless &quot;:w&quot;
	    is executed. (Dmitri Frank)
解决方案:   After reloading the buffer write the undo file. (Christian
	    Brabandt)
相关文件:   src/fileio.c

Patch 7.3.647
问题:       &quot;gnd&quot; doesn't work correctly in Visual mode.
解决方案:   Handle Visual mode differently in &quot;gn&quot;. (Christian Brabandt)
相关文件:   src/search.c, src/testdir/test53.in, src/testdir/test53.ok

Patch 7.3.648
问题:       Crash when using a very long file name. (ZyX)
解决方案:   Properly check length of buffer space.
相关文件:   src/buffer.c

Patch 7.3.649
问题:       When <span class="Type">'clipboard'</span> is set to &quot;unnamed&quot; small deletes end up in the
	    numbered registers. (Ingo Karkat)
解决方案:   Use the original register name to decide whether to put a delete
	    in a numbered register. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.3.650
问题:       Completion after &quot;:help \{-&quot; gives an error message and messes up
	    the command line.
解决方案:   Cancel the tag search if the pattern can't be compiled. (Yasuhiro
	    Matsumoto)
相关文件:   src/tag.c

Patch 7.3.651
问题:       Completion after &quot;:help \{-&quot; gives an error message.
解决方案:   Prepend a backslash.
相关文件:   src/ex_cmds.c

Patch 7.3.652
问题:       Workaround for Python crash isn't perfect.
解决方案:   Change the type of the length argument. (Sean Estabrooks)
相关文件:   src/if_py_both.h

Patch 7.3.653
问题:       MingW needs build rule for included XPM files.  Object directory
	    for 32 and 64 builds is the same, also for MSVC.
解决方案:   Add MingW build rule to use included XPM files.  Add the CPU or
	    architecture to the object directory name. (Sergey Khorev)
相关文件:   src/Make_ming.mak, src/Make_mvc.mak, src/xpm/README.txt

Patch 7.3.654
问题:       When creating a Vim dictionary from Python objects an empty key
	    might be used.
解决方案:   Do not use empty keys, throw an IndexError. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.655
问题:       64 bit MingW xpm .a file is missing.
解决方案:   Add the file. (Sergey Khorev)
相关文件:   src/xpm/x64/lib/libXpm.a

Patch 7.3.656
问题:       Internal error in :pyeval.
解决方案:   Handle failed object conversion. (ZyX)
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.3.657
问题:       Python bindings silently truncate string values containing NUL.
解决方案:   Fail when a string contains NUL. (ZyX)
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.3.658
问题:       NUL bytes truncate strings when converted from Python.
解决方案:   Handle truncation as an error. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c

Patch 7.3.659
问题:       Recent Python changes are not tested.
解决方案:   Add tests for Python bindings. (ZyX)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.660
问题:       &quot;:help !&quot; jumps to help for &quot;:!&quot;.
解决方案:   Adjust check for tag header line. (Andy Wokula)
相关文件:   src/tag.c

Patch 7.3.661 (after 7.3.652)
问题:       SEGV in Python code.
解决方案:   Initialize len to zero.  Use the right function depending on
	    version. (Maxim Philippov)
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.3.662
问题:       Can't build Ruby interface with Ruby 1.9.3.
解决方案:   Add missing functions. (V. Ondruch)
相关文件:   src/if_ruby.c

Patch 7.3.663
问题:       End of color scheme name not clear in E185. (Aaron Lewis)
解决方案:   Put the name in single quotes.
相关文件:   src/ex_docmd.c

Patch 7.3.664
问题:       Buffer overflow in unescaping text. (Raymond Ko)
解决方案:   Limit check for multi-byte character to 4 bytes.
相关文件:   src/mbyte.c

Patch 7.3.665
问题:       MSVC 11 is not supported. (Raymond Ko)
解决方案:   Recognize MSVC 11. (Gary Willoughby)
相关文件:   src/Make_mvc.mak

Patch 7.3.666
问题:       With MSVC 11 Win32.mak is not found.
解决方案:   Add the SDK_INCLUDE_DIR variable. (Raymond Ko)
相关文件:   src/Make_mvc.mak

Patch 7.3.667
问题:       Unused variables in Perl interface.
解决方案:   Adjust #ifdefs.
相关文件:   src/if_perl.xs

Patch 7.3.668
问题:       Building with Perl loaded dynamically  still uses static library.
解决方案:   Adjust use of PL_thr_key. (Ken Takata)
相关文件:   src/if_perl.xs

Patch 7.3.669
问题:       When building with Cygwin loading Python dynamically fails.
解决方案:   Use DLLLIBRARY instead of INSTSONAME. (Ken Takata)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.670
问题:       Python: memory leaks when there are exceptions.
解决方案:   Add DICTKEY_UNREF in the right places. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.671
问题:       More Python code can be shared between Python 2 and 3.
解决方案:   Move code to if_py_both.h. (ZyX)
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.3.672
问题:       Not possible to lock/unlock lists in Python interface.
解决方案:   Add .locked and .scope attributes. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/if_python.c,
	    src/if_python3.c, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.673
问题:       Using &quot;gN&quot; while <span class="Type">'selection'</span> is &quot;exclusive&quot; misses one character.
	    (Ben Fritz)
解决方案:   Check the direction when compensating for exclusive selection.
	    (Christian Brabandt)
相关文件:   src/search.c

Patch 7.3.674
问题:       Can't compile with Lua/dyn on Cygwin.
解决方案:   Adjust configure to use the right library name. (Ken Takata)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.675
问题:       Using uninitialized memory with very long file name.
解决方案:   Put NUL after text when it is truncated. (ZyX)
相关文件:   src/buffer.c

Patch 7.3.676
问题:       Ruby compilation on Windows 32 bit doesn't work.
解决方案:   Only use some functions for 64 bit. (Ken Takata)
相关文件:   src/if_ruby.c

Patch 7.3.677
问题:       buf_spname() is used inconsistently.
解决方案:   Make the return type a char_u pointer.  Check the size of the
	    returned string.
相关文件:   src/buffer.c, src/proto/buffer.pro, src/ex_cmds2.c,
	    src/ex_docmd.c, src/memline.c, src/screen.c

Patch 7.3.678
问题:       Ruby .so name may not be correct.
解决方案:   Use the LIBRUBY_SO entry from the config. (Vit Ondruch)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.679
问题:       Ruby detection uses Config, newer Ruby versions use RbConfig.
解决方案:   Detect the need to use RbConfig. (Vit Ondruch)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.680
问题:       Some files missing in the list of distributed files.
解决方案:   Add lines for new files.
相关文件:   Filelist

Patch 7.3.681 (after 7.3.680)
问题:       List of distributed files picks up backup files.
解决方案:   Make tutor patterns more specific.
相关文件:   Filelist

Patch 7.3.682 (after 7.3.677)
问题:       Compiler complains about incompatible types.
解决方案:   Remove type casts. (hint by Danek Duvall)
相关文件:   src/edit.c

Patch 7.3.683
问题:       &quot;:python&quot; may crash when vimbindeval() returns None.
解决方案:   Check for v_string to be NULL. (Yukihiro Nakadaira)
相关文件:   src/if_py_both.h

Patch 7.3.684
问题:       &quot;make test&quot; does not delete lua.vim.
解决方案:   Add lua.vim to the clean target. (Simon Ruderich)
相关文件:   src/testdir/Makefile, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_vms.mms

Patch 7.3.685
问题:       No test for what patch 7.3.673 fixes.
解决方案:   Add a test. (Christian Brabandt)
相关文件:   src/testdir/test53.in, src/testdir/test53.ok

Patch 7.3.686
问题:       Using <span class="Special">CTRL-\</span> e mappings is useful also when entering an
	    expression, but it doesn't work. (Marcin Szamotulski)
解决方案:   Allow using <span class="Special">CTRL-\</span> e when entering an expression if it was not
	    typed.
相关文件:   src/ex_getln.c

Patch 7.3.687
问题:       Test 16 fails when $DISPLAY is not set.
解决方案:   Skip the test when $DISPLAY is not set.
相关文件:   src/testdir/test16.in

Patch 7.3.688
问题:       Python 3.3 is not supported.
解决方案:   Add Python 3.3 support (Ken Takata)
相关文件:   src/if_python3.c

Patch 7.3.689
问题:       MzScheme and Lua may use a NULL string.
解决方案:   Use an empty string instead of NULL. (Yukihiro Nakadaira)
相关文件:   src/if_lua.c, src/if_mzsch.c

Patch 7.3.690
问题:       When the current directory name is exactly the maximum path length
	    Vim may crash.
解决方案:   Only add &quot;/&quot; when there is room. (Danek Duvall)
相关文件:   src/os_unix.c

Patch 7.3.691
问题:       State specific to the Python thread is discarded.
解决方案:   Keep state between threads. (Paul)
相关文件:   src/if_python.c

Patch 7.3.692
问题:       Can't build GTK version with GTK 2.0.
解决方案:   Put GtkFileFilter declaration in the right place. (Yegappan
	    Lakshmanan)
相关文件:   src/gui_gtk.c

Patch 7.3.693
问题:       Can't make <span class="Type">'softtabstop'</span> follow <span class="Type">'shiftwidth'</span>.
解决方案:   When <span class="Type">'softtabstop'</span> is negative use the value of <span class="Type">'shiftwidth'</span>.
	    (so8res)
相关文件:   src/edit.c, src/option.c, src/proto/option.pro

Patch 7.3.694
问题:       Now that <span class="Type">'shiftwidth'</span> may use the value of <span class="Type">'tabstop'</span> it is not so
	    easy to use in indent files.
解决方案:   Add the shiftwidth() function. (so8res)
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.3.695
问题:       Balloon cannot show multi-byte text.
解决方案:   Properly deal with multi-byte characters. (Dominique Pelle)
相关文件:   src/gui_beval.c, src/ui.c

Patch 7.3.696
问题:       Message about added spell language can be wrong.
解决方案:   Give correct message. Add g:menutrans_set_lang_to to allow for
	    translation. (Jiri Sedlak)
相关文件:   runtime/menu.vim

Patch 7.3.697
问题:       Leaking resources when setting GUI font.
解决方案:   Free the font. (Ken Takata)
相关文件:   src/syntax.c

Patch 7.3.698
问题:       Python 3 does not preserve state between commands.
解决方案:   Preserve the state. (Paul Ollis)
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.3.699
问题:       When <span class="Type">'ttymouse'</span> is set to &quot;sgr&quot; manually, it is overruled by
	    automatic detection.
解决方案:   Do not use automatic detection when <span class="Type">'ttymouse'</span> was set manually.
	    (Hayaki Saito)
相关文件:   src/term.c

Patch 7.3.700
问题:       Cannot detect URXVT and SGR mouse support.
解决方案:   add +mouse_urxvt and +mouse_sgr. (Hayaki Saito)
相关文件:   src/feature.h, src/eval.c

Patch 7.3.701
问题:       MS-Windows: Crash with stack overflow when setting <span class="Type">'encoding'</span>.
解决方案:   Handle that loading the iconv library may be called recursively.
	    (Jiri Sedlak)
相关文件:   src/os_win32.c

Patch 7.3.702
问题:       Nmake from VS6 service pack 6 is not recognized.
解决方案:   Detect the version number. (Jiri Sedlak)
相关文件:   src/Make_mvc.mak

Patch 7.3.703
问题:       When <span class="Type">'undofile'</span> is reset the hash is computed unnecessarily.
解决方案:   Only compute the hash when the option was set. (Christian Brabandt)
相关文件:   src/option.c

Patch 7.3.704
问题:       Repeating &quot;cgn&quot; does not always work correctly.
解决方案:   Also fetch the operator character. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.3.705
问题:       Mouse features are not sorted properly. (Tony Mechelynck)
解决方案:   Put the mouse features in alphabetical order.
相关文件:   src/version.c

Patch 7.3.706 (after 7.3.697)
问题:       Can't build Motif version.
解决方案:   Fix wrongly named variable. (Ike Devolder)
相关文件:   src/syntax.c

Patch 7.3.707 (after 7.3.701)
问题:       Problems loading a library for a file name with non-latin
	    characters.
解决方案:   Use wide system functions when possible. (Ken Takata)
相关文件:   src/os_win32.c, src/os_win32.h

Patch 7.3.708
问题:       Filler lines above the first line may be hidden when opening Vim.
解决方案:   Change how topfill is computed. (Christian Brabandt)
相关文件:   src/diff.c, src/testdir/test47.in, src/testdir/test47.ok

Patch 7.3.709
问题:       Compiler warning for unused argument.
解决方案:   Add UNUSED.
相关文件:   src/eval.c

Patch 7.3.710 (after 7.3.704)
问题:       Patch 7.3.704 breaks &quot;fn&quot;.
解决方案:   Add check for ca.cmdchar. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.3.711 (after 7.3.688)
问题:       vim.current.buffer is not available. (lilydjwg)
解决方案:   Use py3_PyUnicode_AsUTF8 instead of py3_PyUnicode_AsUTF8String.
	    (Ken Takata)
相关文件:   src/if_python3.c

Patch 7.3.712
问题:       Nmake from VS2010 SP1 is not recognized.
解决方案:   Add the version number. (Ken Takata)
相关文件:   src/Make_mvc.mak

Patch 7.3.713
问题:       printf() can only align to bytes, not characters.
解决方案:   Add the &quot;S&quot; item. (Christian Brabandt)
相关文件:   runtime/doc/eval.txt, src/message.c

Patch 7.3.714
问题:       Inconsistency: :set can be used in the sandbox, but :setlocal and
	    :setglobal cannot. (Michael Henry)
解决方案:   Fix the flags for :setlocal and :setglobal. (Christian Brabandt)
相关文件:   src/ex_cmds.h

Patch 7.3.715
问题:       Crash when calling setloclist() in BufUnload autocmd. (Marcin
	    Szamotulski)
解决方案:   Set w_llist to NULL when it was freed.  Also add a test.
	    (Christian Brabandt)
相关文件:   src/quickfix.c, src/testdir/test49.ok, src/testdir/test49.vim

Patch 7.3.716
问题:       Error on exit when using Python 3.
解决方案:   Remove PythonIO_Fini(). (Roland Puntaier)
相关文件:   src/if_python3.c

Patch 7.3.717
问题:       When changing the font size, only MS-Windows limits the window
	    size.
解决方案:   Also limit the window size on other systems. (Roland Puntaier)
相关文件:   src/gui.c

Patch 7.3.718
问题:       When re-using the current buffer the buffer-local options stay.
解决方案:   Re-initialize the buffer-local options. (Christian Brabandt)
相关文件:   src/buffer.c

Patch 7.3.719
问题:       Cannot run new version of cproto, it fails on missing include
	    files.
解决方案:   Add lots of #ifndef PROTO
相关文件:   src/os_amiga.c, src/os_amiga.h, src/gui_w16.c, src/gui_w48.c,
	    src/gui_w32.c, src/vimio.h, src/os_msdos.c, src/os_msdos.h,
	    src/os_win16.h, src/os_win16.c, src/os_win32.h, src/os_win32.c,
	    src/os_mswin.c, src/gui_photon.c, src/os_unix.h, src/os_beos.c,
	    src/os_beos.h

Patch 7.3.720
问题:       Proto files are outdated.
解决方案:   Update the newly generated proto files.
相关文件:   src/proto/digraph.pro, src/proto/fold.pro, src/proto/misc1.pro,
	    src/proto/move.pro, src/proto/screen.pro, src/proto/search.pro,
	    src/proto/os_win32.pro, src/proto/os_mswin.pro,
	    src/proto/os_beos.pro

Patch 7.3.721
问题:       Ruby interface defines local functions globally.
解决方案:   Make the functions static.
相关文件:   src/if_ruby.c

Patch 7.3.722
问题:       Perl flags may contain &quot;-g&quot;, which breaks &quot;make proto&quot;.
解决方案:   Filter out the &quot;-g&quot; flag for cproto. (Ken Takata)
相关文件:   src/Makefile

Patch 7.3.723
问题:       Various tiny problems.
解决方案:   Various tiny fixes.
相关文件:   src/gui_mac.c, src/xpm_w32.c, src/netbeans.c, src/sha256.c,
	    src/if_sniff.c, README.txt

Patch 7.3.724
问题:       Building with Ruby and Tcl on MS-Windows 64 bit does not work.
解决方案:   Remove Ruby and Tcl from the big MS-Windows build.
相关文件:   src/bigvim64.bat

Patch 7.3.725
问题:       :aboveleft and :belowright have no effect on :copen.
解决方案:   Check for cmdmod.split. (Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.3.726
问题:       Typos and duplicate info in README.
解决方案:   Fix the text.
相关文件:   README.txt

Patch 7.3.727
问题:       Can't always find Win32.mak when building GvimExt.
解决方案:   Use same mechanism as in Make_mvc.mak. (Cade Foster)
相关文件:   src/GvimExt/Makefile

Patch 7.3.728
问题:       Cannot compile with MzScheme interface on Ubuntu 12.10.
解决方案:   Find the collects directory under /usr/share.
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.729
问题:       Building with Ruby fails on some systems.
解决方案:   Remove &quot;static&quot; and add #ifndef PROTO. (Ken Takata)
相关文件:   src/if_ruby.c

Patch 7.3.730
问题:       Crash in PHP file when using syntastic. (Ike Devolder)
解决方案:   Avoid using NULL pointer. (Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.3.731
问题:       Py3Init_vim() is exported unnecessarily.
解决方案:   Make it static. (Ken Takata)
相关文件:   src/if_python3.c

Patch 7.3.732
问题:       Compiler warnings for function arguments.
解决方案:   Use inteptr_t instead of long.
相关文件:   src/if_mzsch.c, src/main.c

Patch 7.3.733
问题:       Tests fail when including MzScheme.
解决方案:   Change #ifdefs for vim_main2().
相关文件:   src/main.c

Patch 7.3.734
问题:       Cannot put help files in a sub-directory.
解决方案:   Make :helptags work for sub-directories. (Charles Campbell)
相关文件:   src/ex_cmds.c

Patch 7.3.735
问题:       Cannot build Ruby 1.9 with MingW or Cygwin.
解决方案:   Add another include directory. (Ken Takata)
相关文件:   src/Make_cyg.mak, src/Make_ming.mak

Patch 7.3.736
问题:       File name completion in input() escapes white space. (Frederic
	    Hardy)
解决方案:   Do not escape white space. (Christian Brabandt)
相关文件:   src/ex_getln.c

Patch 7.3.737
问题:       When using do_cmdline() recursively did_endif is not reset,
	    causing messages to be overwritten.
解决方案:   Reset did_endif. (Christian Brabandt)
相关文件:   src/ex_docmd.c

Patch 7.3.738 (after 7.3.730)
问题:       Unused function argument.
解决方案:   Remove it. (Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.3.739
问题:       Computing number of lines may have an integer overflow.
解决方案:   Check for MAXCOL explicitly. (Dominique Pelle)
相关文件:   src/move.c

Patch 7.3.740
问题:       IOC tool complains about undefined behavior for int.
解决方案:   Change to unsigned int. (Dominique Pelle)
相关文件:   src/hashtab.c, src/misc2.c

Patch 7.3.741 (after 7.3.737)
问题:       Tiny build fails.
解决方案:   Move #ifdef. (Ike Devolder)
相关文件:   src/ex_docmd.c

Patch 7.3.742
问题:       Leaking memory when :vimgrep restores the directory.
解决方案:   Free the allocated memory. (Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.3.743 (after 7.3.741)
问题:       Tiny build still fails.
解决方案:   Add #else in the right place.
相关文件:   src/ex_docmd.c

Patch 7.3.744
问题:       64 bit compiler warning.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/ex_cmds.c

Patch 7.3.745
问题:       Automatically setting <span class="Type">'ttymouse'</span> doesn't work.
解决方案:   Reset the &quot;option was set&quot; flag when using the default.
相关文件:   src/option.c, src/proto/option.pro, src/term.c

Patch 7.3.746
问题:       Memory leaks when using location lists.
解决方案:   Set qf_title to something. (Christian Brabandt)
相关文件:   src/eval.c, src/quickfix.c

Patch 7.3.747
问题:       When characters are concealed text aligned with tabs are no longer
	    aligned, e.g. at &quot;:help :index&quot;.
解决方案:   Compensate space for tabs for concealed characters. (Dominique
	    Pelle)
相关文件:   src/screen.c

Patch 7.3.748
问题:       Cannot properly test conceal mode.
解决方案:   Add the screencol() and screenrow() functions.  Use them in
	    test88. (Simon Ruderich)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/proto/screen.pro,
	    src/screen.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms
	    src/testdir/Makefile, src/testdir/test88.in,
	    src/testdir/test88.ok,

Patch 7.3.749
问题:       Python interface doesn't build without the multi-byte feature.
解决方案:   Add #ifdef. (Ken Takata)
相关文件:   src/if_py_both.h

Patch 7.3.750
问题:       The justify macro does not always work correctly.
解决方案:   Fix off-by-one error (James McCoy)
相关文件:   runtime/macros/justify.vim

Patch 7.3.751
问题:       Test 61 is flaky, it fails once in a while.
解决方案:   When it fails retry once.
相关文件:   src/testdir/Makefile

Patch 7.3.752
问题:       Test 49 script file doesn't fold properly.
解决方案:   Add a colon.
相关文件:   src/testdir/test49.vim

Patch 7.3.753
问题:       When there is a QuitPre autocommand using &quot;:q&quot; twice does not work
	    for exiting when there are more files to edit.
解决方案:   Do not decrement quitmore in an autocommand. (Techlive Zheng)
相关文件:   src/ex_docmd.c, src/fileio.c, src/proto/fileio.pro

Patch 7.3.754
问题:       Latest nmake is not recognized.
解决方案:   Add nmake version 11.00.51106.1. (Raymond Ko)
相关文件:   src/Make_mvc.mak

Patch 7.3.755
问题:       Autoconf doesn't find Python 3 if it's called &quot;python&quot;.
解决方案:   Search for &quot;python2&quot; and &quot;python3&quot; first, then &quot;python&quot;.
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.756
问题:       A location list can get a wrong count in :lvimgrep.
解决方案:   Check if the list was changed by autocommands. (mostly by
	    Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.3.757
问题:       Issue 96: May access freed memory when a put command triggers
	    autocommands. (Dominique Pelle)
解决方案:   Call u_save() before getting y_array.
相关文件:   src/ops.c

Patch 7.3.758
问题:       Matchit plugin does not handle space in #ifdef.
解决方案:   Change matching pattern to allow spaces. (Mike Morearty)
相关文件:   runtime/macros/matchit.vim

Patch 7.3.759
问题:       MS-Windows: Updating the tabline is slow when there are many tabs.
解决方案:   Disable redrawing while performing the update. (Arseny Kapoulkine)
相关文件:   src/gui_w48.c

Patch 7.3.760
问题:       dv_ deletes the white space before the line.
解决方案:   Move the cursor to the first non-white. (Christian Brabandt)
相关文件:   src/normal.c, src/testdir/test19.in, src/testdir/test19.ok

Patch 7.3.761
问题:       In Visual mode a &quot;-p does not work. (Marcin Szamotulski)
解决方案:   Avoid writing to &quot;- before putting it. (Christian Brabandt)
相关文件:   src/normal.c, src/testdir/test48.in, src/testdir/test48.ok

Patch 7.3.762 (after 7.3.759)
问题:       On some systems the tabline is not redrawn.
解决方案:   Call RedrawWindow(). (Charles Peacech)
相关文件:   src/gui_w48.c

Patch 7.3.763
问题:       Jumping to a mark does not open a fold if it is in the same line.
	    (Wiktor Ruben)
解决方案:   Also compare the column after the jump. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.3.764
问题:       Not all message translation files are installed.
解决方案:   Also install the converted files.
相关文件:   src/po/Makefile

Patch 7.3.765
问题:       Segfault when doing &quot;cclose&quot; on BufUnload in a python function.
	    (Sean Reifschneider)
解决方案:   Skip window with NULL buffer. (Christian Brabandt)
相关文件:   src/main.c, src/window.c

Patch 7.3.766
问题:       &quot;:help cpo-*&quot; jumps to the wrong place.
解决方案:   Make it equivalent to &quot;:help cpo-star&quot;.
相关文件:   src/ex_cmds.c

Patch 7.3.767
问题:       (Win32) The _errno used for iconv may be the wrong one.
解决方案:   Use the _errno from iconv.dll. (Ken Takata)
相关文件:   src/mbyte.c

Patch 7.3.768
问题:       settabvar() and setwinvar() may move the cursor.
解决方案:   Save and restore the cursor position when appropriate. (idea by
	    Yasuhiro Matsumoto)
相关文件:   src/edit.c

Patch 7.3.769
问题:       <span class="Type">'matchpairs'</span> does not work with multi-byte characters.
解决方案:   Make it work. (Christian Brabandt)
相关文件:   src/misc1.c, src/option.c, src/proto/option.pro, src/search.c,
	    src/testdir/test69.in, src/testdir/test69.ok

Patch 7.3.770
问题:       Vim.h indentation is inconsistent.
解决方案:   Adjust the indentation. (Elias Diem)
相关文件:   src/vim.h

Patch 7.3.771 (after 7.3.769)
问题:       Uninitialized variable. (Yasuhiro Matsumoto)
解决方案:   Set x2 to -1.
相关文件:   src/option.c

Patch 7.3.772
问题:       Cursor is at the wrong location and below the end of the file
	    after doing substitutions with confirm flag: %s/x/y/c
	    (Dominique Pelle)
解决方案:   Update the cursor position. (Christian Brabandt &amp; Dominique)
相关文件:   src/ex_cmds.c

Patch 7.3.773 (after 7.3.767)
问题:       Crash when OriginalFirstThunk is zero.
解决方案:   Skip items with OriginalFirstThunk not set. (Ken Takata)
相关文件:   src/mbyte.c

Patch 7.3.774
问题:       Tiny GUI version misses console dialog feature.
解决方案:   Define FEAT_CON_DIALOG when appropriate. (Christian Brabandt)
相关文件:   src/feature.h, src/gui.h

Patch 7.3.775
问题:       Cygwin and Mingw builds miss dependency on gui_w48.c.
解决方案:   Add a build rule. (Ken Takata)
相关文件:   src/Make_cyg.mak, src/Make_ming.mak

Patch 7.3.776
问题:       ml_get error when searching, caused by curwin not matching curbuf.
解决方案:   Avoid changing curbuf. (Lech Lorens)
相关文件:   src/charset.c, src/eval.c, src/mark.c, src/proto/charset.pro,
	    src/proto/mark.pro, src/regexp.c, src/syntax.c,

Patch 7.3.777
问题:       When building with Gnome locale gets reset.
解决方案:   Set locale after gnome_program_init(). (Christian Brabandt)
相关文件:   src/gui_gtk_x11.c

Patch 7.3.778
问题:       Compiler error for adding up two pointers. (Titov Anatoly)
解决方案:   Add a type cast. (Ken Takata)
相关文件:   src/mbyte.c

Patch 7.3.779
问题:       Backwards search lands in wrong place when started on a multibyte
	    character.
解决方案:   Do not set extra_col for a backwards search. (Sung Pae)
相关文件:   src/search.c, src/testdir/test44.in, src/testdir/test44.ok

Patch 7.3.780
问题:       char2nr() and nr2char() always use <span class="Type">'encoding'</span>.
解决方案:   Add argument to use utf-8 characters. (Yasuhiro Matsumoto)
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.3.781
问题:       Drawing with <span class="Type">'guifontwide'</span> can be slow.
解决方案:   Draw multiple characters at a time. (Taro Muraoka)
相关文件:   src/gui.c

Patch 7.3.782
问题:       Windows: IME composition may use a wrong font.
解决方案:   Use <span class="Type">'guifontwide'</span> for IME when it is set. (Taro Muraoka)
相关文件:   runtime/doc/options.txt, src/gui.c, src/gui_w48.c,
	    src/proto/gui_w16.pro, src/proto/gui_w32.pro

Patch 7.3.783
问题:       Crash when mark is not set. (Dominique Pelle)
解决方案:   Check for NULL.
相关文件:   src/normal.c

Patch 7.3.784 (after 7.3.781)
问题:       Error when <span class="Type">'guifontwide'</span> has a comma.
解决方案:   Use gui.wide_font. (Taro Muraoka)
相关文件:   src/gui_w48.c

Patch 7.3.785 (after 7.3.776)
问题:       Crash with specific use of search pattern.
解决方案:   Initialize reg_buf to curbuf.
相关文件:   src/regexp.c

Patch 7.3.786
问题:       Python threads don't run in the background (issue 103).
解决方案:   Move the statements to manipulate thread state.
相关文件:   src/if_python.c

Patch 7.3.787
问题:       With <span class="Type">'relativenumber'</span> set it is not possible to see the absolute
	    line number.
解决方案:   For the cursor line show the absolute line number instead of a
	    zero. (Nazri Ramliy)
相关文件:   src/screen.c

Patch 7.3.788
问题:       When only using patches build fails on missing nl.po.
解决方案:   Create an empty nl.po file.
相关文件:   src/po/Makefile

Patch 7.3.789 (after 7.3.776)
问题:       &quot;\k&quot; in regexp does not work in other window.
解决方案:   Use the right buffer. (Yukihiro Nakadaira)
相关文件:   src/mbyte.c, src/proto/mbyte.pro, src/regexp.c

Patch 7.3.790
问题:       After reloading a buffer the modelines are not processed.
解决方案:   call do_modelines(). (Ken Takata)
相关文件:   src/fileio.c

Patch 7.3.791
问题:       MzScheme interface doesn't work properly.
解决方案:   Make it work better. (Sergey Khorev)
相关文件:   runtime/doc/if_mzsch.txt, src/configure.in, src/auto/configure,
	    src/eval.c, src/if_mzsch.c, src/if_mzsch.h, src/Make_ming.mak,
	    src/Make_mvc.mak, src/os_unix.c, src/proto/eval.pro,
	    src/testdir/test70.in, src/testdir/test70.ok

Patch 7.3.792
问题:       &quot;:substitute&quot; works differently without confirmation.
解决方案:   Do not change the text when asking for confirmation, only display
	    it.
相关文件:   src/ex_cmds.c

Patch 7.3.793 (after 7.3.792)
问题:       New interactive :substitute behavior is not tested.
解决方案:   Add tests. (Christian Brabandt)
相关文件:   src/testdir/test80.in, src/testdir/test80.ok

Patch 7.3.794
问题:       Tiny build fails. (Tony Mechelynck)
解决方案:   Adjust #ifdefs.
相关文件:   src/charset.c

Patch 7.3.795
问题:       MzScheme does not build with tiny features.
解决方案:   Add #ifdefs.  Also add UNUSED to avoid warnings.  And change
	    library ordering.
相关文件:   src/if_mzsch.c, src/Makefile

Patch 7.3.796
问题:       &quot;/[^\n]&quot; does match at a line break.
解决方案:   Make it do the same as &quot;/.&quot;. (Christian Brabandt)
相关文件:   src/regexp.c, src/testdir/test79.in, src/testdir/test79.ok

Patch 7.3.797 (after 7.3.792)
问题:       Compiler warning for size_t to int conversion. (Skeept)
解决方案:   Add type casts.
相关文件:   src/ex_cmds.c

Patch 7.3.798 (after 7.3.791)
问题:       MzScheme: circular list does not work correctly.
解决方案:   Separate Mac-specific code from generic code. (Sergey Khorev)
相关文件:   src/if_mzsch.c, src/testdir/test70.in

Patch 7.3.799
问题:       The color column is not correct when entering a buffer. (Ben
	    Fritz)
解决方案:   Call check_colorcolumn() if <span class="Type">'textwidth'</span> changed. (Christian
	    Brabandt)
相关文件:   src/buffer.c

Patch 7.3.800
问题:       The &quot; mark is not adjusted when inserting lines. (Roland Eggner)
解决方案:   Adjust the line number. (Christian Brabandt)
相关文件:   src/mark.c

Patch 7.3.801
问题:       &quot;:window set nu?&quot; displays the cursor line. (Nazri Ramliy)
解决方案:   Do not update the cursor line when conceallevel is zero or the
	    screen has scrolled. (partly by Christian Brabandt)
相关文件:   src/window.c

Patch 7.3.802
问题:       After setting <span class="Type">'isk'</span> to a value ending in a comma appending to the
	    option fails.
解决方案:   Disallow a trailing comma for <span class="Type">'isk'</span> and similar options.
相关文件:   src/charset.c

Patch 7.3.803 (after 7.3.792)
问题:       Substitute with confirmation and then &quot;q&quot; does not replace
	    anything.  (John McGowan)
解决方案:   Do not break the loop, skip to the end.
相关文件:   src/ex_cmds.c, src/testdir/test80.in, src/testdir/test80.ok

Patch 7.3.804 (after 7.3.799)
问题:       Compiler warning for tiny build. (Tony Mechelynck)
解决方案:   Add #ifdefs around variable.
相关文件:   src/buffer.c

Patch 7.3.805
问题:       Lua version 5.2 is not detected properly on Arch Linux.
解决方案:   Adjust autoconf. (lilydjwg)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.806
问题:       Compiler warnings in Perl code when building with Visual studio
	    2012. (skeept)
解决方案:   Add type casts. (Christian Brabandt, 2013 Jan 30)
相关文件:   src/if_perl.xs

Patch 7.3.807
问题:       Popup menu does not work properly with the preview window, folds
	    and <span class="Type">'cursorcolumn'</span>.
解决方案:   Redraw the popup menu after redrawing windows. (Christian
	    Brabandt)
相关文件:   src/screen.c

Patch 7.3.808
问题:       Python threads still do not work properly.
解决方案:   Fix both Python 2 and 3.  Add tests. (Ken Takata)
相关文件:   src/if_python.c, src/if_python3.c, src/testdir/test86.in,
	    src/testdir/test86.ok, src/testdir/test87.in,
	    src/testdir/test87.ok

Patch 7.3.809
问题:       The dosinst.c program has a buffer overflow. (Thomas Gwae)
解决方案:   Ignore $VIMRUNTIME if it is too long.
相关文件:   src/dosinst.c

Patch 7.3.810
问题:       <span class="Type">'relativenumber'</span> is reset unexpectedly. (François Ingelrest)
解决方案:   After an option was reset also reset the global value. Add a test.
	    (Christian Brabandt)
相关文件:   src/option.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test89.in,
	    src/testdir/test89.ok

Patch 7.3.811
问题:       Useless termresponse parsing for SGR mouse.
解决方案:   Skip the parsing. (Hayaki Saito)
相关文件:   src/term.c

Patch 7.3.812
问题:       When <span class="Type">'indentexpr'</span> moves the cursor &quot;curswant&quot; not restored.
解决方案:   Restore &quot;curswant&quot;. (Sung Pae)
相关文件:   src/misc1.c

Patch 7.3.813
问题:       The CompleteDone event is not triggered when there are no pattern
	    matches. (Jianjun Mao)
解决方案:   Trigger the event. (Christian Brabandt)
相关文件:   src/edit.c

Patch 7.3.814
问题:       Can't input multibyte characters on Win32 console if <span class="Type">'encoding'</span> is
	    different from current codepage.
解决方案:   Use convert_input_safe() instead of convert_input().  Make
	    string_convert_ext() return an error for incomplete input. (Ken
	    Takata)
相关文件:   src/mbyte.c, src/os_win32.c

Patch 7.3.815
问题:       Building with Cygwin and Ruby doesn't work.
解决方案:   Copy some things from the MingW build file. (Ken Takata)
相关文件:   src/Make_cyg.mak

Patch 7.3.816
问题:       Can't compute a hash.
解决方案:   Add the sha256() function. (Tyru, Hirohito Higashi)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/proto/sha256.pro,
	    src/sha256.c, src/testdir/test90.in, src/testdir/test90.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.3.817
问题:       Test 89 fails with tiny and small features.
解决方案:   Add sourcing small.vim.
相关文件:   src/testdir/test89.in

Patch 7.3.818
问题:       When test 40 fails because of a bad build it may leave files
	    behind that cause it to fail later.
解决方案:   Let the file names start with &quot;X&quot;.
相关文件:   src/testdir/test40.in

Patch 7.3.819
问题:       Compiling without +eval and with Python isn't working.
解决方案:   Add the eval feature when building with Python.
相关文件:   src/if_py_both.h, src/feature.h, src/eval.c, src/ex_docmd.c,
	    src/normal.c, src/ex_docmd.c, src/gui_gtk_x11.c

Patch 7.3.820
问题:       Build errors and warnings when building with small features and
	    Lua, Perl or Ruby.
解决方案:   Add #ifdefs and UNUSED.
相关文件:   src/if_perl.xs, src/if_lua.c, src/if_ruby.c

Patch 7.3.821
问题:       Build with OLE and Cygwin is broken. (Steve Hall)
解决方案:   Select static or shared stdc library. (Ken Takata)
相关文件:   src/Make_cyg.mak

Patch 7.3.822 (after 7.3.799)
问题:       Crash when accessing freed buffer.
解决方案:   Get <span class="Type">'textwidth'</span> in caller of enter_buffer(). (Christian Brabandt)
相关文件:   src/buffer.c

Patch 7.3.823 (after 7.3.821)
问题:       Building with Cygwin: '-lsupc++' is not needed.
解决方案:   Remove it. (Ken Takata)
相关文件:   src/Make_cyg.mak

Patch 7.3.824
问题:       Can redefine builtin functions.  (ZyX)
解决方案:   Disallow adding a function to g:.
相关文件:   src/eval.c

Patch 7.3.825
问题:       With Python errors are not always clear.
解决方案:   Print the stack trace, unless :silent is used. (ZyX)
相关文件:   src/if_python3.c, src/if_python.c

Patch 7.3.826
问题:       List of features in :version output is hard to read.
解决方案:   Make columns. (Nazri Ramliy)
相关文件:   src/version.c

Patch 7.3.827 (after 7.3.825)
问题:       Python tests fail.
解决方案:   Adjust the output for the stack trace.
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.ok

Patch 7.3.828
问题:       Mappings are not aware of wildmenu mode.
解决方案:   Add wildmenumode(). (Christian Brabandt)
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.3.829
问题:       When compiled with the +rightleft feature <span class="Type">'showmatch'</span> also shows a
	    match for the opening paren.  When <span class="Type">'revins'</span> is set the screen may
	    scroll.
解决方案:   Only check the opening paren when the +rightleft feature was
	    enabled.  Do not show a match that is not visible. (partly by
	    Christian Brabandt)
相关文件:   src/search.c

Patch 7.3.830
问题:       :mksession confuses bytes, columns and characters when positioning
	    the cursor.
解决方案:   Use w_virtcol with &quot;|&quot; instead of w_cursor.col with &quot;l&quot;.
相关文件:   src/ex_docmd.c

Patch 7.3.831
问题:       Clumsy to handle the situation that a variable does not exist.
解决方案:   Add default value to getbufvar() et al. (Shougo Matsushita,
	    Hirohito Higashi)
相关文件:   runtime/doc/eval.txt, src/eval.c src/testdir/test91.in,
	    src/testdir/test91.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile

Patch 7.3.832
问题:       Compiler warning.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/version.c

Patch 7.3.833
问题:       In the terminal the scroll wheel always scrolls the active window.
解决方案:   Scroll the window under the mouse pointer, like in the GUI.
	    (Bradie Rao)
相关文件:   src/edit.c, src/normal.c

Patch 7.3.834
问题:       Ruby 2.0 has a few API changes.
解决方案:   Add handling of Ruby 2.0. (Yasuhiro Matsumoto)
相关文件:   src/if_ruby.c

Patch 7.3.835
问题:       &quot;xxd -i&quot; fails on an empty file.
解决方案:   Do output the closing } for an empty file. (partly by Lawrence
	    Woodman)
相关文件:   src/xxd/xxd.c

Patch 7.3.836
问题:       Clipboard does not work on Win32 when compiled with Cygwin.
解决方案:   Move the Win32 clipboard code to a separate file and use it when
	    building with os_unix.c. (Frodak Baksik, Ken Takata)
相关文件:   src/Make_bc5.mak, src/Make_cyg.mak, src/Make_ivc.mak,
	    src/Make_ming.mak, src/Make_mvc.mak, src/Make_w16.mak,
	    src/Makefile, src/config.h.in, src/configure.in,
	    src/auto/configure, src/feature.h, src/globals.h, src/mbyte.c,
	    src/os_mswin.c, src/os_unix.c, src/os_win32.c, src/proto.h,
	    src/proto/os_mswin.pro, src/proto/winclip.pro, src/term.c,
	    src/vim.h, src/winclip.c

Patch 7.3.837 (after 7.3.826)
问题:       Empty lines in :version output when <span class="Type">'columns'</span> is 320.
解决方案:   Simplify the logic of making columns. (Nazri Ramliy, Roland
	    Eggner)
相关文件:   src/version.c

Patch 7.3.838 (after 7.3.830)
问题:       Insufficient testing for mksession.
解决方案:   Add tests. (mostly by Roland Eggner)
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test92.in, src/testdir/test92.ok,
	    src/testdir/test93.in, src/testdir/test93.ok,
	    src/ex_docmd.c

Patch 7.3.839
问题:       Some files missing in the list of distributed files.
解决方案:   Add lines for new files.
相关文件:   Filelist

Patch 7.3.840
问题:       &quot;\@&lt;!&quot; in regexp does not work correctly with multi-byte
	    characters, especially cp932.
解决方案:   Move column to start of multi-byte character. (Yasuhiro Matsumoto)
相关文件:   src/regexp.c

Patch 7.3.841
问题:       When a &quot;cond ? one : two&quot; expression has a subscript it is not
	    parsed correctly. (Andy Wokula)
解决方案:   Handle a subscript also when the type is unknown. (Christian
	    Brabandt)
相关文件:   src/eval.c

Patch 7.3.842
问题:       Compiler warning for signed/unsigned pointer.
解决方案:   Add type cast. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.3.843 (after 7.3.841)
问题:       Missing test file changes.
解决方案:   Change the tests.
相关文件:   src/testdir/test49.vim, src/testdir/test49.ok

Patch 7.3.844
问题:       Enum is not indented correctly with &quot;public&quot; etc.
解决方案:   Skip &quot;public&quot;, &quot;private&quot; and &quot;protected&quot;. (Hong Xu)
相关文件:   src/misc1.c

Patch 7.3.845 (after 7.3.844)
问题:       Enum indenting is not tested.
解决方案:   Add tests. (Hong Xu)
相关文件:   src/testdir/test3.in, src/testdir/test3.ok

Patch 7.3.846
问题:       Missing proto files.
解决方案:   Add the files.
相关文件:   Filelist, src/proto/os_beos.pro

Patch 7.3.847
问题:       Test 55 fails when messages are translated.
解决方案:   Set language to C. (Ken Takata)
相关文件:   src/testdir/test55.in

Patch 7.3.848
问题:       Can't build with Ruby 2.0 when using MinGW x64 or MSVC10.
解决方案:   Fix it. Also detect RUBY_PLATFORM and RUBY_INSTALL_NAME for x64.
	    (Ken Takata)
相关文件:   src/Make_cyg.mak, src/Make_ming.mak, src/if_ruby.c

Patch 7.3.849
问题:       &quot;:g//&quot; gives &quot;Pattern not found error&quot; with E486.  Should not use
	    the error number, it's not a regular error message.
解决方案:   Use a normal message. (David Bürgin)
相关文件:   src/ex_cmds.c

Patch 7.3.850
问题:       &quot;:vimgrep //&quot; matches everywhere.
解决方案:   Make it use the previous search pattern. (David Bürgin)
相关文件:   runtime/doc/quickfix.txt, src/quickfix.c

Patch 7.3.851
问题:       Using an empty pattern with :sort silently continues when there is
	    no previous search pattern.
解决方案:   Give an error message. (David Bürgin)
相关文件:   src/ex_cmds.c

Patch 7.3.852
问题:       system() breaks clipboard text. (Yukihiro Nakadaira)
解决方案:   Use Xutf8TextPropertyToTextList(). (Christian Brabandt)
	    Also do not put the text in the clip buffer if conversion fails.
相关文件:   src/ui.c, src/ops.c

Patch 7.3.853
问题:       Using &quot;ra&quot; in multiple lines on multi-byte characters leaves a few
	    characters not replaced.
解决方案:   Adjust the end column only in the last line. (Yasuhiro Matsumoto)
相关文件:   src/testdir/test69.in, src/testdir/test69.ok, src/ops.c

Patch 7.3.854
问题:       After using backspace in insert mode completion, <span class="Special">CTRL-N</span> and <span class="Special">CTRL-P</span>
	    do not highlight the right entry. (Olivier Teuliere)
解决方案:   Set the current item to the shown item after using backspace.
相关文件:   src/edit.c

Patch 7.3.855
问题:       Compiler warnings.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/misc1.c

Patch 7.3.856
问题:       When calling system() multi-byte clipboard contents is garbled.
解决方案:   Save and restore the clipboard contents.  (Yukihiro Nakadaira)
相关文件:   src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro, src/ops.c,
	    src/proto/ops.pro, src/os_unix.c, src/proto/ui.pro, src/ui.c

Patch 7.3.857
问题:       The QuitPre autocommand event does not trigger for :qa and :wq.
解决方案:   Trigger the event. (Tatsuro Fujii)
相关文件:   src/ex_docmd.c

Patch 7.3.858
问题:       &quot;gv&quot; selects the wrong area after some operators.
解决方案:   Save and restore the type of selection. (Christian Brabandt)
相关文件:   src/testdir/test66.in, src/testdir/test66.ok, src/normal.c

Patch 7.3.859
问题:       <span class="Type">'ambiwidth'</span> must be set by the user.
解决方案:   Detects East Asian ambiguous width (UAX #11) state of the terminal
	    at the start-up time and <span class="Type">'ambiwidth'</span> accordingly.  (Hayaki Saito)
相关文件:   src/main.c, src/option.c, src/term.c, src/term.h,
	    src/proto/term.pro

Patch 7.3.860
问题:       When using --remote-expr try/catch does not work. (Andrey Radev)
解决方案:   Set emsg_silent instead of emsg_skip.
相关文件:   src/main.c

Patch 7.3.861
问题:       &quot;:setlocal number&quot; clears global value of <span class="Type">'relativenumber'</span>.
解决方案:   Do it properly. (Markus Heidelberg)
相关文件:   src/testdir/test89.in, src/testdir/test89.ok, src/option.c

Patch 7.3.862
问题:       Dragging the status line can be slow.
解决方案:   Look ahead and drop the drag event if there is a next one.
相关文件:   src/eval.c, src/misc1.c, src/proto/misc1.pro, src/normal.c

Patch 7.3.863 (after 7.3.859)
问题:       Problem with <span class="Type">'ambiwidth'</span> detection for ANSI terminal.
解决方案:   Work around not recognizing a term response. (Hayaki Saito)
相关文件:   src/term.c

Patch 7.3.864 (after 7.3.862)
问题:       Can't build without the mouse feature.
解决方案:   Add an #ifdef. (Ike Devolder)
相关文件:   src/misc1.c

Patch 7.3.865 (after 7.3.862)
问题:       Mouse position may be wrong.
解决方案:   Let vungetc() restore the mouse position.
相关文件:   src/getchar.c

Patch 7.3.866
问题:       Not serving the X selection during system() isn't nice.
解决方案:   When using fork() do not loose the selection, keep serving it.
	    Add a loop similar to handling I/O. (Yukihiro Nakadaira)
相关文件:   src/os_unix.c

Patch 7.3.867
问题:       Matchparen does not update match when using auto-indenting.
	    (Marc Aldorasi)
解决方案:   Add the TextChanged and TextChangedI autocommand events.
相关文件:   runtime/plugin/matchparen.vim, src/main.c, src/edit.c,
	    src/globals.h, src/vim.h, src/fileio.c, src/proto/fileio.pro,
	    runtime/doc/autocmd.txt

Patch 7.3.868
问题:       When at the hit-return prompt and using &quot;k&quot; while no text has
	    scrolled off screen, then using &quot;j&quot;, an empty line is displayed.
解决方案:   Only act on &quot;k&quot; when text scrolled off screen.  Also accept
	    page-up and page-down.  (cptstubing)
相关文件:   src/message.c

Patch 7.3.869
问题:       bufwinnr() matches buffers in other tabs.
解决方案:   For bufwinnr() and ? only match buffers in the current tab.
	    (Alexey Radkov)
相关文件:   src/buffer.c, src/diff.c, src/eval.c, src/ex_docmd.c,
	    src/if_perl.xs, src/proto/buffer.pro

Patch 7.3.870
问题:       Compiler warnings when using MingW 4.5.3.
解决方案:   Do not use MAKEINTRESOURCE. Adjust #if. (Ken Takata)
相关文件:   src/gui_w32.c, src/gui_w48.c, src/os_mswin.c, src/os_win32.c,
	    src/os_win32.h

Patch 7.3.871
问题:       search('^$', 'c') does not use the empty match under the cursor.
解决方案:   Special handling of the 'c' flag. (Christian Brabandt)
	    Add tests.
相关文件:   src/search.c, src/testdir/test14.in, src/testdir/test14.ok

Patch 7.3.872
问题:       On some systems case of file names is always ignored, on others
	    never.
解决方案:   Add the <span class="Type">'fileignorecase'</span> option to control this at runtime.
	    Implies <span class="Type">'wildignorecase'</span>.
相关文件:   src/buffer.c, src/edit.c, src/ex_cmds2.c, src/ex_getln.c,
	    src/fileio.c, src/misc1.c, src/misc2.c, src/option.c,
	    src/option.h, src/vim.h, runtime/doc/options.txt

Patch 7.3.873
问题:       Cannot easily use :s to make title case.
解决方案:   Have &quot;\L\u&quot; result in title case. (James McCoy)
相关文件:   src/regexp.c, src/testdir/test79.in, src/testdir/test79.ok,
	    src/testdir/test80.in, src/testdir/test80.ok

Patch 7.3.874
问题:       Comparing file names does not handle multi-byte characters
	    properly.
解决方案:   Implement multi-byte handling.
相关文件:   src/misc1.c, src/misc2.c

Patch 7.3.875 (after 7.3.866)
问题:       Build problem with some combination of features.
解决方案:   Use FEAT_XCLIPBOARD instead of FEAT_CLIPBOARD.
相关文件:   src/os_unix.c

Patch 7.3.876
问题:       #if indents are off.
解决方案:   Insert a space where appropriate. (Taro Muraoka)
相关文件:   src/gui.c

Patch 7.3.877 (after 7.3.871)
问题:       Forward searching with search() is broken.
解决方案:   Fix it and add tests. (Sung Pae)
相关文件:   src/search.c, src/testdir/test14.in, src/testdir/test14.ok

Patch 7.3.878
问题:       <span class="Type">'fileignorecase'</span> is missing in options window and quickref.
解决方案:   Add the option.
相关文件:   runtime/optwin.vim, runtime/doc/quickref.txt

Patch 7.3.879
问题:       When using an ex command in operator pending mode, using Esc to
	    abort the command still executes the operator. (David Bürgin)
解决方案:   Clear the operator when the ex command fails. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.3.880
问题:       When writing viminfo, old history lines may replace lines written
	    more recently by another Vim instance.
解决方案:   Mark history entries that were read from viminfo and overwrite
	    them when merging with the current viminfo.
相关文件:   src/ex_getln.c

Patch 7.3.881
问题:       Python list does not work correctly.
解决方案:   Fix it and add a test. (Yukihiro Nakadaira)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok, src/if_py_both.h

Patch 7.3.882
问题:       CursorHold may trigger after receiving the termresponse.
解决方案:   Set the did_cursorhold flag. (Hayaki Saito)
相关文件:   src/term.c

Patch 7.3.883 (after 7.3.880)
问题:       Can't build with some combination of features.
解决方案:   Adjust #ifdefs.
相关文件:   src/ex_getln.c

Patch 7.3.884
问题:       Compiler warning for variable shadowing another. (John Little)
解决方案:   Rename the variable. (Christian Brabandt)
相关文件:   src/term.c

Patch 7.3.885
问题:       Double free for list and dict in Lua. (Shougo Matsu)
解决方案:   Do not unref list and dict. (Yasuhiro Matsumoto)
相关文件:   src/if_lua.c

Patch 7.3.886
问题:       Can't build with multi-byte on Solaris 10.
解决方案:   Add #ifdef X_HAVE_UTF8_STRING. (Laurent Blume)
相关文件:   src/ui.c

Patch 7.3.887
问题:       No tests for Visual mode operators, what 7.3.879 fixes.
解决方案:   Add a new test file. (David Bürgin)
相关文件:   src/testdir/test94.in, src/testdir/test94.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.3.888
问题:       Filename completion with <span class="Type">'fileignorecase'</span> does not work for
	    multi-byte characters.
解决方案:   Make <span class="Type">'fileignorecase'</span> work properly. (Hirohito Higashi)
相关文件:   src/misc2.c

Patch 7.3.889
问题:       Can't build with Ruby 2.0 on a 64 bit system.
解决方案:   Define rb_fix2int and rb_num2int. (Kohei Suzuki)
相关文件:   src/if_ruby.c

Patch 7.3.890
问题:       Test 79 fails on Windows. (Michael Soyka)
解决方案:   Add comment below line causing an error.
相关文件:   src/testdir/test79.in

Patch 7.3.891
问题:       Merging viminfo history doesn't work well.
解决方案:   Don't stop when one type of history is empty. Don't merge history
	    when writing viminfo.
相关文件:   src/ex_getln.c

Patch 7.3.892 (after 7.3.891)
问题:       Still merging problems for viminfo history.
解决方案:   Do not merge lines when writing, don't write old viminfo lines.
相关文件:   src/ex_getln.c, src/ex_cmds.c, src/proto/ex_getln.pro

Patch 7.3.893
问题:       Crash when using b:, w: or t: after closing the buffer, window or
	    tabpage.
解决方案:   Allocate the dictionary instead of having it part of the
	    buffer/window/tabpage struct. (Yukihiro Nakadaira)
相关文件:   src/buffer.c, src/eval.c, src/fileio.c, src/structs.h,
	    src/window.c, src/proto/eval.pro

Patch 7.3.894
问题:       Using wrong RUBY_VER causing Ruby build to break.
解决方案:   Correct the RUBY_VER value. (Yongwei Wu)
相关文件:   src/bigvim.bat

Patch 7.3.895
问题:       Valgrind error in test 91. (Issue 128)
解决方案:   Pass scope name to find_var_in_ht().
相关文件:   src/eval.c

Patch 7.3.896
问题:       Memory leaks in Lua interface.
解决方案:   Fix the leaks, add tests. (Yukihiro Nakadaira)
相关文件:   src/testdir/test85.in, src/testdir/test85.ok, src/if_lua.c

Patch 7.3.897
问题:       Configure doesn't always find the shared library.
解决方案:   Change the configure script. (Ken Takata)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.898
问题:       Memory leak reported by valgrind in test 91.
解决方案:   Only use default argument when needed.
相关文件:   src/eval.c, src/testdir/test91.in, src/testdir/test91.ok

Patch 7.3.899
问题:       #if indents are off.
解决方案:   Fix the indents.
相关文件:   src/os_unix.c

Patch 7.3.900
问题:       Not obvious that some mouse features are mutual-exclusive.
解决方案:   Add a comment.
相关文件:   src/feature.h

Patch 7.3.901
问题:       Outdated comment, ugly condition.
解决方案:   Update a few comments, break line.
相关文件:   src/getchar.c, src/misc1.c, src/undo.c

Patch 7.3.902
问题:       When deleting last buffer in other tab the tabline is not updated.
解决方案:   Set the redraw_tabline flag. (Yukihiro Nakadaira)
相关文件:   src/window.c

Patch 7.3.903 (after 7.3.892)
问题:       Crash on exit writing viminfo. (Ron Aaron)
解决方案:   Check for the history to be empty.
相关文件:   src/ex_getln.c

Patch 7.3.904 (after 7.3.893)
问题:       Using memory freed by the garbage collector.
解决方案:   Mark items in aucmd_win as used.
相关文件:   src/eval.c

Patch 7.3.905 (after 7.3.903)
问题:       Crash when writing viminfo. (Ron Aaron)
解决方案:   Prevent freed history info to be used.
相关文件:   src/ex_getln.c

Patch 7.3.906
问题:       The &quot;sleep .2&quot; for running tests does not work on Solaris.
解决方案:   Fall back to using &quot;sleep 1&quot;. (Laurent Blume)
相关文件:   src/testdir/Makefile

Patch 7.3.907
问题:       Python uses IndexError when a dict key is not found.
解决方案:   Use KeyError instead. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.908
问题:       Possible crash when using a list in Python.
解决方案:   Return early if the list is NULL. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.909
问题:       Duplicate Python code.
解决方案:   Move more items to if_py_both.h. (ZyX)  Also avoid compiler
	    warnings for missing initializers.
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.910
问题:       Python code in #ifdef branches with only minor differences.
解决方案:   Merge the #ifdef branches. (ZyX)
相关文件:   src/if_py_both.h, src/if_python.c

Patch 7.3.911
问题:       Python: Access to Vim variables is not so easy.
解决方案:   Define vim.vars and vim.vvars. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/eval.c, src/globals.h,
	    src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.912
问题:       Typing a &quot;:&quot; command at the hit-enter dialog does not work if the
	    &quot;file changed&quot; dialog happens next.
解决方案:   Check for changed files before giving the hit-enter dialog.
相关文件:   src/message.c

Patch 7.3.913 (after 7.3.905)
问题:       Still a crash when writing viminfo.
解决方案:   Add checks for NULL pointers. (Ron Aaron)
相关文件:   src/ex_getln.c

Patch 7.3.914
问题:       ~/.viminfo is messed up when running tests.
解决方案:   Set the viminfo filename.
相关文件:   src/testdir/test89.in, src/testdir/test94.in

Patch 7.3.915
问题:       When reading a file with encoding conversion fails at the end the
	    next encoding in <span class="Type">'fencs'</span> is not used.
解决方案:   Retry with another encoding when possible. (Taro Muraoka)
相关文件:   src/fileio.c

Patch 7.3.916
问题:       Using freed memory when pasting with the mouse (Issue 130).
解决方案:   Get the byte value early. (hint by Dominique Pelle)
相关文件:   src/buffer.c

Patch 7.3.917
问题:       When a path ends in a backslash appending a comma has the wrong
	    effect.
解决方案:   Replace a trailing backslash with a slash. (Nazri Ramliy)
相关文件:   src/misc1.c, src/testdir/test73.in, src/testdir/test73.ok

Patch 7.3.918
问题:       Repeating an Ex command after using a Visual motion does not work.
解决方案:   Check for an Ex command being used. (David Bürgin)
相关文件:   src/normal.c

Patch 7.3.919 (after 7.3.788)
问题:       An empty nl.po file does not work with an old msgfmt.
解决方案:   Put a single # in the file. (Laurent Blume)
相关文件:   src/po/Makefile

Patch 7.3.920
问题:       Compiler warning for size_t to int.
解决方案:   Add a type cast. (Mike Williams)
相关文件:   src/misc1.c

Patch 7.3.921 (after 7.3.697)
问题:       Trying to create a fontset handle when <span class="Type">'guifontset'</span> is not set.
解决方案:   Add curly braces around the code block. (Max Kirillov)
相关文件:   src/syntax.c

Patch 7.3.922
问题:       No test for what 7.3.918 fixes.
解决方案:   Add a test. (David Bürgin)
相关文件:   src/testdir/test94.in, src/testdir/test94.ok

Patch 7.3.923
问题:       Check for X11 header files fails on Solaris.
解决方案:   Only use -Werror for gcc. (Laurent Blume)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.924
问题:       Python interface can't easily access options.
解决方案:   Add vim.options, vim.window.options and vim.buffer.options. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/eval.c, src/if_py_both.h,
	    src/if_python.c, src/if_python3.c, src/option.c,
	    src/proto/eval.pro, src/proto/option.pro, src/testdir/test86.in,
	    src/testdir/test86.ok, src/testdir/test87.in,
	    src/testdir/test87.ok, src/vim.h

Patch 7.3.925
问题:       Typos in source files.
解决方案:   Fix the typos. (Ken Takata)
相关文件:   runtime/plugin/matchparen.vim, runtime/tools/vim_vs_net.cmd,
	    src/GvimExt/gvimext.cpp, src/INSTALLvms.txt, src/Make_cyg.mak,
	    src/Make_mvc.mak, src/Make_sas.mak, src/Make_vms.mms,
	    src/Make_w16.mak, src/Makefile, src/VisVim/OleAut.cpp,
	    src/VisVim/README_VisVim.txt, src/auto/configure, src/buffer.c,
	    src/configure.in, src/diff.c, src/dosinst.c, src/edit.c,
	    src/eval.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
	    src/farsi.c, src/feature.h, src/fileio.c, src/glbl_ime.cpp,
	    src/gui.c, src/gui_athena.c, src/gui_beval.c, src/gui_gtk_x11.c,
	    src/gui_mac.c, src/gui_motif.c, src/gui_photon.c, src/gui_w16.c,
	    src/gui_w32.c, src/gui_w48.c, src/gui_xmebw.c, src/gui_xmebwp.h,
	    src/hardcopy.c, src/if_cscope.c, src/if_mzsch.c, src/if_ole.cpp,
	    src/if_perl.xs, src/if_py_both.h, src/if_python.c,
	    src/if_python3.c, src/if_ruby.c, src/main.aap, src/mbyte.c,
	    src/memfile.c, src/memline.c, src/misc1.c, src/misc2.c,
	    src/nbdebug.c, src/normal.c, src/ops.c, src/os_amiga.c,
	    src/os_mac.h, src/os_msdos.c, src/os_mswin.c, src/os_win16.h,
	    src/os_win32.c, src/os_win32.h, src/quickfix.c, src/screen.c,
	    src/search.c, src/spell.c, src/structs.h, src/syntax.c,
	    src/window.c, vimtutor.com

Patch 7.3.926
问题:       Autocommands are triggered by setwinvar() et al. Missing BufEnter
	    on :tabclose. Duplicate WinEnter on :tabclose. Wrong order of
	    events for :tablose and :tabnew.
解决方案:   Fix these autocommand events. (ZyX)
相关文件:   runtime/doc/eval.txt, src/buffer.c, src/eval.c, src/ex_cmds2.c,
	    src/fileio.c, src/proto/window.pro, src/testdir/test62.in,
	    src/testdir/test62.ok, src/window.c

Patch 7.3.927
问题:       Missing combining characters when putting text in a register.
解决方案:   Include combining characters. (David Bürgin)
相关文件:   src/getchar.c, src/testdir/test44.in, src/testdir/test44.ok

Patch 7.3.928 (after 7.3.924)
问题:       Can't build with strict C compiler.
解决方案:   Move declaration to start of block. (Taro Muraoka)
相关文件:   src/if_py_both.h

Patch 7.3.929 (after 7.3.924)
问题:       Compiler warning for unused variable. Not freeing unused string.
解决方案:   Remove the variable. Clear the options.
相关文件:   src/option.c

Patch 7.3.930
问题:       MSVC 2012 update is not recognized.
解决方案:   Update the version in the makefile. (Raymond Ko)
相关文件:   src/Make_mvc.mak

Patch 7.3.931
问题:       No completion for :xmap and :smap. (Yukihiro Nakadaira)
解决方案:   Add the case statements. (Christian Brabandt)
相关文件:   src/ex_docmd.c

Patch 7.3.932
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Initialize the variable.
相关文件:   src/option.c

Patch 7.3.933
问题:       Ruby on Mac crashes due to GC failure.
解决方案:   Init the stack from main(). (Hiroshi Shirosaki)
相关文件:   src/main.c, src/if_ruby.c, src/proto/if_ruby.pro

Patch 7.3.934
问题:       E381 and E380 make the user think nothing happened.
解决方案:   Display the message indicating what error list is now active.
	    (Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.3.935 (after 7.3.933)
问题:       Ruby: Init stack works differently on 64 bit systems.
解决方案:   Handle 64 bit systems and also static library. (Yukihiro
	    Nakadaira)
相关文件:   src/if_ruby.c

Patch 7.3.936 (after 7.3.935)
问题:       Ruby 1.8: Missing piece for static linking on 64 bit systems.
解决方案:   Define ruby_init_stack() (Hiroshi Shirosaki)
	    Also fix preprocessor indents.
相关文件:   src/if_ruby.c

Patch 7.3.937
问题:       More can be shared between Python 2 and 3.
解决方案:   Move code to if_py_both.h. (ZyX)
相关文件:   src/if_python.c, src/if_python3.c, src/if_py_both.h

Patch 7.3.938
问题:       Python: not easy to get to window number.
解决方案:   Add vim.window.number. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/proto/window.pro,
	    src/window.c

Patch 7.3.939
问题:       Using Py_BuildValue is inefficient sometimes.
解决方案:   Use PyLong_FromLong(). (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.940
问题:       Python: Can't get position of window.
解决方案:   Add window.row and window.col. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h

Patch 7.3.941
问题:       Stuff in if_py_both.h is ordered badly.
解决方案:   Reorder by type. (ZyX)
相关文件:   src/if_py_both.h, src/if_python.c

Patch 7.3.942
问题:       Python: SEGV in Buffer functions.
解决方案:   Call CheckBuffer() at the right time. (ZyX)
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.3.943
问题:       Python: Negative indices were failing.
解决方案:   Fix negative indices. Add tests. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/testdir/test86.in,
	    src/testdir/test86.ok, src/testdir/test87.in,
	    src/testdir/test87.ok

Patch 7.3.944
问题:       External program receives the termresponse.
解决方案:   Insert a delay and discard input. (Hayaki Saito)
相关文件:   src/term.c

Patch 7.3.945
问题:       Python: List of buffers is not very useful.
解决方案:   Make vim.buffers a map. No iterator yet. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/if_python3.c,
	    src/if_python.c, src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.946
问题:       Sometimes get stuck in waiting for cursor position report,
	    resulting in keys starting with <span class="Special">&lt;Esc&gt;</span>[ not working.
解决方案:   Only wait for more characters after <span class="Special">&lt;Esc&gt;</span>[ if followed by '?', '&gt;'
	    or a digit.
相关文件:   src/term.c

Patch 7.3.947
问题:       Python: No iterator for vim.list and vim.bufferlist.
解决方案:   Add the iterators. Also fix name of FunctionType. Add tests for
	    vim.buffers.  (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/eval.c, src/if_py_both.h,
	    src/if_python3.c, src/if_python.c, src/proto/eval.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.948
问题:       Cannot build with Python 2.2
解决方案:   Make Python interface work with Python 2.2
	    Make 2.2 the first supported version. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.ok, src/configure.in, src/auto/configure

Patch 7.3.949
问题:       Python: no easy access to tabpages.
解决方案:   Add vim.tabpages and vim.current.tabpage. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/if_python3.c,
	    src/if_python.c, src/proto/if_python3.pro,
	    src/proto/if_python.pro, src/proto/window.pro, src/structs.h,
	    src/window.c

Patch 7.3.950
问题:       Python: Stack trace printer can't handle messages.
解决方案:   Make KeyErrors use PyErr_SetObject. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.951
问题:       Python exceptions have problems.
解决方案:   Change some IndexErrors to TypeErrors. Make “line number out of
	    range” an IndexError.  Make “unable to get option value” a
	    RuntimeError. Make all PyErr_SetString messages start with
	    lowercase letter and use _(). (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.952
问题:       Python: It's not easy to change window/buffer/tabpage.
解决方案:   Add ability to assign to vim.current.<span class="Special">{tabpage,buffer,window}</span>.
	    (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h

Patch 7.3.953
问题:       Python: string exceptions are deprecated.
解决方案:   Make vim.error an Exception subclass. (ZyX)
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.3.954
问题:       No check if PyObject_IsTrue fails.
解决方案:   Add a check for -1 value. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.955
问题:       Python: Not enough tests.
解决方案:   Add tests for vim.<span class="Special">{current,window*,tabpage*}</span>. (ZyX)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.956
问题:       Python vim.bindeval() causes SIGABRT.
解决方案:   Make pygilstate a local variable. (Yukihiro Nakadaira)
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.3.957
问题:       Python does not have a &quot;do&quot; command like Perl or Lua.
解决方案:   Add the &quot;:py3do&quot; command. (Lilydjwg)
相关文件:   runtime/doc/if_pyth.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/if_python3.c, src/proto/if_python3.pro

Patch 7.3.958
问题:       Python: Iteration destructor not set.
解决方案:   Put IterDestructor to use. (ZyX)
相关文件:   src/if_py_both.c

Patch 7.3.959 (after 7.3.957)
问题:       Missing error number.
解决方案:   Assign an error number.
相关文件:   src/if_python3.c

Patch 7.3.960
问题:       Compiler warning for unused variable.
解决方案:   Put declaration in #ifdef.
相关文件:   src/window.c

Patch 7.3.961
问题:       Tests 86 and 87 fail when using another language than English.
解决方案:   Set the language to C in the test. (Dominique Pelle)
相关文件:   src/testdir/test86.in, src/testdir/test87.in,
	    src/testdir/test87.ok

Patch 7.3.962
问题:       Python tests are not portable.
解决方案:   Use shiftwidth instead of iminsert. (ZyX)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.963
问题:       Setting curbuf without curwin causes trouble.
解决方案:   Add switch_buffer() and restore_buffer().  Block autocommands to
	    avoid trouble.
相关文件:   src/eval.c, src/proto/eval.pro, src/proto/window.pro,
	    src/if_py_both.h, src/window.c, src/testdir/test86.ok

Patch 7.3.964
问题:       Python: not so easy to access tab pages.
解决方案:   Add window.tabpage, make window.number work with non-current tab
	    pages. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/if_python3.c,
	    src/if_python.c, src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.965
问题:       Python garbage collection not working properly.
解决方案:   Add support for garbage collection. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.966
问题:       There is &quot;:py3do&quot; but no &quot;:pydo&quot;.
解决方案:   Add the &quot;:pydo&quot; command. (Lilydjwg)
相关文件:   runtime/doc/if_pyth.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/if_py_both.h, src/if_python.c, src/if_python3.c,
	    src/proto/if_python.pro

Patch 7.3.967 (after 7.3.965)
问题:       Build fails on Mac OSX. (Greg Novack)
解决方案:   Undefine clear().
相关文件:   src/if_py_both.h

Patch 7.3.968
问题:       Multi-byte support is only available when compiled with &quot;big&quot;
	    features.
解决方案:   Include multi-byte by default, with &quot;normal&quot; features.
相关文件:   src/feature.h

Patch 7.3.969
问题:       Can't build with Python 3 and without Python 2.
解决方案:   Adjust #ifdef. (Xavier de Gaye)
相关文件:   src/window.c

Patch 7.3.970
问题:       Syntax highlighting can be slow.
解决方案:   Include the NFA regexp engine.  Add the <span class="Type">'regexpengine'</span> option to
	    select which one is used. (various authors, including Ken Takata,
	    Andrei Aiordachioaie, Russ Cox, Xiaozhou Liua, Ian Young)
相关文件:   src/Make_cyg.mak, src/Make_ming.mak, src/Make_mvc.mak,
	    src/Makefile, src/regexp.c, src/regexp.h, src/regexp_nfa.c,
	    src/structs.h, src/testdir/Makefile, src/testdir/test64.in,
	    src/testdir/test64.ok, Filelist, runtime/doc/pattern.txt,
	    runtime/doc/option.txt, src/option.c, src/option.h,
	    src/testdir/test95.in, src/testdir/test95.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.3.971
问题:       No support for VS2012 static code analysis.
解决方案:   Add the ANALYZE option. (Mike Williams)
相关文件:   src/Make_mvc.mak

Patch 7.3.972
问题:       Cursor not restored after InsertEnter autocommand if it moved to
	    another line.
解决方案:   Also restore if the saved line number is still valid.  Allow
	    setting v:char to skip restoring.
相关文件:   src/edit.c, runtime/doc/autocmd.txt

Patch 7.3.973
问题:       Compiler warnings. Crash on startup. (Tony Mechelynck)
解决方案:   Change EMSG2 to EMSGN. Make array one character longer.
相关文件:   src/regexp_nfa.c

Patch 7.3.974
问题:       Can't build with ruby 1.8.5.
解决方案:   Only use ruby_init_stack() when RUBY_INIT_STACK is defined.
	    (Yukihiro Nakadaira)
相关文件:   src/if_ruby.c

Patch 7.3.975
问题:       Crash in regexp parsing.
解决方案:   Correctly compute the end of allocated memory.
相关文件:   src/regexp_nfa.c

Patch 7.3.976
问题:       Can't build on HP-UX.
解决方案:   Remove modern initialization. (John Marriott)
相关文件:   src/regexp_nfa.c

Patch 7.3.977
问题:       Compiler warnings on 64 bit Windows.
解决方案:   Add type casts. (Mike Williams)  Also fix some white space and
	    uncomment what was commented-out for testing.
相关文件:   src/regexp_nfa.c

Patch 7.3.978
问题:       Regexp debug logs don't have a good name.
解决方案:   Use clear names and make it possible to write logs for the old and
	    new engines separately. (Taro Muraoka)
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.3.979
问题:       Complex NFA regexp doesn't work.
解决方案:   Set actual state stack end instead of using an arbitrary number.
	    (Yasuhiro Matsumoto)
相关文件:   src/regexp_nfa.c

Patch 7.3.980
问题:       Regexp logs may contain garbage. Character classes don't work
	    correctly for multi-byte characters.
解决方案:   Check for end of post list.  Only use &quot;is&quot; functions for
	    characters up to 255. (Ken Takata)
相关文件:   src/regexp_nfa.c

Patch 7.3.981
问题:       In the old regexp engine \i, \I, \f and \F don't work on
	    multi-byte characters.
解决方案:   Dereference pointer properly.
相关文件:   src/regexp.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.982
问题:       In the new regexp engine \p does not work on multi-byte
	    characters.
解决方案:   Don't point to an integer but the characters.
相关文件:   src/regexp_nfa.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.983
问题:       Unnecessary temp variable.
解决方案:   Remove the variable.
相关文件:   src/regexp_nfa.c

Patch 7.3.984
问题:       A Visual mapping that uses <span class="Special">CTRL-G</span> works differently when started
	    from Insert mode. (Ein Brown)
解决方案:   Reset old_mapped_len when handling typed text in Select mode.
相关文件:   src/normal.c

Patch 7.3.985
问题:       GTK vim not started as gvim doesn't set WM_CLASS property to a
	    useful value.
解决方案:   Call g_set_prgname() on startup. (James McCoy)
相关文件:   src/gui_gtk_x11.c

Patch 7.3.986
问题:       Test 95 doesn't pass when <span class="Type">'encoding'</span> isn't utf-8. (Yasuhiro
	    Matsumoto)
解决方案:   Force <span class="Type">'encoding'</span> to be utf-8.
相关文件:   src/testdir/test95.in

Patch 7.3.987
问题:       No easy to run an individual test.  Tests 64 fails when
	    <span class="Type">'encoding'</span> is not utf-8.
解决方案:   Add individual test targets to the Makefile.  Move some lines from
	    test 64 to 95.
相关文件:   src/Makefile, src/testdir/test64.in, src/testdir/test64.ok,
	    src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.988
问题:       New regexp engine is slow.
解决方案:   Break out of the loop when the state list is empty.
相关文件:   src/regexp_nfa.c

Patch 7.3.989
问题:       New regexp engine compares negative numbers to character.
解决方案:   Add missing case statements.
相关文件:   src/regexp_nfa.c

Patch 7.3.990
问题:       Memory leak in new regexp engine.
解决方案:   Jump to end of function to free memory. (Dominique Pelle)
相关文件:   src/regexp_nfa.c

Patch 7.3.991
问题:       More can be shared by Python 2 and 3.
解决方案:   Move more stuff to if_py_both. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test87.ok

Patch 7.3.992
问题:       Python: Too many type casts.
解决方案:   Change argument types. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.993
问题:       Python: Later patch does things slightly differently.
解决方案:   Adjusted argument type changes. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.994
问题:       Python: using magic constants.
解决方案:   Use descriptive values for ml_flags. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c

Patch 7.3.995
问题:       Python: Module initialization is duplicated.
解决方案:   Move to shared file. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.996
问题:       Python: Can't check types of what is returned by bindeval().
解决方案:   Add vim.List, vim.Dictionary and vim.Function types. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/testdir/test86.in,
	    src/testdir/test86.ok, src/testdir/test87.in,
	    src/testdir/test87.ok

Patch 7.3.997
问题:       Vim and Python exceptions are different.
解决方案:   Make Vim exceptions be Python exceptions. (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.998
问题:       Python: garbage collection issues.
解决方案:   Fix the GC issues: Use proper DESTRUCTOR_FINISH: avoids negative
	    refcounts, use PyObject_GC_* for objects with tp_traverse and
	    tp_clear, add RangeTraverse and RangeClear, use Py_XDECREF in some
	    places. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.999
问题:       New regexp engine sets curbuf temporarily.
解决方案:   Use reg_buf instead, like the old engine.
相关文件:   src/regexp_nfa.c

Patch 7.3.1000 (whoa!)
问题:       Typo in char value causes out of bounds access.
解决方案:   Fix character value.  (Klemens Baum)
相关文件:   src/regexp.c

Patch 7.3.1001
问题:       Duplicate condition in if.
解决方案:   Remove one condition.
相关文件:   src/regexp_nfa.c

Patch 7.3.1002
问题:       Valgrind errors for Python interface.
解决方案:   Fix memory leaks when running tests. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1003
问题:       Python interface does not compile with Python 2.2
解决方案:   Fix thread issues and True/False. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1004
问题:       No error when option could not be set.
解决方案:   Report an error. (ZyX)
相关文件:   src/if_py_both.h, src/option.c, src/proto/option.pro,
	    src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.1005
问题:       Get stuck on regexp &quot;\n*&quot; and on &quot;%s/^\n\+/\r&quot;.
解决方案:   Fix handling of matching a line break. (idea by Hirohito Higashi)
相关文件:   src/regexp_nfa.c

Patch 7.3.1006
问题:       NFA engine not used for &quot;\_[0-9]&quot;.
解决方案:   Enable this, fixed in patch 1005.
相关文件:   src/regexp_nfa.c

Patch 7.3.1007
问题:       Can't build on Minix 3.2.1.
解决方案:   Add a condition to an #ifdef. (Gautam Tirumala)
相关文件:   src/memfile.c

Patch 7.3.1008
问题:       Test 95 fails on MS-Windows.
解决方案:   Set <span class="Type">'nomore'</span>. Change \i to \f.  Change multi-byte character to
	    something that is not matching \i. (Ken Takata)
相关文件:   src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.1009
问题:       Compiler warning for ambiguous else.
解决方案:   Add curly braces.
相关文件:   src/if_py_both.h

Patch 7.3.1010
问题:       New regexp: adding \Z makes every character match.
解决方案:   Only apply ireg_icombine for composing characters.
	    Also add missing change from patch 1008. (Ken Takata)
相关文件:   src/regexp_nfa.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.1011
问题:       New regexp engine is inefficient with multi-byte characters.
解决方案:   Handle a character at a time instead of a byte at a time.  Also
	    make \Z partly work.
相关文件:   src/regexp_nfa.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.1012
问题:       \Z does not work properly with the new regexp engine.
解决方案:   Make \Z work.  Add tests.
相关文件:   src/regexp_nfa.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.1013
问题:       New regexp logging is a bit messy.
解决方案:   Consistently use #defines, add explanatory comment. (Taro Muraoka)
相关文件:   src/regexp_nfa.c

Patch 7.3.1014
问题:       New regexp state dump is hard to read.
解决方案:   Make the state dump more pretty. (Taro Muraoka)
相关文件:   src/regexp_nfa.c

Patch 7.3.1015
问题:       New regexp engine: Matching composing characters is wrong.
解决方案:   Fix matching composing characters.
相关文件:   src/regexp_nfa.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.1016
问题:       Unused field in nfa_state.
解决方案:   Remove lastthread.
相关文件:   src/regexp.h, src/regexp_nfa.c

Patch 7.3.1017
问题:       Zero width match changes length of match.
解决方案:   For a zero width match put new states in the current position in
	    the state list.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok,
	    src/regexp.h

Patch 7.3.1018
问题:       New regexp engine wastes memory.
解决方案:   Allocate prog with actual number of states, not estimated maximum
	    number of sates.
相关文件:   src/regexp_nfa.c

Patch 7.3.1019
问题:       These do not work with the new regexp engine: \%o123, \%x123,
	    \%d123, \%u123 and \%U123.
解决方案:   Implement these items.
相关文件:   src/regexp_nfa.c

Patch 7.3.1020
问题:       Not all patterns are tested with auto / old / new engine.
解决方案:   Test patterns with three values of <span class="Type">'regexpengine'</span>.
相关文件:   src/testdir/test64.in, src/testdir/test64.ok,
	    src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.1021
问题:       New regexp engine does not ignore order of composing chars.
解决方案:   Ignore composing chars order.
相关文件:   src/regexp_nfa.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.1022
问题:       Compiler warning for shadowed variable. (John Little)
解决方案:   Move declaration, rename variables.
相关文件:   src/regexp_nfa.c

Patch 7.3.1023
问题:       Searching for composing char only and using \Z has different
	    results.
解决方案:   Make it match the composing char, matching everything is not
	    useful.
相关文件:   src/regexp_nfa.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.3.1024
问题:       New regexp: End of matching pattern not set correctly. (Cesar
	    Romani)
解决方案:   Quit the loop after finding the match.  Store nfa_has_zend in the
	    program.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok,
	    src/regexp.h

Patch 7.3.1025
问题:       New regexp: not matching newline in string. (Marc Weber)
解决方案:   Check for &quot;\n&quot; character.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1026
问题:       New regexp: pattern that includes a new-line matches too early.
	    (John McGowan)
解决方案:   Do not start searching in the second line.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1027
问题:       New regexp performance: Calling no_Magic() very often.
解决方案:   Remove magicness inline.
相关文件:   src/regexp_nfa.c

Patch 7.3.1028
问题:       New regexp performance: Copying a lot of position state.
解决方案:   Only copy the sub-expressions that are being used.
相关文件:   src/regexp_nfa.c, src/regexp.h

Patch 7.3.1029
问题:       New regexp performance: Unused position state being copied.
解决方案:   Keep track of which positions are actually valid.
相关文件:   src/regexp_nfa.c

Patch 7.3.1030 (after 7.3.1028)
问题:       Can't build for debugging.
解决方案:   Fix struct member names.
相关文件:   src/regexp_nfa.c

Patch 7.3.1031
问题:       Compiler warnings for shadowed variable. (John Little)
解决方案:   Move the variable declarations to the scope where they are used.
相关文件:   src/regexp_nfa.c

Patch 7.3.1032
问题:       &quot;\ze&quot; is not supported by the new regexp engine.
解决方案:   Make &quot;\ze&quot; work.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1033
问题:       &quot;\1&quot; .. &quot;\9&quot; are not supported in the new regexp engine.
解决方案:   Implement them.  Add a few more tests.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok,
	    src/regexp.h

Patch 7.3.1034
问题:       New regexp code using strange multi-byte code.
解决方案:   Use the normal code to advance and backup pointers.
相关文件:   src/regexp_nfa.c

Patch 7.3.1035
问题:       Compiler warning on 64 bit windows.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/if_py_both.h

Patch 7.3.1036
问题:       Can't build on HP-UX.
解决方案:   Give the union a name. (John Marriott)
相关文件:   src/regexp_nfa.c

Patch 7.3.1037
问题:       Look-behind matching is very slow on long lines.
解决方案:   Add a byte limit to how far back an attempt is made.
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test64.in,
	    src/testdir/test64.ok

Patch 7.3.1038
问题:       Crash when using Cscope.
解决方案:   Avoid negative argument to vim_strncpy(). (Narendran
	    Gopalakrishnan)
相关文件:   src/if_cscope.c

Patch 7.3.1039
问题:       New regexp engine does not support \%23c, \%&lt;23c and the like.
解决方案:   Implement them. (partly by Yasuhiro Matsumoto)
相关文件:   src/regexp.h, src/regexp_nfa.c, src/testdir/test64.in,
	    src/testdir/test64.ok

Patch 7.3.1040
问题:       Python: Problems with debugging dynamic build.
解决方案:   Python patch 1. (ZyX)
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.3.1041
问题:       Python: Invalid read valgrind errors.
解决方案:   Python patch 2: defer DICTKEY_UNREF until key is no longer needed.
	    (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1042
问题:       Python: can't assign to vim.Buffer.name.
解决方案:   Python patch 3. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/ex_cmds.c, src/if_py_both.h,
	    src/if_python3.c, src/if_python.c, src/proto/ex_cmds.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1043
问题:       Python: Dynamic compilation with 2.3 fails.
解决方案:   Python patch 4. (ZyX)
相关文件:   src/if_python.c

Patch 7.3.1044
问题:       Python: No <span class="Special">{Buffer,TabPage,Window}</span>.valid attributes.
解决方案:   Python patch 5: add .valid (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1045
问题:       Python: No error handling for VimToPython function.
解决方案:   Python patch 6. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1046
问题:       Python: Using Py_BuildValue for building strings.
解决方案:   Python patch 7 and 7.5: Replace Py_BuildValue with
	    PyString_FromString. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1047
问题:       Python: dir() does not work properly.
解决方案:   Python patch 8.  Add __dir__ method to all objects with custom
	    tp_getattr supplemented by __members__ attribute for at least
	    python-2* versions.  __members__ is not mentioned in python-3*
	    dir() output even if it is accessible. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1048
问题:       Python: no consistent naming.
解决方案:   Python patch 9: Rename d to dict and lookupDict to lookup_dict.
	    (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1049
问题:       Python: no consistent naming
解决方案:   Python patch 10: Rename DICTKEY_GET_NOTEMPTY to DICTKEY_GET. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1050
问题:       Python: Typo in pyiter_to_tv.
解决方案:   Python patch 11. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1051
问题:       Python: possible memory leaks.
解决方案:   Python patch 12: fix the leaks (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1052
问题:       Python: possible SEGV and negative refcount.
解决方案:   Python patch 13: Fix IterIter function. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1053
问题:       Python: no flag for types with tp_traverse+tp_clear.
解决方案:   Python patch 14: Add Py_TPFLAGS_HAVE_GC. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1054 (after 7.3.1042)
问题:       Can't build without the +autocmd feature. (Elimar Riesebieter)
解决方案:   Fix use of buf and curbuf.
相关文件:   src/ex_cmds.c, src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.1055
问题:       Negated collection does not match newline.
解决方案:   Handle newline differently. (Hiroshi Shirosaki)
相关文件:   src/regexp_nfa.c, src/testdir/test64.ok, src/testdir/test64.in

Patch 7.3.1056
问题:       Python: possible memory leaks.
解决方案:   Python patch 15. (ZyX) Fix will follow later.
相关文件:   src/eval.c, src/if_py_both.h, src/proto/eval.pro

Patch 7.3.1057
问题:       Python: not enough compatibility.
解决方案:   Python patch 16: Make OutputWritelines support any sequence object
	    (ZyX) <span class="Todo">Note</span>: tests fail
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1058
问题:       Call of funcref does not succeed in other script.
解决方案:   Python patch 17: add get_expanded_name(). (ZyX)
相关文件:   src/eval.c, src/proto/eval.pro

Patch 7.3.1059
问题:       Python: Using fixed size buffers.
解决方案:   Python patch 18: Use python's own formatter. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.1060
问题:       Python: can't repr() a function.
解决方案:   Python patch 19: add FunctionRepr(). (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1061
问题:       Python: Dictionary is not standard.
解决方案:   Python patch 20: Add standard methods and fields. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/eval.c, src/if_py_both.h,
	    src/if_python3.c, src/if_python.c, src/proto/eval.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1062
问题:       Python: List is not standard.
解决方案:   Python patch 21: Add standard methods and fields. (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1063
问题:       Python: Function is not standard.
解决方案:   Python patch 22: make Function subclassable. (ZyX)
相关文件:   src/eval.c, src/if_py_both.h, src/proto/eval.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1064
问题:       Python: insufficient error checking.
解决方案:   Python patch 23. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1065
问题:       Python: key mapping is not standard.
解决方案:   Python patch 24: use PyMapping_Keys. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.1066
问题:       Python: Insufficient exception and error testing.
解决方案:   Python patch 25. (ZyX)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1067
问题:       Python: documentation lags behind.
解决方案:   Python patch 26. (ZyX)
相关文件:   runtime/doc/if_pyth.txt

Patch 7.3.1068
问题:       Python: Script is auto-loaded on function creation.
解决方案:   Python patch 27. (ZyX)
相关文件:   src/eval.c, src/if_py_both.h, src/proto/eval.pro,
	    src/testdir/test86.ok, src/testdir/test87.ok, src/vim.h

Patch 7.3.1069
问题:       Python: memory leaks.
解决方案:   Python patch 28: Purge out DICTKEY_CHECK_EMPTY macros. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1070
问题:       Vim crashes in Python tests. Compiler warning for unused function.
解决方案:   Disable the tests for now. Move the function.
相关文件:   src/if_py_both.h, src/if_python.c, src/testdir/test86.in,
	    src/testdir/test87.in

Patch 7.3.1071
问题:       New regexp engine: backreferences don't work correctly.
解决方案:   Add every possible start/end position on the state stack.
相关文件:   src/regexp_nfa.c, src/regexp.h, src/testdir/test64.in,
	    src/testdir/test64.ok

Patch 7.3.1072
问题:       Compiler warning for uninitialized variable.
解决方案:   Initialize it.
相关文件:   src/regexp_nfa.c

Patch 7.3.1073
问题:       New regexp engine may run out of states.
解决方案:   Allocate states dynamically.  Also make the test report errors.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok,
	    src/testdir/test95.in

Patch 7.3.1074
问题:       Compiler warning for printf format. (Manuel Ortega)
解决方案:   Add type casts.
相关文件:   src/if_py_both.h

Patch 7.3.1075
问题:       Compiler warning for storing a long_u in an int.
解决方案:   Declare the number as an int. (Mike Williams)
相关文件:   src/regexp_nfa.c

Patch 7.3.1076
问题:       New regexp engine: \@= and \&amp; don't work.
解决方案:   Make these items work.  Add column info to logging.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1077
问题:       Python: Allocating dict the wrong way, causing a crash.
解决方案:   Use py_dict_alloc(). Fix some exception problems. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1078
问题:       New regexp engine: \@! doesn't work.
解决方案:   Implement the negated version of \@=.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1079
问题:       Test 87 fails.
解决方案:   Fix the test for Python 3.3. (ZyX)  Make it pass on 32 bit systems.
相关文件:   src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1080
问题:       Test 86 fails.
解决方案:   Comment out the parts that don't work.  Make it pass on 32 bit
	    systems.
相关文件:   src/testdir/test86.in, src/testdir/test86.ok

Patch 7.3.1081
问题:       Compiler warnings on 64-bit Windows.
解决方案:   Change variable types. (Mike Williams)
相关文件:   src/if_py_both.h, src/regexp_nfa.c

Patch 7.3.1082
问题:       New regexp engine: Problem with \@= matching.
解决方案:   Save and restore nfa_match.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1083
问题:       New regexp engine: Does not support \%^ and \%$.
解决方案:   Support matching start and end of file.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1084
问题:       New regexp engine: only accepts up to \<span class="Special">{,10}</span>.
解决方案:   Remove upper limit.  Remove dead code with NFA_PLUS.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1085
问题:       New regexp engine: Non-greedy multi doesn't work.
解决方案:   Implement \<span class="Special">{-}</span>.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1086
问题:       Old regexp engine accepts illegal range, new one doesn't.
解决方案:   Also accept the illegal range with the new engine.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1087
问题:       A leading star is not seen as a normal char when \{} follows.
解决方案:   Save and restore the parse state properly.
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test64.in,
	    src/testdir/test64.ok

Patch 7.3.1088
问题:       New regexp engine: \@&lt;= and \@&lt;! are not implemented.
解决方案:   Implement look-behind matching.  Fix off-by-one error in old
	    regexp engine.
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test64.in,
	    src/testdir/test64.ok

Patch 7.3.1089
问题:       Tests 86 and 87 fail on MS-Windows. (Ken Takata)
解决方案:   Fix platform-specific stuff. (ZyX)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1090
问题:       New regexp engine does not support \z1 .. \z9 and \z(.
解决方案:   Implement the syntax submatches.
相关文件:   src/regexp.h, src/regexp_nfa.c

Patch 7.3.1091
问题:       New regexp engine: no error when using \z1 or \z( where it does
	    not work.
解决方案:   Give an error message.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.3.1092
问题:       Can't build with regexp debugging.  NFA debug output shows wrong
	    pattern.
解决方案:   Fix debugging code for recent changes.  Add the pattern to the
	    program.
相关文件:   src/regexp_nfa.c, src/regexp.h

Patch 7.3.1093
问题:       New regexp engine: When a sub expression is empty \1 skips a
	    character.
解决方案:   Make \1 try the current position when the match is empty.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1094
问题:       New regexp engine: Attempts to match &quot;^&quot; at every character.
解决方案:   Only try &quot;^&quot; at the start of a line.
相关文件:   src/regexp_nfa.c

Patch 7.3.1095
问题:       Compiler warnings for shadowed variables. (Christian Brabandt)
解决方案:   Rename new_state() to alloc_state().  Remove unnecessary
	    declaration.
相关文件:   src/regexp_nfa.c

Patch 7.3.1096
问题:       Python: popitem() was not defined in a standard way.
解决方案:   Remove the argument from popitem(). (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/testdir/test86.in,
	    src/testdir/test86.ok, src/testdir/test87.in,
	    src/testdir/test87.ok

Patch 7.3.1097
问题:       Python: a few recently added items are not documented.
解决方案:   Update the documentation. (ZyX)
相关文件:   runtime/doc/if_pyth.txt

Patch 7.3.1098
问题:       Python: Possible memory leaks
解决方案:   Add Py_XDECREF() calls. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1099
问题:       Python: Changing directory with os.chdir() causes problems for
	    Vim's notion of directories.
解决方案:   Add vim.chdir() and vim.fchdir(). (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/ex_docmd.c, src/if_py_both.h,
	    src/if_python3.c, src/if_python.c, src/proto/ex_docmd.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1100
问题:       Python: a few more memory problems.
解决方案:   Add and remove Py_XDECREF(). (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1101
问题:       Configure doesn't find Python 3 on Ubuntu 13.04.
解决方案:   First try distutils.sysconfig. Also fix some indents.  (Ken
	    Takata)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.1102
问题:       Completion of &quot;:py3do&quot; and &quot;:py3file&quot; does not work after &quot;:py3&quot;.
解决方案:   Make completion work. (Taro Muraoka)
相关文件:   src/ex_docmd.c

Patch 7.3.1103
问题:       New regexp engine: overhead in saving and restoring.
解决方案:   Make saving and restoring list IDs faster.  Don't copy or check \z
	    subexpressions when they are not used.
相关文件:   src/regexp_nfa.c

Patch 7.3.1104
问题:       New regexp engine does not handle &quot;~&quot;.
解决方案:   Add support for &quot;~&quot;.
相关文件:   src/regexp_nfa.c, src/testdir/test24.in, src/testdir/test24.ok

Patch 7.3.1105
问题:       New regexp engine: too much code in one function.  Dead code.
解决方案:   Move the recursive nfa_regmatch call to a separate function.
	    Remove the dead code.
相关文件:   src/regexp_nfa.c

Patch 7.3.1106
问题:       New regexp engine: saving and restoring lastlist in the states
	    takes a lot of time.
解决方案:   Use a second lastlist value for the first recursive call.
相关文件:   src/regexp.h, src/regexp_nfa.c

Patch 7.3.1107
问题:       Compiler warnings for unused variables.
解决方案:   Put the variables inside #ifdef.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.3.1108
问题:       Error message for os.fchdir() (Charles Peacech)
解决方案:   Clear the error. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1109
问题:       Building on MS-Windows doesn't see changes in if_py_both.h.
解决方案:   Add a dependency. (Ken Takata)
相关文件:   src/Make_bc5.mak, src/Make_cyg.mak, src/Make_ming.mak,
	    src/Make_mvc.mak

Patch 7.3.1110
问题:       New regexp matching: Using \@= and the like can be slow.
解决方案:   Decide whether to first try matching the zero-width part or what
	    follows, whatever is more likely to fail.
相关文件:   src/regexp_nfa.c

Patch 7.3.1111
问题:       nfa_recognize_char_class() implementation is inefficient.
解决方案:   Use bits in an int instead of chars in a string. (Dominique Pelle)
相关文件:   src/regexp_nfa.c, src/testdir/test36.in, src/testdir/test36.ok

Patch 7.3.1112
问题:       New regexp engine: \%V not supported.
解决方案:   Implement \%V.  Add tests.
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test64.in,
	    src/testdir/test64.ok

Patch 7.3.1113
问题:       New regexp engine: \%'m not supported.
解决方案:   Implement \%'m.  Add tests.
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test64.in,
	    src/testdir/test64.ok

Patch 7.3.1114 (after 7.3.1110)
问题:       Can't build without the syntax feature.
解决方案:   Add #ifdefs. (Erik Falor)
相关文件:   src/regexp_nfa.c

Patch 7.3.1115
问题:       Many users don't like the cursor line number when <span class="Type">'relativenumber'</span>
	    is set.
解决方案:   Have four combinations with <span class="Type">'number'</span> and <span class="Type">'relativenumber'</span>.
	    (Christian Brabandt)
相关文件:   runtime/doc/options.txt, src/option.c, src/screen.c,
	    src/testdir/test89.in, src/testdir/test89.ok

Patch 7.3.1116
问题:       Can't build without Visual mode.
解决方案:   Add #ifdefs.
相关文件:   src/regexp_nfa.c

Patch 7.3.1117
问题:       New regexp engine: \%[abc] not supported.
解决方案:   Implement \%[abc].  Add tests.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1118
问题:       Match failure rate is not very specific.
解决方案:   Tune the failure rate for match items.
相关文件:   src/regexp_nfa.c

Patch 7.3.1119
问题:       Flags in <span class="Type">'cpo'</span> are search for several times.
解决方案:   Store the result and re-use the flags.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.3.1120
问题:       Crash when regexp logging is enabled.
解决方案:   Avoid using NULL pointers. Advance over count argument.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.3.1121
问题:       New regexp engine: adding states that are not used.
解决方案:   Don't add the states.
相关文件:   src/regexp_nfa.c

Patch 7.3.1122
问题:       New regexp engine: \@&gt; not supported.
解决方案:   Implement \%&gt;.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1123
问题:       Can't build tiny Vim on MS-Windows.
解决方案:   Adjust #ifdef around using modif_fname(). (Mike Williams)
相关文件:   src/misc1.c

Patch 7.3.1124
问题:       Python: Crash on MS-Windows when os.fchdir() is not available.
解决方案:   Check for _chdir to be NULL. (Ken Takata)
相关文件:   src/if_py_both.h

Patch 7.3.1125
问题:       Error for using \%V in a pattern in tiny Vim.
解决方案:   Allow using \%V but never match. (Dominique Pelle)
相关文件:   src/regexp_nfa.c

Patch 7.3.1126
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Assign something to the variable.
相关文件:   src/regexp_nfa.c

Patch 7.3.1127
问题:       No error for using empty \%[].
解决方案:   Give error message.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.3.1128
问题:       Now that the NFA engine handles everything every failure is a
	    syntax error.
解决方案:   Remove the syntax_error flag.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.3.1129
问题:       Can't see what pattern in syntax highlighting is slow.
解决方案:   Add the &quot;:syntime&quot; command.
相关文件:   src/structs.h, src/syntax.c, src/ex_cmds.h, src/ex_docmd.c,
	    src/proto/syntax.pro, src/ex_cmds2.c, src/proto/ex_cmds2.pro,
	    runtime/doc/syntax.txt

Patch 7.3.1130 (after 7.3.1129)
问题:       Can't build with anything but huge features.
解决方案:   Check for FEAT_PROFILE. (Yasuhiro Matsumoto)
相关文件:   src/ex_docmd.c, src/structs.h, src/syntax.c

Patch 7.3.1131
问题:       New regexp engine is a bit slow.
解决方案:   Do not clear the state list.  Don't copy syntax submatches when
	    not used.
相关文件:   src/regexp_nfa.c

Patch 7.3.1132
问题:       Crash when debugging regexp.
解决方案:   Do not try to dump subexpr that were not set.  Skip over count of
	    \% items.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.3.1133
问题:       New regexp engine is a bit slow.
解决方案:   Skip ahead to a character that must match.  Don't try matching a
	    &quot;^&quot; patter past the start of line.
相关文件:   src/regexp_nfa.c, src/regexp.h

Patch 7.3.1134
问题:       Running test 49 takes a long time.
解决方案:   Don't have it grep all files.
相关文件:   src/testdir/test49.vim

Patch 7.3.1135
问题:       Compiler warning for unused argument.
解决方案:   Add UNUSED.
相关文件:   src/syntax.c

Patch 7.3.1136
问题:       &quot;:func Foo&quot; does not show attributes.
解决方案:   Add &quot;abort&quot;, &quot;dict&quot; and &quot;range&quot;. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.3.1137
问题:       New regexp engine: collections are slow.
解决方案:   Handle all characters in one go.
相关文件:   src/regexp_nfa.c

Patch 7.3.1138
问题:       New regexp engine: neglist no longer used.
解决方案:   Remove the now unused neglist.
相关文件:   src/regexp_nfa.c

Patch 7.3.1139
问题:       New regexp engine: negated flag is hardly used.
解决方案:   Add separate _NEG states, remove negated flag.
相关文件:   src/regexp_nfa.c, src/regexp.h

Patch 7.3.1140
问题:       New regexp engine: trying expensive match while the result is not
	    going to be used.
解决方案:   Check for output state already being in the state list.
相关文件:   src/regexp_nfa.c

Patch 7.3.1141
问题:       Win32: Check for available memory is not reliable and adds
	    overhead.
解决方案:   Remove mch_avail_mem(). (Mike Williams)
相关文件:   src/os_win32.c, src/os_win32.h

Patch 7.3.1142
问题:       Memory leak in &quot;:syntime report&quot;.
解决方案:   Clear the grow array. (Dominique Pelle)
相关文件:   src/syntax.c

Patch 7.3.1143
问题:       When mapping NUL it is displayed as an X.
解决方案:   Check for KS_ZERO instead of K_ZERO. (Yasuhiro Matsumoto)
相关文件:   src/message.c

Patch 7.3.1144
问题:       &quot;RO&quot; is not translated everywhere.
解决方案:   Put inside _(). (Sergey Alyoshin)
相关文件:   src/buffer.c, src/screen.c

Patch 7.3.1145
问题:       New regexp engine: addstate() is called very often.
解决方案:   Optimize adding the start state.
相关文件:   src/regexp_nfa.c

Patch 7.3.1146
问题:       New regexp engine: look-behind match not checked when followed by
	    zero-width match.
解决方案:   Do the look-behind match before adding the zero-width state.
相关文件:   src/regexp_nfa.c

Patch 7.3.1147
问题:       New regexp engine: regstart is only used to find the first match.
解决方案:   Use regstart whenever adding the start state.
相关文件:   src/regexp_nfa.c

Patch 7.3.1148
问题:       No command line completion for &quot;:syntime&quot;.
解决方案:   Implement the completion. (Dominique Pelle)
相关文件:   runtime/doc/map.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/ex_getln.c, src/proto/syntax.pro, src/syntax.c, src/vim.h

Patch 7.3.1149
问题:       New regexp engine: Matching plain text could be faster.
解决方案:   Detect a plain text match and handle it specifically.  Add
	    vim_regfree().
相关文件:   src/regexp.c, src/regexp.h, src/regexp_nfa.c,
	    src/proto/regexp.pro, src/buffer.c, src/edit.c, src/eval.c,
	    src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
	    src/ex_getln.c, src/fileio.c, src/gui.c, src/misc1.c, src/misc2.c,
	    src/option.c, src/syntax.c, src/quickfix.c, src/search.c,
	    src/spell.c, src/tag.c, src/window.c, src/screen.c, src/macros.h,
	    src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1150
问题:       New regexp engine: Slow when a look-behind match does not have a
	    width specified.
解决方案:   Try to compute the maximum width.
相关文件:   src/regexp_nfa.c

Patch 7.3.1151
问题:       New regexp engine: Slow when a look-behind match is followed by a
	    zero-width match.
解决方案:   Postpone the look-behind match more often.
相关文件:   src/regexp_nfa.c

Patch 7.3.1152
问题:       In tiny build ireg_icombine is undefined. (Tony Mechelynck)
解决方案:   Add #ifdef.
相关文件:   src/regexp_nfa.c

Patch 7.3.1153
问题:       New regexp engine: Some look-behind matches are very expensive.
解决方案:   Postpone invisible matches further, until a match is almost found.
相关文件:   src/regexp_nfa.c

Patch 7.3.1154
问题:       New regexp_nfa engine: Unnecessary code.
解决方案:   Remove unnecessary code.
相关文件:   src/regexp_nfa.c

Patch 7.3.1155
问题:       MS-DOS: &quot;make test&quot; uses external rmdir command.
解决方案:   Rename &quot;rmdir&quot; to &quot;rd&quot;. (Taro Muraoka)
相关文件:   src/testdir/Make_dos.mak

Patch 7.3.1156
问题:       Compiler warnings. (dv1445)
解决方案:   Initialize variables, even when the value isn't really used.
相关文件:   src/regexp_nfa.c, src/eval.c

Patch 7.3.1157
问题:       New regexp engine fails on &quot;\(\&lt;command\)\@&lt;=.*&quot;
解决方案:   Fix rule for postponing match.  Further tune estimating whether
	    postponing works better.  Add test.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1158
问题:       Crash when running test 86. (Jun Takimoto)
解决方案:   Define PY_SSIZE_T_CLEAN early. (Elimar Riesebieter)
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.3.1159
问题:       The round() function is not always available. (Christ van
	    Willegen)
解决方案:   Use the solution from f_round().
相关文件:   src/ex_cmds2.c, src/eval.c, src/proto/eval.pro

Patch 7.3.1160
问题:       Mixing long and pointer doesn't always work.
解决方案:   Avoid cast to pointer.
相关文件:   src/undo.c

Patch 7.3.1161
问题:       Python: PyList_SetItem() is inefficient.
解决方案:   Use PyList_SET_ITEM() (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1162
问题:       Python: Memory leaks
解决方案:   Add more Py_DECREF(). (ZyX)
相关文件:   src/if_py_both.h, src/if_python.c

Patch 7.3.1163
问题:       Not easy to load Python modules.
解决方案:   Search &quot;python2&quot;, &quot;python3&quot; and &quot;pythonx&quot; directories in
	    <span class="Type">'runtimepath'</span> for Python modules. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/configure.in, src/ex_cmds2.c,
	    src/if_py_both.h, src/if_python.c, src/if_python3.c,
	    src/testdir/test86.in, src/testdir/test87.in, src/auto/configure

Patch 7.3.1164
问题:       Can't test what is actually displayed on screen.
解决方案:   Add the screenchar() and screenattr() functions.
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.3.1165
问题:       HP-UX compiler can't handle zero size array. (Charles Cooper)
解决方案:   Make the array one item big.
相关文件:   src/regexp.h, src/regexp_nfa.c

Patch 7.3.1166
问题:       Loading Python modules is not tested.
解决方案:   Enable commented-out tests, add missing files. (ZyX)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok,
	    src/testdir/python2/module.py, src/testdir/python3/module.py,
	    src/testdir/pythonx/module.py, src/testdir/pythonx/modulex.py,
	    Filelist

Patch 7.3.1167
问题:       Python configure check doesn't reject Python 2 when requesting
	    Python 3.  Some systems need -pthreads instead of -pthread.
解决方案:   Adjust configure accordingly. (Andrei Olsen)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.1168
问题:       Python &quot;sane&quot; configure checks give a warning message.
解决方案:   Use single quotes instead of escaped double quotes. (Ben Fritz)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.1169
问题:       New regexp engine: some work is done while executing a pattern,
	    even though the result is predictable.
解决方案:   Do the work while compiling the pattern.
相关文件:   src/regexp_nfa.c

Patch 7.3.1170
问题:       Patch 7.3.1058 breaks backwards compatibility, not possible to use
	    a function reference as a string. (lilydjwg)
解决方案:   Instead of translating the function name only translate &quot;s:&quot;.
相关文件:   src/eval.c

Patch 7.3.1171
问题:       Check for digits and ascii letters can be faster.
解决方案:   Use a trick with one comparison. (Dominique Pelle)
相关文件:   src/macros.h

Patch 7.3.1172
问题:       Python 2: loading modules doesn't work well.
解决方案:   Fix the code. Add more tests. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/if_python.c,
	    src/testdir/python2/module.py, src/testdir/python3/module.py,
	    src/testdir/python_after/after.py,
	    src/testdir/python_before/before.py, src/testdir/test86.in,
	    src/testdir/test86.ok, src/testdir/test87.in,
	    src/testdir/test87.ok, Filelist

Patch 7.3.1173
问题:       Python 2 tests don't have the same output everywhere.
解决方案:   Make the Python 2 tests more portable. (ZyX)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok

Patch 7.3.1174
问题:       Python 2 and 3 use different ways to load modules.
解决方案:   Use the same method. (ZyX)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/if_python3.c,
	    src/if_python.c

Patch 7.3.1175
问题:       Using isalpha() and isalnum() can be slow.
解决方案:   Use range checks. (Mike Williams)
相关文件:   src/ex_docmd.c, src/macros.h

Patch 7.3.1176
问题:       Compiler warnings on 64 bit system.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/eval.c, src/if_py_both.h

Patch 7.3.1177
问题:       Wasting memory on padding.
解决方案:   Reorder struct fields. (Dominique Pelle)
相关文件:   src/structs.h, src/fileio.c

Patch 7.3.1178
问题:       Can't put all Vim config files together in one directory.
解决方案:   Load ~/.vim/vimrc if ~/.vimrc does not exist. (Lech Lorens)
相关文件:   runtime/doc/gui.txt, runtime/doc/starting.txt, src/gui.c,
	    src/main.c, src/os_amiga.h, src/os_dos.h, src/os_unix.h

Patch 7.3.1179
问题:       When a global mapping starts with the same characters as a
	    buffer-local mapping Vim waits for a character to be typed to find
	    out whether the global mapping is to be used. (Andy Wokula)
解决方案:   Use the local mapping without waiting. (Michael Henry)
相关文件:   runtime/doc/map.txt, src/getchar.c

Patch 7.3.1180
问题:       When current directory changes, path from cscope may no longer be
	    valid. (AS Budden)
解决方案:   Always store the absolute path. (Christian Brabandt)
相关文件:   src/if_cscope.c

Patch 7.3.1181
问题:       Wrong error message for 1.0[0].
解决方案:   Check for funcref and float separately. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.3.1182
问题:       <span class="Type">'backupcopy'</span> default on MS-Windows does not work for hard and soft
	    links.
解决方案:   Check for links. (David Pope, Ken Takata)
相关文件:   src/fileio.c, src/os_win32.c, src/proto/os_win32.pro

Patch 7.3.1183
问题:       Python tests 86 and 87 fail.
解决方案:   Add &quot;empty&quot; files. (ZyX)
相关文件:   src/testdir/python_before/before_1.py,
	    src/testdir/python_before/before_2.py

Patch 7.3.1184
问题:       Highlighting is sometimes wrong. (Axel Bender)
解决方案:   Fetch regline again when returning from recursive regmatch.
相关文件:   src/regexp_nfa.c

Patch 7.3.1185
问题:       New regexp engine: no match with ^ after \n. (SungHyun Nam)
解决方案:   Fix it, add a test.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1186
问题:       Python 3: test 87 may crash.
解决方案:   Use _PyArg_Parse_SizeT instead of PyArg_Parse. (Jun Takimoto)
相关文件:   src/if_python3.c

Patch 7.3.1187 (after 7.3.1170)
问题:       &quot;s:&quot; is recognized but &quot;<span class="Special">&lt;SID&gt;</span>&quot; is not. (ZyX)
解决方案:   Translate &quot;<span class="Special">&lt;SID&gt;</span>&quot; like &quot;s:&quot;.
相关文件:   src/eval.c

Patch 7.3.1188
问题:       Newline characters messing up error message.
解决方案:   Remove the newlines. (Kazunobu Kuriyama)
相关文件:   src/gui_x11.c

Patch 7.3.1189 (after 7.3.1185)
问题:       Highlighting is still wrong sometimes. (Dominique Pelle)
解决方案:   Also restore reginput properly.
相关文件:   src/regexp_nfa.c

Patch 7.3.1190
问题:       Compiler warning for parentheses. (Christian Wellenbrock)
解决方案:   Change #ifdef.
相关文件:   src/ex_docmd.c

Patch 7.3.1191
问题:       Backreference to previous line doesn't work. (Lech Lorens)
解决方案:   Implement looking in another line.
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test64.in,
	    src/testdir/test64.ok

Patch 7.3.1192
问题:       Valgrind reports errors when using backreferences. (Dominique
	    Pelle)
解决方案:   Do not check the end of submatches.
相关文件:   src/regexp_nfa.c

Patch 7.3.1193
问题:       fail_if_missing not used for Python 3.
解决方案:   Give an error when Python 3 can't be configured. (Andrei Olsen)
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.1194
问题:       Yaml highlighting is slow.
解决方案:   Tune the estimation of pattern failure chance.
相关文件:   src/regexp_nfa.c

Patch 7.3.1195
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Set the length to the matching backref.
相关文件:   src/regexp.c

Patch 7.3.1196
问题:       Old regexp engine does not match pattern with backref correctly.
	    (Dominique Pelle)
解决方案:   Fix setting status.  Test multi-line patterns better.
相关文件:   src/regexp.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1197
问题:       &quot;:wviminfo!&quot; does not write history previously read from a viminfo
	    file.  (Roland Eggner)
解决方案:   When not merging history write all entries.
相关文件:   src/ex_cmds.c, src/ex_getln.c, src/proto/ex_getln.pro

Patch 7.3.1198
问题:       Build error when using Perl 5.18.0 and dynamic loading.
解决方案:   Change #ifdefs for Perl_croak_xs_usage. (Ike Devolder)
相关文件:   src/if_perl.xs

Patch 7.3.1199
问题:       When evaluating <span class="Type">'foldexpr'</span> causes an error this is silently
	    ignored and evaluation is retried every time.
解决方案:   Set emsg_silent instead of emsg_off. Stop evaluating <span class="Type">'foldexpr'</span> is
	    it is causing errors.  (Christian Brabandt)
相关文件:   src/fold.c

Patch 7.3.1200
问题:       When calling setline() from Insert mode, using <span class="Special">CTRL-R</span> =, undo does
	    not work properly. (Israel Chauca)
解决方案:   Sync undo after evaluating the expression. (Christian Brabandt)
相关文件:   src/edit.c, src/testdir/test61.in, src/testdir/test61.ok

Patch 7.3.1201
问题:       When a startup script creates a preview window, it probably
	    becomes the current window.
解决方案:   Make another window the current one. (Christian Brabandt)
相关文件:   src/main.c

Patch 7.3.1202 (after 7.3.660)
问题:       Tags are not found in case-folded tags file. (Darren cole, Issue
	    90)
解决方案:   Take into account that when case folding was used for the tags
	    file &quot;!rm&quot; sorts before the &quot;!_TAG&quot; header lines.
相关文件:   src/tag.c

Patch 7.3.1203
问题:       Matches from matchadd() might be highlighted incorrectly when they
	    are at a fixed position and inserting lines. (John Szakmeister)
解决方案:   Redraw all lines below a change if there are highlighted matches.
	    (idea by Christian Brabandt)
相关文件:   src/screen.c

Patch 7.3.1204
问题:       Calling gettabwinvar() in <span class="Type">'tabline'</span> cancels Visual mode. (Hirohito
	    Higashi)
解决方案:   Don't always use goto_tabpage_tp().
相关文件:   src/window.c, src/proto/window.pro, src/eval.c, src/if_py_both.h

Patch 7.3.1205
问题:       logtalk.dict is not removed on uninstall.
解决方案:   Remove the file. (Kazunobu Kuriyama)
相关文件:   src/Makefile

Patch 7.3.1206
问题:       Inconsistent function argument declarations.
解决方案:   Use ANSI style.
相关文件:   src/if_py_both.h

Patch 7.3.1207
问题:       New regexp engine: no match found on &quot;#if FOO&quot;. (Lech Lorens)
解决方案:   When adding a state gets skipped don't adjust the index.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1208
问题:       Compiler warnings on MS-Windows.
解决方案:   Add type cast.  Move variable declaration. (Mike Williams)
相关文件:   src/option.c, src/os_mswin.c

Patch 7.3.1209
问题:       No completion for &quot;:tabdo&quot;.
解决方案:   Add tabdo to the list of modifiers. (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.3.1210 (after 7.3.1182)
问题:       <span class="Type">'backupcopy'</span> default on MS-Windows is wrong when <span class="Type">'encoding'</span> equals
	    the current codepage.
解决方案:   Change the #else block. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.3.1211
问题:       MS-Windows: When <span class="Type">'encoding'</span> differs from the current codepage
	    &quot;:hardcopy&quot; does not work properly.
解决方案:   Use TextOutW() and SetDlgItemTextW(). (Ken Takata)
相关文件:   src/os_mswin.c, src/vim.rc

Patch 7.3.1212
问题:       &quot;make test&quot; on MS-Windows does not report failure like Unix does.
解决方案:   Make it work like on Unix. (Taro Muraoka)
相关文件:   src/testdir/Make_dos.mak

Patch 7.3.1213
问题:       Can't build with small features and Python.
解决方案:   Adjust #ifdefs.
相关文件:   src/eval.c, src/buffer.c, src/eval.c, src/window.c

Patch 7.3.1214
问题:       Missing declaration for init_users() and realloc_post_list().
	    (Salman Halim)
解决方案:   Add the declarations.
相关文件:   src/misc1.c, src/regexp_nfa.c

Patch 7.3.1215
问题:       Compiler warning for function not defined.
解决方案:   Add #ifdef.
相关文件:   src/misc1.c

Patch 7.3.1216
问题:       Configure can't find Motif on Ubuntu.
解决方案:   Search for libXm in /usr/lib/*-linux-gnu.
相关文件:   src/configure.in, src/auto/configure

Patch 7.3.1217
问题:       New regexp engine: Can't handle \%[[ao]]. (Yukihiro Nakadaira)
解决方案:   Support nested atoms inside \%[].
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1218
问题:       &quot;make test&quot; on MS-Windows does not clean all temporary files and
	    gives some unnecessary message.
解决方案:   Clean the right files.  Create .failed files. (Ken Takata)
相关文件:   src/testdir/Make_dos.mak

Patch 7.3.1219
问题:       No test for using []] inside \%[].
解决方案:   Add a test.
相关文件:   src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1220
问题:       MS-Windows: When using wide font italic and bold are not included.
解决方案:   Support wide-bold, wide-italic and wide-bold-italic. (Ken Takata,
	    Taro Muraoka)
相关文件:   src/gui.c, src/gui.h, src/gui_w48.c

Patch 7.3.1221
问题:       When build flags change &quot;make distclean&quot; run into a configure
	    error.
解决方案:   When CFLAGS changes delete auto/config.cache.  Also avoid adding
	    duplicate text to flags. (Ken Takata)
相关文件:   src/Makefile, src/configure.in, src/auto/configure

Patch 7.3.1222
问题:       Cannot execute some tests from the src directly.
解决方案:   Add missing targets.
相关文件:   src/Makefile

Patch 7.3.1223
问题:       Tests fail on MS-Windows.
解决方案:   Avoid depending on OS version. Use DOS commands instead of Unix
	    commands. (Taro Muraoka, Ken Takata)
相关文件:   src/testdir/test17.in, src/testdir/test50.in,
	    src/testdir/test71.in, src/testdir/test77.in

Patch 7.3.1224
问题:       Clang gives warnings on xxd.
解决方案:   Change how to use part of a string. (Dominique Pelle) Also avoid
	    warning for return not reached.
相关文件:   src/xxd/xxd.c, src/regexp_nfa.c

Patch 7.3.1225
问题:       Compiler warnings when building with Motif.
解决方案:   Change set_label() argument. (Kazunobu Kuriyama)
相关文件:   src/gui_motif.c

Patch 7.3.1226
问题:       Python: duplicate code.
解决方案:   Share code between OutputWrite() and OutputWritelines(). (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.1227
问题:       Inconsistent string conversion.
解决方案:   Use <span class="Type">'encoding'</span> instead of utf-8. Use METH_O in place of
	    METH_VARARGS where appropriate. (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.1228
问题:       Python: various inconsistencies and problems.
解决方案:   StringToLine now supports both bytes() and unicode() objects.
	    Make function names consistent.  Fix memory leak fixed in
	    StringToLine. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c

Patch 7.3.1229
问题:       Python: not so easy to delete/restore translating.
解决方案:   Make macros do translation of exception messages. (ZyX)
	    <span class="Todo">Note</span>: this breaks translations!
相关文件:   src/if_py_both.h, src/if_python3.c

Patch 7.3.1230
问题:       Python: Exception messages are not clear.
解决方案:   Make exception messages more verbose. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.1231
问题:       Python: use of numbers not consistent.
解决方案:   Add support for Number protocol. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.1232
问题:       Python: inconsistencies in variable names.
解决方案:   Rename variables. (ZyX)
相关文件:   src/eval.c, src/if_py_both.h

Patch 7.3.1233
问题:       Various Python problems.
解决方案:   Fix VimTryEnd. Crash with debug build and PYTHONDUMPREFS=1. Memory
	    leaks in StringToLine(), BufferMark() and convert_dl. (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.3.1234 (after 7.3.1229)
问题:       Python: Strings are not marked for translation.
解决方案:   Add N_() where appropriate. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.3.1235
问题:       In insert mode <span class="Special">CTRL-]</span> is not inserted, on the command-line it is.
解决方案:   Don't insert <span class="Special">CTRL-]</span> on the command line. (Yukihiro Nakadaira)
相关文件:   src/ex_getln.c

Patch 7.3.1236
问题:       Python: WindowSetattr() missing support for NUMBER_UNSIGNED.
解决方案:   Add NUMBER_UNSIGNED, add more tests. Various fixes. (ZyX)
相关文件:   src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/testdir/pythonx/failing.py,
	    src/testdir/pythonx/failing_import.py, src/testdir/test86.in,
	    src/testdir/test86.ok, src/testdir/test87.in,
	    src/testdir/test87.ok, src/testdir/pythonx/topmodule/__init__.py,
	    src/testdir/pythonx/topmodule/submodule/__init__.py,
	    src/testdir/pythonx/topmodule/submodule/subsubmodule/__init__.py,
	    src/testdir/pythonx/topmodule/submodule/subsubmodule/subsubsubmodule.py

Patch 7.3.1237
问题:       Python: non-import errors not handled correctly.
解决方案:   Let non-ImportError exceptions pass the finder. (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok

Patch 7.3.1238
问题:       Crash in Python interface on 64 bit machines.
解决方案:   Change argument type of PyString_AsStringAndSize. (Taro Muraoka,
	    Jun Takimoto)
相关文件:   src/if_python.c

Patch 7.3.1239
问题:       Can't build with Python and MSVC10.
解决方案:   Move #if outside of macro. (Taro Muraoka)
相关文件:   src/if_py_both.h

Patch 7.3.1240
问题:       Memory leak in findfile().
解决方案:   Free the memory. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.3.1241 (after 7.3.1236)
问题:       Some test files missing from the distribution.
解决方案:   Update the list of files.
相关文件:   Filelist

Patch 7.3.1242
问题:       No failure when trying to use a number as a string.
解决方案:   Give an error when StringToLine() is called with an instance of
	    the wrong type. (Jun Takimoto)
相关文件:   src/if_py_both.h

Patch 7.3.1243
问题:       New regexp engine: back references in look-behind match don't
	    work. (Lech Lorens)
解决方案:   Copy the submatches before a recursive match. Also fix function
	    prototypes.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1244
问题:       MS-Windows: confirm() dialog text may not fit.
解决方案:   Use GetTextWidthEnc() instead of GetTextWidth(). (Yasuhiro
	    Matsumoto)
相关文件:   src/gui_w32.c

Patch 7.3.1245
问题:       MS-Windows: confirm() dialog text may still not fit.
解决方案:   Use GetTextWidthEnc() instead of GetTextWidth() in two more
	    places. (Yasuhiro Matsumoto)
相关文件:   src/gui_w32.c

Patch 7.3.1246
问题:       When setting <span class="Type">'winfixheight'</span> and resizing the window causes the
	    window layout to be wrong.
解决方案:   Add frame_check_height() and frame_check_width() (Yukihiro
	    Nakadaira)
相关文件:   src/window.c

Patch 7.3.1247
问题:       New regexp engine: '[ ]\@!\p\%([ ]\@!\p\)*:' does not always match.
解决方案:   When there is a PIM add a duplicate state that starts at another
	    position.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1248
问题:       Still have old hacking code for Input Method.
解决方案:   Add <span class="Type">'imactivatefunc'</span> and <span class="Type">'imstatusfunc'</span> as a generic solution to
	    Input Method activation. (Yukihiro Nakadaira)
相关文件:   runtime/doc/options.txt, src/fileio.c, src/mbyte.c, src/option.c,
	    src/option.h, src/proto/fileio.pro

Patch 7.3.1249
问题:       Modeline not recognized when using &quot;Vim&quot; instead of &quot;vim&quot;.
解决方案:   Also accept &quot;Vim&quot;.
相关文件:   src/buffer.c

Patch 7.3.1250
问题:       Python tests fail on MS-Windows.
解决方案:   Change backslashes to slashes. (Taro Muraoka)
相关文件:   src/testdir/test86.in, src/testdir/test87.in

Patch 7.3.1251
问题:       Test 61 messes up viminfo.
解决方案:   Specify a separate viminfo file.
相关文件:   src/testdir/test61.in

Patch 7.3.1252
问题:       gvim does not find the toolbar bitmap files in ~/vimfiles/bitmaps
	    if the corresponding menu command contains additional characters
	    like the shortcut marker '&amp;' or if you use a non-english locale.
解决方案:   Use menu-&gt;en_dname or menu-&gt;dname. (Martin Gieseking)
相关文件:   src/gui_w32.c

Patch 7.3.1253 (after 7.3.1200)
问题:       Still undo problem after using <span class="Special">CTRL-R</span> = setline(). (Hirohito
	    Higashi)
解决方案:   Set the ins_need_undo flag.
相关文件:   src/edit.c

Patch 7.3.1254 (after 7.3.1252)
问题:       Can't build without the multi-lang feature. (John Marriott)
解决方案:   Add #ifdef.
相关文件:   src/gui_w32.c

Patch 7.3.1255
问题:       Clang warnings when building with Athena.
解决方案:   Add type casts. (Dominique Pelle)
相关文件:   src/gui_at_fs.c

Patch 7.3.1256
问题:       Can't build without eval or autocmd feature.
解决方案:   Add #ifdefs.
相关文件:   src/mbyte.c, src/window.c

Patch 7.3.1257
问题:       With GNU gettext() &quot;:lang de_DE.utf8&quot; does not always result in
	    German messages.
解决方案:   Clear the $LANGUAGE environment variable.
相关文件:   src/ex_cmds2.c

Patch 7.3.1258
问题:       Using submatch() may crash Vim. (Ingo Karkat)
解决方案:   Restore the number of subexpressions used.
相关文件:   src/regexp_nfa.c

Patch 7.3.1259
问题:       No test for patch 7.3.1258
解决方案:   Add a test entry.
相关文件:   src/testdir/test64.in, src/testdir/test64.ok

Patch 7.3.1260
问题:       User completion does not get the whole command line in the command
	    line window.
解决方案:   Pass on the whole command line. (Daniel Thau)
相关文件:   src/ex_getln.c, src/structs.h

Patch 7.3.1261 (after patch 7.3.1179)
问题:       A buffer-local language mapping from a keymap stops a global
	    insert mode mapping from working. (Ron Aaron)
解决方案:   Do not wait for more characters to be typed only when the mapping
	    was defined with <span class="Special">&lt;nowait&gt;</span>.
相关文件:   runtime/doc/map.txt, src/eval.c, src/getchar.c,
	    src/testdir/test75.in, src/testdir/test75.ok

Patch 7.3.1262
问题:       Crash and compilation warnings with Cygwin.
解决方案:   Check return value of XmbTextListToTextProperty(). Add type casts.
	    Adjust #ifdefs. (Lech Lorens)
相关文件:   src/main.c, src/os_unix.c, src/ui.c

Patch 7.3.1263
问题:       Typo in short option name.
解决方案:   Change &quot;imse&quot; to &quot;imsf&quot;.
相关文件:   src/option.c

Patch 7.3.1264 (after 7.3.1261)
问题:       Missing m_nowait.
解决方案:   Include missing part of the patch.
相关文件:   src/structs.h

Patch 7.3.1265 (after 7.3.1249)
问题:       Accepting &quot;Vim:&quot; for a modeline causes errors too often.
解决方案:   Require &quot;Vim:&quot; to be followed by &quot;set&quot;.
相关文件:   src/buffer.c

Patch 7.3.1266
问题:       QNX: GUI fails to start.
解决方案:   Remove the QNX-specific #ifdef. (Sean Boudreau)
相关文件:   src/gui.c

Patch 7.3.1267
问题:       MS-Windows ACL support doesn't work well.
解决方案:   Implement more ACL support. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.3.1268
问题:       ACL support doesn't work when compiled with MingW.
解决方案:   Support ACL on MingW. (Ken Takata)
相关文件:   src/os_win32.c, src/os_win32.h

Patch 7.3.1269
问题:       Insert completion keeps entry selected even though the list has
	    changed. (Olivier Teuliere)
解决方案:   Reset compl_shown_match and compl_curr_match. (Christian Brabandt)
相关文件:   src/edit.c

Patch 7.3.1270
问题:       Using &quot;Vp&quot; in an empty buffer can't be undone. (Hauke Petersen)
解决方案:   Save one line in an empty buffer. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.3.1271 (after 7.3.1260)
问题:       Command line completion does not work.
解决方案:   Move setting xp_line down. (Daniel Thau)
相关文件:   src/ex_getln.c

Patch 7.3.1272
问题:       Crash when editing Ruby file. (Aliaksandr Rahalevich)
解决方案:   Reallocate the state list when necessary.
相关文件:   src/regexp_nfa.c

Patch 7.3.1273
问题:       When copying a location list the index might be wrong.
解决方案:   Set the index to one when using the first entry. (Lech Lorens)
相关文件:   src/quickfix.c

Patch 7.3.1274
问题:       When selecting an entry from a location list it may pick an
	    arbitrary window or open a new one.
解决方案:   Prefer using a window related to the location list. (Lech Lorens)
相关文件:   src/quickfix.c

Patch 7.3.1275
问题:       &quot;gn&quot; does not work when the match is a single character.
解决方案:   Fix it, add a test. (Christian Brabandt)
相关文件:   src/search.c, src/testdir/test53.in, src/testdir/test53.ok

Patch 7.3.1276
问题:       When using a cscope connection resizing the window may send
	    SIGWINCH to cscope and it quits.
解决方案:   Call setpgid(0, 0) in the child process. (Narendran Gopalakrishnan)
相关文件:   src/if_cscope.c

Patch 7.3.1277
问题:       In diff mode <span class="Type">'cursorline'</span> also draws in the non-active window.
	    When <span class="Type">'nu'</span> and <span class="Type">'sbr'</span> are set the <span class="Type">'sbr'</span> string is not underlined.
解决方案:   Only draw the cursor line in the current window. Combine the
	    <span class="Type">'cursorline'</span> and other highlighting attributes. (Christian
	    Brabandt)
相关文件:   src/screen.c

Patch 7.3.1278
问题:       When someone sets the screen size to a huge value with &quot;stty&quot; Vim
	    runs out of memory before reducing the size.
解决方案:   Limit Rows and Columns in more places.
相关文件:   src/gui.c, src/gui_gtk_x11.c, src/option.c, src/os_unix.c,
	    src/proto/term.pro, src/term.c

Patch 7.3.1279
问题:       Compiler warning for variable uninitialized. (Tony Mechelynck)
解决方案:   Add an init.
相关文件:   src/ex_getln.c

Patch 7.3.1280
问题:       Reading memory already freed since patch 7.3.1247. (Simon
	    Ruderich, Dominique Pelle)
解决方案:   Copy submatches before reallocating the state list.
相关文件:   src/regexp_nfa.c

Patch 7.3.1281
问题:       When <span class="Type">'ttymouse'</span> is set to &quot;xterm2&quot; clicking in column 123 moves
	    the cursor to column 96. (Kevin Goodsell)
解决方案:   Decode KE_CSI.
相关文件:   src/term.c

Patch 7.3.1282 (after 7.3.1277)
问题:       <span class="Type">'cursorline'</span> not drawn in any other window. (Charles Campbell)
解决方案:   Do draw the cursor line in other windows.
相关文件:   src/screen.c

Patch 7.3.1283
问题:       Test 71 fails on MS-Windows.
解决方案:   Put the binary data in a separate file. (Ken Takata)
相关文件:   src/testdir/test71.in, src/testdir/test71a.in

Patch 7.3.1284
问题:       Compiler warnings in MS-Windows clipboard handling.
解决方案:   Add type casts. (Ken Takata)
相关文件:   src/winclip.c

Patch 7.3.1285
问题:       No tests for picking a window when selecting an entry in a
	    location list.  Not picking the right window sometimes.
解决方案:   Add test 96. Set usable_win appropriately. (Lech Lorens)
相关文件:   src/quickfix.c, src/testdir/Makefile, src/testdir/test96.in,
	    src/testdir/test96.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.3.1286
问题:       Check for screen size missing for Athena and Motif.
解决方案:   Add call to limit_screen_size().
相关文件:   src/gui_x11.c

Patch 7.3.1287
问题:       Python SystemExit exception is not handled properly.
解决方案:   Catch the exception and give an error. (Yasuhiro Matsumoto, Ken
	    Takata)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/if_python.c,
	    src/if_python3.c

Patch 7.3.1288
问题:       The first &quot;:echo <span class="Type">'hello'</span>&quot; command output doesn't show.  Mapping
	    for <span class="Special">&lt;S-F3&gt;</span> gets triggered during startup.
解决方案:   Add debugging code for the termresponse.  When receiving the &quot;Co&quot;
	    entry and when setting <span class="Type">'ambiwidth'</span> redraw right away if possible.
	    Add redraw_asap().  Don't set <span class="Type">'ambiwidth'</span> if it already had the
	    right value.  Do the <span class="Type">'ambiwidth'</span> check in the second row to avoid
	    confusion with <span class="Special">&lt;S-F3&gt;</span>.
相关文件:   src/term.c, src/screen.c, src/proto/screen.pro

Patch 7.3.1289
问题:       Get GLIB warning when removing a menu item.
解决方案:   Reference menu-id and also call gtk_container_remove().  (Ivan
	    Krasilnikov)
相关文件:   src/gui_gtk.c

Patch 7.3.1290 (after 7.3.1253)
问题:       <span class="Special">CTRL-R</span> = in Insert mode changes the start of the insert position.
	    (Ingo Karkat)
解决方案:   Only break undo, don't start a new insert.
相关文件:   src/edit.c

Patch 7.3.1291 (after 7.3.1288)
问题:       Compiler warnings for uninitialized variables. (Tony Mechelynck)
解决方案:   Initialize the variables.
相关文件:   src/screen.c

Patch 7.3.1292
问题:       Possibly using invalid pointer when searching for window. (Raichoo)
解决方案:   Use &quot;firstwin&quot; instead of &quot;tp_firstwin&quot; for current tab.
相关文件:   src/window.c

Patch 7.3.1293
问题:       Put in empty buffer cannot be undone.
解决方案:   Save one more line for undo. (Ozaki)
相关文件:   src/ops.c

Patch 7.3.1294
问题:       &quot;:diffoff&quot; resets options.
解决方案:   Save and restore option values. (Christian Brabandt)
相关文件:   src/diff.c, src/structs.h, src/option.c

Patch 7.3.1295
问题:       glob() and globpath() do not handle escaped special characters
	    properly.
解决方案:   Handle escaped characters differently. (Adnan Zafar)
相关文件:   src/testdir/Makefile, src/testdir/test97.in,
	    src/testdir/test97.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms, src/fileio.c,
	    src/misc1.c

Patch 7.3.1296
问题:       Only MS-Windows limits the GUI window size to what fits on the
	    monitor.
解决方案:   Limit the size for all systems. (Daniel Harding)
相关文件:   src/ui.c

Patch 7.3.1297
问题:       findfile() directory matching does not work when a star follows
	    text. (Markus Braun)
解决方案:   Make a wildcard work properly. (Christian Brabandt)
相关文件:   src/misc2.c, src/testdir/test89.in, src/testdir/test89.ok

Patch 7.3.1298 (after 7.3.1297)
问题:       Crash.
解决方案:   Use STRCPY() instead of STRCAT() and allocate one more byte.
相关文件:   src/misc2.c

Patch 7.3.1299
问题:       Errors when doing &quot;make proto&quot;.  Didn't do &quot;make depend&quot; for a
	    while.
解决方案:   Add #ifdefs.  Update dependencies.  Update proto files.
相关文件:   src/if_python3.c, src/os_win32.c, src/Makefile,
	    src/proto/ex_docmd.pro, src/proto/if_python.pro,
	    src/proto/if_python3.pro, src/proto/gui_w16.pro,
	    src/proto/gui_w32.pro, src/proto/os_win32.pro

Patch 7.3.1300
问题:       Mac: tiny and small build fails.
解决方案:   Don't include os_macosx.m in tiny build. Include mouse support in
	    small build. (Kazunobu Kuriyama)
相关文件:   src/configure.in, src/auto/configure, src/vim.h

Patch 7.3.1301
问题:       Some tests fail on MS-Windows.
解决方案:   Fix path separators in test 89 and 96.  Omit test 97, escaping
	    works differently.  Make findfile() work on MS-Windows.
相关文件:   src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/test89.in,
	    src/testdir/test96.in, src/misc2.c

Patch 7.3.1302
问题:       Test 17 fails on MS-Windows.  Includes line break in file name
	    everywhere.
解决方案:   Fix <span class="Type">'fileformat'</span>. Omit CR-LF from a line read from an included
	    file.
相关文件:   src/search.c, src/testdir/test17.in, src/testdir/test17.ok

Patch 7.3.1303 (after 7.3.1290)
问题:       Undo is synced whenever <span class="Special">CTRL-R</span> = is called, breaking some plugins.
解决方案:   Only break undo when calling setline() or append().
相关文件:   src/globals.h, src/eval.c, src/edit.c, src/testdir/test61.in,
	    src/testdir/test61.ok

Patch 7.3.1304
问题:       Test 89 still fails on MS-Windows.
解决方案:   Set <span class="Type">'shellslash'</span>. (Taro Muraoka)
相关文件:   src/testdir/test89.in

Patch 7.3.1305
问题:       Warnings from 64 bit compiler.
解决方案:   Add type casts.
相关文件:   src/misc2.c

Patch 7.3.1306
问题:       When redrawing the screen during startup the intro message may be
	    cleared.
解决方案:   Redisplay the intro message when appropriate.
相关文件:   src/screen.c, src/version.c, src/proto/version.pro

Patch 7.3.1307
问题:       MS-Windows build instructions are outdated.
解决方案:   Adjust for building on Windows 7.  Drop Windows 95/98/ME support.
相关文件:   Makefile, nsis/gvim.nsi

Patch 7.3.1308
问题:       Typos in MS-Windows build settings and README.
解决方案:   Minor changes to MS-Windows files.
相关文件:   src/msvc2008.bat, src/msvc2010.bat, src/VisVim/README_VisVim.txt

Patch 7.3.1309
问题:       When a script defines a function the flag to wait for the user to
	    hit enter is reset.
解决方案:   Restore the flag. (Yasuhiro Matsumoto)  Except when the user was
	    typing the function.
相关文件:   src/eval.c

Patch 7.3.1310
问题:       Typos in nsis script. Can use better compression.
解决方案:   Fix typos.  Use lzma compression. (Ken Takata)
相关文件:   nsis/gvim.nsi

Patch 7.3.1311
问题:       Compiler warnings on Cygwin.
解决方案:   Add type casts. Add windows include files. (Ken Takata)
相关文件:   src/mbyte.c, src/ui.c

Patch 7.3.1312 (after 7.3.1287)
问题:       Not giving correct error messages for SystemExit().
解决方案:   Move E858 into an else. (Ken Takata)
相关文件:   src/if_py_both.h

Patch 7.3.1313
问题:       :py and :py3 don't work when compiled with Cygwin or MingW with 64
	    bit.
解决方案:   Add -DMS_WIN64 to the build command. (Ken Takata)
相关文件:   src/Make_cyg.mak, src/Make_ming.mak

Patch 7.3.1314
问题:       Test 87 fails with Python 3.3.
解决方案:   Filter the error messages. (Taro Muraoka)
相关文件:   src/testdir/test87.in

Patch 7.4a.001
问题:       Script to update syntax menu is outdated.
解决方案:   Add the missing items.
相关文件:   runtime/makemenu.vim

Patch 7.4a.002
问题:       Valgrind errors in test 89. (Simon Ruderich)
解决方案:   Allocate one more byte. (Dominique Pelle)
相关文件:   src/misc2.c

Patch 7.4a.003
问题:       Copyright year is outdated.
解决方案:   Only use the first year.
相关文件:   src/vim.rc, src/vim16.rc

Patch 7.4a.004
问题:       MSVC 2012 Update 3 is not recognized.
解决方案:   Add the version number. (Raymond Ko)
相关文件:   src/Make_mvc.mak

Patch 7.4a.005
问题:       Scroll binding causes unexpected scroll.
解决方案:   Store the topline after updating scroll binding.  Add a test.
	    (Lech Lorens)
相关文件:   src/testdir/test98.in, src/testdir/test98a.in,
	    src/testdir/test98.ok, src/option.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile

Patch 7.4a.006
问题:       Failure in po file check goes unnoticed.
解决方案:   Fail &quot;make test&quot; if the po file check fails.
相关文件:   src/Makefile

Patch 7.4a.007
问题:       After &quot;g$&quot; with <span class="Type">'virtualedit'</span> set, &quot;k&quot; moves to a different
	    column.  (Dimitar Dimitrov)
解决方案:   Set w_curswant. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.4a.008
问题:       Python 3 doesn't handle multibyte characters properly when
	    <span class="Type">'encoding'</span> is not utf-8.
解决方案:   Use PyUnicode_Decode() instead of PyUnicode_FromString(). (Ken
	    Takata)
相关文件:   src/if_python3.c

Patch 7.4a.009
问题:       Compiler warnings for function prototypes.
解决方案:   Add &quot;void&quot;.  Move list_features() prototype. (Ken Takata)
相关文件:   src/gui_w48.c, src/if_py_both.h, src/version.c

Patch 7.4a.010
问题:       Test 86 and 87 fail when building with Python or Python 3 and
	    using a static library.
解决方案:   Add configure check to add -fPIE compiler flag.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4a.011
问题:       Configure check for Python 3 config name isn't right.
解决方案:   Always include vi_cv_var_python3_version. (Tim Harder)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4a.012
问题:       &quot;make test&quot; fails when using a shadow directory.
解决方案:   Create links for files in src/po. (James McCoy)
相关文件:   src/Makefile

Patch 7.4a.013
问题:       Setting/resetting <span class="Type">'lbr'</span> in the main help file changes alignment
	    after a Tab. (Dimitar Dimitrov)
解决方案:   Also use the code for conceal mode where n_extra is computed for
	    <span class="Type">'lbr'</span>.
相关文件:   src/screen.c, src/testdir/test88.in, src/testdir/test88.ok

Patch 7.4a.014
问题:       Test 86 and 89 have a problem with using a shadow dir.
解决方案:   Adjust for the different directory structure. (James McCoy)
相关文件:   src/testdir/test89.in, src/testdir/test86.in, src/Makefile

Patch 7.4a.015
问题:       No Japanese man pages.
解决方案:   Add Japanese translations of man pages. (Ken Takata, Yukihiro
	    Nakadaira, et al.)
相关文件:   Filelist, src/Makefile, runtime/doc/evim-ja.UTF-8.1,
	    runtime/doc/vim-ja.UTF-8.1, runtime/doc/vimdiff-ja.UTF-8.1,
	    runtime/doc/vimtutor-ja.UTF-8.1, runtime/doc/xxd-ja.UTF-8.1

Patch 7.4a.016 (after 7.4a.014)
问题:       Features enabled in Makefile.
解决方案:   Undo accidental changes.
相关文件:   src/Makefile

Patch 7.4a.017
问题:       When <span class="Type">'foldmethod'</span> is &quot;indent&quot;, using &quot;&gt;&gt;&quot; on a line just above a
	    fold makes the cursor line folded. (Evan Laforge)
解决方案:   Call foldOpenCursor(). (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.4a.018
问题:       Compiler warning for code unreachable. (Charles Campbell)
解决方案:   Use &quot;while&quot; instead of endless loop.  Change break to continue.
相关文件:   src/regexp_nfa.c, src/ui.c

Patch 7.4a.019
问题:       Invalid closing parenthesis in test 62. Command truncated at
	    double quote.
解决方案:   Remove the parenthesis. Change double quote to ''. (ZyX)
相关文件:   src/testdir/test62.in, src/testdir/test62.ok

Patch 7.4a.020
问题:       Superfluous mb_ptr_adv().
解决方案:   Remove the call. (Dominique Pelle)
相关文件:   src/regexp_nfa.c

Patch 7.4a.021
问题:       Using feedkeys() doesn't always work.
解决方案:   Omit feedkeys(). (Ken Takata)
相关文件:   src/testdir/test98a.in

Patch 7.4a.022
问题:       Using &quot;d2g$&quot; does not delete the last character. (ZyX)
解决方案:   Set the &quot;inclusive&quot; flag properly.
相关文件:   src/normal.c

Patch 7.4a.023 (after 7.4a.019)
问题:       Still another superfluous parenthesis. (ZyX)
解决方案:   Remove it.
相关文件:   src/testdir/test62.in

Patch 7.4a.024
问题:       X11 GUI: Checking icon height twice.
解决方案:   Check height and width. (Dominique Pelle)
相关文件:   src/gui_x11.c

Patch 7.4a.025
问题:       Get the press-Enter prompt even after using :redraw.
解决方案:   Clear need_wait_return when executing :redraw.
相关文件:   src/ex_docmd.c

Patch 7.4a.026
问题:       &quot;:diffoff&quot; does not remove folds. (Ramel)
解决方案:   Do not restore <span class="Type">'foldenable'</span> when <span class="Type">'foldmethod'</span> is &quot;manual&quot;.
相关文件:   src/diff.c

Patch 7.4a.027
问题:       When Python adds lines to another buffer the cursor position is
	    wrong, it might be below the last line causing ml_get errors.
	    (Vlad Irnov)
解决方案:   Temporarily change the current window, so that marks are corrected
	    properly.
相关文件:   src/if_py_both.h, src/window.c, src/proto/buffer.pro

Patch 7.4a.028
问题:       Crash when spell checking in new buffer.
解决方案:   Set the b_p_key field.  (Mike Williams)
相关文件:   src/spell.c, src/testdir/test58.in

Patch 7.4a.029
问题:       Can't build with MzScheme on Ubuntu 13.04.
解决方案:   Add configure check for the &quot;ffi&quot; library.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4a.030 (after 7.4.027)
问题:       Missing find_win_for_buf(). (toothpik)
解决方案:   Add missing changes.
相关文件:   src/buffer.c

Patch 7.4a.031
问题:       Compiler warnings. (Charles Campbell)
解决方案:   Initialize variables even when not needed.
相关文件:   src/regexp_nfa.c, src/search.c

Patch 7.4a.032
问题:       New regexp engine: Does not match shorter alternative. (Ingo
	    Karkat)
解决方案:   Do not drop a new state when the PIM info is different.
相关文件:   src/regexp_nfa.c

Patch 7.4a.033
问题:       Test 98 always passes.
解决方案:   Include test98a.in in test98.in, execute the crucial command in
	    one line. (Yukihiro Nakadaira)
相关文件:   src/testdir/test98.in, src/testdir/test98a.in

Patch 7.4a.034
问题:       The tabline may flicker when opening a new tab after 7.3.759 on
	    Win32.
解决方案:   Move call to TabCtrl_SetCurSel(). (Ken Takata)
相关文件:   src/gui_w48.c

Patch 7.4a.035
问题:       Fix in patch 7.4a.032 is not tested.
解决方案:   Add test.
相关文件:   src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4a.036
问题:       &quot;\p&quot; in a regexp does not match double-width characters.
	    (Yukihiro Nakadaira)
解决方案:   Don't count display cells, use vim_isprintc().
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test64.in,
	    src/testdir/test64.ok, src/testdir/test95.in,
	    src/testdir/test95.ok

Patch 7.4a.037
问题:       Win32: When mouse is hidden and in the toolbar, moving it won't
	    make it appear. (Sami Salonen)
解决方案:   Add tabline_wndproc() and toolbar_wndproc(). (Ken Takata)
相关文件:   src/gui_w32.c, src/gui_w48.c

Patch 7.4a.038
问题:       When using MSVC 2012 there are various issues, including GUI size
	    computations.
解决方案:   Use SM_CXPADDEDBORDER. (Mike Williams)
相关文件:   src/gui_w32.c, src/gui_w48.c, src/os_win32.h

Patch 7.4a.039
问题:       New regexp engine doesn't match pattern. (Ingo Karkat)
解决方案:   When adding a state also check for different PIM if the list of
	    states has any state with a PIM.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4a.040
问题:       Win32: using uninitialized variable.
解决方案:   (Yukihiro Nakadaira)
相关文件:   src/os_win32.c

Patch 7.4a.041
问题:       When using &quot;:new ++ff=unix&quot; and &quot;dos&quot; is first in <span class="Type">'fileformats'</span>
	    then <span class="Type">'ff'</span> is set to &quot;dos&quot; instead of &quot;unix&quot;. (Ingo Karkat)
解决方案:   Create set_file_options() and invoke it from do_ecmd().
相关文件:   src/fileio.c, src/proto/fileio.pro, src/ex_cmds.c,
	    src/testdir/test91.in, src/testdir/test91.ok

Patch 7.4a.042
问题:       Crash when BufUnload autocommands close all buffers. (Andrew
	    Pimlott)
解决方案:   Set curwin-&gt;w_buffer to curbuf to avoid NULL.
相关文件:   src/window.c, src/testdir/test8.in, src/testdir/test8.ok

Patch 7.4a.043
问题:       More ml_get errors when adding or deleting lines from Python.
	    (Vlad Irnov)
解决方案:   Switch to a window with the buffer when possible.
相关文件:   src/if_py_both.h

Patch 7.4a.044
问题:       Test 96 sometimes fails.
解决方案:   Clear window from b_wininfo in win_free().  (Suggestion by
	    Yukihiro Nakadaira)
相关文件:   src/window.c

Patch 7.4a.045
问题:       Configure does not always find the right library for Lua.  Missing
	    support for LuaJit.
解决方案:   Improve the configure detection of Lua. (Hiroshi Shirosaki)
相关文件:   src/Makefile, src/configure.in, src/auto/configure

Patch 7.4a.046
问题:       Can't build without mbyte feature.
解决方案:   Add #ifdefs.
相关文件:   src/ex_cmds.c

Patch 7.4a.047
问题:       Some comments are not so nice.
解决方案:   Change the comments.
相关文件:   src/ex_docmd.c, src/message.c, src/ops.c, src/option.c

Patch 7.4b.001
问题:       Win32: dialog may extend off-screen.
解决方案:   Reduce the size, use correct borders. (Andrei Olsen)
相关文件:   src/gui_w32.c

Patch 7.4b.002
问题:       Crash searching for \%(\%(\|\d\|-\|\.\)*\|\*\). (Marcin
	    Szamotulski)  Also for \(\)*.
解决方案:   Do add a state for opening parenthesis, so that we can check if it
	    was added before at the same position.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4b.003
问题:       Regexp code is not nicely aligned.
解决方案:   Adjust white space. (Ken Takata)
相关文件:   src/regexp_nfa.c

Patch 7.4b.004
问题:       Regexp crash on pattern &quot;@\%[\w\-]*&quot;. (Axel Kielhorn)
解决方案:   Add \%(\) around \%[] internally.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4b.005
问题:       Finding %s in shellpipe and shellredir does not ignore %%s.
解决方案:   Skip over %%. (lcd 47)
相关文件:   src/ex_cmds.c

Patch 7.4b.006 (after 7.3.1295)
问题:       Using \<span class="Special">{n,m}</span> in an autocommand pattern no longer works.
	    Specifically, mutt temp files are not recognized. (Gary Johnson)
解决方案:   Make \\\{n,m\} work.
相关文件:   runtime/doc/autocmd.txt, src/fileio.c

Patch 7.4b.007
问题:       On 32 bit MS-Windows :perldo does not work.
解决方案:   Make sure time_t uses 32 bits. (Ken Takata)
相关文件:   src/if_perl.xs, src/vim.h

Patch 7.4b.008
问题:       <span class="Type">'autochdir'</span> causes setbufvar() to change the current directory.
	    (Ben Fritz)
解决方案:   When disabling autocommands also reset <span class="Type">'acd'</span> temporarily.
	    (Christian Brabandt)
相关文件:   src/fileio.c

Patch 7.4b.009
问题:       When setting the Visual area manually and <span class="Type">'selection'</span> is
	    exclusive, a yank includes one character too much. (Ingo Karkat)
解决方案:   Default the Visual operation to &quot;v&quot;. (Christian Brabandt)
相关文件:   src/mark.c

Patch 7.4b.010
问题:       Win32: Tcl library load does not use standard mechanism.
解决方案:   Call vimLoadLib() instead of LoadLibraryEx(). (Ken Takata)
相关文件:   src/if_perl.xs, src/if_tcl.c

Patch 7.4b.011
问题:       &quot;:he \%(\)&quot; does not work. (ZyX)
解决方案:   Add an exception to the list.
相关文件:   src/ex_cmds.c

Patch 7.4b.012
问题:       Output from a shell command is truncated at a NUL. (lcd 47)
解决方案:   Change every NUL into an SOH.
相关文件:   src/misc1.c

Patch 7.4b.013
问题:       Install dir for JP man pages is wrong.
解决方案:   Remove &quot;.UTF-8&quot; from the directory name. (Ken Takata)
相关文件:   src/Makefile

Patch 7.4b.014 (after 7.4b.012)
问题:       Stupid mistake.
解决方案:   Changle &quot;len&quot; to &quot;i&quot;.
相关文件:   src/misc1.c

Patch 7.4b.015 (after 7.4b.008)
问题:       Can't compile without the <span class="Type">'acd'</span> feature.
解决方案:   Add #ifdefs. (Kazunobu Kuriyama)
相关文件:   src/fileio.c

Patch 7.4b.016
问题:       Ruby detection fails on Fedora 19.
解决方案:   Use one way to get the Ruby version. (Michael Henry)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4b.017
问题:       &quot;:he \^x&quot; gives a strange error message. (glts)
解决方案:   Do not translate \^x to \_<span class="Special">CTRL-x</span>.
相关文件:   src/ex_cmds.c

Patch 7.4b.018 (after 7.4b.001)
问题:       Win32: Dialog can still be too big.
解决方案:   Move the check for height further down. (Andrei Olsen)
相关文件:   src/gui_w32.c

Patch 7.4b.019 (after 7.4a.034)
问题:       Tabline is not updated properly when closing a tab on Win32.
解决方案:   Only reduce flickering when adding a tab. (Ken Takata)
相关文件:   src/gui_w48.c

Patch 7.4b.020
问题:       &quot;g~ap&quot; changes first character of next paragraph. (Manuel Ortega)
解决方案:   Avoid subtracting (0 - 1) from todo.  (Mike Williams)
相关文件:   src/ops.c, src/testdir/test82.in, src/testdir/test82.ok

Patch 7.4b.021
问题:       Pressing &quot;u&quot; after an external command results in multiple
	    press-enter messages. (glts)
解决方案:   Don't call hit_return_msg() when we have K_IGNORE. (Christian
	    Brabandt)
相关文件:   src/message.c

Patch 7.4b.022
问题:       Not waiting for a character when the tick count overflows.
解决方案:   Subtract the unsigned numbers and cast to int. (Ken Takata)
相关文件:   src/os_win32.c

</pre>
<!-- vim: set foldmethod=manual : -->

            </pre>
        </article>
    </div>
    <footer class="site-footer">
        <div class="wrap">
            <div class="footer-content">
              <i>Generated by vimtohtml.rb on </i>
              <a href="http://www.zuiniude.com/vim-zh/usr_toc.html">www.zuiniude.com</a>
            </div>
        </div>
    </footer>
</body>
</html>
