<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>~/github.com/yuweijun/yuweijun.github.io/vim-zh/usr_22.cnx.html</title>
<meta name="Generator" content="Vim/8.2">
<meta name="plugin-version" content="vim8.1_v2">
<meta name="syntax" content="help">
<meta name="settings" content="use_css,pre_wrap,no_foldcolumn,prevent_copy=,use_input_for_pc=fallback">
<meta name="colorscheme" content="molokai">
<style>
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #d0d0d0; background-color: #121212; }
body { font-family: monospace; color: #d0d0d0; background-color: #121212; }
* { font-size: 1em; }
.String { color: #afaf87; }
.Type { color: #5fd7ff; }
.PreProc { color: #87ff00; }
.Identifier { color: #ff8700; }
.Comment { color: #5f5f5f; }
.Special { color: #5fd7ff; }
.Ignore { color: #808080; background-color: #080808; padding-bottom: 1px; }
-->
</style>
</head>
<body>
<pre id='vimCodeElement'>
<span class="Ignore">*</span><span class="String">usr_22.txt</span><span class="Ignore">*</span>	For <span class="Identifier">Vim version 8.0.</span>  最近更新: 2017年8月

		     VIM 用户手册 - by Bram Moolenaar
		     译者: Chimin Yen <span class="String"><a href="http://vimcdoc.sf.net">http://vimcdoc.sf.net</a></span>

			      寻找要编辑的文件


到处都是文件，你怎么查找它们呢？Vim 为我们提供了在目录树间浏览的种种方法。还有
若干命令让你从一个文件通过文件名跳转到一个文件。而且，Vim 还记着曾经编辑过哪些
文件。

<span class="Ignore">|</span><span class="Identifier">22.1</span><span class="Ignore">|</span>	文件浏览器
<span class="Ignore">|</span><span class="Identifier">22.2</span><span class="Ignore">|</span>	当前目录
<span class="Ignore">|</span><span class="Identifier">22.3</span><span class="Ignore">|</span>	查找文件
<span class="Ignore">|</span><span class="Identifier">22.4</span><span class="Ignore">|</span>	缓冲区列表

       下一章: <span class="Ignore">|</span><span class="Identifier">usr_23.txt</span><span class="Ignore">|</span>  编辑特殊文件
       前一章: <span class="Ignore">|</span><span class="Identifier">usr_21.txt</span><span class="Ignore">|</span>  离开和回来
         目录: <span class="Ignore">|</span><span class="Identifier">usr_toc.txt</span><span class="Ignore">|</span>

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span class="String">22.1</span><span class="Ignore">*</span>	文件浏览器

Vim 有个插件可以用来编辑一个目录。试一下这个命令:<span class="Ignore"> &gt;</span>

<span class="Comment">	:edit .</span>

借助魔术般的自动命令和 Vim 脚本功能，目录的内容被用来填充窗口。看起来就像这
样:

<span class="PreProc">&quot; ============================================================================</span><span class="Ignore"> ~</span>
<span class="PreProc">&quot; Netrw Directory Listing                                        (netrw v109)</span><span class="Ignore"> ~</span>
<span class="PreProc">&quot;   Sorted by      name</span><span class="Ignore"> ~</span>
<span class="PreProc">&quot;   Sort sequence: [\/]$,\.h$,\.c$,\.cpp$,*,\.info$,\.swp$,\.o$\.obj$,\.bak$</span><span class="Ignore"> ~</span>
<span class="PreProc">&quot;   Quick Help: &lt;F1&gt;:help  -:go up dir  D:delete  R:rename  s:sort-by  x:exec</span><span class="Ignore"> ~</span>
<span class="PreProc">&quot; ============================================================================</span><span class="Ignore"> ~</span>
<span class="PreProc">../</span><span class="Ignore"> ~</span>
<span class="PreProc">./</span><span class="Ignore"> ~</span>
<span class="PreProc">check/</span><span class="Ignore"> ~</span>
<span class="PreProc">Makefile</span><span class="Ignore"> ~</span>
<span class="PreProc">autocmd.txt</span><span class="Ignore"> ~</span>
<span class="PreProc">change.txt</span><span class="Ignore"> ~</span>
<span class="PreProc">eval.txt~</span><span class="Ignore"> ~</span>
<span class="PreProc">filetype.txt~</span><span class="Ignore"> ~</span>
<span class="PreProc">help.txt.info</span><span class="Ignore"> ~</span>

你可以看到这样一些条目:

1.  浏览工具的名称和版本号
2.  浏览目录名
3.  排序方法 (可以是名字、时间或大小)
4.  名字如何排序 (目录优先，然后是 *.h 文件、*.c 文件，等等)
5.  如何得到帮助 (用 <span class="Special">&lt;F1&gt;</span> 键)，然后是可用命令的概括列表
6.  文件列表，包括 &quot;../&quot;，用户可以由此列出父目录。

如果你启用了语法高亮功能，那么，目录里不同部分就显示成不同颜色，让你比较容易辨
认它们。

你可以用普通模式下的 Vim 命令在文本内到处移动。例如，移动光标到一个文件名上并
按下 <span class="Special">&lt;Enter&gt;</span> 键。你就可以编辑那个文件了。要回到浏览器，再用一次 &quot;:edit .&quot; 或
&quot;:Explore&quot; 即可，按 <span class="Special">CTRL-O</span> 也行。

试一下把光标移至某个目录名，按 <span class="Special">&lt;Enter&gt;</span> 键。结果，浏览器就进了该目录，并把那里
的条目显示出来。对准第一个目录 &quot;../&quot; 按 <span class="Special">&lt;Enter&gt;</span> 键， 让你返回父目录。按 &quot;-&quot; 键
可达到同样的目的，且无须先把光标移到 &quot;../&quot; 条目上。

你可以按 <span class="Special">&lt;F1&gt;</span> 键获取关于 netrw 文件浏览器功能的帮助。帮助文字如下:<span class="Ignore"> &gt;</span>

<span class="Comment">    9. Directory Browsing	 netrw-browse   netrw-dir   netrw-list   netrw-help</span>

<span class="Comment">    MAPS								 netrw-maps</span>
<span class="Comment">     	 &lt;F1&gt;.............Help.......................................|netrw-help|</span>
<span class="Comment">     	 &lt;cr&gt;.............Browsing...................................|netrw-cr|</span>
<span class="Comment">     	 &lt;del&gt;............Deleting Files or Directories..............|netrw-delete|</span>
<span class="Comment">     	 -................Going Up...................................|netrw--|</span>
<span class="Comment">     	 a................Hiding Files or Directories................|netrw-a|</span>
<span class="Comment">     	 mb...............Bookmarking a Directory....................|netrw-mb|</span>
<span class="Comment">     	 gb...............Changing to a Bookmarked Directory.........|netrw-gb|</span>
<span class="Comment">     	 c................Make Browsing Directory The Current Dir....|netrw-c|</span>
<span class="Comment">     	 d................Make A New Directory.......................|netrw-d|</span>
<span class="Comment">     	 D................Deleting Files or Directories..............|netrw-D|</span>
<span class="Comment">     	 &lt;c-h&gt;............Edit File/Directory Hiding List............|netrw-ctrl-h|</span>
<span class="Comment">     	 i................Change Listing Style.......................|netrw-i|</span>
<span class="Comment">     	 &lt;c-l&gt;............Refreshing the Listing.....................|netrw-ctrl-l|</span>
<span class="Comment">     	 o................Browsing with a Horizontal Split...........|netrw-o|</span>
<span class="Comment">     	 p................Use Preview Window.........................|netrw-p|</span>
<span class="Comment">     	 P................Edit in Previous Window....................|netrw-p|</span>
<span class="Comment">     	 q................Listing Bookmarks and History..............|netrw-qb|</span>
<span class="Comment">     	 r................Reversing Sorting Order....................|netrw-r|</span>
<span class="Ignore">&lt;</span>    	(等等)

<span class="Special">&lt;F1&gt;</span> 键把你带到 netrw 目录浏览内容的帮助页面。这是一个常规的帮助页面，同样常规
的 <span class="Ignore">|</span><span class="Identifier">CTRL-]</span><span class="Ignore">|</span> 跳转到带标签的帮助项目，而 <span class="Ignore">|</span><span class="Identifier">CTRL-O</span><span class="Ignore">|</span> 则返回。

要选择显示和编辑的文件: (光标在某文件名上)

	<span class="Special">&lt;enter&gt;</span>		在当前窗口打开文件			   <span class="Ignore">|</span><span class="Identifier">netrw-cr</span><span class="Ignore">|</span>
	o		横向分割窗口并显示文件			   <span class="Ignore">|</span><span class="Identifier">netrw-o</span><span class="Ignore">|</span>
	v		竖向分割窗口并显示文件			   <span class="Ignore">|</span><span class="Identifier">netrw-v</span><span class="Ignore">|</span>
	p		使用 <span class="Ignore">|</span><span class="Identifier">preview-window</span><span class="Ignore">|</span>	 		   <span class="Ignore">|</span><span class="Identifier">netrw-p</span><span class="Ignore">|</span>
	P		在上次的窗口中编辑			   <span class="Ignore">|</span><span class="Identifier">netrw-P</span><span class="Ignore">|</span>
	t		在新标签页中打开文件			   <span class="Ignore">|</span><span class="Identifier">netrw-t</span><span class="Ignore">|</span>

接下来的普通模式命令用来控制浏览器显示:

	i		控制列表风格 (瘦、长、宽和树形)。长列表包含文件大小和
			日期信息。
	s		反复按 s 会改变文件排序的方式；可以按照名字、修改日期
			或文件大小排序。
	r		逆转排列顺序。

略举数例其它的普通模式命令:

	c		把当前目录改成显示在窗口中的那个目录。(见
			<span class="Ignore">|</span><span class="Identifier">g:netrw_keepdir</span><span class="Ignore">|</span>，它也控制此行为)
	R		为光标下文件改名。Vim 将提示你提供新文件名。
	D		删除光标下文件。Vim 将提示你确认删除动作。
	mb gb		建立书签/转到书签


还有命令模式；还是一样，只举数例:

	:Explore <span class="Special">[directory]</span>	浏览指定/当前目录
	:NetrwSettings		当前 netrw 设置的综合列表，带有帮助链接。

netrw 浏览器不限于你的本地机器；也可使用 url，如下:    (拖尾的 / 是必需的)

	:Explore <span class="String">ftp://somehost/path/to/dir/</span>
	:e scp://somehost/path/to/dir/

详见 <span class="Ignore">|</span><span class="Identifier">netrw-browse</span><span class="Ignore">|</span>。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span class="String">22.2</span><span class="Ignore">*</span>	当前目录

正如 shell 一样，Vim 也有当前目录的概念。假设你在主目录，并要编辑几个储存在目
录 &quot;VeryLongFileName&quot; 下的文件。你可以这样做:<span class="Ignore"> &gt;</span>

<span class="Comment">	:edit VeryLongFileName/file1.txt</span>
<span class="Comment">	:edit VeryLongFileName/file2.txt</span>
<span class="Comment">	:edit VeryLongFileName/file3.txt</span>

为了避免太多的键击，你可以这样做:<span class="Ignore"> &gt;</span>

<span class="Comment">	:cd VeryLongFileName</span>
<span class="Comment">	:edit file1.txt</span>
<span class="Comment">	:edit file2.txt</span>
<span class="Comment">	:edit file3.txt</span>

&quot;:cd&quot; 命令可以用来改变当前目录。你可以用 &quot;:pwd&quot; 命令来查看当前目录使什么:<span class="Ignore"> &gt;</span>

<span class="Comment">	:pwd</span>
<span class="Comment">	/home/Bram/VeryLongFileName</span>

Vim 记得最近访问过的那个目录。你可以用 &quot;cd -&quot; 命令回去那儿。例如:
<span class="Ignore"> &gt;</span>
<span class="Comment">	:pwd</span>
<span class="Comment">	/home/Bram/VeryLongFileName</span>
<span class="Comment">	:cd /etc</span>
<span class="Comment">	:pwd</span>
<span class="Comment">	/etc</span>
<span class="Comment">	:cd -</span>
<span class="Comment">	:pwd</span>
<span class="Comment">	/home/Bram/VeryLongFileName</span>
<span class="Comment">	:cd -</span>
<span class="Comment">	:pwd</span>
<span class="Comment">	/etc</span>


窗 口 本 地 目 录

当你把窗口一分为二以后，两个窗口的当前目录是一样的。而当你要在新窗口内编辑几个
存放在当前目录以外某处的文件时，你可以让新窗口采用不同的当前目录，同时保持原窗
口当前目录不变。新窗口采用的当前目录称为本地目录。<span class="Ignore"> &gt;</span>

<span class="Comment">	:pwd</span>
<span class="Comment">	/home/Bram/VeryLongFileName</span>
<span class="Comment">	:split</span>
<span class="Comment">	:lcd /etc</span>
<span class="Comment">	:pwd</span>
<span class="Comment">	/etc</span>
<span class="Comment">	CTRL-W w</span>
<span class="Comment">	:pwd</span>
<span class="Comment">	/home/Bram/VeryLongFileName</span>

只要你不发出 &quot;:lcd&quot; 命令，所有窗口共享同一个当前目录。在一个窗口执行一次 &quot;:cd&quot;
命令，也同时改变其它窗口的当前目录。
   执行过 &quot;:lcd&quot; 命令的窗口记得它特有的当前目录。在其它窗口执行 &quot;:cd&quot; 或
&quot;:lcd&quot; 命令对它毫无影响。
   在一个采用特有当前目录的窗口执行 &quot;:cd&quot; 命令以后，该窗口就回过头来又采用共享
的当前目录了。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span class="String">22.3</span><span class="Ignore">*</span>	查找文件

假定现在你在编辑一个 C 程序，该程序有这样一行:

	<span class="PreProc">#include &quot;inits.h&quot;</span><span class="Ignore"> ~</span>

你想要查看文件 &quot;inits.h&quot; 里有些什么。把光标移到该文件名上，并键入:<span class="Ignore"> &gt;</span>

<span class="Comment">	gf</span>

Vim 就会找到并打开这个文件。
   那么，如果该文件不在当前目录里怎么办？Vim 将利用 <span class="Type">'path'</span> 选项来寻找这个文
件。该选项是一系列目录名，Vim 会在其中为你寻找文件。
   假设你把你的头文件存放在目录 &quot;c:/prog/include&quot; 里。下面这个命令把该目录加入
<span class="Type">'path'</span> 选项:<span class="Ignore"> &gt;</span>

<span class="Comment">	:set path+=c:/prog/include</span>

这个目录名是一绝对路径。不管你在哪儿，它都指向同一目录。如果你已经知道要编辑的
文件位于当前文件所在目录下某个子目录里，你该怎么办呢？那样的话，你可以指定一个
相对路径。相对路径以 &quot;.&quot; 开始:
<span class="Ignore">&gt;</span>
<span class="Comment">	:set path+=./proto</span>

这个命令告诉 Vim 到目录 &quot;proto&quot; 里找文件，而 &quot;proto&quot; 则位于你在其中用了 &quot;gf&quot;
命令的文件所在的目录下面。如此一来，对 &quot;inits.h&quot; 用 &quot;gf&quot; 命令，就让 Vim 以当前
文件所在目录为起点，寻找 &quot;proto/inits.h&quot;。
   如果不加 &quot;./&quot;，只用 &quot;proto&quot;，Vim 就会进入当前目录下的 &quot;proto&quot; 目录寻找。然
而当前目录可能不是你在编辑的这个当前文件所在的目录。

<span class="Type">'path'</span> 选项还允许你用其它许多方法来指定在其中寻找文件的目录。参见关于 <span class="Type">'path'</span>
选项的帮助。
   <span class="Type">'isfname'</span> 选项用来决定哪些字符可用于文件名，以及哪些不可以 (如上例中的双引
号 &quot; 字符)。

当你要找的文件名没出现在你编辑的文件里时，你可以键入这个文件名:<span class="Ignore"> &gt;</span>

<span class="Comment">	:find inits.h</span>

然后 Vim 就利用 <span class="Type">'path'</span> 选项来确定该文件的位置。这就跟 &quot;:edit&quot; 命令一样，只不过
&quot;:edit&quot; 命令不用 <span class="Type">'path'</span> 选项。

要在新窗口内打开那个已经找到的文件，用 <span class="Special">CTRL-W</span> f，而不是 &quot;gf&quot;，或用 &quot;:sfind&quot; 而
不是 &quot;:find&quot;。

有个好办法可以直接启动 Vim 来编辑 <span class="Type">'path'</span> 中的某个文件:<span class="Ignore"> &gt;</span>

<span class="Comment">	vim &quot;+find stdio.h&quot;</span>

这会在你的 <span class="Type">'path'</span> 中查找 &quot;stdio.h&quot;。双引号是必需的，用来把括起来的当做一个参数
<span class="Ignore">|</span><span class="Identifier">-+c</span><span class="Ignore">|</span>。

<span class="PreProc">==============================================================================</span>
<span class="Ignore">*</span><span class="String">22.4</span><span class="Ignore">*</span>	缓冲区列表

Vim 编辑器使用术语 &quot;缓冲区&quot; 来描述编辑当中的文件。实际上，缓冲区是你编辑的文件
的副本。你修改完缓冲区，就把缓冲区的内容写进文件。缓冲区不仅存放文件内容，而且
还存放着全部标记，设定，以及其它跟被编辑文件相关的东西。


隐 藏 的 缓 冲 区

假设你在编辑文件 one.txt，同时又要编辑文件 two.txt。你本来可以简单地用 &quot;:edit
two.txt&quot; 来办到，但由于你已经修改了 one.txt，那样做就没用了。而你又不想在此时
就把 one.txt 存盘。Vim 可以为你解决这个问题:<span class="Ignore"> &gt;</span>

<span class="Comment">	:hide edit two.txt</span>

缓冲区 &quot;one.txt&quot; 从屏幕消失，但 Vim 仍然知道你在编辑这个缓冲区，因而保留着它修
改过的文本。这样的缓冲区称为隐藏的缓冲区: 缓冲区存放着文本，但你看不见它。
   &quot;:hide&quot; 命令参数是另一个命令。&quot;:hide&quot; 使得那个命令表现得就像 <span class="Type">'hidden'</span> 选项
已被设定。你也可以不用 &quot;:hide&quot; 命令而设定 <span class="Type">'hidden'</span> 选项。其作用是当离开任何缓
冲区时，该缓冲区变成隐藏。
   小心！当你的隐藏的缓冲区已经改动，千万不要在所有缓冲区存盘之前就退出 Vim。


非 激 活 缓 冲 区

   一个缓冲区一经使用，Vim 就记住了一些有关该缓冲区的信息。即使它既不显示在窗
口内，又非隐藏缓冲区，它也仍然在缓冲区列表上。这样的缓冲区称为非激活缓冲区。一
般而言，

   激活		显示在窗口内，并加载文本
   隐藏		不显示在窗口内，但加载文本
   非激活	不显示在窗口内，不加载文本

非激活缓冲区不会被遗忘，因为 Vim 保存着关于它们的信息，如标记等。而且记住文件
名有个好处，你可以调阅你编辑过的文件名，再次编辑它们。


缓 冲 区 列 表

你可以用这个命令查看缓冲区列表:

	:buffers

另一个作用相当的命令，虽然意思不那么明白，但键入时省事多了:<span class="Ignore"> &gt;</span>

<span class="Comment">	:ls</span>

其输出可能像这样:

  <span class="PreProc">1 #h   &quot;help.txt&quot;			line 62</span><span class="Ignore"> ~</span>
  <span class="PreProc">2 %a + &quot;usr_21.txt&quot;			line 1</span><span class="Ignore"> ~</span>
  <span class="PreProc">3      &quot;usr_toc.txt&quot;			line 1</span><span class="Ignore"> ~</span>

第一栏存放缓冲区号。你可以利用它来编辑文件，而不用键入文件名，参见下文。
   紧随缓冲区号的是些标志位。然后是文件名，以及光标最后一次停留的行号。
   可能出现的标志位有以下这些 (自左至右):

	u	列表外缓冲区 <span class="Ignore">|</span><span class="Identifier">unlisted-buffer</span><span class="Ignore">|</span>。
	 %	当前缓冲区。
	 #	轮换缓冲区。
	  a	激活缓冲区，缓冲区被加载且显示。
	  h	隐藏缓冲区，缓冲区被加载但不显示。
	   =	只读缓冲区。
	   -	不可改缓冲区， <span class="Type">'modifiable'</span> 选项不置位。
	    +	已修改缓冲区。


编 辑 缓 冲 区

你可以通过指定其缓冲区号来编辑一个缓冲区，而不必键入文件名:<span class="Ignore"> &gt;</span>

<span class="Comment">	:buffer 2</span>

但获知缓冲区号的唯一途径是查阅缓冲区列表。如果不用缓冲区号，你可以用文件名，或
其部分:

	:buffer help

Vim 将为你键入的文件名找到最佳匹配。如果只有一个缓冲区与之匹配，该缓冲区就被选
用。在这个例子中，被选中的就是 &quot;help.txt&quot;。
   要在新窗口中打开一个缓冲区:

	:sbuffer 3

这方法也适用于文件名。


使 用 缓 冲 区 列 表

你可以用这些命令在缓冲区列表间移动:

	:bnext		编辑下一个缓冲区
	:bprevious	编辑前一个缓冲区
	:bfirst		编辑第一个缓冲区
	:blast		编辑最后一个缓冲区

要从缓冲区列表上删除一个缓冲区，用这个命令:

	:bdelete 3

同样，这命令也适用文件名。
   如果你删除了一个激活的缓冲区 (显示在窗口中的缓冲区)，你也就关闭了该窗口。如
果你删除了当前缓冲区，你也就关闭了当前窗口。如果它是最后一个窗口，Vim 将找一个
缓冲区来编辑。你无法什么也不编辑！

	备注:
	即使用 &quot;:bdelete&quot; 命令删除了缓冲区以后，Vim 依然记得它。这个缓冲区实际
	上成了 &quot;列表外&quot; 缓冲区，它不再出现在 &quot;:buffers&quot; 命令所报告的列表中。不
	过 &quot;:buffers!&quot; 命令仍会列出 &quot;列表外&quot; 缓冲区 (没错，Vim 无所不能)。要让
	Vim 彻底忘记一个缓冲区，用 &quot;:bwipe&quot; 命令。另见 <span class="Type">'buflisted'</span> 选项。

<span class="PreProc">==============================================================================</span>

下一章: <span class="Ignore">|</span><span class="Identifier">usr_23.txt</span><span class="Ignore">|</span>  编辑其它文件

版权: 参见 <span class="Ignore">|</span><span class="Identifier">manual-copyright</span><span class="Ignore">|</span>  vim&#0058;tw=78:ts=8:ft=help:norl:
</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
